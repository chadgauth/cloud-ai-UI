{"version":3,"file":"plugin-host.js","mappings":"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","sources":["webpack:////Users/chadgauthier/cloud-ai-UI/packages/core/src/browser/endpoint.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/core/src/common/glob.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/core/src/node/dynamic-require.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/core/shared/reflect-metadata/index.js?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/debug/src/common/debug-uri-utils.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/debug/src/common/inline-debug-adapter.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/editor/src/common/language-selector.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/notebook/src/common/index.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/notebook/src/common/notebook-common.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/notebook/src/common/notebook-range.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/assert.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/cache.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/character-classifier.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/collections.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/connection.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/disposable-util.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/editor-options.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/id-generator.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/link-computer.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/object-identifier.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/objects.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/reference-map.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/semantic-tokens-dto.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/uint.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/common/uri-components.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/hosted/node/plugin-host-proxy.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/hosted/node/plugin-host-rpc.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/hosted/node/plugin-host.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/authentication-ext.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/clipboard-ext.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/command-registry.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/comments.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/custom-editors.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/debug/debug-ext.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/debug/plugin-debug-adapter-creator.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/debug/plugin-debug-adapter-session.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/debug/plugin-debug-adapter-tracker.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/decorations.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/dialogs.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/document-data.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/documents.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/editors-and-documents.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/env.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/file-system-event-service-ext-impl.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/file-system-ext-impl.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/known-commands.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/label-service.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages-utils.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/call-hierarchy.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/code-action.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/color.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/completion.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/declaration.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/definition.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/diagnostics.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/document-drop-edit.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/document-formatting.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/document-highlight.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/evaluatable-expression.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/folding.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/hover.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/implementation.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/inlay-hints.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/inline-completion.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/inline-values.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/lens.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/link-provider.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/linked-editing-range.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/on-type-formatting.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/outline.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/range-formatting.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/reference.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/rename.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/selection-range.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/semantic-highlighting.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/signature.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/type-definition.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/type-hierarchy.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/util.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/languages/workspace-symbol.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/localization-ext.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/markdown-string.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/message-registry.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/node/debug/plugin-node-debug-adapter-creator.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/node/env-node-ext.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/notebook/notebook-document.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/notebook/notebook-documents.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/notebook/notebook-editor.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/notebook/notebook-editors.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/notebook/notebook-kernels.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/notebook/notebook-renderers.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/notebook/notebooks.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/notification.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/output-channel-registry.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/output-channel/log-output-channel.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/output-channel/output-channel-item.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/path.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/plugin-context.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/plugin-icon-path.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/plugin-manager.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/plugin-storage.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/preference-registry.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/prefix-sum-computer.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/quick-open.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/scm.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/secrets-ext.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/status-bar-message-registry.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/status-bar/status-bar-item.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/stubs/tests-api.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/tabs.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/tasks/task-provider.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/tasks/tasks.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/telemetry-ext.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/terminal-ext.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/text-editor.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/text-editors.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/theming.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/timeline.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/tree/tree-views.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/type-converters.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/webview-views.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/webviews.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/window-state.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/word-helper.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/src/plugin/workspace.ts?","webpack:////Users/chadgauthier/cloud-ai-UI/packages/core/lib/node|sync?","webpack:///external node-commonjs \"assert\"?","webpack:///external node-commonjs \"async_hooks\"?","webpack:///external node-commonjs \"buffer\"?","webpack:///external node-commonjs \"child_process\"?","webpack:///external node-commonjs \"constants\"?","webpack:///external node-commonjs \"crypto\"?","webpack:///external node-commonjs \"dns\"?","webpack:///external node-commonjs \"events\"?","webpack:///external node-commonjs \"fs\"?","webpack:///external node-commonjs \"http\"?","webpack:///external node-commonjs \"https\"?","webpack:///external node-commonjs \"module\"?","webpack:///external node-commonjs \"net\"?","webpack:///external node-commonjs \"os\"?","webpack:///external node-commonjs \"path\"?","webpack:///external node-commonjs \"pnpapi\"?","webpack:///external node-commonjs \"punycode\"?","webpack:///external node-commonjs \"querystring\"?","webpack:///external node-commonjs \"readline\"?","webpack:///external node-commonjs \"stream\"?","webpack:///external node-commonjs \"string_decoder\"?","webpack:///external node-commonjs \"tls\"?","webpack:///external node-commonjs \"tty\"?","webpack:///external node-commonjs \"url\"?","webpack:///external node-commonjs \"util\"?","webpack:///external node-commonjs \"worker_threads\"?","webpack:///external node-commonjs \"zlib\"?","webpack:///webpack/bootstrap?","webpack:///webpack/runtime/chunk loaded?","webpack:///webpack/runtime/compat get default export?","webpack:///webpack/runtime/define property getters?","webpack:///webpack/runtime/ensure chunk?","webpack:///webpack/runtime/get javascript chunk filename?","webpack:///webpack/runtime/hasOwnProperty shorthand?","webpack:///webpack/runtime/make namespace object?","webpack:///webpack/runtime/node module decorator?","webpack:///webpack/runtime/require chunk loading?","webpack:///webpack/runtime/startup chunk dependencies?","webpack:///webpack/before-startup?","webpack:///webpack/startup?","webpack:///webpack/after-startup?"],"sourcesContent":["// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport URI from '../common/uri';\n\n/**\n * An endpoint provides URLs for http and ws, based on configuration and defaults.\n */\nexport class Endpoint {\n    static readonly PROTO_HTTPS: string = 'https:';\n    static readonly PROTO_HTTP: string = 'http:';\n    static readonly PROTO_WS: string = 'ws:';\n    static readonly PROTO_WSS: string = 'wss:';\n    static readonly PROTO_FILE: string = 'file:';\n\n    constructor(\n        protected readonly options: Endpoint.Options = {},\n        protected readonly location: Endpoint.Location = self.location\n    ) { }\n\n    getWebSocketUrl(): URI {\n        return new URI(`${this.wsScheme}//${this.host}${this.pathname}${this.path}`);\n    }\n\n    getRestUrl(): URI {\n        return new URI(`${this.httpScheme}//${this.host}${this.pathname}${this.path}`);\n    }\n\n    protected get pathname(): string {\n        if (this.location.protocol === Endpoint.PROTO_FILE) {\n            return '';\n        }\n        if (this.location.pathname === '/') {\n            return '';\n        }\n        if (this.location.pathname.endsWith('/')) {\n            return this.location.pathname.substring(0, this.location.pathname.length - 1);\n        }\n        return this.location.pathname;\n    }\n\n    get host(): string {\n        if (this.options.host) {\n            return this.options.host;\n        }\n        if (this.location.host) {\n            return this.location.host;\n        }\n        return 'localhost:' + this.port;\n    }\n\n    get origin(): string {\n        return `${this.httpScheme}//${this.host}`;\n    }\n\n    protected get port(): string {\n        return this.getSearchParam('port', '3000');\n    }\n\n    protected getSearchParam(name: string, defaultValue: string): string {\n        const search = this.location.search;\n        if (!search) {\n            return defaultValue;\n        }\n        return search.substring(1).split('&')\n            .filter(value => value.startsWith(name + '='))\n            .map(value => {\n                const encoded = value.substring(name.length + 1);\n                return decodeURIComponent(encoded);\n            })[0] || defaultValue;\n    }\n\n    protected get wsScheme(): string {\n        if (this.options.wsScheme) {\n            return this.options.wsScheme;\n        }\n        return this.httpScheme === Endpoint.PROTO_HTTPS ? Endpoint.PROTO_WSS : Endpoint.PROTO_WS;\n    }\n\n    /**\n     * The HTTP/HTTPS scheme of the endpoint, or the user defined one.\n     * See: `Endpoint.Options.httpScheme`.\n     */\n    get httpScheme(): string {\n        if (this.options.httpScheme) {\n            return this.options.httpScheme;\n        }\n        if (this.location.protocol === Endpoint.PROTO_HTTP ||\n            this.location.protocol === Endpoint.PROTO_HTTPS) {\n            return this.location.protocol;\n        }\n        return Endpoint.PROTO_HTTP;\n    }\n\n    protected get path(): string {\n        if (this.options.path) {\n            if (this.options.path.startsWith('/')) {\n                return this.options.path;\n            } else {\n                return '/' + this.options.path;\n            }\n        }\n        return '';\n    }\n}\n\nexport namespace Endpoint {\n    export class Options {\n        host?: string;\n        wsScheme?: string;\n        httpScheme?: string;\n        path?: string;\n    }\n\n    // Necessary for running tests with dependency on TS lib on node\n    // FIXME figure out how to mock with ts-node\n    export class Location {\n        host: string;\n        pathname: string;\n        search: string;\n        protocol: string;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/glob.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as strings from './strings';\nimport * as paths from './paths';\nimport { CharCode } from './char-code';\n\n/* eslint-disable @typescript-eslint/no-shadow, no-null/no-null */\nexport interface IExpression {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [pattern: string]: boolean | SiblingClause | any;\n}\n\nexport interface IRelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport function getEmptyExpression(): IExpression {\n    return Object.create(null);\n}\n\nexport interface SiblingClause {\n    when: string;\n}\n\nconst GLOBSTAR = '**';\nconst GLOB_SPLIT = '/';\nconst PATH_REGEX = '[/\\\\\\\\]';        // any slash or backslash\nconst NO_PATH_REGEX = '[^/\\\\\\\\]';    // any non-slash and non-backslash\nconst ALL_FORWARD_SLASHES = /\\//g;\n\nfunction starsToRegExp(starCount: number): string {\n    switch (starCount) {\n        case 0:\n            return '';\n        case 1:\n            return `${NO_PATH_REGEX}*?`; // 1 star matches any number of characters except path separator (/ and \\) - non greedy (?)\n        default:\n            // Matches:  (Path Sep OR Path Val followed by Path Sep OR Path Sep followed by Path Val) 0-many times\n            // Group is non capturing because we don't need to capture at all (?:...)\n            // Overall we use non-greedy matching because it could be that we match too much\n            return `(?:${PATH_REGEX}|${NO_PATH_REGEX}+${PATH_REGEX}|${PATH_REGEX}${NO_PATH_REGEX}+)*?`;\n    }\n}\n\nexport function splitGlobAware(pattern: string, splitChar: string): string[] {\n    if (!pattern) {\n        return [];\n    }\n\n    const segments: string[] = [];\n\n    let inBraces = false;\n    let inBrackets = false;\n\n    let char: string;\n    let curVal = '';\n    for (let i = 0; i < pattern.length; i++) {\n        char = pattern[i];\n\n        switch (char) {\n            case splitChar:\n                if (!inBraces && !inBrackets) {\n                    segments.push(curVal);\n                    curVal = '';\n\n                    continue;\n                }\n                break;\n            case '{':\n                inBraces = true;\n                break;\n            case '}':\n                inBraces = false;\n                break;\n            case '[':\n                inBrackets = true;\n                break;\n            case ']':\n                inBrackets = false;\n                break;\n        }\n\n        curVal += char;\n    }\n\n    // Tail\n    if (curVal) {\n        segments.push(curVal);\n    }\n\n    return segments;\n}\n\nfunction parseRegExp(pattern: string): string {\n    if (!pattern) {\n        return '';\n    }\n\n    let regEx = '';\n\n    // Split up into segments for each slash found\n    // eslint-disable-next-line prefer-const\n    let segments = splitGlobAware(pattern, GLOB_SPLIT);\n\n    // Special case where we only have globstars\n    if (segments.every(s => s === GLOBSTAR)) {\n        regEx = '.*';\n    }\n\n    // Build regex over segments\n    // tslint:disable-next-line:one-line\n    else {\n        let previousSegmentWasGlobStar = false;\n        segments.forEach((segment, index) => {\n\n            // Globstar is special\n            if (segment === GLOBSTAR) {\n\n                // if we have more than one globstar after another, just ignore it\n                if (!previousSegmentWasGlobStar) {\n                    regEx += starsToRegExp(2);\n                    previousSegmentWasGlobStar = true;\n                }\n\n                return;\n            }\n\n            // States\n            let inBraces = false;\n            let braceVal = '';\n\n            let inBrackets = false;\n            let bracketVal = '';\n\n            let char: string;\n            for (let i = 0; i < segment.length; i++) {\n                char = segment[i];\n\n                // Support brace expansion\n                if (char !== '}' && inBraces) {\n                    braceVal += char;\n                    continue;\n                }\n\n                // Support brackets\n                if (inBrackets && (char !== ']' || !bracketVal) /* ] is literally only allowed as first character in brackets to match it */) {\n                    let res: string;\n\n                    // range operator\n                    if (char === '-') {\n                        res = char;\n                    }\n\n                    // negation operator (only valid on first index in bracket)\n                    // tslint:disable-next-line:one-line\n                    else if ((char === '^' || char === '!') && !bracketVal) {\n                        res = '^';\n                    }\n\n                    // glob split matching is not allowed within character ranges\n                    // see http://man7.org/linux/man-pages/man7/glob.7.html\n                    // tslint:disable-next-line:one-line\n                    else if (char === GLOB_SPLIT) {\n                        res = '';\n                    }\n\n                    // anything else gets escaped\n                    // tslint:disable-next-line:one-line\n                    else {\n                        res = strings.escapeRegExpCharacters(char);\n                    }\n\n                    bracketVal += res;\n                    continue;\n                }\n\n                switch (char) {\n                    case '{':\n                        inBraces = true;\n                        continue;\n\n                    case '[':\n                        inBrackets = true;\n                        continue;\n\n                    case '}':\n                        // eslint-disable-next-line prefer-const\n                        let choices = splitGlobAware(braceVal, ',');\n\n                        // Converts {foo,bar} => [foo|bar]\n                        // eslint-disable-next-line prefer-const\n                        let braceRegExp = `(?:${choices.map(c => parseRegExp(c)).join('|')})`;\n\n                        regEx += braceRegExp;\n\n                        inBraces = false;\n                        braceVal = '';\n\n                        break;\n\n                    case ']':\n                        regEx += ('[' + bracketVal + ']');\n\n                        inBrackets = false;\n                        bracketVal = '';\n\n                        break;\n\n                    case '?':\n                        regEx += NO_PATH_REGEX; // 1 ? matches any single character except path separator (/ and \\)\n                        continue;\n\n                    case '*':\n                        regEx += starsToRegExp(1);\n                        continue;\n\n                    default:\n                        regEx += strings.escapeRegExpCharacters(char);\n                }\n            }\n\n            // Tail: Add the slash we had split on if there is more to come and the remaining pattern is not a globstar\n            // For example if pattern: some/**/*.js we want the \"/\" after some to be included in the RegEx to prevent\n            // a folder called \"something\" to match as well.\n            // However, if pattern: some/**, we tolerate that we also match on \"something\" because our globstar behavior\n            // is to match 0-N segments.\n            if (index < segments.length - 1 && (segments[index + 1] !== GLOBSTAR || index + 2 < segments.length)) {\n                regEx += PATH_REGEX;\n            }\n\n            // reset state\n            previousSegmentWasGlobStar = false;\n        });\n    }\n\n    return regEx;\n}\n\n// regexes to check for trivial glob patterns that just check for String#endsWith\nconst T1 = /^\\*\\*\\/\\*\\.[\\w\\.-]+$/;                                        // **/*.something\nconst T2 = /^\\*\\*\\/([\\w\\.-]+)\\/?$/;                                            // **/something\nconst T3 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?)*}$/;     // {**/*.something,**/*.else} or {**/package.json,**/project.json}\nconst T3_2 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?)*}$/;     // Like T3, with optional trailing /**\nconst T4 = /^\\*\\*((\\/[\\w\\.-]+)+)\\/?$/;                                        // **/something/else\nconst T5 = /^([\\w\\.-]+(\\/[\\w\\.-]+)*)\\/?$/;                                    // something/else\n\nexport type ParsedPattern = (path: string, basename?: string) => boolean;\n\n// The ParsedExpression returns a Promise iff hasSibling returns a Promise.\n// eslint-disable-next-line max-len\nexport type ParsedExpression = (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>) => string | Promise<string> /* the matching pattern */;\n\nexport interface IGlobOptions {\n    /**\n     * Simplify patterns for use as exclusion filters during tree traversal to skip entire subtrees. Cannot be used outside of a tree traversal.\n     */\n    trimForExclusions?: boolean;\n}\n\ninterface ParsedStringPattern {\n    (path: string, basename: string): string | Promise<string> /* the matching pattern */;\n    basenames?: string[];\n    patterns?: string[];\n    allBasenames?: string[];\n    allPaths?: string[];\n}\ninterface ParsedExpressionPattern {\n    (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>): string | Promise<string> /* the matching pattern */;\n    requiresSiblings?: boolean;\n    allBasenames?: string[];\n    allPaths?: string[];\n}\n\nconst CACHE = new Map<string, ParsedStringPattern>();  // new LRUCache<string, ParsedStringPattern>(10000); // bounded to 10000 elements\n\nconst FALSE = function (): boolean {\n    return false;\n};\n\nconst NULL = function (): string {\n    return null!;\n};\n\nfunction parsePattern(arg1: string | IRelativePattern, options: IGlobOptions): ParsedStringPattern {\n    if (!arg1) {\n        return NULL;\n    }\n\n    // Handle IRelativePattern\n    let pattern: string;\n    if (typeof arg1 !== 'string') {\n        pattern = arg1.pattern;\n    } else {\n        pattern = arg1;\n    }\n\n    // Whitespace trimming\n    pattern = pattern.trim();\n\n    // Check cache\n    const patternKey = `${pattern}_${!!options.trimForExclusions}`;\n    let parsedPattern = CACHE.get(patternKey);\n    if (parsedPattern) {\n        return wrapRelativePattern(parsedPattern, arg1);\n    }\n\n    // Check for Trivias\n    let match: RegExpExecArray;\n    if (T1.test(pattern)) { // common pattern: **/*.txt just need endsWith check\n        const base = pattern.substring(4); // '**/*'.length === 4\n        parsedPattern = function (path, basename): string {\n            return path && strings.endsWith(path, base) ? pattern : null!;\n        };\n    } else if (match = T2.exec(trimForExclusions(pattern, options))!) { // common pattern: **/some.txt just need basename check\n        parsedPattern = trivia2(match[1], pattern);\n    } else if ((options.trimForExclusions ? T3_2 : T3).test(pattern)) { // repetition of common patterns (see above) {**/*.txt,**/*.png}\n        parsedPattern = trivia3(pattern, options);\n    } else if (match = T4.exec(trimForExclusions(pattern, options))!) { // common pattern: **/something/else just need endsWith check\n        parsedPattern = trivia4and5(match[1].substring(1), pattern, true);\n    } else if (match = T5.exec(trimForExclusions(pattern, options))!) { // common pattern: something/else just need equals check\n        parsedPattern = trivia4and5(match[1], pattern, false);\n    }\n\n    // Otherwise convert to pattern\n    // tslint:disable-next-line:one-line\n    else {\n        parsedPattern = toRegExp(pattern);\n    }\n\n    // Cache\n    CACHE.set(patternKey, parsedPattern);\n\n    return wrapRelativePattern(parsedPattern, arg1);\n}\n\nfunction wrapRelativePattern(parsedPattern: ParsedStringPattern, arg2: string | IRelativePattern): ParsedStringPattern {\n    if (typeof arg2 === 'string') {\n        return parsedPattern;\n    }\n\n    return function (path, basename): string | Promise<string> {\n        if (!paths.isEqualOrParent(path, arg2.base)) {\n            return null!;\n        }\n\n        return parsedPattern(paths.normalize(arg2.pathToRelative(arg2.base, path)), basename);\n    };\n}\n\nfunction trimForExclusions(pattern: string, options: IGlobOptions): string {\n    return options.trimForExclusions && strings.endsWith(pattern, '/**') ? pattern.substring(0, pattern.length - 2) : pattern; // dropping **, tailing / is dropped later\n}\n\n// common pattern: **/some.txt just need basename check\nfunction trivia2(base: string, originalPattern: string): ParsedStringPattern {\n    const slashBase = `/${base}`;\n    const backslashBase = `\\\\${base}`;\n    const parsedPattern: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (basename) {\n            return basename === base ? originalPattern : null!;\n        }\n        return path === base || strings.endsWith(path, slashBase) || strings.endsWith(path, backslashBase) ? originalPattern : null!;\n    };\n    const basenames = [base];\n    parsedPattern.basenames = basenames;\n    parsedPattern.patterns = [originalPattern];\n    parsedPattern.allBasenames = basenames;\n    return parsedPattern;\n}\n\n// repetition of common patterns (see above) {**/*.txt,**/*.png}\nfunction trivia3(pattern: string, options: IGlobOptions): ParsedStringPattern {\n    const parsedPatterns = aggregateBasenameMatches(pattern.slice(1, -1).split(',')\n        .map(pattern => parsePattern(pattern, options))\n        .filter(pattern => pattern !== NULL), pattern);\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n    if (n === 1) {\n        return <ParsedStringPattern>parsedPatterns[0];\n    }\n    const parsedPattern: ParsedStringPattern = function (path: string, basename: string): string {\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            if ((<ParsedStringPattern>parsedPatterns[i])(path, basename)) {\n                return pattern;\n            }\n        }\n        return null!;\n    };\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    // const withBasenames = arrays.first(parsedPatterns, pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        parsedPattern.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        parsedPattern.allPaths = allPaths;\n    }\n    return parsedPattern;\n}\n\n// common patterns: **/something/else just need endsWith check, something/else just needs and equals check\nfunction trivia4and5(path: string, pattern: string, matchPathEnds: boolean): ParsedStringPattern {\n    const nativePath = paths.nativeSep !== paths.sep ? path.replace(ALL_FORWARD_SLASHES, paths.nativeSep) : path;\n    const nativePathEnd = paths.nativeSep + nativePath;\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    const parsedPattern: ParsedStringPattern = matchPathEnds ? function (path, basename): string {\n        return path && (path === nativePath || strings.endsWith(path, nativePathEnd)) ? pattern : null!;\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n    } : function (path, basename): string {\n        return path && path === nativePath ? pattern : null!;\n    };\n    parsedPattern.allPaths = [(matchPathEnds ? '*/' : './') + path];\n    return parsedPattern;\n}\n\nfunction toRegExp(pattern: string): ParsedStringPattern {\n    try {\n        const regExp = new RegExp(`^${parseRegExp(pattern)}$`);\n        return function (path: string, basename: string): string {\n            regExp.lastIndex = 0; // reset RegExp to its initial state to reuse it!\n            return path && regExp.test(path) ? pattern : null!;\n        };\n    } catch (error) {\n        return NULL;\n    }\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function match(pattern: string | IRelativePattern, path: string): boolean;\nexport function match(expression: IExpression, path: string, hasSibling?: (name: string) => boolean): string /* the matching pattern */;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function match(arg1: string | IExpression | IRelativePattern, path: string, hasSibling?: (name: string) => boolean): any {\n    if (!arg1 || !path) {\n        return false;\n    }\n\n    return parse(<IExpression>arg1)(path, undefined, hasSibling);\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function parse(pattern: string | IRelativePattern, options?: IGlobOptions): ParsedPattern;\nexport function parse(expression: IExpression, options?: IGlobOptions): ParsedExpression;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function parse(arg1: string | IExpression | IRelativePattern, options: IGlobOptions = {}): any {\n    if (!arg1) {\n        return FALSE;\n    }\n\n    // Glob with String\n    if (typeof arg1 === 'string' || isRelativePattern(arg1)) {\n        const parsedPattern = parsePattern(arg1 as string | IRelativePattern, options);\n        if (parsedPattern === NULL) {\n            return FALSE;\n        }\n        const resultPattern = function (path: string, basename: string): boolean {\n            return !!parsedPattern(path, basename);\n        };\n        if (parsedPattern.allBasenames) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<ParsedStringPattern><any>resultPattern).allBasenames = parsedPattern.allBasenames;\n        }\n        if (parsedPattern.allPaths) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<ParsedStringPattern><any>resultPattern).allPaths = parsedPattern.allPaths;\n        }\n        return resultPattern;\n    }\n\n    // Glob with Expression\n    return parsedExpression(<IExpression>arg1, options);\n}\n\nexport function hasSiblingPromiseFn(siblingsFn?: () => Promise<string[]>): ((name: string) => Promise<boolean>) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Promise<Record<string, true>>;\n    return (name: string) => {\n        if (!siblings) {\n            siblings = (siblingsFn() || Promise.resolve([]))\n                .then(list => list ? listToMap(list) : {});\n        }\n        return siblings.then(map => !!map[name]);\n    };\n}\n\nexport function hasSiblingFn(siblingsFn?: () => string[]): ((name: string) => boolean) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Record<string, true>;\n    return (name: string) => {\n        if (!siblings) {\n            const list = siblingsFn();\n            siblings = list ? listToMap(list) : {};\n        }\n        return !!siblings[name];\n    };\n}\n\nfunction listToMap(list: string[]): Record<string, true> {\n    const map: Record<string, true> = {};\n    for (const key of list) {\n        map[key] = true;\n    }\n    return map;\n}\n\nexport function isRelativePattern(obj: unknown): obj is IRelativePattern {\n    const rp = obj as IRelativePattern;\n\n    return !!rp && typeof rp === 'object' && typeof rp.base === 'string' && typeof rp.pattern === 'string' && typeof rp.pathToRelative === 'function';\n}\n\n/**\n * Same as `parse`, but the ParsedExpression is guaranteed to return a Promise\n */\nexport function parseToAsync(expression: IExpression, options?: IGlobOptions): ParsedExpression {\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    const parsedExpression = parse(expression, options);\n    return (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> => {\n        const result = parsedExpression(path, basename, hasSibling);\n        return result instanceof Promise ? result : Promise.resolve(result);\n    };\n}\n\nexport function getBasenameTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allBasenames || [];\n}\n\nexport function getPathTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allPaths || [];\n}\n\nfunction parsedExpression(expression: IExpression, options: IGlobOptions): ParsedExpression {\n    const parsedPatterns = aggregateBasenameMatches(Object.getOwnPropertyNames(expression)\n        .map(pattern => parseExpressionPattern(pattern, expression[pattern], options))\n        .filter(pattern => pattern !== NULL));\n\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n\n    if (!parsedPatterns.some(parsedPattern => (<ParsedExpressionPattern>parsedPattern).requiresSiblings!)) {\n        if (n === 1) {\n            return <ParsedStringPattern>parsedPatterns[0];\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const resultExpression: ParsedStringPattern = function (path: string, basename: string): string | Promise<string> {\n            // eslint-disable-next-line @typescript-eslint/no-shadow\n            // tslint:disable-next-line:one-variable-per-declaration\n            for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n                // Pattern matches path\n                const result = (<ParsedStringPattern>parsedPatterns[i])(path, basename);\n                if (result) {\n                    return result;\n                }\n            }\n\n            return null!;\n        };\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n        if (withBasenames) {\n            resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n        if (allPaths.length) {\n            resultExpression.allPaths = allPaths;\n        }\n\n        return resultExpression;\n    }\n\n    const resultExpression: ParsedStringPattern = function (path: string, basename: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> {\n        let name: string = null!;\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            // Pattern matches path\n            const parsedPattern = (<ParsedExpressionPattern>parsedPatterns[i]);\n            if (parsedPattern.requiresSiblings && hasSibling) {\n                if (!basename) {\n                    basename = paths.basename(path);\n                }\n                if (!name) {\n                    name = basename.substring(0, basename.length - paths.extname(path).length);\n                }\n            }\n            const result = parsedPattern(path, basename, name, hasSibling!);\n            if (result) {\n                return result;\n            }\n        }\n\n        return null!;\n    };\n\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        resultExpression.allPaths = allPaths;\n    }\n\n    return resultExpression;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction parseExpressionPattern(pattern: string, value: any, options: IGlobOptions): (ParsedStringPattern | ParsedExpressionPattern) {\n    if (value === false) {\n        return NULL; // pattern is disabled\n    }\n\n    const parsedPattern = parsePattern(pattern, options);\n    if (parsedPattern === NULL) {\n        return NULL;\n    }\n\n    // Expression Pattern is <boolean>\n    if (typeof value === 'boolean') {\n        return parsedPattern;\n    }\n\n    // Expression Pattern is <SiblingClause>\n    if (value) {\n        const when = (<SiblingClause>value).when;\n        if (typeof when === 'string') {\n            const result: ParsedExpressionPattern = (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>) => {\n                if (!hasSibling || !parsedPattern(path, basename)) {\n                    return null!;\n                }\n\n                const clausePattern = when.replace('$(basename)', name);\n                const matched = hasSibling(clausePattern);\n                return matched instanceof Promise ?\n                    matched.then(m => m ? pattern : null!) :\n                    matched ? pattern : null!;\n            };\n            result.requiresSiblings = true;\n            return result;\n        }\n    }\n\n    // Expression is Anything\n    return parsedPattern;\n}\n\nfunction aggregateBasenameMatches(parsedPatterns: (ParsedStringPattern | ParsedExpressionPattern)[], result?: string): (ParsedStringPattern | ParsedExpressionPattern)[] {\n    const basenamePatterns = parsedPatterns.filter(parsedPattern => !!(<ParsedStringPattern>parsedPattern).basenames);\n    if (basenamePatterns.length < 2) {\n        return parsedPatterns;\n    }\n\n    const basenames = basenamePatterns.reduce<string[]>((all, current) => all.concat((<ParsedStringPattern>current).basenames!), []);\n    let patterns: string[];\n    if (result) {\n        patterns = [];\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, n = basenames.length; i < n; i++) {\n            patterns.push(result);\n        }\n    } else {\n        patterns = basenamePatterns.reduce((all, current) => all.concat((<ParsedStringPattern>current).patterns!), <string[]>[]);\n    }\n    const aggregate: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (!basename) {\n            let i: number;\n            for (i = path.length; i > 0; i--) {\n                const ch = path.charCodeAt(i - 1);\n                if (ch === CharCode.Slash || ch === CharCode.Backslash) {\n                    break;\n                }\n            }\n            basename = path.substring(i);\n        }\n        const index = basenames.indexOf(basename);\n        return index !== -1 ? patterns[index] : null!;\n    };\n    aggregate.basenames = basenames;\n    aggregate.patterns = patterns;\n    aggregate.allBasenames = basenames;\n\n    const aggregatedPatterns = parsedPatterns.filter(parsedPattern => !(<ParsedStringPattern>parsedPattern).basenames);\n    aggregatedPatterns.push(aggregate);\n    return aggregatedPatterns;\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\ndeclare const __non_webpack_require__: NodeJS.Require;\n\nconst nodeRequire = typeof __non_webpack_require__ !== 'undefined' ? __non_webpack_require__ : require;\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function dynamicRequire<T = any>(id: string): T {\n    if (typeof id !== 'string') {\n        throw new TypeError('module id must be a string');\n    }\n    if (id.startsWith('.')) {\n        throw new Error(`module id cannot be a relative path, id: \"${id}\"`);\n    }\n    return nodeRequire(id);\n}\n\n/**\n * Remove all references to a module from Node's module cache.\n * @param filter callback to filter modules from the cache: return `true` to remove the module from the cache.\n */\nexport function removeFromCache(filter: (mod: NodeJS.Module) => boolean): void {\n    Object.entries(nodeRequire.cache).forEach(([key, mod]) => {\n        if (!mod || mod.id.endsWith('.node')) {\n            return;\n        }\n        if (filter(mod)) {\n            delete nodeRequire.cache[key];\n            delete mod.exports;\n            mod.children.length = 0;\n            return;\n        }\n        mod.children.splice(0, mod.children.length, ...mod.children.filter(child => {\n            if (filter(child)) {\n                delete child.exports;\n                child.children.length = 0;\n                return false;\n            }\n            return true;\n        }));\n    });\n}\n","module.exports = require('reflect-metadata');\n","/********************************************************************************\n * Copyright (C) 2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * The URI scheme for debug URIs.\n */\nexport const DEBUG_SCHEME = 'debug';\n/**\n * The pattern for URI schemes.\n */\nexport const SCHEME_PATTERN = /^[a-zA-Z][a-zA-Z0-9\\+\\-\\.]+:/;\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DebugAdapter } from './debug-model';\nimport * as theia from '@theia/plugin';\n\n/**\n * A debug adapter for using the inline implementation from a plugin.\n */\nexport class InlineDebugAdapter implements DebugAdapter {\n    private messageReceivedEmitter = new Emitter<string>();\n    onMessageReceived: Event<string> = this.messageReceivedEmitter.event;\n    onError: Event<Error> = Event.None;\n    private closeEmitter = new Emitter<void>();\n    onClose: Event<void> = this.closeEmitter.event;\n\n    constructor(private debugAdapter: theia.DebugAdapter) {\n        this.debugAdapter.onDidSendMessage(msg => {\n            this.messageReceivedEmitter.fire(JSON.stringify(msg));\n        });\n    }\n\n    async start(): Promise<void> {\n    }\n\n    send(message: string): void {\n        this.debugAdapter.handleMessage(JSON.parse(message));\n    }\n\n    async stop(): Promise<void> {\n        this.debugAdapter.dispose();\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { match as matchGlobPattern } from '@theia/core/lib/common/glob';\n\nexport interface RelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport interface LanguageFilter {\n    language?: string;\n    scheme?: string;\n    pattern?: string | RelativePattern;\n    hasAccessToAllModels?: boolean;\n}\nexport type LanguageSelector = string | LanguageFilter | (string | LanguageFilter)[];\n\nexport function score(selector: LanguageSelector | undefined, uriScheme: string, path: string, candidateLanguage: string, candidateIsSynchronized: boolean): number {\n\n    if (Array.isArray(selector)) {\n        let ret = 0;\n        for (const filter of selector) {\n            const value = score(filter, uriScheme, path, candidateLanguage, candidateIsSynchronized);\n            if (value === 10) {\n                return value;\n            }\n            if (value > ret) {\n                ret = value;\n            }\n        }\n        return ret;\n\n    } else if (typeof selector === 'string') {\n\n        if (!candidateIsSynchronized) {\n            return 0;\n        }\n\n        if (selector === '*') {\n            return 5;\n        } else if (selector === candidateLanguage) {\n            return 10;\n        } else {\n            return 0;\n        }\n\n    } else if (selector) {\n        const { language, pattern, scheme, hasAccessToAllModels } = selector;\n\n        if (!candidateIsSynchronized && !hasAccessToAllModels) {\n            return 0;\n        }\n\n        let result = 0;\n\n        if (scheme) {\n            if (scheme === uriScheme) {\n                result = 10;\n            } else if (scheme === '*') {\n                result = 5;\n            } else {\n                return 0;\n            }\n        }\n\n        if (language) {\n            if (language === candidateLanguage) {\n                result = 10;\n            } else if (language === '*') {\n                result = Math.max(result, 5);\n            } else {\n                return 0;\n            }\n        }\n\n        if (pattern) {\n            if (pattern === path || matchGlobPattern(pattern, path)) {\n                result = 10;\n            } else {\n                return 0;\n            }\n        }\n\n        return result;\n\n    } else {\n        return 0;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './notebook-common';\nexport * from './notebook-range';\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { CancellationToken, Command, Event, URI } from '@theia/core';\nimport { MarkdownString } from '@theia/core/lib/common/markdown-rendering/markdown-string';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { UriComponents } from '@theia/core/lib/common/uri';\nimport { CellRange } from './notebook-range';\n\nexport enum CellKind {\n    Markup = 1,\n    Code = 2\n}\n\nexport interface NotebookCellMetadata {\n    /**\n     * custom metadata\n     */\n    [key: string]: unknown;\n}\n\nexport interface NotebookCellInternalMetadata {\n    executionId?: string;\n    executionOrder?: number;\n    lastRunSuccess?: boolean;\n    runStartTime?: number;\n    runStartTimeAdjustment?: number;\n    runEndTime?: number;\n    renderDuration?: { [key: string]: number };\n}\n\nexport type NotebookDocumentMetadata = Record<string, unknown>;\n\nexport interface NotebookCellStatusBarItem {\n    readonly alignment: CellStatusbarAlignment;\n    readonly priority?: number;\n    readonly text: string;\n    // readonly color?: string | ThemeColor;\n    // readonly backgroundColor?: string | ThemeColor;\n    readonly tooltip?: string | MarkdownString;\n    readonly command?: string | Command;\n    // readonly accessibilityInformation?: IAccessibilityInformation;\n    readonly opacity?: string;\n    readonly onlyShowWhenActive?: boolean;\n}\n\nexport const enum CellStatusbarAlignment {\n    Left = 1,\n    Right = 2\n}\n\nexport type TransientCellMetadata = { readonly [K in keyof NotebookCellMetadata]?: boolean };\nexport type CellContentMetadata = { readonly [K in keyof NotebookCellMetadata]?: boolean };\nexport type TransientDocumentMetadata = { readonly [K in keyof NotebookDocumentMetadata]?: boolean };\n\nexport interface TransientOptions {\n    readonly transientOutputs: boolean;\n    readonly transientCellMetadata: TransientCellMetadata;\n    readonly transientDocumentMetadata: TransientDocumentMetadata;\n}\n\nexport interface NotebookExtensionDescription {\n    readonly id: string;\n    readonly location: string | undefined;\n}\n\nexport interface CellOutputItem {\n    readonly mime: string;\n    readonly data: BinaryBuffer;\n}\n\nexport interface CellOutput {\n    outputId: string;\n    outputs: CellOutputItem[];\n    metadata?: Record<string, unknown>;\n}\n\nexport interface NotebookCellCollapseState {\n    inputCollapsed?: boolean;\n    outputCollapsed?: boolean;\n}\n\nexport interface NotebookCell {\n    readonly uri: URI;\n    handle: number;\n    language: string;\n    cellKind: CellKind;\n    outputs: CellOutput[];\n    metadata: NotebookCellMetadata;\n    internalMetadata: NotebookCellInternalMetadata;\n    textBuffer: string;\n    onDidChangeOutputs?: Event<NotebookCellOutputsSplice>;\n    onDidChangeOutputItems?: Event<void>;\n    onDidChangeLanguage: Event<string>;\n    onDidChangeMetadata: Event<void>;\n    onDidChangeInternalMetadata: Event<CellInternalMetadataChangedEvent>;\n\n}\n\nexport interface CellData {\n    source: string;\n    language: string;\n    cellKind: CellKind;\n    outputs: CellOutput[];\n    metadata?: NotebookCellMetadata;\n    internalMetadata?: NotebookCellInternalMetadata;\n    collapseState?: NotebookCellCollapseState;\n}\n\nexport interface CellReplaceEdit {\n    editType: CellEditType.Replace;\n    index: number;\n    count: number;\n    cells: CellData[];\n}\n\nexport interface NotebookDocumentMetadataEdit {\n    editType: CellEditType.DocumentMetadata;\n    metadata: NotebookDocumentMetadata;\n}\n\nexport interface NotebookData {\n    readonly cells: CellData[];\n    readonly metadata: NotebookDocumentMetadata;\n}\n\nexport interface NotebookContributionData {\n    extension?: string;\n    providerDisplayName: string;\n    displayName: string;\n    filenamePattern: (string)[];\n    exclusive: boolean;\n}\n\nexport interface NotebookCellStatusBarItemList {\n    items: NotebookCellStatusBarItem[];\n    dispose?(): void;\n}\n\nexport interface NotebookCellStatusBarItemProvider {\n    viewType: string;\n    onDidChangeStatusBarItems?: Event<void>;\n    provideCellStatusBarItems(uri: UriComponents, index: number, token: CancellationToken): Promise<NotebookCellStatusBarItemList | undefined>;\n}\n\nexport interface NotebookCellOutputsSplice {\n    start: number /* start */;\n    deleteCount: number /* delete count */;\n    newOutputs: CellOutput[];\n};\n\nexport interface CellInternalMetadataChangedEvent {\n    readonly lastRunSuccessChanged?: boolean;\n}\n\nexport type NotebookCellTextModelSplice<T> = [\n    start: number,\n    deleteCount: number,\n    newItems: T[]\n];\n\nexport enum NotebookCellsChangeType {\n    ModelChange = 1,\n    Move = 2,\n    ChangeCellLanguage = 5,\n    Initialize = 6,\n    ChangeCellMetadata = 7,\n    Output = 8,\n    OutputItem = 9,\n    ChangeCellContent = 10,\n    ChangeDocumentMetadata = 11,\n    ChangeCellInternalMetadata = 12,\n    // ChangeCellMime = 13,\n    Unknown = 100\n}\n\nexport enum SelectionStateType {\n    Handle = 0,\n    Index = 1\n}\nexport interface SelectionHandleState {\n    kind: SelectionStateType.Handle;\n    primary: number | null;\n    selections: number[];\n}\n\nexport interface SelectionIndexState {\n    kind: SelectionStateType.Index;\n    focus: CellRange;\n    selections: CellRange[];\n}\n\nexport type SelectionState = SelectionHandleState | SelectionIndexState;\n\nexport interface NotebookTextModelChangedEvent {\n    readonly rawEvents: NotebookRawContentEvent[];\n    // readonly versionId: number;\n    readonly synchronous?: boolean;\n    readonly endSelectionState?: SelectionState;\n};\n\nexport interface NotebookCellsInitializeEvent<T> {\n    readonly kind: NotebookCellsChangeType.Initialize;\n    readonly changes: NotebookCellTextModelSplice<T>[];\n}\n\nexport interface NotebookCellsChangeLanguageEvent {\n    readonly kind: NotebookCellsChangeType.ChangeCellLanguage;\n    readonly index: number;\n    readonly language: string;\n}\n\nexport interface NotebookCellsModelChangedEvent<T> {\n    readonly kind: NotebookCellsChangeType.ModelChange;\n    readonly changes: NotebookCellTextModelSplice<T>[];\n}\n\nexport interface NotebookCellsModelMoveEvent<T> {\n    readonly kind: NotebookCellsChangeType.Move;\n    readonly index: number;\n    readonly length: number;\n    readonly newIdx: number;\n    readonly cells: T[];\n}\n\nexport interface NotebookOutputChangedEvent {\n    readonly kind: NotebookCellsChangeType.Output;\n    readonly index: number;\n    readonly outputs: CellOutput[];\n    readonly append: boolean;\n}\n\nexport interface NotebookOutputItemChangedEvent {\n    readonly kind: NotebookCellsChangeType.OutputItem;\n    readonly index: number;\n    readonly outputId: string;\n    readonly outputItems: CellOutputItem[];\n    readonly append: boolean;\n}\nexport interface NotebookCellsChangeMetadataEvent {\n    readonly kind: NotebookCellsChangeType.ChangeCellMetadata;\n    readonly index: number;\n    readonly metadata: NotebookCellMetadata;\n}\n\nexport interface NotebookCellsChangeInternalMetadataEvent {\n    readonly kind: NotebookCellsChangeType.ChangeCellInternalMetadata;\n    readonly index: number;\n    readonly internalMetadata: NotebookCellInternalMetadata;\n}\n\nexport interface NotebookDocumentChangeMetadataEvent {\n    readonly kind: NotebookCellsChangeType.ChangeDocumentMetadata;\n    readonly metadata: NotebookDocumentMetadata;\n}\n\nexport interface NotebookDocumentUnknownChangeEvent {\n    readonly kind: NotebookCellsChangeType.Unknown;\n}\n\nexport interface NotebookCellContentChangeEvent {\n    readonly kind: NotebookCellsChangeType.ChangeCellContent;\n    readonly index: number;\n}\n\nexport type NotebookRawContentEvent = (NotebookCellsInitializeEvent<NotebookCell> | NotebookDocumentChangeMetadataEvent | NotebookCellContentChangeEvent |\n    NotebookCellsModelChangedEvent<NotebookCell> | NotebookCellsModelMoveEvent<NotebookCell> | NotebookOutputChangedEvent | NotebookOutputItemChangedEvent |\n    NotebookCellsChangeLanguageEvent | NotebookCellsChangeMetadataEvent |\n    NotebookCellsChangeInternalMetadataEvent | NotebookDocumentUnknownChangeEvent); // & { transient: boolean };\n\nexport interface NotebookModelChangedEvent {\n    readonly rawEvents: NotebookRawContentEvent[];\n    readonly versionId: number;\n    // readonly synchronous: boolean | undefined;\n    // readonly endSelectionState: ISelectionState | undefined;\n};\n\nexport interface NotebookModelWillAddRemoveEvent {\n    readonly rawEvent: NotebookCellsModelChangedEvent<CellData>;\n};\n\nexport enum NotebookCellExecutionState {\n    Unconfirmed = 1,\n    Pending = 2,\n    Executing = 3\n}\n\nexport enum CellExecutionUpdateType {\n    Output = 1,\n    OutputItems = 2,\n    ExecutionState = 3,\n}\n\nexport interface CellExecuteOutputEdit {\n    editType: CellExecutionUpdateType.Output;\n    cellHandle: number;\n    append?: boolean;\n    outputs: CellOutput[];\n}\n\nexport interface CellExecuteOutputItemEdit {\n    editType: CellExecutionUpdateType.OutputItems;\n    append?: boolean;\n    items: CellOutputItem[];\n}\n\nexport interface CellExecutionStateUpdateDto {\n    editType: CellExecutionUpdateType.ExecutionState;\n    executionOrder?: number;\n    runStartTime?: number;\n    didPause?: boolean;\n    isPaused?: boolean;\n}\n\nexport interface CellOutputEdit {\n    editType: CellEditType.Output;\n    index: number;\n    outputs: CellOutput[];\n    append?: boolean;\n}\n\nexport interface CellOutputEditByHandle {\n    editType: CellEditType.Output;\n    handle: number;\n    outputs: CellOutput[];\n    append?: boolean;\n}\n\nexport interface CellOutputItemEdit {\n    editType: CellEditType.OutputItems;\n    items: CellOutputItem[];\n    append?: boolean;\n}\n\nexport interface CellMetadataEdit {\n    editType: CellEditType.Metadata;\n    index: number;\n    metadata: NotebookCellMetadata;\n}\n\nexport interface CellLanguageEdit {\n    editType: CellEditType.CellLanguage;\n    index: number;\n    language: string;\n}\n\nexport interface DocumentMetadataEdit {\n    editType: CellEditType.DocumentMetadata;\n    metadata: NotebookDocumentMetadata;\n}\n\nexport interface CellMoveEdit {\n    editType: CellEditType.Move;\n    index: number;\n    length: number;\n    newIdx: number;\n}\n\nexport const enum CellEditType {\n    Replace = 1,\n    Output = 2,\n    Metadata = 3,\n    CellLanguage = 4,\n    DocumentMetadata = 5,\n    Move = 6,\n    OutputItems = 7,\n    PartialMetadata = 8,\n    PartialInternalMetadata = 9,\n}\n\nexport type ImmediateCellEditOperation = CellOutputEditByHandle | CellOutputItemEdit | CellPartialInternalMetadataEditByHandle; // add more later on\nexport type CellEditOperation = ImmediateCellEditOperation | CellReplaceEdit | CellOutputEdit |\n    CellMetadataEdit | CellLanguageEdit | DocumentMetadataEdit | CellMoveEdit; // add more later on\n\nexport type NullablePartialNotebookCellInternalMetadata = {\n    [Key in keyof Partial<NotebookCellInternalMetadata>]: NotebookCellInternalMetadata[Key] | null\n};\nexport interface CellPartialInternalMetadataEditByHandle {\n    editType: CellEditType.PartialInternalMetadata;\n    handle: number;\n    internalMetadata: NullablePartialNotebookCellInternalMetadata;\n}\n\nexport interface NotebookKernelSourceAction {\n    readonly label: string;\n    readonly description?: string;\n    readonly detail?: string;\n    readonly command?: string | Command;\n    readonly documentation?: UriComponents | string;\n}\n\n/**\n * Whether the provided mime type is a text stream like `stdout`, `stderr`.\n */\nexport function isTextStreamMime(mimeType: string): boolean {\n    return ['application/vnd.code.notebook.stdout', 'application/vnd.code.notebook.stderr'].includes(mimeType);\n}\n\nexport namespace CellUri {\n\n    export const scheme = 'vscode-notebook-cell';\n\n    const _lengths = ['W', 'X', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f'];\n    const _padRegexp = new RegExp(`^[${_lengths.join('')}]+`);\n    const _radix = 7;\n\n    export function generate(notebook: URI, handle: number): URI {\n\n        const s = handle.toString(_radix);\n        const p = s.length < _lengths.length ? _lengths[s.length - 1] : 'z';\n\n        const fragment = `${p}${s}s${Buffer.from(BinaryBuffer.fromString(notebook.scheme).buffer).toString('base64')} `;\n        return notebook.withScheme(scheme).withFragment(fragment);\n    }\n\n    export function parse(cell: URI): { notebook: URI; handle: number } | undefined {\n        if (cell.scheme !== scheme) {\n            return undefined;\n        }\n\n        const idx = cell.fragment.indexOf('s');\n        if (idx < 0) {\n            return undefined;\n        }\n\n        const handle = parseInt(cell.fragment.substring(0, idx).replace(_padRegexp, ''), _radix);\n        const parsedScheme = Buffer.from(cell.fragment.substring(idx + 1), 'base64').toString();\n\n        if (isNaN(handle)) {\n            return undefined;\n        }\n        return {\n            handle,\n            notebook: cell.withScheme(parsedScheme).withoutFragment()\n        };\n    }\n\n    export function generateCellPropertyUri(notebook: URI, handle: number, cellScheme: string): URI {\n        return CellUri.generate(notebook, handle).withScheme(cellScheme);\n    }\n\n    export function parseCellPropertyUri(uri: URI, propertyScheme: string): { notebook: URI; handle: number } | undefined {\n        if (uri.scheme !== propertyScheme) {\n            return undefined;\n        }\n\n        return CellUri.parse(uri.withScheme(scheme));\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 Typefox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/**\n * [start, end]\n */\nexport interface CellRange {\n    /**\n     * zero based index\n     */\n    start: number;\n\n    /**\n     * zero based index\n     */\n    end: number;\n}\n","\n// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function ok(val?: any, message?: string): void {\n    if (!val || val === null) {\n        throw new Error(message ? `Assertion failed (${message})` : 'Assertion failed');\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// copied from https://github.com/microsoft/vscode/blob/53eac52308c4611000a171cc7bf1214293473c78/src/vs/workbench/api/common/cache.ts\nexport class Cache<T> {\n\n    private static readonly enableDebugLogging = false;\n\n    private readonly _data = new Map<number, readonly T[]>();\n    private _idPool = 1;\n\n    constructor(\n        private readonly id: string\n    ) { }\n\n    add(item: readonly T[]): number {\n        const id = this._idPool++;\n        this._data.set(id, item);\n        this.logDebugInfo();\n        return id;\n    }\n\n    get(pid: number, id: number): T | undefined {\n        return this._data.has(pid) ? this._data.get(pid)![id] : undefined;\n    }\n\n    delete(id: number): void {\n        this._data.delete(id);\n        this.logDebugInfo();\n    }\n\n    private logDebugInfo(): void {\n        if (!Cache.enableDebugLogging) {\n            return;\n        }\n        console.log(`${this.id} cache size — ${this._data.size}`);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/editor/common/core/characterClassifier.ts\n\nimport { toUint8 } from './uint';\n\n/**\n * A fast character classifier that uses a compact array for ASCII values.\n */\nexport class CharacterClassifier<T extends number> {\n    /**\n     * Maintain a compact (fully initialized ASCII map for quickly classifying ASCII characters - used more often in code).\n     */\n    protected _asciiMap: Uint8Array;\n\n    /**\n     * The entire map (sparse array).\n     */\n    protected _map: Map<number, number>;\n\n    protected _defaultValue: number;\n\n    constructor(_defaultValue: T) {\n        const defaultValue = toUint8(_defaultValue);\n\n        this._defaultValue = defaultValue;\n        this._asciiMap = CharacterClassifier._createAsciiMap(defaultValue);\n        this._map = new Map<number, number>();\n    }\n\n    private static _createAsciiMap(defaultValue: number): Uint8Array {\n        const asciiMap: Uint8Array = new Uint8Array(256);\n        for (let i = 0; i < 256; i++) {\n            asciiMap[i] = defaultValue;\n        }\n        return asciiMap;\n    }\n\n    public set(charCode: number, _value: T): void {\n        const value = toUint8(_value);\n\n        if (charCode >= 0 && charCode < 256) {\n            this._asciiMap[charCode] = value;\n        } else {\n            this._map.set(charCode, value);\n        }\n    }\n\n    public get(charCode: number): T {\n        if (charCode >= 0 && charCode < 256) {\n            return <T>this._asciiMap[charCode];\n        } else {\n            return <T>(this._map.get(charCode) || this._defaultValue);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.71.2/src/vs/base/common/collections.ts\n\nexport function diffSets<T>(before: Set<T>, after: Set<T>): { removed: T[]; added: T[] } {\n    const removed: T[] = [];\n    const added: T[] = [];\n    for (const element of before) {\n        if (!after.has(element)) {\n            removed.push(element);\n        }\n    }\n    for (const element of after) {\n        if (!before.has(element)) {\n            added.push(element);\n        }\n    }\n    return { removed, added };\n}\n\nexport function diffMaps<K, V>(before: Map<K, V>, after: Map<K, V>): { removed: V[]; added: V[] } {\n    const removed: V[] = [];\n    const added: V[] = [];\n    for (const [index, value] of before) {\n        if (!after.has(index)) {\n            removed.push(value);\n        }\n    }\n    for (const [index, value] of after) {\n        if (!before.has(index)) {\n            added.push(value);\n        }\n    }\n    return { removed, added };\n}\n\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { DebugChannel } from '@theia/debug/lib/common/debug-service';\nimport { ConnectionExt, ConnectionMain } from './plugin-api-rpc';\nimport { Emitter } from '@theia/core/lib/common/event';\n\n/**\n * A channel communicating with a counterpart in a plugin host.\n */\nexport class PluginChannel implements DebugChannel {\n    private messageEmitter: Emitter<string> = new Emitter();\n    private errorEmitter: Emitter<unknown> = new Emitter();\n    private closedEmitter: Emitter<void> = new Emitter();\n\n    constructor(\n        protected readonly id: string,\n        protected readonly connection: ConnectionExt | ConnectionMain) { }\n\n    send(content: string): void {\n        this.connection.$sendMessage(this.id, content);\n    }\n\n    fireMessageReceived(msg: string): void {\n        this.messageEmitter.fire(msg);\n    }\n\n    fireError(error: unknown): void {\n        this.errorEmitter.fire(error);\n    }\n\n    fireClosed(): void {\n        this.closedEmitter.fire();\n    }\n\n    onMessage(cb: (message: string) => void): void {\n        this.messageEmitter.event(cb);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onError(cb: (reason: any) => void): void {\n        this.errorEmitter.event(cb);\n    }\n\n    onClose(cb: (code: number, reason: string) => void): void {\n        this.closedEmitter.event(() => cb(-1, 'closed'));\n    }\n\n    close(): void {\n        this.connection.$deleteConnection(this.id);\n    }\n}\n\nexport class ConnectionImpl implements ConnectionMain, ConnectionExt {\n    private readonly proxy: ConnectionExt | ConnectionExt;\n    private readonly connections = new Map<string, PluginChannel>();\n\n    constructor(proxy: ConnectionMain | ConnectionExt) {\n        this.proxy = proxy;\n    }\n\n    /**\n     * Gets the connection between plugin by id and sends string message to it.\n     *\n     * @param id connection's id\n     * @param message incoming message\n     */\n    async $sendMessage(id: string, message: string): Promise<void> {\n        if (this.connections.has(id)) {\n            this.connections.get(id)!.fireMessageReceived(message);\n        } else {\n            console.warn(`Received message for unknown connection: ${id}`);\n        }\n    }\n\n    /**\n     * Instantiates a new connection by the given id.\n     * @param id the connection id\n     */\n    async $createConnection(id: string): Promise<void> {\n        console.debug(`Creating plugin connection: ${id}`);\n\n        await this.doEnsureConnection(id);\n    }\n\n    /**\n     * Deletes a connection.\n     * @param id the connection id\n     */\n    async $deleteConnection(id: string): Promise<void> {\n        console.debug(`Deleting plugin connection: ${id}`);\n        const connection = this.connections.get(id);\n        if (connection) {\n            this.connections.delete(id);\n            connection.fireClosed();\n        }\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async ensureConnection(id: string): Promise<PluginChannel> {\n        console.debug(`Creating local connection: ${id}`);\n        const connection = await this.doEnsureConnection(id);\n        await this.proxy.$createConnection(id);\n        return connection;\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async doEnsureConnection(id: string): Promise<PluginChannel> {\n        const connection = this.connections.get(id) || await this.doCreateConnection(id);\n        this.connections.set(id, connection);\n        return connection;\n    }\n\n    protected async doCreateConnection(id: string): Promise<PluginChannel> {\n        const channel = new PluginChannel(id, this.proxy);\n        channel.onClose(() => this.connections.delete(id));\n        return channel;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport interface Disposable {\n    dispose(): void;\n}\n\nexport function dispose<T extends Disposable>(disposable: T): T | undefined;\nexport function dispose<T extends Disposable>(...disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(first: T | T[], ...rest: T[]): T | T[] | undefined {\n    if (Array.isArray(first)) {\n        first.forEach(d => d && d.dispose());\n        return [];\n    } else if (rest.length === 0) {\n        if (first) {\n            first.dispose();\n            return first;\n        }\n        return undefined;\n    } else {\n        dispose(first);\n        dispose(rest);\n        return [];\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// enum copied from monaco.d.ts\n/**\n * The style in which the editor's cursor should be rendered.\n */\nexport enum TextEditorCursorStyle {\n    /**\n     * As a vertical line\n     */\n    Line = 1,\n\n    /**\n     * As a block\n     */\n    Block = 2,\n\n    /**\n     * As a horizontal line, under character\n     */\n    Underline = 3,\n\n    /**\n     * As a thin vertical line\n     */\n    LineThin = 4,\n\n    /**\n     * As an outlined block, on top of a character\n     */\n    BlockOutline = 5,\n\n    /**\n     * As a thin horizontal line, under a character\n     */\n    UnderlineThin = 6\n}\n\nexport function cursorStyleToString(cursorStyle: TextEditorCursorStyle): 'line' | 'block' | 'underline' | 'line-thin' | 'block-outline' | 'underline-thin' {\n    switch (cursorStyle) {\n        case TextEditorCursorStyle.Line:\n            return 'line';\n        case TextEditorCursorStyle.Block:\n            return 'block';\n        case TextEditorCursorStyle.Underline:\n            return 'underline';\n        case TextEditorCursorStyle.LineThin:\n            return 'line-thin';\n        case TextEditorCursorStyle.BlockOutline:\n            return 'block-outline';\n        case TextEditorCursorStyle.UnderlineThin:\n            return 'underline-thin';\n        default:\n            throw new Error('cursorStyleToString: Unknown cursorStyle');\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport class IdGenerator {\n    private lastId: number;\n    constructor(private prefix: string) {\n        this.lastId = 0;\n    }\n\n    nextId(): string {\n        return this.prefix + (++this.lastId);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/editor/common/modes/linkComputer.ts\n\n/* eslint-disable max-len */\n\nimport { CharacterClassifier } from './character-classifier';\nimport { CharCode } from '@theia/core/lib/common/char-code';\nimport { DocumentLink as ILink } from './plugin-api-rpc-model';\n\nexport interface ILinkComputerTarget {\n    getLineCount(): number;\n    getLineContent(lineNumber: number): string;\n}\n\nexport const enum State {\n    Invalid = 0,\n    Start = 1,\n    H = 2,\n    HT = 3,\n    HTT = 4,\n    HTTP = 5,\n    F = 6,\n    FI = 7,\n    FIL = 8,\n    BeforeColon = 9,\n    AfterColon = 10,\n    AlmostThere = 11,\n    End = 12,\n    Accept = 13,\n    LastKnownState = 14 // marker, custom states may follow\n}\n\nexport type Edge = [State, number, State];\n\nexport class Uint8Matrix {\n\n    private readonly _data: Uint8Array;\n    public readonly rows: number;\n    public readonly cols: number;\n\n    constructor(rows: number, cols: number, defaultValue: number) {\n        const data = new Uint8Array(rows * cols);\n        for (let i = 0, len = rows * cols; i < len; i++) {\n            data[i] = defaultValue;\n        }\n\n        this._data = data;\n        this.rows = rows;\n        this.cols = cols;\n    }\n\n    public get(row: number, col: number): number {\n        return this._data[row * this.cols + col];\n    }\n\n    public set(row: number, col: number, value: number): void {\n        this._data[row * this.cols + col] = value;\n    }\n}\n\nexport class StateMachine {\n\n    private readonly _states: Uint8Matrix;\n    private readonly _maxCharCode: number;\n\n    constructor(edges: Edge[]) {\n        let maxCharCode = 0;\n        let maxState = State.Invalid;\n        for (let i = 0, len = edges.length; i < len; i++) {\n            const [from, chCode, to] = edges[i];\n            if (chCode > maxCharCode) {\n                maxCharCode = chCode;\n            }\n            if (from > maxState) {\n                maxState = from;\n            }\n            if (to > maxState) {\n                maxState = to;\n            }\n        }\n\n        maxCharCode++;\n        maxState++;\n\n        const states = new Uint8Matrix(maxState, maxCharCode, State.Invalid);\n        for (let i = 0, len = edges.length; i < len; i++) {\n            const [from, chCode, to] = edges[i];\n            states.set(from, chCode, to);\n        }\n\n        this._states = states;\n        this._maxCharCode = maxCharCode;\n    }\n\n    public nextState(currentState: State, chCode: number): State {\n        if (chCode < 0 || chCode >= this._maxCharCode) {\n            return State.Invalid;\n        }\n        return this._states.get(currentState, chCode);\n    }\n}\n\n// State machine for http:// or https:// or file://\nlet _stateMachine: StateMachine | null = null;\nfunction getStateMachine(): StateMachine {\n    if (_stateMachine === null) {\n        _stateMachine = new StateMachine([\n            [State.Start, CharCode.h, State.H],\n            [State.Start, CharCode.H, State.H],\n            [State.Start, CharCode.f, State.F],\n            [State.Start, CharCode.F, State.F],\n\n            [State.H, CharCode.t, State.HT],\n            [State.H, CharCode.T, State.HT],\n\n            [State.HT, CharCode.t, State.HTT],\n            [State.HT, CharCode.T, State.HTT],\n\n            [State.HTT, CharCode.p, State.HTTP],\n            [State.HTT, CharCode.P, State.HTTP],\n\n            [State.HTTP, CharCode.s, State.BeforeColon],\n            [State.HTTP, CharCode.S, State.BeforeColon],\n            [State.HTTP, CharCode.Colon, State.AfterColon],\n\n            [State.F, CharCode.i, State.FI],\n            [State.F, CharCode.I, State.FI],\n\n            [State.FI, CharCode.l, State.FIL],\n            [State.FI, CharCode.L, State.FIL],\n\n            [State.FIL, CharCode.e, State.BeforeColon],\n            [State.FIL, CharCode.E, State.BeforeColon],\n\n            [State.BeforeColon, CharCode.Colon, State.AfterColon],\n\n            [State.AfterColon, CharCode.Slash, State.AlmostThere],\n\n            [State.AlmostThere, CharCode.Slash, State.End],\n        ]);\n    }\n    return _stateMachine;\n}\n\nconst enum CharacterClass {\n    None = 0,\n    ForceTermination = 1,\n    CannotEndIn = 2\n}\n\nlet _classifier: CharacterClassifier<CharacterClass> | null = null;\nfunction getClassifier(): CharacterClassifier<CharacterClass> {\n    if (_classifier === null) {\n        _classifier = new CharacterClassifier<CharacterClass>(CharacterClass.None);\n\n        const FORCE_TERMINATION_CHARACTERS = ' \\t<>\\'\\\"、。｡､，．：；？！＠＃＄％＆＊‘“〈《「『【〔（［｛｢｣｝］）〕】』」》〉”’｀～…';\n        for (let i = 0; i < FORCE_TERMINATION_CHARACTERS.length; i++) {\n            _classifier.set(FORCE_TERMINATION_CHARACTERS.charCodeAt(i), CharacterClass.ForceTermination);\n        }\n\n        const CANNOT_END_WITH_CHARACTERS = '.,;';\n        for (let i = 0; i < CANNOT_END_WITH_CHARACTERS.length; i++) {\n            _classifier.set(CANNOT_END_WITH_CHARACTERS.charCodeAt(i), CharacterClass.CannotEndIn);\n        }\n    }\n    return _classifier;\n}\n\nexport class LinkComputer {\n\n    private static _createLink(classifier: CharacterClassifier<CharacterClass>, line: string, lineNumber: number, linkBeginIndex: number, linkEndIndex: number): ILink {\n        // Do not allow to end link in certain characters...\n        let lastIncludedCharIndex = linkEndIndex - 1;\n        do {\n            const chCode = line.charCodeAt(lastIncludedCharIndex);\n            const chClass = classifier.get(chCode);\n            if (chClass !== CharacterClass.CannotEndIn) {\n                break;\n            }\n            lastIncludedCharIndex--;\n        } while (lastIncludedCharIndex > linkBeginIndex);\n\n        // Handle links enclosed in parens, square and curly brackets.\n        if (linkBeginIndex > 0) {\n            const charCodeBeforeLink = line.charCodeAt(linkBeginIndex - 1);\n            const lastCharCodeInLink = line.charCodeAt(lastIncludedCharIndex);\n\n            if (\n                (charCodeBeforeLink === CharCode.OpenParen && lastCharCodeInLink === CharCode.CloseParen)\n                || (charCodeBeforeLink === CharCode.OpenSquareBracket && lastCharCodeInLink === CharCode.CloseSquareBracket)\n                || (charCodeBeforeLink === CharCode.OpenCurlyBrace && lastCharCodeInLink === CharCode.CloseCurlyBrace)\n            ) {\n                // Do not end in ) if ( is before the link start\n                // Do not end in ] if [ is before the link start\n                // Do not end in } if { is before the link start\n                lastIncludedCharIndex--;\n            }\n        }\n\n        return {\n            range: {\n                startLineNumber: lineNumber,\n                startColumn: linkBeginIndex + 1,\n                endLineNumber: lineNumber,\n                endColumn: lastIncludedCharIndex + 2\n            },\n            url: line.substring(linkBeginIndex, lastIncludedCharIndex + 1)\n        };\n    }\n\n    public static computeLinks(model: ILinkComputerTarget, stateMachine: StateMachine = getStateMachine()): ILink[] {\n        const classifier = getClassifier();\n\n        const result: ILink[] = [];\n        for (let i = 1, lineCount = model.getLineCount(); i <= lineCount; i++) {\n            const line = model.getLineContent(i);\n            const len = line.length;\n\n            let j = 0;\n            let linkBeginIndex = 0;\n            let linkBeginChCode = 0;\n            let state = State.Start;\n            let hasOpenParens = false;\n            let hasOpenSquareBracket = false;\n            let inSquareBrackets = false;\n            let hasOpenCurlyBracket = false;\n\n            while (j < len) {\n\n                let resetStateMachine = false;\n                const chCode = line.charCodeAt(j);\n\n                if (state === State.Accept) {\n                    let chClass: CharacterClass;\n                    switch (chCode) {\n                        case CharCode.OpenParen:\n                            hasOpenParens = true;\n                            chClass = CharacterClass.None;\n                            break;\n                        case CharCode.CloseParen:\n                            chClass = (hasOpenParens ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        case CharCode.OpenSquareBracket:\n                            inSquareBrackets = true;\n                            hasOpenSquareBracket = true;\n                            chClass = CharacterClass.None;\n                            break;\n                        case CharCode.CloseSquareBracket:\n                            inSquareBrackets = false;\n                            chClass = (hasOpenSquareBracket ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        case CharCode.OpenCurlyBrace:\n                            hasOpenCurlyBracket = true;\n                            chClass = CharacterClass.None;\n                            break;\n                        case CharCode.CloseCurlyBrace:\n                            chClass = (hasOpenCurlyBracket ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        /* The following three rules make it that ' or \" or ` are allowed inside links if the link began with a different one */\n                        case CharCode.SingleQuote:\n                            chClass = (linkBeginChCode === CharCode.DoubleQuote || linkBeginChCode === CharCode.BackTick) ? CharacterClass.None : CharacterClass.ForceTermination;\n                            break;\n                        case CharCode.DoubleQuote:\n                            chClass = (linkBeginChCode === CharCode.SingleQuote || linkBeginChCode === CharCode.BackTick) ? CharacterClass.None : CharacterClass.ForceTermination;\n                            break;\n                        case CharCode.BackTick:\n                            chClass = (linkBeginChCode === CharCode.SingleQuote || linkBeginChCode === CharCode.DoubleQuote) ? CharacterClass.None : CharacterClass.ForceTermination;\n                            break;\n                        case CharCode.Asterisk:\n                            // `*` terminates a link if the link began with `*`\n                            chClass = (linkBeginChCode === CharCode.Asterisk) ? CharacterClass.ForceTermination : CharacterClass.None;\n                            break;\n                        case CharCode.Pipe:\n                            // `|` terminates a link if the link began with `|`\n                            chClass = (linkBeginChCode === CharCode.Pipe) ? CharacterClass.ForceTermination : CharacterClass.None;\n                            break;\n                        case CharCode.Space:\n                            // ` ` allow space in between [ and ]\n                            chClass = (inSquareBrackets ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        default:\n                            chClass = classifier.get(chCode);\n                    }\n\n                    // Check if character terminates link\n                    if (chClass === CharacterClass.ForceTermination) {\n                        result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, j));\n                        resetStateMachine = true;\n                    }\n                } else if (state === State.End) {\n\n                    let chClass: CharacterClass;\n                    if (chCode === CharCode.OpenSquareBracket) {\n                        // Allow for the authority part to contain ipv6 addresses which contain [ and ]\n                        hasOpenSquareBracket = true;\n                        chClass = CharacterClass.None;\n                    } else {\n                        chClass = classifier.get(chCode);\n                    }\n\n                    // Check if character terminates link\n                    if (chClass === CharacterClass.ForceTermination) {\n                        resetStateMachine = true;\n                    } else {\n                        state = State.Accept;\n                    }\n                } else {\n                    state = stateMachine.nextState(state, chCode);\n                    if (state === State.Invalid) {\n                        resetStateMachine = true;\n                    }\n                }\n\n                if (resetStateMachine) {\n                    state = State.Start;\n                    hasOpenParens = false;\n                    hasOpenSquareBracket = false;\n                    hasOpenCurlyBracket = false;\n\n                    // Record where the link started\n                    linkBeginIndex = j + 1;\n                    linkBeginChCode = chCode;\n                }\n\n                j++;\n            }\n\n            if (state === State.Accept) {\n                result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, len));\n            }\n\n        }\n\n        return result;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport interface ObjectIdentifier {\n    $ident: number;\n}\n\nexport namespace ObjectIdentifier {\n    export const name = '$ident';\n\n    export function mixin<T>(obj: T, id: number): T & ObjectIdentifier {\n        Object.defineProperty(obj, name, { value: id, enumerable: true });\n        return <T & ObjectIdentifier>obj;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function of(obj: any): number {\n        return obj[name];\n    }\n}\n","/* eslint-disable */\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/base/common/objects.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\nimport { isUndefinedOrNull, isArray, isObject } from './types';\n\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function cloneAndChange(obj: any, changer: (orig: any) => any): any {\n    return _cloneAndChange(obj, changer, new Set());\n}\n\nfunction _cloneAndChange(obj: any, changer: (orig: any) => any, seen: Set<any>): any {\n    if (isUndefinedOrNull(obj)) {\n        return obj;\n    }\n\n    const changed = changer(obj);\n    if (typeof changed !== 'undefined') {\n        return changed;\n    }\n\n    if (isArray(obj)) {\n        const r1: any[] = [];\n        for (const e of obj) {\n            r1.push(_cloneAndChange(e, changer, seen));\n        }\n        return r1;\n    }\n\n    if (isObject(obj)) {\n        if (seen.has(obj)) {\n            throw new Error('Cannot clone recursive data-structure');\n        }\n        seen.add(obj);\n        const r2 = {};\n        for (let i2 in obj) {\n            if (_hasOwnProperty.call(obj, i2)) {\n                (r2 as any)[i2] = _cloneAndChange(obj[i2], changer, seen);\n            }\n        }\n        seen.delete(obj);\n        return r2;\n    }\n\n    return obj;\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// copied from hhttps://github.com/microsoft/vscode/blob/6261075646f055b99068d3688932416f2346dd3b/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L1291-L1310.\n\nexport class ReferenceMap<T> {\n    private readonly _references = new Map<number, T>();\n    private _idPool = 1;\n\n    createReferenceId(value: T): number {\n        const id = this._idPool++;\n        this._references.set(id, value);\n        return id;\n    }\n\n    disposeReferenceId(referenceId: number): T | undefined {\n        const value = this._references.get(referenceId);\n        this._references.delete(referenceId);\n        return value;\n    }\n\n    get(referenceId: number): T | undefined {\n        return this._references.get(referenceId);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/0eb3a02ca2bcfab5faa3dc6e52d7c079efafcab0/src/vs/workbench/api/common/shared/semanticTokensDto.ts\n\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\n\nlet _isLittleEndian = true;\nlet _isLittleEndianComputed = false;\nfunction isLittleEndian(): boolean {\n    if (!_isLittleEndianComputed) {\n        _isLittleEndianComputed = true;\n        const test = new Uint8Array(2);\n        test[0] = 1;\n        test[1] = 2;\n        const view = new Uint16Array(test.buffer);\n        _isLittleEndian = (view[0] === (2 << 8) + 1);\n    }\n    return _isLittleEndian;\n}\n\nexport interface IFullSemanticTokensDto {\n    id: number;\n    type: 'full';\n    data: Uint32Array;\n}\n\nexport interface IDeltaSemanticTokensDto {\n    id: number;\n    type: 'delta';\n    deltas: { start: number; deleteCount: number; data?: Uint32Array; }[];\n}\n\nexport type ISemanticTokensDto = IFullSemanticTokensDto | IDeltaSemanticTokensDto;\n\nconst enum EncodedSemanticTokensType {\n    Full = 1,\n    Delta = 2\n}\n\nfunction reverseEndianness(arr: Uint8Array): void {\n    for (let i = 0, len = arr.length; i < len; i += 4) {\n        // flip bytes 0<->3 and 1<->2\n        const b0 = arr[i + 0];\n        const b1 = arr[i + 1];\n        const b2 = arr[i + 2];\n        const b3 = arr[i + 3];\n        arr[i + 0] = b3;\n        arr[i + 1] = b2;\n        arr[i + 2] = b1;\n        arr[i + 3] = b0;\n    }\n}\n\nfunction toLittleEndianBuffer(arr: Uint32Array): BinaryBuffer {\n    const uint8Arr = new Uint8Array(arr.buffer, arr.byteOffset, arr.length * 4);\n    if (!isLittleEndian()) {\n        // the byte order must be changed\n        reverseEndianness(uint8Arr);\n    }\n    return BinaryBuffer.wrap(uint8Arr);\n}\n\nfunction fromLittleEndianBuffer(buff: BinaryBuffer): Uint32Array {\n    const uint8Arr = buff.buffer;\n    if (!isLittleEndian()) {\n        // the byte order must be changed\n        reverseEndianness(uint8Arr);\n    }\n    if (uint8Arr.byteOffset % 4 === 0) {\n        return new Uint32Array(uint8Arr.buffer, uint8Arr.byteOffset, uint8Arr.length / 4);\n    } else {\n        // unaligned memory access doesn't work on all platforms\n        const data = new Uint8Array(uint8Arr.byteLength);\n        data.set(uint8Arr);\n        return new Uint32Array(data.buffer, data.byteOffset, data.length / 4);\n    }\n}\n\nexport function encodeSemanticTokensDto(semanticTokens: ISemanticTokensDto): BinaryBuffer {\n    const dest = new Uint32Array(encodeSemanticTokensDtoSize(semanticTokens));\n    let offset = 0;\n    dest[offset++] = semanticTokens.id;\n    if (semanticTokens.type === 'full') {\n        dest[offset++] = EncodedSemanticTokensType.Full;\n        dest[offset++] = semanticTokens.data.length;\n        dest.set(semanticTokens.data, offset); offset += semanticTokens.data.length;\n    } else {\n        dest[offset++] = EncodedSemanticTokensType.Delta;\n        dest[offset++] = semanticTokens.deltas.length;\n        for (const delta of semanticTokens.deltas) {\n            dest[offset++] = delta.start;\n            dest[offset++] = delta.deleteCount;\n            if (delta.data) {\n                dest[offset++] = delta.data.length;\n                dest.set(delta.data, offset); offset += delta.data.length;\n            } else {\n                dest[offset++] = 0;\n            }\n        }\n    }\n    return toLittleEndianBuffer(dest);\n}\n\nfunction encodeSemanticTokensDtoSize(semanticTokens: ISemanticTokensDto): number {\n    let result = 0;\n    result += (\n        + 1 // id\n        + 1 // type\n    );\n    if (semanticTokens.type === 'full') {\n        result += (\n            + 1 // data length\n            + semanticTokens.data.length\n        );\n    } else {\n        result += (\n            + 1 // delta count\n        );\n        result += (\n            + 1 // start\n            + 1 // deleteCount\n            + 1 // data length\n        ) * semanticTokens.deltas.length;\n        for (const delta of semanticTokens.deltas) {\n            if (delta.data) {\n                result += delta.data.length;\n            }\n        }\n    }\n    return result;\n}\n\nexport function decodeSemanticTokensDto(_buff: BinaryBuffer): ISemanticTokensDto {\n    const src = fromLittleEndianBuffer(_buff);\n    let offset = 0;\n    const id = src[offset++];\n    const type: EncodedSemanticTokensType = src[offset++];\n    if (type === EncodedSemanticTokensType.Full) {\n        const length = src[offset++];\n        const data = src.subarray(offset, offset + length); offset += length;\n        return {\n            id: id,\n            type: 'full',\n            data: data\n        };\n    }\n    const deltaCount = src[offset++];\n    const deltas: { start: number; deleteCount: number; data?: Uint32Array; }[] = [];\n    for (let i = 0; i < deltaCount; i++) {\n        const start = src[offset++];\n        const deleteCount = src[offset++];\n        const length = src[offset++];\n        let data: Uint32Array | undefined;\n        if (length > 0) {\n            data = src.subarray(offset, offset + length); offset += length;\n        }\n        deltas[i] = { start, deleteCount, data };\n    }\n    return {\n        id: id,\n        type: 'delta',\n        deltas: deltas\n    };\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/uint.ts\n\nexport const enum Constants {\n    /**\n     * Max unsigned integer that fits on 8 bits.\n     */\n    MAX_UINT_8 = 255, // 2^8 - 1\n}\n\nexport function toUint8(v: number): number {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > Constants.MAX_UINT_8) {\n        return Constants.MAX_UINT_8;\n    }\n    return v | 0;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport URI, { UriComponents } from '@theia/core/lib/common/uri';\n\nexport { UriComponents };\n\n// some well known URI schemas\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/network.ts#L9-L79\n// TODO move to network.ts file\nexport namespace Schemes {\n\n    /**\n     * A schema that is used for models that exist in memory\n     * only and that have no correspondence on a server or such.\n     */\n    export const inMemory = 'inmemory';\n\n    /**\n     * A schema that is used for setting files\n     */\n    export const vscode = 'vscode';\n\n    /**\n     * A schema that is used for internal private files\n     */\n    export const internal = 'private';\n\n    /**\n     * A walk-through document.\n     */\n    export const walkThrough = 'walkThrough';\n\n    /**\n     * An embedded code snippet.\n     */\n    export const walkThroughSnippet = 'walkThroughSnippet';\n\n    export const http = 'http';\n\n    export const https = 'https';\n\n    export const file = 'file';\n\n    export const mailto = 'mailto';\n\n    export const untitled = 'untitled';\n\n    export const data = 'data';\n\n    export const command = 'command';\n\n    export const vscodeRemote = 'vscode-remote';\n\n    export const vscodeRemoteResource = 'vscode-remote-resource';\n\n    export const userData = 'vscode-userdata';\n\n    export const vscodeCustomEditor = 'vscode-custom-editor';\n\n    export const vscodeSettings = 'vscode-settings';\n\n    export const webviewPanel = 'webview-panel';\n}\n\nexport function theiaUritoUriComponents(uri: URI): UriComponents {\n    return uri.toComponents();\n}\n","/********************************************************************************\n * Copyright (C) 2022 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as http from 'http';\nimport * as https from 'https';\nimport * as tls from 'tls';\n\nimport { createHttpPatch, createProxyResolver, createTlsPatch, ProxySupportSetting } from '@vscode/proxy-agent';\nimport { PreferenceRegistryExtImpl } from '../../plugin/preference-registry';\nimport { WorkspaceExtImpl } from '../../plugin/workspace';\n\nexport function connectProxyResolver(workspaceExt: WorkspaceExtImpl, configProvider: PreferenceRegistryExtImpl): void {\n    const resolveProxy = createProxyResolver({\n        resolveProxy: async url => workspaceExt.resolveProxy(url),\n        getHttpProxySetting: () => configProvider.getConfiguration('http').get('proxy'),\n        log: () => { },\n        getLogLevel: () => 0,\n        proxyResolveTelemetry: () => { },\n        useHostProxy: true,\n        env: process.env,\n    });\n    const lookup = createPatchedModules(configProvider, resolveProxy);\n    configureModuleLoading(lookup);\n}\n\ninterface PatchedModules {\n    http: typeof http;\n    https: typeof https;\n    tls: typeof tls;\n}\n\nfunction createPatchedModules(configProvider: PreferenceRegistryExtImpl, resolveProxy: ReturnType<typeof createProxyResolver>): PatchedModules {\n    const defaultConfig = 'override' as ProxySupportSetting;\n    const proxySetting = {\n        config: defaultConfig\n    };\n    const certSetting = {\n        config: false\n    };\n    configProvider.onDidChangeConfiguration(() => {\n        const httpConfig = configProvider.getConfiguration('http');\n        proxySetting.config = httpConfig?.get<ProxySupportSetting>('proxySupport') || defaultConfig;\n        certSetting.config = !!httpConfig?.get<boolean>('systemCertificates');\n    });\n\n    return {\n        http: Object.assign(http, createHttpPatch(http, resolveProxy, proxySetting, certSetting, true)),\n        https: Object.assign(https, createHttpPatch(https, resolveProxy, proxySetting, certSetting, true)),\n        tls: Object.assign(tls, createTlsPatch(tls))\n    };\n}\n\nfunction configureModuleLoading(lookup: PatchedModules): void {\n    const node_module = require('module');\n    const original = node_module._load;\n    node_module._load = function (request: string): typeof tls | typeof http | typeof https {\n        if (request === 'tls') {\n            return lookup.tls;\n        }\n\n        if (request !== 'http' && request !== 'https') {\n            return original.apply(this, arguments);\n        }\n\n        // Create a shallow copy of the http(s) module to work around extensions that apply changes to the modules\n        // See for more info: https://github.com/microsoft/vscode/issues/93167\n        return { ...lookup[request] };\n    };\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { dynamicRequire, removeFromCache } from '@theia/core/lib/node/dynamic-require';\nimport { PluginManagerExtImpl } from '../../plugin/plugin-manager';\nimport { LocalizationExt, MAIN_RPC_CONTEXT, Plugin, PluginAPIFactory } from '../../common/plugin-api-rpc';\nimport { PluginMetadata } from '../../common/plugin-protocol';\nimport { createAPIFactory } from '../../plugin/plugin-context';\nimport { EnvExtImpl } from '../../plugin/env';\nimport { PreferenceRegistryExtImpl } from '../../plugin/preference-registry';\nimport { ExtPluginApi, ExtPluginApiBackendInitializationFn } from '../../common/plugin-ext-api-contribution';\nimport { DebugExtImpl } from '../../plugin/debug/debug-ext';\nimport { EditorsAndDocumentsExtImpl } from '../../plugin/editors-and-documents';\nimport { WorkspaceExtImpl } from '../../plugin/workspace';\nimport { MessageRegistryExt } from '../../plugin/message-registry';\nimport { EnvNodeExtImpl } from '../../plugin/node/env-node-ext';\nimport { ClipboardExt } from '../../plugin/clipboard-ext';\nimport { loadManifest } from './plugin-manifest-loader';\nimport { KeyValueStorageProxy } from '../../plugin/plugin-storage';\nimport { WebviewsExtImpl } from '../../plugin/webviews';\nimport { TerminalServiceExtImpl } from '../../plugin/terminal-ext';\nimport { SecretsExtImpl } from '../../plugin/secrets-ext';\nimport { BackendInitializationFn } from '../../common';\nimport { connectProxyResolver } from './plugin-host-proxy';\nimport { LocalizationExtImpl } from '../../plugin/localization-ext';\n\n/**\n * Handle the RPC calls.\n */\nexport class PluginHostRPC {\n\n    private apiFactory: PluginAPIFactory;\n\n    private pluginManager: PluginManagerExtImpl;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(protected readonly rpc: any) {\n    }\n\n    initialize(): void {\n        const envExt = new EnvNodeExtImpl(this.rpc);\n        const storageProxy = new KeyValueStorageProxy(this.rpc);\n        const debugExt = new DebugExtImpl(this.rpc);\n        const editorsAndDocumentsExt = new EditorsAndDocumentsExtImpl(this.rpc);\n        const messageRegistryExt = new MessageRegistryExt(this.rpc);\n        const workspaceExt = new WorkspaceExtImpl(this.rpc, editorsAndDocumentsExt, messageRegistryExt);\n        const preferenceRegistryExt = new PreferenceRegistryExtImpl(this.rpc, workspaceExt);\n        const clipboardExt = new ClipboardExt(this.rpc);\n        const webviewExt = new WebviewsExtImpl(this.rpc, workspaceExt);\n        const terminalService = new TerminalServiceExtImpl(this.rpc);\n        const secretsExt = new SecretsExtImpl(this.rpc);\n        const localizationExt = new LocalizationExtImpl(this.rpc);\n        this.pluginManager = this.createPluginManager(envExt, terminalService, storageProxy, preferenceRegistryExt, webviewExt, secretsExt, localizationExt, this.rpc);\n        this.rpc.set(MAIN_RPC_CONTEXT.HOSTED_PLUGIN_MANAGER_EXT, this.pluginManager);\n        this.rpc.set(MAIN_RPC_CONTEXT.EDITORS_AND_DOCUMENTS_EXT, editorsAndDocumentsExt);\n        this.rpc.set(MAIN_RPC_CONTEXT.WORKSPACE_EXT, workspaceExt);\n        this.rpc.set(MAIN_RPC_CONTEXT.PREFERENCE_REGISTRY_EXT, preferenceRegistryExt);\n        this.rpc.set(MAIN_RPC_CONTEXT.STORAGE_EXT, storageProxy);\n        this.rpc.set(MAIN_RPC_CONTEXT.WEBVIEWS_EXT, webviewExt);\n        this.rpc.set(MAIN_RPC_CONTEXT.SECRETS_EXT, secretsExt);\n\n        this.apiFactory = createAPIFactory(\n            this.rpc,\n            this.pluginManager,\n            envExt,\n            debugExt,\n            preferenceRegistryExt,\n            editorsAndDocumentsExt,\n            workspaceExt,\n            messageRegistryExt,\n            clipboardExt,\n            webviewExt,\n            localizationExt\n        );\n        connectProxyResolver(workspaceExt, preferenceRegistryExt);\n    }\n\n    async terminate(): Promise<void> {\n        await this.pluginManager.terminate();\n    }\n\n    initContext(contextPath: string, plugin: Plugin): void {\n        const { name, version } = plugin.rawModel;\n        console.debug('PLUGIN_HOST(' + process.pid + '): initializing(' + name + '@' + version + ' with ' + contextPath + ')');\n        try {\n            const backendInit = dynamicRequire<{ doInitialization: BackendInitializationFn }>(contextPath);\n            backendInit.doInitialization(this.apiFactory, plugin);\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    createPluginManager(\n        envExt: EnvExtImpl, terminalService: TerminalServiceExtImpl, storageProxy: KeyValueStorageProxy,\n        preferencesManager: PreferenceRegistryExtImpl, webview: WebviewsExtImpl, secretsExt: SecretsExtImpl, localization: LocalizationExt,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        rpc: any\n    ): PluginManagerExtImpl {\n        const { extensionTestsPath } = process.env;\n        const self = this;\n        const pluginManager = new PluginManagerExtImpl({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            loadPlugin(plugin: Plugin): any {\n                console.debug('PLUGIN_HOST(' + process.pid + '): PluginManagerExtImpl/loadPlugin(' + plugin.pluginPath + ')');\n                // cleaning the cache for all files of that plug-in.\n                // this prevents a memory leak on plugin host restart. See for reference:\n                // https://github.com/eclipse-theia/theia/pull/4931\n                // https://github.com/nodejs/node/issues/8443\n                removeFromCache(mod => mod.id.startsWith(plugin.pluginFolder));\n                if (plugin.pluginPath) {\n                    return dynamicRequire(plugin.pluginPath);\n                }\n            },\n            async init(raw: PluginMetadata[]): Promise<[Plugin[], Plugin[]]> {\n                console.log('PLUGIN_HOST(' + process.pid + '): PluginManagerExtImpl/init()');\n                const result: Plugin[] = [];\n                const foreign: Plugin[] = [];\n                for (const plg of raw) {\n                    try {\n                        const pluginModel = plg.model;\n                        const pluginLifecycle = plg.lifecycle;\n\n                        const rawModel = await loadManifest(pluginModel.packagePath);\n                        rawModel.packagePath = pluginModel.packagePath;\n                        if (pluginModel.entryPoint!.frontend) {\n                            foreign.push({\n                                pluginPath: pluginModel.entryPoint.frontend!,\n                                pluginFolder: pluginModel.packagePath,\n                                pluginUri: pluginModel.packageUri,\n                                model: pluginModel,\n                                lifecycle: pluginLifecycle,\n                                rawModel,\n                                isUnderDevelopment: !!plg.isUnderDevelopment\n                            });\n                        } else {\n                            let backendInitPath = pluginLifecycle.backendInitPath;\n                            // if no init path, try to init as regular Theia plugin\n                            if (!backendInitPath) {\n                                backendInitPath = __dirname + '/scanners/backend-init-theia.js';\n                            }\n\n                            const plugin: Plugin = {\n                                pluginPath: pluginModel.entryPoint.backend!,\n                                pluginFolder: pluginModel.packagePath,\n                                pluginUri: pluginModel.packageUri,\n                                model: pluginModel,\n                                lifecycle: pluginLifecycle,\n                                rawModel,\n                                isUnderDevelopment: !!plg.isUnderDevelopment\n                            };\n\n                            self.initContext(backendInitPath, plugin);\n\n                            result.push(plugin);\n                        }\n                    } catch (e) {\n                        console.error(`Failed to initialize ${plg.model.id} plugin.`, e);\n                    }\n                }\n                return [result, foreign];\n            },\n            initExtApi(extApi: ExtPluginApi[]): void {\n                for (const api of extApi) {\n                    if (api.backendInitPath) {\n                        try {\n                            const extApiInit = dynamicRequire<{ provideApi: ExtPluginApiBackendInitializationFn }>(api.backendInitPath);\n                            extApiInit.provideApi(rpc, pluginManager);\n                        } catch (e) {\n                            console.error(e);\n                        }\n                    }\n                }\n            },\n            loadTests: extensionTestsPath ? async () => {\n                /* eslint-disable @typescript-eslint/no-explicit-any */\n                // Require the test runner via node require from the provided path\n                let testRunner: any;\n                let requireError: Error | undefined;\n                try {\n                    testRunner = dynamicRequire(extensionTestsPath);\n                } catch (error) {\n                    requireError = error;\n                }\n\n                // Execute the runner if it follows our spec\n                if (testRunner && typeof testRunner.run === 'function') {\n                    return new Promise<void>((resolve, reject) => {\n                        testRunner.run(extensionTestsPath, (error: any) => {\n                            if (error) {\n                                reject(error.toString());\n                            } else {\n                                resolve(undefined);\n                            }\n                        });\n                    });\n                }\n                throw new Error(requireError ?\n                    requireError.toString() :\n                    `Path ${extensionTestsPath} does not point to a valid extension test runner.`\n                );\n            } : undefined\n        }, envExt, terminalService, storageProxy, secretsExt, preferencesManager, webview, localization, rpc);\n        return pluginManager;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport '@theia/core/shared/reflect-metadata';\nimport { ConnectionClosedError, RPCProtocolImpl } from '../../common/rpc-protocol';\nimport { ProcessTerminatedMessage, ProcessTerminateMessage } from './hosted-plugin-protocol';\nimport { PluginHostRPC } from './plugin-host-rpc';\nimport { IPCChannel } from '@theia/core/lib/node';\n\nconsole.log('PLUGIN_HOST(' + process.pid + ') starting instance');\n\n// override exit() function, to do not allow plugin kill this node\nprocess.exit = function (code?: number): void {\n    const err = new Error('An plugin call process.exit() and it was prevented.');\n    console.warn(err.stack);\n} as (code?: number) => never;\n\n// same for 'crash'(works only in electron)\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst proc = process as any;\nif (proc.crash) {\n    proc.crash = function (): void {\n        const err = new Error('An plugin call process.crash() and it was prevented.');\n        console.warn(err.stack);\n    };\n}\n\nprocess.on('uncaughtException', (err: Error) => {\n    console.error(err);\n});\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst unhandledPromises: Promise<any>[] = [];\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nprocess.on('unhandledRejection', (reason: any, promise: Promise<any>) => {\n    unhandledPromises.push(promise);\n    setTimeout(() => {\n        const index = unhandledPromises.indexOf(promise);\n        if (index >= 0) {\n            promise.catch(err => {\n                unhandledPromises.splice(index, 1);\n                if (terminating && (ConnectionClosedError.is(err) || ConnectionClosedError.is(reason))) {\n                    // during termination it is expected that pending rpc request are rejected\n                    return;\n                }\n                console.error(`Promise rejection not handled in one second: ${err} , reason: ${reason}`);\n                if (err && err.stack) {\n                    console.error(`With stack trace: ${err.stack}`);\n                }\n            });\n        }\n    }, 1000);\n});\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nprocess.on('rejectionHandled', (promise: Promise<any>) => {\n    const index = unhandledPromises.indexOf(promise);\n    if (index >= 0) {\n        unhandledPromises.splice(index, 1);\n    }\n});\n\nlet terminating = false;\nconst channel = new IPCChannel();\nconst rpc = new RPCProtocolImpl(channel);\n\nprocess.on('message', async (message: string) => {\n    if (terminating) {\n        return;\n    }\n    try {\n        const msg = JSON.parse(message);\n        if (ProcessTerminateMessage.is(msg)) {\n            terminating = true;\n            if (msg.stopTimeout) {\n                await Promise.race([\n                    pluginHostRPC.terminate(),\n                    new Promise(resolve => setTimeout(resolve, msg.stopTimeout))\n                ]);\n            } else {\n                await pluginHostRPC.terminate();\n            }\n            rpc.dispose();\n            if (process.send) {\n                process.send(JSON.stringify({ type: ProcessTerminatedMessage.TYPE }));\n            }\n\n        }\n    } catch (e) {\n        console.error(e);\n    }\n});\n\nconst pluginHostRPC = new PluginHostRPC(rpc);\npluginHostRPC.initialize();\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.47.3/src/vs/workbench/api/common/extHostAuthentication.ts\n\nimport { Disposable } from './types-impl';\nimport {\n    AuthenticationExt,\n    AuthenticationMain, Plugin as InternalPlugin,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\n\nexport class AuthenticationExtImpl implements AuthenticationExt {\n    private proxy: AuthenticationMain;\n    private authenticationProviders: Map<string, theia.AuthenticationProvider> = new Map<string, theia.AuthenticationProvider>();\n\n    private onDidChangeSessionsEmitter = new Emitter<theia.AuthenticationSessionsChangeEvent>();\n    readonly onDidChangeSessions: Event<theia.AuthenticationSessionsChangeEvent> = this.onDidChangeSessionsEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.AUTHENTICATION_MAIN);\n    }\n\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions & ({ createIfNone: true } | { forceNewSession: true } | { forceNewSession: theia.AuthenticationForceNewSessionOptions })):\n        Promise<theia.AuthenticationSession>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions & { forceNewSession: true }): Promise<theia.AuthenticationSession>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions & { forceNewSession: theia.AuthenticationForceNewSessionOptions }): Promise<theia.AuthenticationSession>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions): Promise<theia.AuthenticationSession | undefined>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions = {}): Promise<theia.AuthenticationSession | undefined> {\n        const extensionName = requestingExtension.model.displayName || requestingExtension.model.name;\n        const extensionId = requestingExtension.model.id.toLowerCase();\n        return this.proxy.$getSession(providerId, scopes, extensionId, extensionName, options);\n    }\n\n    registerAuthenticationProvider(id: string, label: string, provider: theia.AuthenticationProvider, options?: theia.AuthenticationProviderOptions): theia.Disposable {\n        if (this.authenticationProviders.get(id)) {\n            throw new Error(`An authentication provider with id '${id}' is already registered.`);\n        }\n\n        this.authenticationProviders.set(id, provider);\n        const listener = provider.onDidChangeSessions(e => {\n            this.proxy.$onDidChangeSessions(id, e);\n        });\n\n        this.proxy.$registerAuthenticationProvider(id, label, !!options?.supportsMultipleAccounts);\n\n        return new Disposable(() => {\n            listener.dispose();\n            this.authenticationProviders.delete(id);\n            this.proxy.$unregisterAuthenticationProvider(id);\n        });\n    }\n\n    $createSession(providerId: string, scopes: string[]): Promise<theia.AuthenticationSession> {\n        const authProvider = this.authenticationProviders.get(providerId);\n        if (authProvider) {\n            return Promise.resolve(authProvider.createSession(scopes));\n        }\n\n        throw new Error(`Unable to find authentication provider with handle: ${providerId}`);\n    }\n\n    $removeSession(providerId: string, sessionId: string): Promise<void> {\n        const authProvider = this.authenticationProviders.get(providerId);\n        if (authProvider) {\n            return Promise.resolve(authProvider.removeSession(sessionId));\n        }\n\n        throw new Error(`Unable to find authentication provider with handle: ${providerId}`);\n    }\n\n    async $getSessions(providerId: string, scopes?: string[]): Promise<ReadonlyArray<theia.AuthenticationSession>> {\n        const authProvider = this.authenticationProviders.get(providerId);\n        if (authProvider) {\n            const sessions = await authProvider.getSessions(scopes);\n\n            /* Wrap the session object received from the plugin to prevent serialization mismatches\n            e.g. if the plugin object is constructed with the help of getters they won't be serialized:\n            class SessionImpl implements AuthenticationSession {\n                private _id;\n                get id() {\n                    return _id;\n                }\n            ...\n            } will translate to JSON as { _id: '<sessionid>' } not { id: '<sessionid>' } */\n            return sessions.map(session => ({\n                id: session.id,\n                accessToken: session.accessToken,\n                account: { id: session.account.id, label: session.account.label },\n                scopes: session.scopes\n            }));\n        }\n\n        throw new Error(`Unable to find authentication provider with handle: ${providerId}`);\n    }\n\n    async $onDidChangeAuthenticationSessions(provider: theia.AuthenticationProviderInformation): Promise<void> {\n        this.onDidChangeSessionsEmitter.fire({ provider });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 RedHat and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, ClipboardMain } from '../common';\n\nexport class ClipboardExt implements theia.Clipboard {\n\n    protected readonly proxy: ClipboardMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.CLIPBOARD_MAIN);\n    }\n\n    readText(): Promise<string> {\n        return this.proxy.$readText();\n    }\n\n    writeText(value: string): Promise<void> {\n        return this.proxy.$writeText(value);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as theia from '@theia/plugin';\nimport * as model from '../common/plugin-api-rpc-model';\nimport { CommandRegistryExt, PLUGIN_RPC_CONTEXT as Ext, CommandRegistryMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable } from './types-impl';\nimport { DisposableCollection } from '@theia/core';\nimport { KnownCommands } from './known-commands';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type Handler = <T>(...args: any[]) => T | PromiseLike<T | undefined>;\n\nexport interface ArgumentProcessor {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    processArgument(arg: any): any;\n}\n\nexport class CommandRegistryImpl implements CommandRegistryExt {\n\n    private proxy: CommandRegistryMain;\n    private readonly commands = new Set<string>();\n    private readonly handlers = new Map<string, Handler>();\n    private readonly argumentProcessors: ArgumentProcessor[];\n    private readonly commandsConverter: CommandsConverter;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.COMMAND_REGISTRY_MAIN);\n        this.argumentProcessors = [];\n        this.commandsConverter = new CommandsConverter(this);\n    }\n\n    get converter(): CommandsConverter {\n        return this.commandsConverter;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    registerCommand(command: theia.CommandDescription, handler?: Handler, thisArg?: any): Disposable {\n        if (this.commands.has(command.id)) {\n            throw new Error(`Command ${command.id} already exist`);\n        }\n        this.commands.add(command.id);\n        this.proxy.$registerCommand(command);\n\n        const toDispose: Disposable[] = [];\n        if (handler) {\n            toDispose.push(this.registerHandler(command.id, handler, thisArg));\n        }\n        toDispose.push(Disposable.create(() => {\n            this.commands.delete(command.id);\n            this.proxy.$unregisterCommand(command.id);\n        }));\n        return Disposable.from(...toDispose);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    registerHandler(commandId: string, handler: Handler, thisArg?: any): Disposable {\n        if (this.handlers.has(commandId)) {\n            throw new Error(`Command \"${commandId}\" already has handler`);\n        }\n        this.proxy.$registerHandler(commandId);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.handlers.set(commandId, (...args: any[]) => handler.apply(thisArg, args));\n        return Disposable.create(() => {\n            this.handlers.delete(commandId);\n            this.proxy.$unregisterHandler(commandId);\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined> {\n        if (this.handlers.has(id)) {\n            return this.executeLocalCommand(id, ...args);\n        } else {\n            return Promise.reject(new Error(`Command: ${id} does not exist.`));\n        }\n    }\n\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined> {\n        if (this.handlers.has(id)) {\n            return this.executeLocalCommand(id, ...args);\n        } else if (KnownCommands.mapped(id)) {\n            // Using the KnownCommand exclusions, convert the commands manually\n            return KnownCommands.map(id, args, (mappedId: string, mappedArgs: any[] | undefined, mappedResult: KnownCommands.ConversionFunction) => {\n                const mr: KnownCommands.ConversionFunction = mappedResult;\n                return this.proxy.$executeCommand(mappedId, ...mappedArgs || []).then((result: any) => {\n                    if (!result) {\n                        return undefined;\n                    }\n                    if (!mr) {\n                        return result;\n                    }\n                    return mr(result);\n                });\n            }\n            );\n        } else {\n            return this.proxy.$executeCommand(id, ...args);\n        }\n    }\n    /* eslint-enable @typescript-eslint/no-explicit-any */\n\n    getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n        return this.proxy.$getKeyBinding(commandId);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async executeLocalCommand<T>(id: string, ...args: any[]): Promise<T | undefined> {\n        const handler = this.handlers.get(id);\n        if (handler) {\n            return handler<T>(...args.map(arg => this.argumentProcessors.reduce((r, p) => p.processArgument(r), arg)));\n        } else {\n            throw new Error(`No handler exists for command '${id}'`);\n        }\n    }\n\n    async getCommands(filterUnderscoreCommands: boolean = false): Promise<string[]> {\n        const result = await this.proxy.$getCommands();\n        if (filterUnderscoreCommands) {\n            return result.filter(command => command[0] !== '_');\n        }\n        return result;\n    }\n\n    registerArgumentProcessor(processor: ArgumentProcessor): void {\n        this.argumentProcessors.push(processor);\n    }\n}\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.37.1/src/vs/workbench/api/common/extHostCommands.ts#L217-L259\nexport class CommandsConverter {\n\n    private readonly safeCommandId: string;\n    private readonly commands: CommandRegistryImpl;\n    private readonly commandsMap = new Map<number, theia.Command>();\n    private handle = 0;\n    private isSafeCommandRegistered: boolean;\n\n    constructor(commands: CommandRegistryImpl) {\n        this.safeCommandId = `theia_safe_cmd_${Date.now().toString()}`;\n        this.commands = commands;\n        this.isSafeCommandRegistered = false;\n    }\n\n    /**\n     * Convert to a command that can be safely passed over JSON-RPC.\n     */\n    toSafeCommand(command: undefined, disposables: DisposableCollection): undefined;\n    toSafeCommand(command: theia.Command, disposables: DisposableCollection): model.Command;\n    toSafeCommand(command: theia.Command | undefined, disposables: DisposableCollection): model.Command | undefined;\n    toSafeCommand(command: theia.Command | undefined, disposables: DisposableCollection): model.Command | undefined {\n        if (!command) {\n            return undefined;\n        }\n\n        const result = this.toInternalCommand(command);\n        if (KnownCommands.mapped(result.id)) {\n            return result;\n        }\n\n        if (!this.isSafeCommandRegistered) {\n            this.commands.registerCommand({ id: this.safeCommandId }, this.executeSafeCommand, this);\n            this.isSafeCommandRegistered = true;\n        }\n\n        if (command.arguments && command.arguments.length > 0) {\n            const id = this.handle++;\n            this.commandsMap.set(id, command);\n            disposables.push(new Disposable(() => this.commandsMap.delete(id)));\n            result.id = this.safeCommandId;\n            result.arguments = [id];\n        }\n\n        return result;\n    }\n\n    protected toInternalCommand(external: theia.Command): model.Command {\n        // we're deprecating Command.id, so it has to be optional.\n        // Existing code will have compiled against a non - optional version of the field, so asserting it to exist is ok\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return KnownCommands.map(external.command, external.arguments, (mappedId: string, mappedArgs: any[]) =>\n        ({\n            id: mappedId,\n            title: external.title || ' ',\n            tooltip: external.tooltip,\n            arguments: mappedArgs\n        }));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private executeSafeCommand<R>(...args: any[]): PromiseLike<R | undefined> {\n        const command = this.commandsMap.get(args[0]);\n        if (!command || !command.command) {\n            return Promise.reject(`command ${args[0]} not found`);\n        }\n        return this.commands.executeCommand(command.command, ...(command.arguments || []));\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { CommandRegistryImpl } from './command-registry';\nimport { UriComponents } from '../common/uri-components';\nimport { CommentThreadCollapsibleState, CommentThreadState, URI } from './types-impl';\nimport {\n    Range,\n    Comment,\n    CommentThreadState as CommentThreadStateModel,\n    CommentThreadCollapsibleState as CommentThreadCollapsibleStateModel,\n    CommentOptions\n} from '../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from './documents';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { fromMarkdown, fromRange, toRange } from './type-converters';\nimport {\n    CommentsCommandArg, CommentsContextCommandArg, CommentsEditCommandArg,\n    CommentsExt,\n    CommentsMain,\n    CommentThreadChanges,\n    Plugin as InternalPlugin,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.3/src/vs/workbench/api/common/extHostComments.ts\n\ntype ProviderHandle = number;\n\nexport class CommentsExtImpl implements CommentsExt {\n    private handle = 0;\n    private readonly proxy: CommentsMain;\n    private readonly commentControllers: Map<ProviderHandle, CommentController> = new Map<ProviderHandle, CommentController>();\n    private readonly commentControllersByExtension: Map<string, CommentController[]> = new Map<string, CommentController[]>();\n\n    constructor(readonly rpc: RPCProtocol, readonly commands: CommandRegistryImpl, readonly _documents: DocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.COMMENTS_MAIN);\n\n        commands.registerArgumentProcessor({\n            processArgument: arg => {\n                if (CommentsCommandArg.is(arg)) {\n                    const commentController = this.commentControllers.get(arg.commentControlHandle);\n\n                    if (!commentController) {\n                        return arg;\n                    }\n\n                    const commentThread = commentController.getCommentThread(arg.commentThreadHandle);\n\n                    if (!commentThread) {\n                        return arg;\n                    }\n\n                    return {\n                        thread: commentThread,\n                        text: arg.text\n                    };\n                } else if (CommentsContextCommandArg.is(arg)) {\n                    const commentController = this.commentControllers.get(arg.commentControlHandle);\n\n                    if (!commentController) {\n                        return arg;\n                    }\n\n                    const commentThread = commentController.getCommentThread(arg.commentThreadHandle);\n\n                    if (!commentThread) {\n                        return arg;\n                    }\n\n                    const comment = commentThread.getCommentByUniqueId(arg.commentUniqueId);\n\n                    if (!comment) {\n                        return arg;\n                    }\n\n                    return comment;\n                } else if (CommentsEditCommandArg.is(arg)) {\n                    const commentController = this.commentControllers.get(arg.commentControlHandle);\n\n                    if (!commentController) {\n                        return arg;\n                    }\n\n                    const commentThread = commentController.getCommentThread(arg.commentThreadHandle);\n\n                    if (!commentThread) {\n                        return arg;\n                    }\n\n                    const comment = commentThread.getCommentByUniqueId(arg.commentUniqueId);\n\n                    if (!comment) {\n                        return arg;\n                    }\n\n                    comment.body = arg.text;\n                    return comment;\n                }\n\n                return arg;\n            }\n        });\n    }\n\n    createCommentController(plugin: InternalPlugin, id: string, label: string): theia.CommentController {\n        const handle = this.handle++;\n        const commentController = new CommentController(plugin.model.id, this.proxy, handle, id, label);\n        this.commentControllers.set(commentController.handle, commentController);\n\n        const commentControllers = this.commentControllersByExtension.get(plugin.model.id.toLowerCase()) || [];\n        commentControllers.push(commentController);\n        this.commentControllersByExtension.set(plugin.model.id.toLowerCase(), commentControllers);\n\n        return commentController;\n    }\n\n    $createCommentThreadTemplate(commentControllerHandle: number, uriComponents: UriComponents, range: Range): void {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (!commentController) {\n            return;\n        }\n\n        commentController.$createCommentThreadTemplate(uriComponents, range);\n    }\n\n    async $updateCommentThreadTemplate(commentControllerHandle: number, threadHandle: number, range: Range): Promise<void> {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (!commentController) {\n            return;\n        }\n\n        commentController.$updateCommentThreadTemplate(threadHandle, range);\n    }\n\n    async $deleteCommentThread(commentControllerHandle: number, commentThreadHandle: number): Promise<void> {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (commentController) {\n            commentController.$deleteCommentThread(commentThreadHandle);\n        }\n    }\n\n    async $provideCommentingRanges(commentControllerHandle: number, uriComponents: UriComponents, token: theia.CancellationToken): Promise<Range[] | undefined> {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (!commentController || !commentController.commentingRangeProvider) {\n            return Promise.resolve(undefined);\n        }\n\n        const documentData = this._documents.getDocumentData(URI.revive(uriComponents));\n        if (documentData) {\n            const ranges: theia.Range[] | undefined | null = await commentController.commentingRangeProvider!.provideCommentingRanges(documentData.document, token);\n            if (ranges) {\n                return ranges.map(x => fromRange(x));\n            }\n        }\n    }\n}\n\ntype CommentThreadModification = Partial<{\n    range: theia.Range,\n    label: string | undefined,\n    contextValue: string | undefined,\n    comments: theia.Comment[],\n    collapsibleState: theia.CommentThreadCollapsibleState\n    state: theia.CommentThreadState\n    canReply: boolean;\n}>;\n\nexport class ExtHostCommentThread implements theia.CommentThread, theia.Disposable {\n    private static _handlePool: number = 0;\n    readonly handle = ExtHostCommentThread._handlePool++;\n    public commentHandle: number = 0;\n\n    private modifications: CommentThreadModification = Object.create(null);\n\n    set threadId(id: string) {\n        this._id = id;\n    }\n\n    get threadId(): string {\n        return this._id!;\n    }\n\n    get id(): string {\n        return this._id!;\n    }\n\n    get resource(): theia.Uri {\n        return this._uri;\n    }\n\n    get uri(): theia.Uri {\n        return this._uri;\n    }\n\n    private readonly _onDidUpdateCommentThread = new Emitter<void>();\n    readonly onDidUpdateCommentThread = this._onDidUpdateCommentThread.event;\n\n    set range(range: theia.Range) {\n        if (!range.isEqual(this._range)) {\n            this._range = range;\n            this.modifications.range = range;\n            this._onDidUpdateCommentThread.fire();\n        }\n    }\n\n    get range(): theia.Range {\n        return this._range;\n    }\n\n    private _label: string | undefined;\n\n    get label(): string | undefined {\n        return this._label;\n    }\n\n    set label(label: string | undefined) {\n        this._label = label;\n        this.modifications.label = label;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private _contextValue: string | undefined;\n\n    get contextValue(): string | undefined {\n        return this._contextValue;\n    }\n\n    set contextValue(context: string | undefined) {\n        this._contextValue = context;\n        this.modifications.contextValue = context;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    get comments(): theia.Comment[] {\n        return this._comments;\n    }\n\n    set comments(newComments: theia.Comment[]) {\n        this._comments = newComments;\n        this.modifications.comments = newComments;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private collapseState?: theia.CommentThreadCollapsibleState;\n\n    get collapsibleState(): theia.CommentThreadCollapsibleState {\n        return this.collapseState!;\n    }\n\n    set collapsibleState(newState: theia.CommentThreadCollapsibleState) {\n        this.collapseState = newState;\n        this.modifications.collapsibleState = newState;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private _state?: theia.CommentThreadState;\n\n    get state(): theia.CommentThreadState {\n        return this._state!;\n    }\n\n    set state(newState: theia.CommentThreadState) {\n        if (this._state !== newState) {\n            this._state = newState;\n            this.modifications.state = newState;\n            this._onDidUpdateCommentThread.fire();\n        }\n    }\n\n    private localDisposables: Disposable[];\n\n    private _isDisposed: boolean;\n\n    public get isDisposed(): boolean {\n        return this._isDisposed;\n    }\n\n    private _canReply: boolean = true;\n    get canReply(): boolean {\n        return this._canReply;\n    }\n\n    set canReply(canReply: boolean) {\n        this._canReply = canReply;\n        this.modifications.canReply = canReply;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private commentsMap: Map<theia.Comment, number> = new Map<theia.Comment, number>();\n\n    private acceptInputDisposables = new DisposableCollection();\n\n    constructor(\n        private proxy: CommentsMain,\n        private commentController: CommentController,\n        private _id: string | undefined,\n        private _uri: theia.Uri,\n        private _range: theia.Range,\n        private _comments: theia.Comment[],\n        extensionId: string\n    ) {\n        if (this._id === undefined) {\n            this._id = `${commentController.id}.${this.handle}`;\n        }\n\n        this.proxy.$createCommentThread(\n            this.commentController.handle,\n            this.handle,\n            this._id,\n            this._uri,\n            fromRange(this._range),\n            extensionId\n        );\n\n        this.localDisposables = [];\n        this._isDisposed = false;\n\n        this.localDisposables.push(this.onDidUpdateCommentThread(() => {\n            this.eventuallyUpdateCommentThread();\n        }));\n\n        // set up comments after ctor to batch update events.\n        this.comments = _comments;\n    }\n\n    eventuallyUpdateCommentThread(): void {\n        if (this._isDisposed) {\n            return;\n        }\n\n        const modified = (value: keyof CommentThreadModification): boolean =>\n            Object.prototype.hasOwnProperty.call(this.modifications, value);\n\n        const formattedModifications: CommentThreadChanges = {};\n        if (modified('range')) {\n            formattedModifications.range = fromRange(this._range);\n        }\n        if (modified('label')) {\n            formattedModifications.label = this.label;\n        }\n        if (modified('contextValue')) {\n            formattedModifications.contextValue = this.contextValue;\n        }\n        if (modified('comments')) {\n            formattedModifications.comments =\n                this._comments.map(comment => convertToModeComment(this, this.commentController, comment, this.commentsMap));\n        }\n        if (modified('collapsibleState')) {\n            formattedModifications.collapseState = convertToCollapsibleState(this.collapseState);\n        }\n        if (modified('state')) {\n            formattedModifications.state = convertToState(this._state);\n        }\n        if (modified('canReply')) {\n            formattedModifications.canReply = this.canReply;\n        }\n        this.modifications = {};\n\n        this.proxy.$updateCommentThread(\n            this.commentController.handle,\n            this.handle,\n            this._id!,\n            this._uri,\n            formattedModifications\n        );\n    }\n\n    getCommentByUniqueId(uniqueId: number): theia.Comment | undefined {\n        for (const key of this.commentsMap) {\n            const comment = key[0];\n            const id = key[1];\n            if (uniqueId === id) {\n                return comment;\n            }\n        }\n\n        return;\n    }\n\n    dispose(): void {\n        this._isDisposed = true;\n        this.acceptInputDisposables.dispose();\n        this.localDisposables.forEach(disposable => disposable.dispose());\n        this.proxy.$deleteCommentThread(\n            this.commentController.handle,\n            this.handle\n        );\n    }\n}\n\nclass CommentController implements theia.CommentController {\n\n    constructor(\n        private extension: string,\n        private proxy: CommentsMain,\n        private _handle: number,\n        private _id: string,\n        private _label: string\n    ) {\n        this.proxy.$registerCommentController(this.handle, _id, _label);\n    }\n\n    private readonly threads: Map<number, ExtHostCommentThread> = new Map<number, ExtHostCommentThread>();\n    readonly commentingRangeProvider?: theia.CommentingRangeProvider;\n\n    get id(): string {\n        return this._id;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get handle(): number {\n        return this._handle;\n    }\n\n    private _options: CommentOptions | undefined;\n\n    get options(): CommentOptions | undefined {\n        return this._options;\n    }\n\n    set options(options: CommentOptions | undefined) {\n        this._options = options;\n\n        this.proxy.$updateCommentControllerFeatures(this.handle, { options: this._options });\n    }\n\n    createCommentThread(resource: theia.Uri, range: theia.Range, comments: theia.Comment[]): theia.CommentThread;\n    createCommentThread(arg0: theia.Uri | string, arg1: theia.Uri | theia.Range, arg2: theia.Range | theia.Comment[], arg3?: theia.Comment[]): theia.CommentThread {\n        if (typeof arg0 === 'string') {\n            const commentThread = new ExtHostCommentThread(this.proxy, this, arg0, arg1 as theia.Uri, arg2 as theia.Range, arg3 as theia.Comment[], this.extension);\n            this.threads.set(commentThread.handle, commentThread);\n            return commentThread;\n        } else {\n            const commentThread = new ExtHostCommentThread(this.proxy, this, undefined, arg0 as theia.Uri, arg1 as theia.Range, arg2 as theia.Comment[], this.extension);\n            this.threads.set(commentThread.handle, commentThread);\n            return commentThread;\n        }\n    }\n\n    $createCommentThreadTemplate(uriComponents: UriComponents, range: Range): ExtHostCommentThread {\n        const commentThread = new ExtHostCommentThread(this.proxy, this, undefined, URI.revive(uriComponents), toRange(range), [], this.extension);\n        commentThread.collapsibleState = CommentThreadCollapsibleStateModel.Expanded;\n        this.threads.set(commentThread.handle, commentThread);\n        return commentThread;\n    }\n\n    $updateCommentThreadTemplate(threadHandle: number, range: Range): void {\n        const thread = this.threads.get(threadHandle);\n        if (thread) {\n            thread.range = toRange(range);\n        }\n    }\n\n    $deleteCommentThread(threadHandle: number): void {\n        const thread = this.threads.get(threadHandle);\n\n        if (thread) {\n            thread.dispose();\n        }\n\n        this.threads.delete(threadHandle);\n    }\n\n    getCommentThread(handle: number): ExtHostCommentThread | undefined {\n        return this.threads.get(handle);\n    }\n\n    dispose(): void {\n        this.threads.forEach(value => {\n            value.dispose();\n        });\n\n        this.proxy.$unregisterCommentController(this.handle);\n    }\n}\n\nfunction convertToModeComment(thread: ExtHostCommentThread, commentController: CommentController, theiaComment: theia.Comment, commentsMap: Map<theia.Comment, number>): Comment {\n    let commentUniqueId = commentsMap.get(theiaComment)!;\n    if (!commentUniqueId) {\n        commentUniqueId = ++thread.commentHandle;\n        commentsMap.set(theiaComment, commentUniqueId);\n    }\n\n    const iconPath = theiaComment.author && theiaComment.author.iconPath ? theiaComment.author.iconPath.toString() : undefined;\n    const date = theiaComment.timestamp ? theiaComment.timestamp.toISOString() : undefined;\n\n    return {\n        mode: theiaComment.mode,\n        contextValue: theiaComment.contextValue,\n        uniqueIdInThread: commentUniqueId,\n        body: fromMarkdown(theiaComment.body),\n        userName: theiaComment.author.name,\n        userIconPath: iconPath,\n        label: theiaComment.label,\n        timestamp: date,\n    };\n}\n\nfunction convertToCollapsibleState(kind: theia.CommentThreadCollapsibleState | undefined): CommentThreadCollapsibleStateModel {\n    if (kind !== undefined) {\n        switch (kind) {\n            case CommentThreadCollapsibleState.Expanded:\n                return CommentThreadCollapsibleStateModel.Expanded;\n            case CommentThreadCollapsibleState.Collapsed:\n                return CommentThreadCollapsibleStateModel.Collapsed;\n        }\n    }\n    return CommentThreadCollapsibleStateModel.Collapsed;\n}\n\nfunction convertToState(kind: theia.CommentThreadState | undefined): CommentThreadStateModel {\n    if (kind !== undefined) {\n        switch (kind) {\n            case CommentThreadState.Resolved:\n                return CommentThreadStateModel.Resolved;\n            case CommentThreadState.Unresolved:\n                return CommentThreadStateModel.Unresolved;\n        }\n    }\n    return CommentThreadStateModel.Unresolved;\n}\n","// *****************************************************************************\n// Copyright (C) 2021 SAP SE or an SAP affiliate company and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/53eac52308c4611000a171cc7bf1214293473c78/src/vs/workbench/api/common/extHostCustomEditors.ts\n\nimport { CustomEditorsExt, CustomEditorsMain, Plugin, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable, URI } from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport { DocumentsExtImpl } from './documents';\nimport { WebviewImpl, WebviewsExtImpl } from './webviews';\nimport { CancellationToken, CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { WorkspaceExtImpl } from './workspace';\nimport { Cache } from '../common/cache';\n\nexport class CustomEditorsExtImpl implements CustomEditorsExt {\n    private readonly proxy: CustomEditorsMain;\n    private readonly editorProviders = new EditorProviderStore();\n    private readonly documents = new CustomDocumentStore();\n\n    constructor(rpc: RPCProtocol,\n        private readonly documentExt: DocumentsExtImpl,\n        private readonly webviewExt: WebviewsExtImpl,\n        private readonly workspace: WorkspaceExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.CUSTOM_EDITORS_MAIN);\n    }\n\n    registerCustomEditorProvider(\n        viewType: string,\n        provider: theia.CustomReadonlyEditorProvider | theia.CustomTextEditorProvider,\n        options: { webviewOptions?: theia.WebviewPanelOptions, supportsMultipleEditorsPerDocument?: boolean },\n        plugin: Plugin\n    ): theia.Disposable {\n        const disposables = new DisposableCollection();\n        if ('resolveCustomTextEditor' in provider) {\n            disposables.push(this.editorProviders.addTextProvider(viewType, plugin, provider));\n            this.proxy.$registerTextEditorProvider(viewType, options.webviewOptions || {}, {\n                supportsMove: !!provider.moveCustomTextEditor,\n            });\n        } else {\n            disposables.push(this.editorProviders.addCustomProvider(viewType, plugin, provider));\n\n            if (this.supportEditing(provider)) {\n                disposables.push(provider.onDidChangeCustomDocument((e: theia.CustomDocumentEditEvent | theia.CustomDocumentContentChangeEvent) => {\n                    const entry = this.getCustomDocumentEntry(viewType, e.document.uri);\n                    if (isEditEvent(e)) {\n                        const editId = entry.addEdit(e);\n                        this.proxy.$onDidEdit(e.document.uri, viewType, editId, e.label);\n                    } else {\n                        this.proxy.$onContentChange(e.document.uri, viewType);\n                    }\n                }));\n            }\n\n            this.proxy.$registerCustomEditorProvider(viewType, options.webviewOptions || {}, !!options.supportsMultipleEditorsPerDocument);\n        }\n\n        return Disposable.from(\n            disposables,\n            Disposable.create(() => {\n                this.proxy.$unregisterEditorProvider(viewType);\n            })\n        );\n    }\n\n    async $createCustomDocument(resource: UriComponents, viewType: string, openContext: theia.CustomDocumentOpenContext, cancellation: CancellationToken): Promise<{\n        editable: boolean;\n    }> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n\n        if (entry.type !== CustomEditorType.Custom) {\n            throw new Error(`Invalid provide type for '${viewType}'`);\n        }\n\n        const revivedResource = URI.revive(resource);\n        const document = await entry.provider.openCustomDocument(revivedResource, openContext, cancellation);\n        this.documents.add(viewType, document);\n\n        return { editable: this.supportEditing(entry.provider) };\n    }\n\n    async $disposeCustomDocument(resource: UriComponents, viewType: string): Promise<void> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n\n        if (entry.type !== CustomEditorType.Custom) {\n            throw new Error(`Invalid provider type for '${viewType}'`);\n        }\n\n        const revivedResource = URI.revive(resource);\n        const { document } = this.getCustomDocumentEntry(viewType, revivedResource);\n        this.documents.delete(viewType, document);\n        document.dispose();\n    }\n\n    async $resolveWebviewEditor<T>(\n        resource: UriComponents,\n        handler: string,\n        viewType: string,\n        title: string,\n        widgetOpenerOptions: T | undefined,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        cancellation: CancellationToken\n    ): Promise<void> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n        const panel = this.webviewExt.createWebviewPanel(viewType, title, {}, options, entry.plugin, handler);\n        const webviewOptions = WebviewImpl.toWebviewOptions(options, this.workspace, entry.plugin);\n        await this.proxy.$createCustomEditorPanel(handler, title, widgetOpenerOptions, webviewOptions);\n\n        const revivedResource = URI.revive(resource);\n\n        switch (entry.type) {\n            case CustomEditorType.Custom: {\n                const { document } = this.getCustomDocumentEntry(viewType, revivedResource);\n                return entry.provider.resolveCustomEditor(document, panel, cancellation);\n            }\n            case CustomEditorType.Text: {\n                const document = this.documentExt.getDocument(revivedResource);\n                return entry.provider.resolveCustomTextEditor(document, panel, cancellation);\n            }\n            default: {\n                throw new Error('Unknown webview provider type');\n            }\n        }\n    }\n\n    getCustomDocumentEntry(viewType: string, resource: UriComponents): CustomDocumentStoreEntry {\n        const entry = this.documents.get(viewType, URI.revive(resource));\n        if (!entry) {\n            throw new Error('No custom document found');\n        }\n        return entry;\n    }\n\n    $disposeEdits(resourceComponents: UriComponents, viewType: string, editIds: number[]): void {\n        const document = this.getCustomDocumentEntry(viewType, resourceComponents);\n        document.disposeEdits(editIds);\n    }\n\n    async $onMoveCustomEditor(handle: string, newResourceComponents: UriComponents, viewType: string): Promise<void> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n\n        if (!(entry.provider as theia.CustomTextEditorProvider).moveCustomTextEditor) {\n            throw new Error(`Provider does not implement move '${viewType}'`);\n        }\n\n        const webview = this.webviewExt.getWebviewPanel(handle);\n        if (!webview) {\n            throw new Error('No webview found');\n        }\n\n        const resource = URI.revive(newResourceComponents);\n        const document = this.documentExt.getDocument(resource);\n        const cancellationSource = new CancellationTokenSource();\n        await (entry.provider as theia.CustomTextEditorProvider).moveCustomTextEditor!(document, webview, cancellationSource.token);\n    }\n\n    async $undo(resourceComponents: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        return entry.undo(editId, isDirty);\n    }\n\n    async $redo(resourceComponents: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        return entry.redo(editId, isDirty);\n    }\n\n    async $revert(resourceComponents: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        const provider = this.getCustomEditorProvider(viewType);\n        await provider.revertCustomDocument(entry.document, cancellation);\n    }\n\n    async $onSave(resourceComponents: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        const provider = this.getCustomEditorProvider(viewType);\n        await provider.saveCustomDocument(entry.document, cancellation);\n    }\n\n    async $onSaveAs(resourceComponents: UriComponents, viewType: string, targetResource: UriComponents, cancellation: CancellationToken): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        const provider = this.getCustomEditorProvider(viewType);\n        return provider.saveCustomDocumentAs(entry.document, URI.revive(targetResource), cancellation);\n    }\n\n    private getCustomEditorProvider(viewType: string): theia.CustomEditorProvider {\n        const entry = this.editorProviders.get(viewType);\n        const provider = entry?.provider;\n        if (!provider || !this.supportEditing(provider)) {\n            throw new Error('Custom document is not editable');\n        }\n        return provider;\n    }\n\n    private supportEditing(\n        provider: theia.CustomTextEditorProvider | theia.CustomEditorProvider | theia.CustomReadonlyEditorProvider\n    ): provider is theia.CustomEditorProvider {\n        return !!(provider as theia.CustomEditorProvider).onDidChangeCustomDocument;\n    }\n}\n\nfunction isEditEvent(e: theia.CustomDocumentContentChangeEvent | theia.CustomDocumentEditEvent): e is theia.CustomDocumentEditEvent {\n    return typeof (e as theia.CustomDocumentEditEvent).undo === 'function'\n        && typeof (e as theia.CustomDocumentEditEvent).redo === 'function';\n}\n\nclass CustomDocumentStoreEntry {\n    constructor(\n        readonly document: theia.CustomDocument,\n    ) { }\n\n    private readonly edits = new Cache<theia.CustomDocumentEditEvent>('custom documents');\n\n    addEdit(item: theia.CustomDocumentEditEvent): number {\n        return this.edits.add([item]);\n    }\n\n    async undo(editId: number, isDirty: boolean): Promise<void> {\n        await this.getEdit(editId).undo();\n    }\n\n    async redo(editId: number, isDirty: boolean): Promise<void> {\n        await this.getEdit(editId).redo();\n    }\n\n    disposeEdits(editIds: number[]): void {\n        for (const id of editIds) {\n            this.edits.delete(id);\n        }\n    }\n\n    private getEdit(editId: number): theia.CustomDocumentEditEvent {\n        const edit = this.edits.get(editId, 0);\n        if (!edit) {\n            throw new Error('No edit found');\n        }\n        return edit;\n    }\n}\n\nconst enum CustomEditorType {\n    Text,\n    Custom\n}\n\ntype ProviderEntry = {\n    readonly plugin: Plugin;\n    readonly type: CustomEditorType.Text;\n    readonly provider: theia.CustomTextEditorProvider;\n} | {\n    readonly plugin: Plugin;\n    readonly type: CustomEditorType.Custom;\n    readonly provider: theia.CustomReadonlyEditorProvider;\n};\n\nclass EditorProviderStore {\n    private readonly providers = new Map<string, ProviderEntry>();\n\n    addTextProvider(viewType: string, plugin: Plugin, provider: theia.CustomTextEditorProvider): theia.Disposable {\n        return this.add(CustomEditorType.Text, viewType, plugin, provider);\n    }\n\n    addCustomProvider(viewType: string, plugin: Plugin, provider: theia.CustomReadonlyEditorProvider): theia.Disposable {\n        return this.add(CustomEditorType.Custom, viewType, plugin, provider);\n    }\n\n    get(viewType: string): ProviderEntry | undefined {\n        return this.providers.get(viewType);\n    }\n\n    private add(type: CustomEditorType, viewType: string,\n        plugin: Plugin, provider: theia.CustomTextEditorProvider | theia.CustomReadonlyEditorProvider): theia.Disposable {\n        if (this.providers.has(viewType)) {\n            throw new Error(`Provider for viewType:${viewType} already registered`);\n        }\n        this.providers.set(viewType, { type, plugin: plugin, provider } as ProviderEntry);\n        return new Disposable(() => this.providers.delete(viewType));\n    }\n}\n\nclass CustomDocumentStore {\n    private readonly documents = new Map<string, CustomDocumentStoreEntry>();\n\n    get(viewType: string, resource: theia.Uri): CustomDocumentStoreEntry | undefined {\n        return this.documents.get(this.key(viewType, resource));\n    }\n\n    add(viewType: string, document: theia.CustomDocument): CustomDocumentStoreEntry {\n        const key = this.key(viewType, document.uri);\n        if (this.documents.has(key)) {\n            throw new Error(`Document already exists for viewType:${viewType} resource:${document.uri}`);\n        }\n        const entry = new CustomDocumentStoreEntry(document);\n        this.documents.set(key, entry);\n        return entry;\n    }\n\n    delete(viewType: string, document: theia.CustomDocument): void {\n        const key = this.key(viewType, document.uri);\n        this.documents.delete(key);\n    }\n\n    private key(viewType: string, resource: theia.Uri): string {\n        return `${viewType}@@@${resource}`;\n    }\n}\n\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Path } from '@theia/core/lib/common/path';\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { Breakpoint } from '../../common/plugin-api-rpc-model';\nimport { DebugConfigurationProviderTriggerKind, DebugExt, DebugMain, PLUGIN_RPC_CONTEXT as Ext, TerminalOptionsExt } from '../../common/plugin-api-rpc';\nimport { PluginPackageDebuggersContribution } from '../../common/plugin-protocol';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { ConnectionImpl } from '../../common/connection';\nimport { DEBUG_SCHEME, SCHEME_PATTERN } from '@theia/debug/lib/common/debug-uri-utils';\nimport { Disposable, Breakpoint as BreakpointExt, SourceBreakpoint, FunctionBreakpoint, Location, Range, URI as URIImpl } from '../types-impl';\nimport { PluginDebugAdapterSession } from './plugin-debug-adapter-session';\nimport { PluginDebugAdapterTracker } from './plugin-debug-adapter-tracker';\nimport uuid = require('uuid');\nimport { DebugAdapter } from '@theia/debug/lib/common/debug-model';\nimport { PluginDebugAdapterCreator } from './plugin-debug-adapter-creator';\nimport { NodeDebugAdapterCreator } from '../node/debug/plugin-node-debug-adapter-creator';\nimport { DebugProtocol } from '@vscode/debugprotocol';\nimport { DebugConfiguration } from '@theia/debug/lib/common/debug-configuration';\n\ninterface ConfigurationProviderRecord {\n    handle: number;\n    type: string;\n    trigger: DebugConfigurationProviderTriggerKind,\n    provider: theia.DebugConfigurationProvider;\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport class DebugExtImpl implements DebugExt {\n    // debug sessions by sessionId\n    private sessions = new Map<string, PluginDebugAdapterSession>();\n    private configurationProviderHandleGenerator: number;\n    private configurationProviders: ConfigurationProviderRecord[];\n\n    /**\n     * Only use internally, don't send it to the frontend. It's expensive!\n     * It's already there as a part of the plugin metadata.\n     */\n    private debuggersContributions = new Map<string, PluginPackageDebuggersContribution>();\n    private descriptorFactories = new Map<string, theia.DebugAdapterDescriptorFactory>();\n    private trackerFactories: [string, theia.DebugAdapterTrackerFactory][] = [];\n    private contributionPaths = new Map<string, string>();\n    private contributionTypes = new Map<string, theia.PluginType>();\n\n    private connectionExt: ConnectionImpl;\n    private commandRegistryExt: CommandRegistryImpl;\n\n    private proxy: DebugMain;\n\n    private readonly onDidChangeBreakpointsEmitter = new Emitter<theia.BreakpointsChangeEvent>();\n    private readonly onDidChangeActiveDebugSessionEmitter = new Emitter<theia.DebugSession | undefined>();\n    private readonly onDidTerminateDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidCreateDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidStartDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidReceiveDebugSessionCustomEmitter = new Emitter<theia.DebugSessionCustomEvent>();\n\n    activeDebugSession: theia.DebugSession | undefined;\n    activeDebugConsole: theia.DebugConsole;\n\n    private readonly _breakpoints = new Map<string, theia.Breakpoint>();\n\n    private frontendAdapterCreator = new PluginDebugAdapterCreator();\n    private backendAdapterCreator = new NodeDebugAdapterCreator();\n\n    get breakpoints(): theia.Breakpoint[] {\n        return [...this._breakpoints.values()];\n    }\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DEBUG_MAIN);\n        this.activeDebugConsole = {\n            append: (value: string) => this.proxy.$appendToDebugConsole(value),\n            appendLine: (value: string) => this.proxy.$appendLineToDebugConsole(value)\n        };\n        this.configurationProviderHandleGenerator = 0;\n        this.configurationProviders = [];\n    }\n\n    /**\n     * Sets dependencies.\n     */\n    assistedInject(connectionExt: ConnectionImpl, commandRegistryExt: CommandRegistryImpl): void {\n        this.connectionExt = connectionExt;\n        this.commandRegistryExt = commandRegistryExt;\n    }\n\n    /**\n     * Registers contributions.\n     * @param pluginFolder plugin folder path\n     * @param pluginType plugin type\n     * @param contributions available debuggers contributions\n     */\n    registerDebuggersContributions(pluginFolder: string, pluginType: theia.PluginType, contributions: PluginPackageDebuggersContribution[]): void {\n        contributions.forEach(contribution => {\n            this.contributionPaths.set(contribution.type, pluginFolder);\n            this.contributionTypes.set(contribution.type, pluginType);\n            this.debuggersContributions.set(contribution.type, contribution);\n            this.proxy.$registerDebuggerContribution({\n                type: contribution.type,\n                label: contribution.label || contribution.type\n            });\n            console.log(`Debugger contribution has been registered: ${contribution.type}`);\n        });\n    }\n\n    get onDidReceiveDebugSessionCustomEvent(): theia.Event<theia.DebugSessionCustomEvent> {\n        return this.onDidReceiveDebugSessionCustomEmitter.event;\n    }\n\n    get onDidChangeActiveDebugSession(): theia.Event<theia.DebugSession | undefined> {\n        return this.onDidChangeActiveDebugSessionEmitter.event;\n    }\n\n    get onDidTerminateDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidTerminateDebugSessionEmitter.event;\n    }\n\n    get onDidCreateDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidCreateDebugSessionEmitter.event;\n    }\n\n    get onDidStartDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidStartDebugSessionEmitter.event;\n    }\n\n    get onDidChangeBreakpoints(): theia.Event<theia.BreakpointsChangeEvent> {\n        return this.onDidChangeBreakpointsEmitter.event;\n    }\n\n    addBreakpoints(breakpoints: readonly theia.Breakpoint[]): void {\n        const added: theia.Breakpoint[] = [];\n        for (const b of breakpoints) {\n            if (this._breakpoints.has(b.id)) {\n                continue;\n            }\n            this._breakpoints.set(b.id, b);\n            added.push(b);\n        }\n        if (added.length) {\n            this.onDidChangeBreakpointsEmitter.fire({ added, removed: [], changed: [] });\n            this.proxy.$addBreakpoints(added);\n        }\n    }\n\n    removeBreakpoints(breakpoints: readonly theia.Breakpoint[]): void {\n        const removed: theia.Breakpoint[] = [];\n        const removedIds: string[] = [];\n        for (const b of breakpoints) {\n            if (!this._breakpoints.has(b.id)) {\n                continue;\n            }\n            this._breakpoints.delete(b.id);\n            removed.push(b);\n            removedIds.push(b.id);\n        }\n        if (removed.length) {\n            this.onDidChangeBreakpointsEmitter.fire({ added: [], removed, changed: [] });\n            this.proxy.$removeBreakpoints(removedIds);\n        }\n    }\n\n    startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration, options: theia.DebugSessionOptions): PromiseLike<boolean> {\n        return this.proxy.$startDebugging(folder, nameOrConfiguration, {\n            parentSessionId: options.parentSession?.id,\n            compact: options.compact,\n            consoleMode: options.consoleMode,\n            suppressSaveBeforeStart: options.suppressSaveBeforeStart,\n            suppressDebugStatusbar: options.suppressDebugStatusbar,\n            suppressDebugView: options.suppressDebugView,\n            lifecycleManagedByParent: options.lifecycleManagedByParent,\n            noDebug: options.noDebug\n        });\n    }\n\n    stopDebugging(session?: theia.DebugSession): PromiseLike<void> {\n        return this.proxy.$stopDebugging(session?.id);\n    }\n\n    asDebugSourceUri(source: theia.DebugProtocolSource, session?: theia.DebugSession): theia.Uri {\n        return this.getDebugSourceUri(source, session?.id);\n    }\n\n    private getDebugSourceUri(raw: DebugProtocol.Source, sessionId?: string): theia.Uri {\n        if (raw.sourceReference && raw.sourceReference > 0) {\n            let query = 'ref=' + String(raw.sourceReference);\n            if (sessionId) {\n                query += `&session=${sessionId}`;\n            }\n            return URIImpl.from({ scheme: DEBUG_SCHEME, path: raw.path ?? '', query });\n        }\n        if (!raw.path) {\n            throw new Error('Unrecognized source type: ' + JSON.stringify(raw));\n        }\n        if (raw.path.match(SCHEME_PATTERN)) {\n            return URIImpl.parse(raw.path);\n        }\n        return URIImpl.file(raw.path);\n    }\n\n    registerDebugAdapterDescriptorFactory(debugType: string, factory: theia.DebugAdapterDescriptorFactory): Disposable {\n        if (this.descriptorFactories.has(debugType)) {\n            throw new Error(`Descriptor factory for ${debugType} has been already registered`);\n        }\n        this.descriptorFactories.set(debugType, factory);\n        return Disposable.create(() => this.descriptorFactories.delete(debugType));\n    }\n\n    registerDebugAdapterTrackerFactory(debugType: string, factory: theia.DebugAdapterTrackerFactory): Disposable {\n        if (!factory) {\n            return Disposable.create(() => { });\n        }\n\n        this.trackerFactories.push([debugType, factory]);\n        return Disposable.create(() => {\n            this.trackerFactories = this.trackerFactories.filter(tuple => tuple[1] !== factory);\n        });\n    }\n\n    registerDebugConfigurationProvider(debugType: string, provider: theia.DebugConfigurationProvider, trigger: DebugConfigurationProviderTriggerKind): Disposable {\n        console.log(`Debug configuration provider has been registered: ${debugType}, trigger: ${trigger}`);\n\n        const handle = this.configurationProviderHandleGenerator++;\n        this.configurationProviders.push({ handle, type: debugType, trigger, provider });\n        const descriptor = {\n            handle,\n            type: debugType,\n            trigger,\n            provideDebugConfiguration: !!provider.provideDebugConfigurations,\n            resolveDebugConfigurations: !!provider.resolveDebugConfiguration,\n            resolveDebugConfigurationWithSubstitutedVariables: !!provider.resolveDebugConfigurationWithSubstitutedVariables\n        };\n        this.proxy.$registerDebugConfigurationProvider(descriptor);\n        return Disposable.create(() => {\n            this.configurationProviders = this.configurationProviders.filter(p => (p.handle !== handle));\n            this.proxy.$unregisterDebugConfigurationProvider(handle);\n        });\n    }\n\n    async $onSessionCustomEvent(sessionId: string, event: string, body?: any): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidReceiveDebugSessionCustomEmitter.fire({ event, body, session });\n        }\n    }\n\n    async $sessionDidCreate(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidCreateDebugSessionEmitter.fire(session);\n        }\n    }\n\n    async $sessionDidStart(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidStartDebugSessionEmitter.fire(session);\n        }\n    }\n\n    async $sessionDidDestroy(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidTerminateDebugSessionEmitter.fire(session);\n            this.sessions.delete(sessionId);\n        }\n    }\n\n    async $sessionDidChange(sessionId: string | undefined): Promise<void> {\n        this.activeDebugSession = sessionId ? this.sessions.get(sessionId) : undefined;\n        this.onDidChangeActiveDebugSessionEmitter.fire(this.activeDebugSession);\n    }\n\n    async $breakpointsDidChange(added: Breakpoint[], removed: string[], changed: Breakpoint[]): Promise<void> {\n        const a: theia.Breakpoint[] = [];\n        const r: theia.Breakpoint[] = [];\n        const c: theia.Breakpoint[] = [];\n        for (const b of added) {\n            if (this._breakpoints.has(b.id)) {\n                continue;\n            }\n            const bExt = this.toBreakpointExt(b);\n            if (bExt) {\n                this._breakpoints.set(bExt.id, bExt);\n                a.push(bExt);\n            }\n        }\n        for (const id of removed) {\n            const bExt = this._breakpoints.get(id);\n            if (bExt) {\n                this._breakpoints.delete(id);\n                r.push(bExt);\n            }\n        }\n        for (const b of changed) {\n            const bExt = this._breakpoints.get(b.id);\n            if (bExt) {\n                const { functionName, location, enabled, condition, hitCondition, logMessage } = b;\n                if (bExt instanceof FunctionBreakpoint && functionName) {\n                    Object.assign(bExt, { enabled, condition, hitCondition, logMessage, functionName });\n                } else if (bExt instanceof SourceBreakpoint && location) {\n                    const range = new Range(location.range.startLineNumber, location.range.startColumn, location.range.endLineNumber, location.range.endColumn);\n                    Object.assign(bExt, { enabled, condition, hitCondition, logMessage, location: new Location(URI.revive(location.uri), range) });\n                }\n                c.push(bExt);\n            }\n        }\n        this.onDidChangeBreakpointsEmitter.fire({ added: a, removed: r, changed: c });\n    }\n\n    protected toBreakpointExt({ functionName, location, enabled, condition, hitCondition, logMessage, id }: Breakpoint): BreakpointExt | undefined {\n        if (location) {\n            const range = new Range(location.range.startLineNumber, location.range.startColumn, location.range.endLineNumber, location.range.endColumn);\n            return new SourceBreakpoint(new Location(URI.revive(location.uri), range), enabled, condition, hitCondition, logMessage, id);\n        }\n        if (functionName) {\n            return new FunctionBreakpoint(functionName!, enabled, condition, hitCondition, logMessage, id);\n        }\n        return undefined;\n    }\n\n    async $createDebugSession(debugConfiguration: DebugConfiguration, workspaceFolderUri: string | undefined): Promise<string> {\n        const sessionId = uuid.v4();\n\n        const parentSession = debugConfiguration.parentSessionId ? this.sessions.get(debugConfiguration.parentSessionId) : undefined;\n        const theiaSession: theia.DebugSession = {\n            id: sessionId,\n            type: debugConfiguration.type,\n            name: debugConfiguration.name,\n            parentSession: parentSession,\n            workspaceFolder: this.toWorkspaceFolder(workspaceFolderUri),\n            configuration: debugConfiguration,\n            customRequest: async (command: string, args?: any) => {\n                const response = await this.proxy.$customRequest(sessionId, command, args);\n                if (response && response.success) {\n                    return response.body;\n                }\n                return Promise.reject(new Error(response.message ?? 'custom request failed'));\n            },\n            getDebugProtocolBreakpoint: async (breakpoint: Breakpoint) =>\n                this.proxy.$getDebugProtocolBreakpoint(sessionId, breakpoint.id)\n        };\n\n        const tracker = await this.createDebugAdapterTracker(theiaSession);\n        const communicationProvider = await this.createDebugAdapter(theiaSession, debugConfiguration);\n\n        const debugAdapterSession = new PluginDebugAdapterSession(communicationProvider, tracker, theiaSession);\n        this.sessions.set(sessionId, debugAdapterSession);\n\n        const connection = await this.connectionExt!.ensureConnection(sessionId);\n        debugAdapterSession.start(connection);\n\n        return sessionId;\n    }\n\n    async $terminateDebugSession(sessionId: string): Promise<void> {\n        const debugAdapterSession = this.sessions.get(sessionId);\n        if (debugAdapterSession) {\n            await debugAdapterSession.stop();\n        }\n    }\n\n    async $getTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined> {\n        return this.doGetTerminalCreationOptions(debugType);\n    }\n\n    async doGetTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined> {\n        return undefined;\n    }\n\n    private getConfigurationProviderRecord(handle: number): {\n        provider: theia.DebugConfigurationProvider\n        type: string\n    } {\n        const record = this.configurationProviders.find(p => p.handle === handle);\n        if (!record) {\n            throw new Error('No Debug configuration provider found with given handle number: ' + handle);\n        }\n        const { provider, type } = record;\n        return { provider, type };\n    }\n\n    async $provideDebugConfigurationsByHandle(\n        handle: number,\n        workspaceFolderUri: string | undefined\n    ): Promise<theia.DebugConfiguration[]> {\n        const { provider, type } = this.getConfigurationProviderRecord(handle);\n\n        const configurations = await provider.provideDebugConfigurations?.(\n            this.toWorkspaceFolder(workspaceFolderUri)\n        );\n\n        if (!configurations) {\n            throw new Error(\n                'nothing returned from DebugConfigurationProvider.provideDebugConfigurations, type: ' + type\n            );\n        }\n\n        return configurations;\n    }\n\n    async $resolveDebugConfigurationByHandle(\n        handle: number,\n        workspaceFolderUri: string | undefined,\n        debugConfiguration: theia.DebugConfiguration\n    ): Promise<theia.DebugConfiguration | undefined | null> {\n        const { provider } = this.getConfigurationProviderRecord(handle);\n        return provider.resolveDebugConfiguration?.(\n            this.toWorkspaceFolder(workspaceFolderUri),\n            debugConfiguration\n        );\n    }\n\n    async $resolveDebugConfigurationWithSubstitutedVariablesByHandle(\n        handle: number,\n        workspaceFolderUri: string | undefined,\n        debugConfiguration: theia.DebugConfiguration\n    ): Promise<theia.DebugConfiguration | undefined | null> {\n        const { provider } = this.getConfigurationProviderRecord(handle);\n        return provider.resolveDebugConfigurationWithSubstitutedVariables?.(\n            this.toWorkspaceFolder(workspaceFolderUri),\n            debugConfiguration\n        );\n    }\n\n    protected async createDebugAdapterTracker(session: theia.DebugSession): Promise<theia.DebugAdapterTracker> {\n        return PluginDebugAdapterTracker.create(session, this.trackerFactories);\n    }\n\n    protected async createDebugAdapter(session: theia.DebugSession, debugConfiguration: theia.DebugConfiguration): Promise<DebugAdapter> {\n        const executable = await this.resolveDebugAdapterExecutable(debugConfiguration);\n        const descriptorFactory = this.descriptorFactories.get(session.type);\n        return this.getAdapterCreator(debugConfiguration).createDebugAdapter(session, debugConfiguration, executable, descriptorFactory);\n    }\n\n    protected async resolveDebugAdapterExecutable(debugConfiguration: theia.DebugConfiguration): Promise<theia.DebugAdapterExecutable | undefined> {\n        const { type } = debugConfiguration;\n        const contribution = this.debuggersContributions.get(type);\n        if (contribution) {\n            if (contribution.adapterExecutableCommand) {\n                const executable = await this.commandRegistryExt.executeCommand<theia.DebugAdapterExecutable>(contribution.adapterExecutableCommand);\n                if (executable) {\n                    return executable;\n                }\n            } else {\n                const contributionPath = this.contributionPaths.get(type);\n                if (contributionPath) {\n                    return this.getAdapterCreator(debugConfiguration).resolveDebugAdapterExecutable(contributionPath, contribution);\n                }\n            }\n        }\n\n        throw new Error(`It is not possible to provide debug adapter executable for '${debugConfiguration.type}'.`);\n    }\n\n    private toWorkspaceFolder(folder: string | undefined): theia.WorkspaceFolder | undefined {\n        if (!folder) {\n            return undefined;\n        }\n\n        const uri = URI.parse(folder);\n        const path = new Path(uri.path);\n        return {\n            uri: uri,\n            name: path.base,\n            index: 0\n        };\n    }\n\n    private getAdapterCreator(debugConfiguration: theia.DebugConfiguration): PluginDebugAdapterCreator {\n        const pluginType = this.contributionTypes.get(debugConfiguration.type);\n        return pluginType === 'frontend' ? this.frontendAdapterCreator : this.backendAdapterCreator;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Arm and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DebugAdapter } from '@theia/debug/lib/common/debug-model';\nimport { PluginPackageDebuggersContribution } from '../../common';\nimport { DebugAdapterInlineImplementation } from '../types-impl';\nimport { InlineDebugAdapter } from '@theia/debug/lib/common/inline-debug-adapter';\n\nexport class PluginDebugAdapterCreator {\n    public async resolveDebugAdapterExecutable(_pluginPath: string, _debuggerContribution: PluginPackageDebuggersContribution): Promise<theia.DebugAdapterExecutable | undefined> {\n        // Node is required to run the default executable\n        return undefined;\n    }\n\n    public async createDebugAdapter(\n        session: theia.DebugSession,\n        _debugConfiguration: theia.DebugConfiguration,\n        executable: theia.DebugAdapterExecutable | undefined,\n        descriptorFactory: theia.DebugAdapterDescriptorFactory | undefined\n    ): Promise<DebugAdapter> {\n        if (descriptorFactory) {\n            const descriptor = await descriptorFactory.createDebugAdapterDescriptor(session, executable);\n            if (descriptor) {\n                if (DebugAdapterInlineImplementation.is(descriptor)) {\n                    return this.connectInlineDebugAdapter(descriptor);\n                }\n            }\n        }\n\n        throw new Error('It is not possible to provide debug adapter executable.');\n    }\n\n    public connectInlineDebugAdapter(adapter: DebugAdapterInlineImplementation): InlineDebugAdapter {\n        return new InlineDebugAdapter(adapter.implementation);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { DebugAdapterSessionImpl } from '@theia/debug/lib/common/debug-adapter-session';\nimport * as theia from '@theia/plugin';\nimport { DebugAdapter } from '@theia/debug/lib/common/debug-model';\nimport { DebugChannel } from '@theia/debug/lib/common/debug-service';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Server debug adapter session.\n */\nexport class PluginDebugAdapterSession extends DebugAdapterSessionImpl implements theia.DebugSession {\n\n    constructor(\n        override readonly debugAdapter: DebugAdapter,\n        protected readonly tracker: theia.DebugAdapterTracker,\n        protected readonly theiaSession: theia.DebugSession) {\n\n        super(theiaSession.id, debugAdapter);\n    }\n\n    get parentSession(): theia.DebugSession | undefined {\n        return this.theiaSession.parentSession;\n    }\n\n    get type(): string {\n        return this.theiaSession.type;\n    }\n    get name(): string {\n        return this.theiaSession.name;\n    };\n    get workspaceFolder(): theia.WorkspaceFolder | undefined {\n        return this.theiaSession.workspaceFolder;\n    };\n    get configuration(): theia.DebugConfiguration {\n        return this.theiaSession.configuration;\n    };\n\n    override async start(channel: DebugChannel): Promise<void> {\n        if (this.tracker.onWillStartSession) {\n            this.tracker.onWillStartSession();\n        }\n        await super.start(channel);\n    }\n\n    override async stop(): Promise<void> {\n        if (this.tracker.onWillStopSession) {\n            this.tracker.onWillStopSession();\n        }\n        await super.stop();\n    }\n\n    async customRequest(command: string, args?: any): Promise<any> {\n        return this.theiaSession.customRequest(command, args);\n    }\n\n    async getDebugProtocolBreakpoint(breakpoint: theia.Breakpoint): Promise<theia.DebugProtocolBreakpoint | undefined> {\n        return this.theiaSession.getDebugProtocolBreakpoint(breakpoint);\n    }\n\n    protected override onDebugAdapterError(error: Error): void {\n        if (this.tracker.onError) {\n            this.tracker.onError(error);\n        }\n        super.onDebugAdapterError(error);\n    }\n\n    protected override send(message: string): void {\n        try {\n            super.send(message);\n        } finally {\n            if (this.tracker.onDidSendMessage) {\n                this.tracker.onDidSendMessage(JSON.parse(message));\n            }\n        }\n    }\n\n    protected override write(message: string): void {\n        if (this.tracker.onWillReceiveMessage) {\n            this.tracker.onWillReceiveMessage(JSON.parse(message));\n        }\n        super.write(message);\n    }\n\n    protected override onDebugAdapterExit(): void {\n        if (this.tracker.onExit) {\n            this.tracker.onExit(undefined, undefined);\n        }\n        super.onDebugAdapterExit();\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport * as theia from '@theia/plugin';\n\nexport class PluginDebugAdapterTracker implements theia.DebugAdapterTracker {\n    constructor(protected readonly trackers: theia.DebugAdapterTracker[]) { }\n\n    static async create(session: theia.DebugSession, trackerFactories: [string, theia.DebugAdapterTrackerFactory][]): Promise<PluginDebugAdapterTracker> {\n        const trackers: theia.DebugAdapterTracker[] = [];\n\n        const factories = trackerFactories.filter(tuple => tuple[0] === '*' || tuple[0] === session.type).map(tuple => tuple[1]);\n        for (const factory of factories) {\n            const tracker = await factory.createDebugAdapterTracker(session);\n            if (tracker) {\n                trackers.push(tracker);\n            }\n        }\n\n        return new PluginDebugAdapterTracker(trackers);\n    }\n\n    onWillStartSession(): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillStartSession) {\n                tracker.onWillStartSession();\n            }\n        });\n    }\n\n    onWillReceiveMessage(message: any): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillReceiveMessage) {\n                tracker.onWillReceiveMessage(message);\n            }\n        });\n    }\n\n    onDidSendMessage(message: any): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onDidSendMessage) {\n                tracker.onDidSendMessage(message);\n            }\n        });\n    }\n\n    onWillStopSession(): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillStopSession) {\n                tracker.onWillStopSession();\n            }\n        });\n    }\n\n    onError(error: Error): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onError) {\n                tracker.onError(error);\n            }\n        });\n    }\n\n    onExit(code: number | undefined, signal: string | undefined): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onExit) {\n                tracker.onExit(code, signal);\n            }\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport {\n    DecorationData,\n    DecorationReply,\n    DecorationRequest,\n    DecorationsExt,\n    DecorationsMain,\n    PLUGIN_RPC_CONTEXT, PluginInfo\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable, FileDecoration, URI } from './types-impl';\nimport { CancellationToken } from '@theia/core/lib/common';\nimport { dirname } from 'path';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.52.1/src/vs/workbench/api/common/extHostDecorations.ts#L39-L38\n\ninterface ProviderData {\n    provider: theia.FileDecorationProvider;\n    pluginInfo: PluginInfo;\n}\n\nexport class DecorationsExtImpl implements DecorationsExt {\n    private static handle = 0;\n    private static maxEventSize = 250;\n\n    private readonly providersMap: Map<number, ProviderData>;\n    private readonly proxy: DecorationsMain;\n\n    constructor(readonly rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DECORATIONS_MAIN);\n        this.providersMap = new Map();\n    }\n\n    registerFileDecorationProvider(provider: theia.FileDecorationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const handle = DecorationsExtImpl.handle++;\n        this.providersMap.set(handle, { provider, pluginInfo });\n        this.proxy.$registerDecorationProvider(handle);\n\n        const listener = provider.onDidChangeFileDecorations && provider.onDidChangeFileDecorations(e => {\n            if (!e) {\n                this.proxy.$onDidChange(handle, null);\n                return;\n            }\n            const array = Array.isArray(e) ? e : [e];\n            if (array.length <= DecorationsExtImpl.maxEventSize) {\n                this.proxy.$onDidChange(handle, array);\n                return;\n            }\n\n            // too many resources per event. pick one resource per folder, starting\n            // with parent folders\n            const mapped = array.map(uri => ({ uri, rank: (uri.path.match(/\\//g) || []).length }));\n            const groups = groupBy(mapped, (a, b) => a.rank - b.rank);\n            const picked: URI[] = [];\n            outer: for (const uris of groups) {\n                let lastDirname: string | undefined;\n                for (const obj of uris) {\n                    const myDirname = dirname(obj.uri.path);\n                    if (lastDirname !== myDirname) {\n                        lastDirname = myDirname;\n                        if (picked.push(obj.uri) >= DecorationsExtImpl.maxEventSize) {\n                            break outer;\n                        }\n                    }\n                }\n            }\n            this.proxy.$onDidChange(handle, picked);\n        });\n\n        return new Disposable(() => {\n            listener?.dispose();\n            this.proxy.$unregisterDecorationProvider(handle);\n            this.providersMap.delete(handle);\n        });\n\n        function groupBy<T>(data: ReadonlyArray<T>, compareFn: (a: T, b: T) => number): T[][] {\n            const result: T[][] = [];\n            let currentGroup: T[] | undefined = undefined;\n            for (const element of data.slice(0).sort(compareFn)) {\n                if (!currentGroup || compareFn(currentGroup[0], element) !== 0) {\n                    currentGroup = [element];\n                    result.push(currentGroup);\n                } else {\n                    currentGroup.push(element);\n                }\n            }\n            return result;\n        }\n    }\n\n    async $provideDecorations(handle: number, requests: DecorationRequest[], token: CancellationToken): Promise<DecorationReply> {\n        if (!this.providersMap.has(handle)) {\n            // might have been unregistered in the meantime\n            return Object.create(null);\n        }\n\n        const result: DecorationReply = Object.create(null);\n        const { provider, pluginInfo } = this.providersMap.get(handle)!;\n\n        await Promise.all(requests.map(async request => {\n            try {\n                const { uri, id } = request;\n                const data = await Promise.resolve(provider.provideFileDecoration(URI.revive(uri), token));\n                if (!data) {\n                    return;\n                }\n                try {\n                    FileDecoration.validate(data);\n                    result[id] = <DecorationData>[data.propagate, data.tooltip, data.badge, data.color];\n                } catch (e) {\n                    console.warn(`INVALID decoration from extension '${pluginInfo.name}': ${e}`);\n                }\n            } catch (err) {\n                console.error(err);\n            }\n        }));\n\n        return result;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { PLUGIN_RPC_CONTEXT as Ext, OpenDialogOptionsMain, DialogsMain, SaveDialogOptionsMain, UploadDialogOptionsMain } from '../common/plugin-api-rpc';\nimport { OpenDialogOptions, SaveDialogOptions, UploadDialogOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { URI } from './types-impl';\n\nexport class DialogsExtImpl {\n    private proxy: DialogsMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DIALOGS_MAIN);\n    }\n\n    showOpenDialog(options: OpenDialogOptions): PromiseLike<URI[] | undefined> {\n        const optionsMain = {\n            title: options.title,\n            openLabel: options.openLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            canSelectFiles: typeof options.canSelectFiles === 'boolean' ? options.canSelectFiles : true,\n            canSelectFolders: typeof options.canSelectFolders === 'boolean' ? options.canSelectFolders : false,\n            canSelectMany: options.canSelectMany,\n            filters: options.filters\n        } as OpenDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showOpenDialog(optionsMain).then(result => {\n                if (result) {\n                    const uris = [];\n                    for (let i = 0; i < result.length; i++) {\n                        const uri = URI.parse('file://' + result[i]);\n                        uris.push(uri);\n                    }\n                    resolve(uris);\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showSaveDialog(options: SaveDialogOptions): PromiseLike<URI | undefined> {\n        const optionsMain = {\n            title: options.title,\n            saveLabel: options.saveLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            filters: options.filters\n        } as SaveDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showSaveDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(URI.parse('file://' + result));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showUploadDialog(options: UploadDialogOptions): PromiseLike<URI[] | undefined> {\n        const optionsMain = {\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined\n        } as UploadDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showUploadDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(result.map(uri => URI.parse(uri)));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { ModelChangedEvent, DocumentsMain } from '../common/plugin-api-rpc';\nimport { Range as ARange } from '../common/plugin-api-rpc-model';\nimport { EndOfLine, Position, Range, URI } from './types-impl';\nimport { ok } from '../common/assert';\nimport { PrefixSumComputer } from './prefix-sum-computer';\nimport { getWordAtText, ensureValidWordDefinition } from './word-helper';\n\nconst _modeId2WordDefinition = new Map<string, RegExp | null>();\nexport function setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n    _modeId2WordDefinition.set(modeId, wordDefinition);\n}\nexport function getWordDefinitionFor(modeId: string): RegExp {\n    return _modeId2WordDefinition.get(modeId)!;\n}\n\nexport class DocumentDataExt {\n\n    private disposed = false;\n    private dirty: boolean;\n    private _document: theia.TextDocument;\n    private textLines = new Array<theia.TextLine>();\n    private lineStarts: PrefixSumComputer | undefined;\n\n    constructor(private proxy: DocumentsMain, private uri: URI, private lines: string[], private eol: string,\n        private languageId: string, private versionId: number, isDirty: boolean) {\n        this.dirty = isDirty;\n    }\n\n    dispose(): void {\n        ok(!this.disposed);\n        this.dirty = false;\n        this.disposed = true;\n    }\n\n    onEvents(e: ModelChangedEvent): void {\n        if (e.eol && e.eol !== this.eol) {\n            this.eol = e.eol;\n            this.lineStarts = undefined;\n        }\n\n        // Update my lines\n        const changes = e.changes;\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, len = changes.length; i < len; i++) {\n            const change = changes[i];\n            this.acceptDeleteRange(change.range);\n            this.acceptInsertText(new Position(change.range.startLineNumber, change.range.startColumn), change.text);\n        }\n\n        this.versionId = e.versionId;\n    }\n    acceptIsDirty(isDirty: boolean): void {\n        ok(!this.disposed);\n        this.dirty = isDirty;\n    }\n    acceptLanguageId(langId: string): void {\n        ok(!this.disposed);\n        this.languageId = langId;\n    }\n    get document(): theia.TextDocument {\n        if (!this._document) {\n            const that = this;\n            this._document = {\n                get uri(): theia.Uri { return that.uri; },\n                get fileName(): string { return that.uri.fsPath; },\n                get isUntitled(): boolean { return that.uri.scheme === 'untitled'; },\n                get languageId(): string { return that.languageId; },\n                get version(): number { return that.versionId; },\n                get isClosed(): boolean { return that.disposed; },\n                get isDirty(): boolean { return that.dirty; },\n                save(): Promise<boolean> { return that.save(); },\n                getText(range?): string { return range ? that.getTextInRange(range) : that.getText(); },\n                get eol(): theia.EndOfLine { return that.eol === '\\n' ? EndOfLine.LF : EndOfLine.CRLF; },\n                get lineCount(): number { return that.lines.length; },\n                lineAt(lineOrPos: number | theia.Position): theia.TextLine { return that.lineAt(lineOrPos); },\n                offsetAt(pos): number { return that.offsetAt(pos); },\n                positionAt(offset): theia.Position { return that.positionAt(offset); },\n                validateRange(ran): theia.Range { return that.validateRange(ran); },\n                validatePosition(pos): theia.Position { return that.validatePosition(pos); },\n                getWordRangeAtPosition(pos, regexp?): theia.Range | undefined { return that.getWordRangeAtPosition(pos, regexp); }\n            };\n        }\n        return Object.freeze(this._document);\n    }\n\n    private acceptInsertText(position: Position, insertText: string): void {\n        if (insertText.length === 0) {\n            // Nothing to insert\n            return;\n        }\n        const insertLines = insertText.split(/\\r\\n|\\r|\\n/);\n        if (insertLines.length === 1) {\n            // Inserting text on one line\n            this.setLineText(position.line - 1,\n                this.lines[position.line - 1].substring(0, position.character - 1)\n                + insertLines[0]\n                + this.lines[position.line - 1].substring(position.character - 1)\n            );\n            return;\n        }\n\n        // Append overflowing text from first line to the end of text to insert\n        insertLines[insertLines.length - 1] += this.lines[position.line - 1].substring(position.character - 1);\n\n        // Delete overflowing text from first line and insert text on first line\n        this.setLineText(position.line - 1,\n            this.lines[position.line - 1].substring(0, position.character - 1)\n            + insertLines[0]\n        );\n\n        // Insert new lines & store lengths\n        const newLengths = new Uint32Array(insertLines.length - 1);\n        for (let i = 1; i < insertLines.length; i++) {\n            this.lines.splice(position.line + i - 1, 0, insertLines[i]);\n            newLengths[i - 1] = insertLines[i].length + this.eol.length;\n        }\n\n        if (this.lineStarts) {\n            // update prefix sum\n            this.lineStarts.insertValues(position.line, newLengths);\n        }\n    }\n\n    private acceptDeleteRange(range: ARange): void {\n\n        if (range.startLineNumber === range.endLineNumber) {\n            if (range.startColumn === range.endColumn) {\n                // Nothing to delete\n                return;\n            }\n            // Delete text on the affected line\n            this.setLineText(range.startLineNumber - 1,\n                this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n                + this.lines[range.startLineNumber - 1].substring(range.endColumn - 1)\n            );\n            return;\n        }\n\n        // Take remaining text on last line and append it to remaining text on first line\n        this.setLineText(range.startLineNumber - 1,\n            this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n            + this.lines[range.endLineNumber - 1].substring(range.endColumn - 1)\n        );\n\n        // Delete middle lines\n        this.lines.splice(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        if (this.lineStarts) {\n            this.lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        }\n    }\n\n    private setLineText(lineIndex: number, newValue: string): void {\n        this.lines[lineIndex] = newValue;\n        if (this.lineStarts) {\n            this.lineStarts.changeValue(lineIndex, this.lines[lineIndex].length + this.eol.length);\n        }\n    }\n\n    private save(): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('Document is closed'));\n        }\n        return this.proxy.$trySaveDocument(this.uri);\n    }\n\n    private getTextInRange(_range: theia.Range): string {\n        const range = this.validateRange(_range);\n\n        if (range.isEmpty) {\n            return '';\n        }\n\n        if (range.isSingleLine) {\n            return this.lines[range.start.line].substring(range.start.character, range.end.character);\n        }\n\n        const lineEnding = this.eol;\n        const startLineIndex = range.start.line;\n        const endLineIndex = range.end.line;\n        const resultLines: string[] = [];\n\n        resultLines.push(this.lines[startLineIndex].substring(range.start.character));\n        for (let i = startLineIndex + 1; i < endLineIndex; i++) {\n            resultLines.push(this.lines[i]);\n        }\n        resultLines.push(this.lines[endLineIndex].substring(0, range.end.character));\n\n        return resultLines.join(lineEnding);\n    }\n\n    private validateRange(range: theia.Range): theia.Range {\n        if (!(range instanceof Range)) {\n            throw new Error('Invalid argument');\n        }\n\n        const start = this.validatePosition(range.start);\n        const end = this.validatePosition(range.end);\n\n        if (start === range.start && end === range.end) {\n            return range;\n        }\n        return new Range(start.line, start.character, end.line, end.character);\n    }\n\n    private getText(): string {\n        return this.lines.join(this.eol);\n    }\n\n    private validatePosition(position: theia.Position): theia.Position {\n        if (!(position instanceof Position)) {\n            throw new Error('Invalid argument');\n        }\n\n        let { line, character } = position;\n        let hasChanged = false;\n\n        if (line < 0) {\n            line = 0;\n            character = 0;\n            hasChanged = true;\n        } else if (line >= this.lines.length) {\n            line = this.lines.length - 1;\n            character = this.lines[line].length;\n            hasChanged = true;\n        } else {\n            const maxCharacter = this.lines[line].length;\n            if (character < 0) {\n                character = 0;\n                hasChanged = true;\n            } else if (character > maxCharacter) {\n                character = maxCharacter;\n                hasChanged = true;\n            }\n        }\n\n        if (!hasChanged) {\n            return position;\n        }\n        return new Position(line, character);\n    }\n\n    private lineAt(lineOrPosition: number | theia.Position): theia.TextLine {\n\n        let line: number = -1;\n        if (lineOrPosition instanceof Position) {\n            line = lineOrPosition.line;\n        } else if (typeof lineOrPosition === 'number') {\n            line = lineOrPosition;\n        }\n\n        if (line < 0 || line >= this.lines.length) {\n            throw new Error('Illegal value for `line`');\n        }\n\n        let result = this.textLines[line];\n        if (!result || result.lineNumber !== line || result.text !== this.lines[line]) {\n\n            const text = this.lines[line];\n            const firstNonWhitespaceCharacterIndex = /^(\\s*)/.exec(text)![1].length;\n            const range = new Range(line, 0, line, text.length);\n            const rangeIncludingLineBreak = line < this.lines.length - 1\n                ? new Range(line, 0, line + 1, 0)\n                : range;\n\n            result = Object.freeze({\n                lineNumber: line,\n                range,\n                rangeIncludingLineBreak,\n                text,\n                firstNonWhitespaceCharacterIndex,\n                isEmptyOrWhitespace: firstNonWhitespaceCharacterIndex === text.length\n            });\n\n            this.textLines[line] = result;\n        }\n\n        return result;\n    }\n\n    private offsetAt(position: theia.Position): number {\n        position = this.validatePosition(position);\n        this.ensureLineStarts();\n        return this.lineStarts!.getAccumulatedValue(position.line - 1) + position.character;\n    }\n\n    private ensureLineStarts(): void {\n        if (!this.lineStarts) {\n            const eolLength = this.eol.length;\n            const linesLength = this.lines.length;\n            const lineStartValues = new Uint32Array(linesLength);\n            for (let i = 0; i < linesLength; i++) {\n                lineStartValues[i] = this.lines[i].length + eolLength;\n            }\n            this.lineStarts = new PrefixSumComputer(lineStartValues);\n        }\n    }\n\n    private positionAt(offset: number): theia.Position {\n        offset = Math.floor(offset);\n        offset = Math.max(0, offset);\n\n        this.ensureLineStarts();\n        const out = this.lineStarts!.getIndexOf(offset);\n\n        const lineLength = this.lines[out.index].length;\n\n        return new Position(out.index, Math.min(out.remainder, lineLength));\n    }\n\n    private getWordRangeAtPosition(_position: theia.Position, regexp?: RegExp): theia.Range | undefined {\n        const position = this.validatePosition(_position);\n\n        if (!regexp) {\n            // use default when custom-regexp isn't provided\n            regexp = getWordDefinitionFor(this.languageId);\n\n        } else if (regExpLeadsToEndlessLoop(regexp)) {\n            // use default when custom-regexp is bad\n            console.warn(`[getWordRangeAtPosition]: ignoring custom regexp '${regexp.source}' because it matches the empty string.`);\n            regexp = getWordDefinitionFor(this.languageId);\n        }\n\n        const wordAtText = getWordAtText(\n            position.character + 1,\n            ensureValidWordDefinition(regexp),\n            this.lines[position.line],\n            0\n        );\n\n        if (wordAtText) {\n            return new Range(position.line, wordAtText.startColumn - 1, position.line, wordAtText.endColumn - 1);\n        }\n        return undefined;\n    }\n}\n\nexport function regExpLeadsToEndlessLoop(regexp: RegExp): boolean {\n    // Exit early if it's one of these special cases which are meant to match\n    // against an empty string\n    if (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\n        return false;\n    }\n\n    // We check against an empty string. If the regular expression doesn't advance\n    // (e.g. ends in an endless loop) it will match an empty string.\n    const match = regexp.exec('');\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (match && <any>regexp.lastIndex === 0)!;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * based on https://github.com/Microsoft/vscode/blob/bf9a27ec01f2ef82fc45f69e0c946c7d74a57d3e/src/vs/workbench/api/node/extHostDocumentSaveParticipant.ts\n */\nimport { DocumentsExt, ModelChangedEvent, PLUGIN_RPC_CONTEXT, DocumentsMain, SingleEditOperation } from '../common/plugin-api-rpc';\nimport { TextEdit, URI } from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt, setWordDefinitionFor } from './document-data';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport * as Converter from './type-converters';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Range, TextDocumentShowOptions } from '../common/plugin-api-rpc-model';\n\nexport class DocumentsExtImpl implements DocumentsExt {\n    private toDispose = new DisposableCollection();\n    private _onDidAddDocument = new Emitter<theia.TextDocument>();\n    private _onDidRemoveDocument = new Emitter<theia.TextDocument>();\n    private _onDidChangeDocument = new Emitter<theia.TextDocumentChangeEvent>();\n    private _onDidSaveTextDocument = new Emitter<theia.TextDocument>();\n    private _onWillSaveTextDocument = new Emitter<theia.TextDocumentWillSaveEvent>();\n\n    readonly onDidAddDocument: Event<theia.TextDocument> = this._onDidAddDocument.event;\n    readonly onDidRemoveDocument: Event<theia.TextDocument> = this._onDidRemoveDocument.event;\n    readonly onDidChangeDocument: Event<theia.TextDocumentChangeEvent> = this._onDidChangeDocument.event;\n    readonly onDidSaveTextDocument: Event<theia.TextDocument> = this._onDidSaveTextDocument.event;\n    readonly onWillSaveTextDocument: Event<theia.TextDocumentWillSaveEvent> = this._onWillSaveTextDocument.event;\n\n    private proxy: DocumentsMain;\n    private loadingDocuments = new Map<string, Promise<DocumentDataExt | undefined>>();\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN);\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidAddDocuments(documents => {\n                for (const document of documents) {\n                    this._onDidAddDocument.fire(document.document);\n                }\n            })\n        );\n\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidRemoveDocuments(documents => {\n                for (const data of documents) {\n                    this._onDidRemoveDocument.fire(data.document);\n                }\n            })\n        );\n    }\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void {\n        const uri = URI.revive(startUrl);\n        const uriString = uri.toString();\n\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (data) {\n            this._onDidRemoveDocument.fire(data.document);\n            data.acceptLanguageId(newModeId);\n            this._onDidAddDocument.fire(data.document);\n        }\n    }\n    $acceptModelSaved(strUrl: UriComponents): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        this.$acceptDirtyStateChanged(strUrl, false);\n        if (data) {\n            this._onDidSaveTextDocument.fire(data.document);\n        }\n    }\n\n    async $acceptModelWillSave(strUrl: UriComponents, reason: theia.TextDocumentSaveReason, saveTimeout: number): Promise<SingleEditOperation[]> {\n        const uri = URI.revive(strUrl).toString();\n        const operations: SingleEditOperation[] = [];\n        let didTimeout = false;\n        // try to timeout early to squeeze edits at least from some save participants\n        const didTimeoutHandle = setTimeout(() => didTimeout = true, saveTimeout - 250);\n        try {\n            await this._onWillSaveTextDocument.sequence(async fireEvent => {\n                if (didTimeout) {\n                    return false;\n                }\n                try {\n                    const documentData = this.editorsAndDocuments.getDocument(uri);\n                    if (documentData) {\n                        const { document } = documentData;\n                        await this.fireTextDocumentWillSaveEvent({\n                            document, reason, fireEvent,\n                            accept: operation => operations.push(operation)\n                        });\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n                return !didTimeout;\n            });\n        } finally {\n            clearTimeout(didTimeoutHandle);\n        }\n        return operations;\n    }\n\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    protected async fireTextDocumentWillSaveEvent({\n        document, reason, fireEvent, accept\n    }: {\n        document: theia.TextDocument,\n        reason: theia.TextDocumentSaveReason,\n        fireEvent: (e: theia.TextDocumentWillSaveEvent) => any,\n        accept: (operation: SingleEditOperation) => void\n    }): Promise<void> {\n\n        const promises: PromiseLike<TextEdit[] | any>[] = [];\n        fireEvent(Object.freeze({\n            document, reason,\n            waitUntil(p: PromiseLike<TextEdit[] | any>): void {\n                if (Object.isFrozen(promises)) {\n                    throw new Error('waitUntil can not be called async');\n                }\n                promises.push(p);\n            }\n        }));\n        Object.freeze(promises);\n\n        await Promise.all(promises).then(allEdits => allEdits.forEach(edits => {\n            if (Array.isArray(edits)) {\n                edits.forEach(edit => {\n                    if (TextEdit.isTextEdit(edit)) {\n                        accept(Converter.fromTextEdit(edit));\n                    }\n                });\n            }\n        }));\n    }\n    /* eslint-enable  @typescript-eslint/no-explicit-any */\n\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (!data) {\n            throw new Error('unknown document');\n        }\n        data.acceptIsDirty(isDirty);\n        this._onDidChangeDocument.fire({\n            document: data.document,\n            contentChanges: [],\n            reason: undefined,\n        });\n    }\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (!data) {\n            throw new Error('unknown document');\n        }\n        data.acceptIsDirty(isDirty);\n        data.onEvents(e);\n        this._onDidChangeDocument.fire({\n            document: data.document,\n            reason: e.reason,\n            contentChanges: e.changes.map(change => ({\n                range: Converter.toRange(change.range),\n                rangeOffset: change.rangeOffset,\n                rangeLength: change.rangeLength,\n                text: change.text\n            }))\n        });\n    }\n    getAllDocumentData(): DocumentDataExt[] {\n        return this.editorsAndDocuments.allDocuments();\n    }\n\n    getDocumentData(resource: theia.Uri): DocumentDataExt | undefined {\n        if (resource) {\n            return this.editorsAndDocuments.getDocument(resource.toString());\n        }\n\n        return undefined;\n    }\n\n    public getDocument(resource: theia.Uri): theia.TextDocument {\n        const data = this.getDocumentData(resource);\n        if (!data?.document) {\n            throw new Error(`Unable to retrieve document from URI '${resource}'`);\n        }\n        return data.document;\n    }\n\n    /**\n     * Retrieve document and open it in the editor if need.\n     *\n     * @param uri path to the resource\n     * @param options if options exists, resource will be opened in editor, otherwise only document object is returned\n     */\n    async showDocument(uri: URI, options?: theia.TextDocumentShowOptions): Promise<DocumentDataExt | undefined> {\n        // Determine whether the document is already loading\n        const loadingDocument = this.loadingDocuments.get(uri.toString());\n        if (loadingDocument) {\n            // return the promise if document is already loading\n            return loadingDocument;\n        }\n\n        try {\n            // start opening document\n            const document = this.loadDocument(uri, options);\n            // add loader to the map\n            this.loadingDocuments.set(uri.toString(), document);\n            // wait the document being opened\n            await document;\n            // return opened document\n            return document;\n        } catch (error) {\n            return Promise.reject(error);\n        } finally {\n            // remove loader from the map\n            this.loadingDocuments.delete(uri.toString());\n        }\n    }\n\n    async openDocument(uri: URI): Promise<DocumentDataExt | undefined> {\n        const cached = this.editorsAndDocuments.getDocument(uri.toString());\n        if (cached) {\n            return cached;\n        }\n\n        await this.proxy.$tryOpenDocument(uri);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    private async loadDocument(uri: URI, options?: theia.TextDocumentShowOptions): Promise<DocumentDataExt | undefined> {\n        let documentOptions: TextDocumentShowOptions | undefined;\n        if (options) {\n            let selection: Range | undefined;\n            if (options.selection) {\n                const { start, end } = options.selection;\n                selection = {\n                    startLineNumber: start.line + 1,\n                    startColumn: start.character + 1,\n                    endLineNumber: end.line + 1,\n                    endColumn: end.character + 1\n                };\n            }\n            documentOptions = {\n                selection,\n                preserveFocus: options.preserveFocus,\n                preview: options.preview,\n                viewColumn: options.viewColumn\n            };\n        }\n        await this.proxy.$tryShowDocument(uri, documentOptions);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    async createDocumentData(options?: { language?: string; content?: string }): Promise<URI> {\n        return this.proxy.$tryCreateDocument(options).then(data => URI.revive(data));\n    }\n\n    setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n        setWordDefinitionFor(modeId, wordDefinition);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { EditorsAndDocumentsExt, EditorsAndDocumentsDelta, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { TextEditorExt } from './text-editor';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DocumentDataExt } from './document-data';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\nimport { dispose } from '../common/disposable-util';\nimport { URI } from './types-impl';\n\nexport class EditorsAndDocumentsExtImpl implements EditorsAndDocumentsExt {\n    private activeEditorId: string | null = null;\n\n    private readonly _onDidAddDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidRemoveDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<TextEditorExt[]>();\n    private readonly _onDidChangeActiveTextEditor = new Emitter<TextEditorExt | undefined>();\n\n    readonly onDidAddDocuments: Event<DocumentDataExt[]> = this._onDidAddDocuments.event;\n    readonly onDidRemoveDocuments: Event<DocumentDataExt[]> = this._onDidRemoveDocuments.event;\n    readonly onDidChangeVisibleTextEditors: Event<TextEditorExt[]> = this._onDidChangeVisibleTextEditors.event;\n    readonly onDidChangeActiveTextEditor: Event<TextEditorExt | undefined> = this._onDidChangeActiveTextEditor.event;\n\n    private readonly documents = new Map<string, DocumentDataExt>();\n    private readonly editors = new Map<string, TextEditorExt>();\n\n    constructor(private readonly rpc: RPCProtocol) {\n    }\n\n    async $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): Promise<void> {\n        const removedDocuments = new Array<DocumentDataExt>();\n        const addedDocuments = new Array<DocumentDataExt>();\n        const removedEditors = new Array<TextEditorExt>();\n\n        if (delta.removedDocuments) {\n            for (const uriComponent of delta.removedDocuments) {\n                const uri = URI.revive(uriComponent);\n                const id = uri.toString();\n                const data = this.documents.get(id);\n                this.documents.delete(id);\n                if (data) {\n                    removedDocuments.push(data);\n                }\n            }\n        }\n\n        if (delta.addedDocuments) {\n            for (const data of delta.addedDocuments) {\n                const resource = URI.revive(data.uri);\n                ok(!this.documents.has(resource.toString()), `document '${resource}' already exists!`);\n                const documentData = new DocumentDataExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN),\n                    resource,\n                    data.lines,\n                    data.EOL,\n                    data.modeId,\n                    data.versionId,\n                    data.isDirty\n                );\n                this.documents.set(resource.toString(), documentData);\n                addedDocuments.push(documentData);\n            }\n        }\n\n        if (delta.removedEditors) {\n            for (const id of delta.removedEditors) {\n                const editor = this.editors.get(id);\n                this.editors.delete(id);\n                if (editor) {\n                    removedEditors.push(editor);\n                }\n            }\n        }\n\n        if (delta.addedEditors) {\n            for (const data of delta.addedEditors) {\n                const resource = URI.revive(data.documentUri);\n                ok(this.documents.has(resource.toString()), `document '${resource}' doesn't exist`);\n                ok(!this.editors.has(data.id), `editor '${data.id}' already exists!`);\n\n                const documentData = this.documents.get(resource.toString());\n                const editor = new TextEditorExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN),\n                    data.id,\n                    documentData!,\n                    data.selections.map(Converter.toSelection),\n                    data.options,\n                    data.visibleRanges.map(Converter.toRange),\n                    Converter.toViewColumn(data.editorPosition)\n                );\n                this.editors.set(data.id, editor);\n            }\n        }\n\n        // TODO investigate how to get rid of it to align with VS Code extension host code\n        if (this.activeEditorId && delta.removedEditors && delta.removedEditors.indexOf(this.activeEditorId) !== -1 && this.editors.size !== 0) {\n            // to be compatible with VSCode, when active editor is closed onDidChangeActiveTextEditor\n            // should be triggered with undefined before next editor, if any, become active.\n            this.activeEditorId = null;\n            this._onDidChangeActiveTextEditor.fire(undefined);\n        }\n\n        if (delta.newActiveEditor !== undefined) {\n            ok(delta.newActiveEditor === null || this.editors.has(delta.newActiveEditor), `active editor '${delta.newActiveEditor}' does not exist`);\n            this.activeEditorId = delta.newActiveEditor;\n        }\n\n        dispose(removedDocuments);\n        dispose(removedEditors);\n\n        // now that the internal state is complete, fire events\n        if (delta.removedDocuments) {\n            this._onDidRemoveDocuments.fire(removedDocuments);\n        }\n        if (delta.addedDocuments) {\n            this._onDidAddDocuments.fire(addedDocuments);\n        }\n\n        if (delta.removedEditors || delta.addedEditors) {\n            this._onDidChangeVisibleTextEditors.fire(this.allEditors());\n        }\n        if (delta.newActiveEditor !== undefined) {\n            this._onDidChangeActiveTextEditor.fire(this.activeEditor());\n        }\n    }\n\n    allEditors(): TextEditorExt[] {\n        const result = new Array<TextEditorExt>();\n        this.editors.forEach(editor => result.push(editor));\n        return result;\n    }\n\n    activeEditor(): TextEditorExt | undefined {\n        if (!this.activeEditorId) {\n            return undefined;\n        } else {\n            return this.editors.get(this.activeEditorId);\n        }\n    }\n\n    allDocuments(): DocumentDataExt[] {\n        const result = new Array<DocumentDataExt>();\n        this.documents.forEach(data => result.push(data));\n        return result;\n    }\n\n    getDocument(uri: string): DocumentDataExt | undefined {\n        return this.documents.get(uri);\n    }\n\n    getEditor(id: string): TextEditorExt | undefined {\n        return this.editors.get(id);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { EnvMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { QueryParameters } from '../common/env';\nimport { v4 } from 'uuid';\n\nexport abstract class EnvExtImpl {\n    private proxy: EnvMain;\n    private queryParameters: QueryParameters;\n    private lang: string;\n    private applicationName: string;\n    private defaultShell: string;\n    private ui: theia.UIKind;\n    private envMachineId: string;\n    private envSessionId: string;\n    private host: string;\n    private _remoteName: string | undefined;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.ENV_MAIN);\n        this.envSessionId = v4();\n        this.envMachineId = v4();\n        this._remoteName = undefined;\n    }\n\n    getEnvVariable(envVarName: string): Promise<string | undefined> {\n        return this.proxy.$getEnvVariable(envVarName).then(x => {\n            if (x === null) {\n                return undefined;\n            }\n            return x;\n        });\n    }\n\n    getQueryParameter(queryParamName: string): string | string[] | undefined {\n        return this.queryParameters[queryParamName];\n    }\n\n    getQueryParameters(): QueryParameters {\n        return this.queryParameters;\n    }\n\n    setQueryParameters(queryParams: QueryParameters): void {\n        this.queryParameters = queryParams;\n    }\n\n    setApplicationName(applicationName: string): void {\n        this.applicationName = applicationName;\n    }\n\n    setLanguage(lang: string): void {\n        this.lang = lang;\n    }\n\n    setShell(shell: string): void {\n        this.defaultShell = shell;\n    }\n\n    setUIKind(uiKind: theia.UIKind): void {\n        this.ui = uiKind;\n    }\n\n    setAppHost(appHost: string): void {\n        this.host = appHost;\n    }\n\n    getClientOperatingSystem(): Promise<theia.OperatingSystem> {\n        return this.proxy.$getClientOperatingSystem();\n    }\n\n    get appName(): string {\n        return this.applicationName;\n    }\n\n    abstract get appRoot(): string;\n\n    abstract get isNewAppInstall(): boolean;\n\n    get appHost(): string {\n        return this.host;\n    }\n\n    get remoteName(): string | undefined {\n        return this._remoteName;\n    }\n\n    get language(): string {\n        return this.lang;\n    }\n    get machineId(): string {\n        return this.envMachineId;\n    }\n    get sessionId(): string {\n        return this.envSessionId;\n    }\n    get uriScheme(): string {\n        return 'theia';\n    }\n    get shell(): string {\n        return this.defaultShell;\n    }\n    get uiKind(): theia.UIKind {\n        return this.ui;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * **IMPORTANT** this code is running in the plugin host process and should be closed as possible to VS Code counterpart:\n * https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/api/common/extHostFileSystemEventService.ts\n * One should be able to diff them to see differences.\n */\n\n/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/no-shadow */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/tslint/config */\n\nimport { Emitter, WaitUntilEvent, AsyncEmitter, WaitUntilData } from '@theia/core/lib/common/event';\nimport { IRelativePattern, parse } from '@theia/core/lib/common/glob';\nimport { UriComponents } from '@theia/core/shared/vscode-uri';\nimport { Disposable, URI, WorkspaceEdit } from './types-impl';\nimport { EditorsAndDocumentsExtImpl as ExtHostDocumentsAndEditors } from './editors-and-documents';\nimport type * as vscode from '@theia/plugin';\nimport * as typeConverter from './type-converters';\nimport { FileOperation } from '@theia/filesystem/lib/common/files';\nimport { flatten } from '../common/arrays';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport {\n    Plugin, TextEditorsMain as MainThreadTextEditorsShape, PLUGIN_RPC_CONTEXT, FileSystemEvents, ExtHostFileSystemEventServiceShape,\n    WorkspaceFileEditDto, WorkspaceTextEditDto\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\n\ntype Event<T> = vscode.Event<T>;\ntype IExtensionDescription = Plugin;\ntype IWaitUntil = WaitUntilEvent;\n\nclass FileSystemWatcher implements vscode.FileSystemWatcher {\n\n    private readonly _onDidCreate = new Emitter<vscode.Uri>();\n    private readonly _onDidChange = new Emitter<vscode.Uri>();\n    private readonly _onDidDelete = new Emitter<vscode.Uri>();\n    private _disposable: Disposable;\n    private _config: number;\n\n    get ignoreCreateEvents(): boolean {\n        return Boolean(this._config & 0b001);\n    }\n\n    get ignoreChangeEvents(): boolean {\n        return Boolean(this._config & 0b010);\n    }\n\n    get ignoreDeleteEvents(): boolean {\n        return Boolean(this._config & 0b100);\n    }\n\n    constructor(dispatcher: Event<FileSystemEvents>, globPattern: string | IRelativePattern, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean) {\n\n        this._config = 0;\n        if (ignoreCreateEvents) {\n            this._config += 0b001;\n        }\n        if (ignoreChangeEvents) {\n            this._config += 0b010;\n        }\n        if (ignoreDeleteEvents) {\n            this._config += 0b100;\n        }\n\n        const parsedPattern = parse(globPattern);\n\n        const subscription = dispatcher(events => {\n            if (!ignoreCreateEvents) {\n                for (const created of events.created) {\n                    const uri = URI.revive(created);\n                    if (parsedPattern(uri.fsPath)) {\n                        this._onDidCreate.fire(uri);\n                    }\n                }\n            }\n            if (!ignoreChangeEvents) {\n                for (const changed of events.changed) {\n                    const uri = URI.revive(changed);\n                    if (parsedPattern(uri.fsPath)) {\n                        this._onDidChange.fire(uri);\n                    }\n                }\n            }\n            if (!ignoreDeleteEvents) {\n                for (const deleted of events.deleted) {\n                    const uri = URI.revive(deleted);\n                    if (parsedPattern(uri.fsPath)) {\n                        this._onDidDelete.fire(uri);\n                    }\n                }\n            }\n        });\n\n        this._disposable = Disposable.from(this._onDidCreate, this._onDidChange, this._onDidDelete, subscription);\n    }\n\n    dispose() {\n        this._disposable.dispose();\n    }\n\n    get onDidCreate(): Event<vscode.Uri> {\n        return this._onDidCreate.event;\n    }\n\n    get onDidChange(): Event<vscode.Uri> {\n        return this._onDidChange.event;\n    }\n\n    get onDidDelete(): Event<vscode.Uri> {\n        return this._onDidDelete.event;\n    }\n}\n\ninterface IExtensionListener<E> {\n    extension: IExtensionDescription;\n    (e: E): any;\n}\n\nexport class ExtHostFileSystemEventService implements ExtHostFileSystemEventServiceShape {\n\n    private readonly _onFileSystemEvent = new Emitter<FileSystemEvents>();\n\n    private readonly _onDidRenameFile = new Emitter<vscode.FileRenameEvent>();\n    private readonly _onDidCreateFile = new Emitter<vscode.FileCreateEvent>();\n    private readonly _onDidDeleteFile = new Emitter<vscode.FileDeleteEvent>();\n    private readonly _onWillRenameFile = new AsyncEmitter<vscode.FileWillRenameEvent>();\n    private readonly _onWillCreateFile = new AsyncEmitter<vscode.FileWillCreateEvent>();\n    private readonly _onWillDeleteFile = new AsyncEmitter<vscode.FileWillDeleteEvent>();\n\n    readonly onDidRenameFile: Event<vscode.FileRenameEvent> = this._onDidRenameFile.event;\n    readonly onDidCreateFile: Event<vscode.FileCreateEvent> = this._onDidCreateFile.event;\n    readonly onDidDeleteFile: Event<vscode.FileDeleteEvent> = this._onDidDeleteFile.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly _extHostDocumentsAndEditors: ExtHostDocumentsAndEditors,\n        private readonly _mainThreadTextEditors: MainThreadTextEditorsShape = rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN)\n    ) {\n        //\n    }\n\n    // --- file events\n\n    createFileSystemWatcher(globPattern: string | IRelativePattern, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean): vscode.FileSystemWatcher {\n        return new FileSystemWatcher(this._onFileSystemEvent.event, globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n    }\n\n    $onFileEvent(events: FileSystemEvents) {\n        this._onFileSystemEvent.fire(events);\n    }\n\n    // --- file operations\n\n    $onDidRunFileOperation(operation: FileOperation, target: UriComponents, source: UriComponents | undefined): void {\n        switch (operation) {\n            case FileOperation.MOVE:\n                this._onDidRenameFile.fire(Object.freeze({ files: [{ oldUri: URI.revive(source!), newUri: URI.revive(target) }] }));\n                break;\n            case FileOperation.DELETE:\n                this._onDidDeleteFile.fire(Object.freeze({ files: [URI.revive(target)] }));\n                break;\n            case FileOperation.CREATE:\n                this._onDidCreateFile.fire(Object.freeze({ files: [URI.revive(target)] }));\n                break;\n            default:\n            // ignore, dont send\n        }\n    }\n\n    getOnWillRenameFileEvent(extension: IExtensionDescription): Event<vscode.FileWillRenameEvent> {\n        return this._createWillExecuteEvent(extension, this._onWillRenameFile);\n    }\n\n    getOnWillCreateFileEvent(extension: IExtensionDescription): Event<vscode.FileWillCreateEvent> {\n        return this._createWillExecuteEvent(extension, this._onWillCreateFile);\n    }\n\n    getOnWillDeleteFileEvent(extension: IExtensionDescription): Event<vscode.FileWillDeleteEvent> {\n        return this._createWillExecuteEvent(extension, this._onWillDeleteFile);\n    }\n\n    private _createWillExecuteEvent<E extends IWaitUntil>(extension: IExtensionDescription, emitter: AsyncEmitter<E>): Event<E> {\n        return (listener, thisArg, disposables) => {\n            const wrappedListener: IExtensionListener<E> = function wrapped(e: E) { listener.call(thisArg, e); };\n            wrappedListener.extension = extension;\n            return emitter.event(wrappedListener, undefined, disposables);\n        };\n    }\n\n    async $onWillRunFileOperation(operation: FileOperation, target: UriComponents, source: UriComponents | undefined, timeout: number, token: CancellationToken): Promise<any> {\n        switch (operation) {\n            case FileOperation.MOVE:\n                await this._fireWillEvent(this._onWillRenameFile, { files: [{ oldUri: URI.revive(source!), newUri: URI.revive(target) }] }, timeout, token);\n                break;\n            case FileOperation.DELETE:\n                await this._fireWillEvent(this._onWillDeleteFile, { files: [URI.revive(target)] }, timeout, token);\n                break;\n            case FileOperation.CREATE:\n                await this._fireWillEvent(this._onWillCreateFile, { files: [URI.revive(target)] }, timeout, token);\n                break;\n            default:\n            // ignore, dont send\n        }\n    }\n\n    private async _fireWillEvent<E extends IWaitUntil>(emitter: AsyncEmitter<E>, data: WaitUntilData<E>, timeout: number, token: CancellationToken): Promise<any> {\n\n        const edits: WorkspaceEdit[] = [];\n        await emitter.fire(data, token, async (thenable, listener) => {\n            // ignore all results except for WorkspaceEdits. Those are stored in an array.\n            const now = Date.now();\n            const result = await Promise.resolve(thenable);\n            if (result instanceof WorkspaceEdit) {\n                edits.push(result);\n            }\n\n            if (Date.now() - now > timeout) {\n                console.warn('SLOW file-participant', (<IExtensionListener<E>>listener).extension?.model.id);\n            }\n        });\n\n        if (token.isCancellationRequested) {\n            return;\n        }\n\n        if (edits.length > 0) {\n            // flatten all WorkspaceEdits collected via waitUntil-call\n            // and apply them in one go.\n            const allEdits = new Array<Array<WorkspaceFileEditDto | WorkspaceTextEditDto>>();\n            for (const edit of edits) {\n                const { edits } = typeConverter.fromWorkspaceEdit(edit, this._extHostDocumentsAndEditors);\n                allEdits.push(edits);\n            }\n            return this._mainThreadTextEditors.$tryApplyWorkspaceEdit({ edits: flatten(allEdits) });\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * **IMPORTANT** this code is running in the plugin host process and should be closed as possible to VS Code counterpart:\n * https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/api/common/extHostFileSystem.ts\n * One should be able to diff them to see differences.\n */\n\n/* eslint-disable arrow-body-style */\n/* eslint-disable @typescript-eslint/quotes */\n/* eslint-disable @typescript-eslint/tslint/config */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { UriComponents } from '@theia/core/shared/vscode-uri';\nimport { FileChangeType, FileSystemError, URI } from './types-impl';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, FileSystemExt, FileSystemMain, IFileChangeDto } from '../common/plugin-api-rpc';\nimport * as vscode from '@theia/plugin';\nimport * as files from '@theia/filesystem/lib/common/files';\nimport * as typeConverter from './type-converters';\nimport { Schemes as Schemas } from '../common/uri-components';\nimport { State, StateMachine, LinkComputer, Edge } from '../common/link-computer';\nimport { commonPrefixLength } from '@theia/core/lib/common/strings';\nimport { CharCode } from '@theia/core/lib/common/char-code';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { Emitter } from '@theia/core/shared/vscode-languageserver-protocol';\n\ntype IDisposable = vscode.Disposable;\n\nexport class FsLinkProvider {\n\n    private _schemes: string[] = [];\n    private _stateMachine?: StateMachine;\n\n    add(scheme: string): void {\n        this._stateMachine = undefined;\n        this._schemes.push(scheme);\n    }\n\n    delete(scheme: string): void {\n        const idx = this._schemes.indexOf(scheme);\n        if (idx >= 0) {\n            this._schemes.splice(idx, 1);\n            this._stateMachine = undefined;\n        }\n    }\n\n    private _initStateMachine(): void {\n        if (!this._stateMachine) {\n\n            // sort and compute common prefix with previous scheme\n            // then build state transitions based on the data\n            const schemes = this._schemes.sort();\n            const edges: Edge[] = [];\n            let prevScheme: string | undefined;\n            let prevState: State;\n            let lastState = State.LastKnownState;\n            let nextState = State.LastKnownState;\n            for (const scheme of schemes) {\n\n                // skip the common prefix of the prev scheme\n                // and continue with its last state\n                let pos = !prevScheme ? 0 : commonPrefixLength(prevScheme, scheme);\n                if (pos === 0) {\n                    prevState = State.Start;\n                } else {\n                    prevState = nextState;\n                }\n\n                for (; pos < scheme.length; pos++) {\n                    // keep creating new (next) states until the\n                    // end (and the BeforeColon-state) is reached\n                    if (pos + 1 === scheme.length) {\n                        // Save the last state here, because we need to continue for the next scheme\n                        lastState = nextState;\n                        nextState = State.BeforeColon;\n                    } else {\n                        nextState += 1;\n                    }\n                    edges.push([prevState, scheme.toUpperCase().charCodeAt(pos), nextState]);\n                    edges.push([prevState, scheme.toLowerCase().charCodeAt(pos), nextState]);\n                    prevState = nextState;\n                }\n\n                prevScheme = scheme;\n                // Restore the last state\n                nextState = lastState;\n            }\n\n            // all link must match this pattern `<scheme>:/<more>`\n            edges.push([State.BeforeColon, CharCode.Colon, State.AfterColon]);\n            edges.push([State.AfterColon, CharCode.Slash, State.End]);\n\n            this._stateMachine = new StateMachine(edges);\n        }\n    }\n\n    provideDocumentLinks(document: vscode.TextDocument): vscode.ProviderResult<vscode.DocumentLink[]> {\n        this._initStateMachine();\n\n        const result: vscode.DocumentLink[] = [];\n        const links = LinkComputer.computeLinks({\n            getLineContent(lineNumber: number): string {\n                return document.lineAt(lineNumber - 1).text;\n            },\n            getLineCount(): number {\n                return document.lineCount;\n            }\n        }, this._stateMachine);\n\n        for (const link of links) {\n            const docLink = typeConverter.DocumentLink.to(link);\n            if (docLink.target) {\n                result.push(docLink);\n            }\n        }\n        return result;\n    }\n}\n\nclass ConsumerFileSystem implements vscode.FileSystem {\n\n    constructor(private _proxy: FileSystemMain, private _capabilities: Map<string, number>) { }\n\n    stat(uri: vscode.Uri): Promise<vscode.FileStat> {\n        return this._proxy.$stat(uri).catch(ConsumerFileSystem._handleError);\n    }\n    readDirectory(uri: vscode.Uri): Promise<[string, vscode.FileType][]> {\n        return this._proxy.$readdir(uri).catch(ConsumerFileSystem._handleError);\n    }\n    createDirectory(uri: vscode.Uri): Promise<void> {\n        return this._proxy.$mkdir(uri).catch(ConsumerFileSystem._handleError);\n    }\n    readFile(uri: vscode.Uri): Promise<Uint8Array> {\n        return this._proxy.$readFile(uri).then(buff => buff.buffer).catch(ConsumerFileSystem._handleError);\n    }\n    writeFile(uri: vscode.Uri, content: Uint8Array): Promise<void> {\n        return this._proxy.$writeFile(uri, BinaryBuffer.wrap(content)).catch(ConsumerFileSystem._handleError);\n    }\n    delete(uri: vscode.Uri, options?: { recursive?: boolean; useTrash?: boolean; }): Promise<void> {\n        return this._proxy.$delete(uri, { ...{ recursive: false, useTrash: false }, ...options }).catch(ConsumerFileSystem._handleError);\n    }\n    rename(oldUri: vscode.Uri, newUri: vscode.Uri, options?: { overwrite?: boolean; }): Promise<void> {\n        return this._proxy.$rename(oldUri, newUri, { ...{ overwrite: false }, ...options }).catch(ConsumerFileSystem._handleError);\n    }\n    copy(source: vscode.Uri, destination: vscode.Uri, options?: { overwrite?: boolean }): Promise<void> {\n        return this._proxy.$copy(source, destination, { ...{ overwrite: false }, ...options }).catch(ConsumerFileSystem._handleError);\n    }\n    isWritableFileSystem(scheme: string): boolean | undefined {\n        const capabilities = this._capabilities.get(scheme);\n        if (typeof capabilities === 'number') {\n            return (capabilities & files.FileSystemProviderCapabilities.Readonly) === 0;\n        }\n        return undefined;\n    }\n    private static _handleError(err: any): never {\n        // generic error\n        if (!(err instanceof Error)) {\n            throw new FileSystemError(String(err));\n        }\n\n        // no provider (unknown scheme) error\n        if (err.name === 'ENOPRO') {\n            throw FileSystemError.Unavailable(err.message);\n        }\n\n        // file system error\n        switch (err.name) {\n            case files.FileSystemProviderErrorCode.FileExists: throw FileSystemError.FileExists(err.message);\n            case files.FileSystemProviderErrorCode.FileNotFound: throw FileSystemError.FileNotFound(err.message);\n            case files.FileSystemProviderErrorCode.FileNotADirectory: throw FileSystemError.FileNotADirectory(err.message);\n            case files.FileSystemProviderErrorCode.FileIsADirectory: throw FileSystemError.FileIsADirectory(err.message);\n            case files.FileSystemProviderErrorCode.NoPermissions: throw FileSystemError.NoPermissions(err.message);\n            case files.FileSystemProviderErrorCode.Unavailable: throw FileSystemError.Unavailable(err.message);\n\n            default: throw new FileSystemError(err.message, err.name as files.FileSystemProviderErrorCode);\n        }\n    }\n}\n\nexport class FileSystemExtImpl implements FileSystemExt {\n\n    private readonly _proxy: FileSystemMain;\n    private readonly _linkProvider = new FsLinkProvider();\n    private readonly _fsProvider = new Map<number, vscode.FileSystemProvider>();\n    private readonly _capabilities = new Map<string, number>();\n    private readonly _usedSchemes = new Set<string>();\n    private readonly _watches = new Map<number, IDisposable>();\n\n    private readonly onWillRegisterFileSystemProviderEmitter = new Emitter<FsLinkProvider>();\n    readonly onWillRegisterFileSystemProvider = this.onWillRegisterFileSystemProviderEmitter.event;\n\n    private _handlePool: number = 0;\n\n    readonly fileSystem: vscode.FileSystem;\n\n    constructor(rpc: RPCProtocol) {\n        this._proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.FILE_SYSTEM_MAIN);\n        this.fileSystem = new ConsumerFileSystem(this._proxy, this._capabilities);\n\n        // register used schemes\n        Object.keys(Schemas).forEach(scheme => this._usedSchemes.add(scheme));\n    }\n\n    dispose(): void {\n        this.onWillRegisterFileSystemProviderEmitter.dispose();\n    }\n\n    registerFileSystemProvider(scheme: string, provider: vscode.FileSystemProvider, options: { isCaseSensitive?: boolean, isReadonly?: boolean } = {}) {\n\n        if (this._usedSchemes.has(scheme)) {\n            throw new Error(`a provider for the scheme '${scheme}' is already registered`);\n        }\n\n        this.onWillRegisterFileSystemProviderEmitter.fire(this._linkProvider);\n\n        const handle = this._handlePool++;\n        this._linkProvider.add(scheme);\n        this._usedSchemes.add(scheme);\n        this._fsProvider.set(handle, provider);\n\n        let capabilities = files.FileSystemProviderCapabilities.FileReadWrite;\n        if (options.isCaseSensitive) {\n            capabilities += files.FileSystemProviderCapabilities.PathCaseSensitive;\n        }\n        if (options.isReadonly) {\n            capabilities += files.FileSystemProviderCapabilities.Readonly;\n        }\n        if (typeof provider.copy === 'function') {\n            capabilities += files.FileSystemProviderCapabilities.FileFolderCopy;\n        }\n        if (typeof provider.open === 'function' && typeof provider.close === 'function'\n            && typeof provider.read === 'function' && typeof provider.write === 'function'\n        ) {\n            capabilities += files.FileSystemProviderCapabilities.FileOpenReadWriteClose;\n        }\n\n        this._proxy.$registerFileSystemProvider(handle, scheme, capabilities);\n\n        const subscription = provider.onDidChangeFile(event => {\n            const mapped: IFileChangeDto[] = [];\n            for (const e of event) {\n                const { uri: resource, type } = e;\n                if (resource.scheme !== scheme) {\n                    // dropping events for wrong scheme\n                    continue;\n                }\n                let newType: files.FileChangeType | undefined;\n                switch (type) {\n                    case FileChangeType.Changed:\n                        newType = files.FileChangeType.UPDATED;\n                        break;\n                    case FileChangeType.Created:\n                        newType = files.FileChangeType.ADDED;\n                        break;\n                    case FileChangeType.Deleted:\n                        newType = files.FileChangeType.DELETED;\n                        break;\n                    default:\n                        throw new Error('Unknown FileChangeType');\n                }\n                mapped.push({ resource, type: newType });\n            }\n            this._proxy.$onFileSystemChange(handle, mapped);\n        });\n\n        return {\n            dispose: () => {\n                subscription.dispose();\n                this._linkProvider.delete(scheme);\n                this._usedSchemes.delete(scheme);\n                this._fsProvider.delete(handle);\n                this._proxy.$unregisterProvider(handle);\n            }\n        };\n    }\n\n    private static _asIStat(stat: vscode.FileStat): files.Stat {\n        const { type, ctime, mtime, size, permissions } = stat;\n        return { type, ctime, mtime, size, permissions };\n    }\n\n    $acceptProviderInfos(scheme: string, capabilities?: files.FileSystemProviderCapabilities): void {\n        if (typeof capabilities === 'number') {\n            this._capabilities.set(scheme, capabilities);\n        } else {\n            this._capabilities.delete(scheme);\n        }\n    }\n\n    $stat(handle: number, resource: UriComponents): Promise<files.Stat> {\n        return Promise.resolve(this._getFsProvider(handle).stat(URI.revive(resource))).then(FileSystemExtImpl._asIStat);\n    }\n\n    $readdir(handle: number, resource: UriComponents): Promise<[string, files.FileType][]> {\n        return Promise.resolve(this._getFsProvider(handle).readDirectory(URI.revive(resource)));\n    }\n\n    $readFile(handle: number, resource: UriComponents): Promise<BinaryBuffer> {\n        return Promise.resolve(this._getFsProvider(handle).readFile(URI.revive(resource))).then(data => BinaryBuffer.wrap(data));\n    }\n\n    $writeFile(handle: number, resource: UriComponents, content: BinaryBuffer, opts: files.FileWriteOptions): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).writeFile(URI.revive(resource), content.buffer, opts));\n    }\n\n    $delete(handle: number, resource: UriComponents, opts: files.FileDeleteOptions): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).delete(URI.revive(resource), opts));\n    }\n\n    $rename(handle: number, oldUri: UriComponents, newUri: UriComponents, opts: files.FileOverwriteOptions): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).rename(URI.revive(oldUri), URI.revive(newUri), opts));\n    }\n\n    $copy(handle: number, oldUri: UriComponents, newUri: UriComponents, opts: files.FileOverwriteOptions): Promise<void> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.copy) {\n            throw new Error('FileSystemProvider does not implement \"copy\"');\n        }\n        return Promise.resolve(provider.copy(URI.revive(oldUri), URI.revive(newUri), opts));\n    }\n\n    $mkdir(handle: number, resource: UriComponents): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).createDirectory(URI.revive(resource)));\n    }\n\n    $watch(handle: number, session: number, resource: UriComponents, opts: files.WatchOptions): void {\n        const subscription = this._getFsProvider(handle).watch(URI.revive(resource), opts);\n        this._watches.set(session, subscription);\n    }\n\n    $unwatch(_handle: number, session: number): void {\n        const subscription = this._watches.get(session);\n        if (subscription) {\n            subscription.dispose();\n            this._watches.delete(session);\n        }\n    }\n\n    $open(handle: number, resource: UriComponents, opts: files.FileOpenOptions): Promise<number> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.open) {\n            throw new Error('FileSystemProvider does not implement \"open\"');\n        }\n        return Promise.resolve(provider.open(URI.revive(resource), opts));\n    }\n\n    $close(handle: number, fd: number): Promise<void> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.close) {\n            throw new Error('FileSystemProvider does not implement \"close\"');\n        }\n        return Promise.resolve(provider.close(fd));\n    }\n\n    $read(handle: number, fd: number, pos: number, length: number): Promise<BinaryBuffer> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.read) {\n            throw new Error('FileSystemProvider does not implement \"read\"');\n        }\n        const data = BinaryBuffer.alloc(length);\n        return Promise.resolve(provider.read(fd, pos, data.buffer, 0, length)).then(read => {\n            return data.slice(0, read); // don't send zeros\n        });\n    }\n\n    $write(handle: number, fd: number, pos: number, data: BinaryBuffer): Promise<number> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.write) {\n            throw new Error('FileSystemProvider does not implement \"write\"');\n        }\n        return Promise.resolve(provider.write(fd, pos, data.buffer, 0, data.byteLength));\n    }\n\n    private _getFsProvider(handle: number): vscode.FileSystemProvider {\n        const provider = this._fsProvider.get(handle);\n        if (!provider) {\n            const err = new Error();\n            err.name = 'ENOPRO';\n            err.message = `no provider`;\n            throw err;\n        }\n        return provider;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { Range as R, Position as P, Location as L } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { URI as TheiaURI } from '@theia/core/lib/common/uri';\nimport { cloneAndChange } from '../common/objects';\nimport { Position, Range, Location, CallHierarchyItem, TypeHierarchyItem, URI, TextDocumentShowOptions } from './types-impl';\nimport {\n    fromPosition, fromRange, fromLocation,\n    isModelLocation, toLocation,\n    isModelCallHierarchyItem, fromCallHierarchyItem, toCallHierarchyItem,\n    isModelTypeHierarchyItem, fromTypeHierarchyItem, toTypeHierarchyItem,\n    isModelCallHierarchyIncomingCall, toCallHierarchyIncomingCall,\n    isModelCallHierarchyOutgoingCall, toCallHierarchyOutgoingCall, fromTextDocumentShowOptions\n} from './type-converters';\n\n// Here is a mapping of VSCode commands to monaco commands with their conversions\nexport namespace KnownCommands {\n\n    /**\n     * Commands that you want to apply custom conversions to rather than pass through the automatic args converter.\n     * Would be useful in the case where theia provides some command and you need to provide custom conversions\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const mappings: { [id: string]: [string, (args: any[] | undefined) => any[] | undefined, ((results: any[] | undefined) => any[] | undefined)?] } = {};\n    mappings['editor.action.showReferences'] = ['textEditor.commands.showReferences', createConversionFunction(\n        (uri: URI) => uri.toString(),\n        fromPositionToP,\n        toArrayConversion(fromLocationToL)),\n        createConversionFunction()];\n\n    /**\n     * Mapping of all editor.action commands to their conversion function.\n     * executeCommand<T> inside of the plugin command registry will automatically convert\n     * incoming arguments from vscode api types to monaco types\n     */\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const CONVERT_VSCODE_TO_MONACO = (args: any[] | undefined) => {\n        if (!args) {\n            return args;\n        }\n        const argStack: ConversionFunction[] = [];\n        args.forEach(_ => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            argStack.push((arg: any) => vscodeToMonacoArgsConverter(arg));\n        });\n        if (args) {\n            return createConversionFunction(...argStack)(args);\n        }\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const identity = (args: any[]) => args;\n\n    mappings['editor.action.select.all'] = ['editor.action.select.all', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.toggleHighContrast'] = ['editor.action.toggleHighContrast', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveCarretLeftAction'] = ['editor.action.moveCarretLeftAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveCarretRightAction'] = ['editor.action.moveCarretRightAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transposeLetters'] = ['editor.action.transposeLetters', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.clipboardCopyWithSyntaxHighlightingAction'] = ['editor.action.clipboardCopyWithSyntaxHighlightingAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.commentLine'] = ['editor.action.commentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCommentLine'] = ['editor.action.addCommentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.removeCommentLine'] = ['editor.action.removeCommentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.blockComment'] = ['editor.action.blockComment', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showContextMenu'] = ['editor.action.showContextMenu', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUndo'] = ['cursorUndo', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfold'] = ['editor.unfold', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldRecursively'] = ['editor.unfoldRecursively', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.fold'] = ['editor.fold', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldRecursively'] = ['editor.foldRecursively', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAll'] = ['editor.foldAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldAll'] = ['editor.unfoldAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAllBlockComments'] = ['editor.foldAllBlockComments', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAllMarkerRegions'] = ['editor.foldAllMarkerRegions', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldAllMarkerRegions'] = ['editor.unfoldAllMarkerRegions', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel1'] = ['editor.foldLevel1', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel2'] = ['editor.foldLevel2', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel3'] = ['editor.foldLevel3', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel4'] = ['editor.foldLevel4', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel5'] = ['editor.foldLevel5', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel6'] = ['editor.foldLevel6', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel7'] = ['editor.foldLevel7', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomIn'] = ['editor.action.fontZoomIn', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomOut'] = ['editor.action.fontZoomOut', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomReset'] = ['editor.action.fontZoomReset', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.formatDocument'] = ['editor.action.formatDocument', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.formatSelection'] = ['editor.action.formatSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.copyLinesUpAction'] = ['editor.action.copyLinesUpAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.copyLinesDownAction'] = ['editor.action.copyLinesDownAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveLinesUpAction'] = ['editor.action.moveLinesUpAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveLinesDownAction'] = ['editor.action.moveLinesDownAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sortLinesAscending'] = ['editor.action.sortLinesAscending', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sortLinesDescending'] = ['editor.action.sortLinesDescending', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.trimTrailingWhitespace'] = ['editor.action.trimTrailingWhitespace', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.deleteLines'] = ['editor.action.deleteLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.indentLines'] = ['editor.action.indentLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.outdentLines'] = ['editor.action.outdentLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertLineBefore'] = ['editor.action.insertLineBefore', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertLineAfter'] = ['editor.action.insertLineAfter', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteAllLeft'] = ['deleteAllLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteAllRight'] = ['deleteAllRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.joinLines'] = ['editor.action.joinLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transpose'] = ['editor.action.transpose', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToUppercase'] = ['editor.action.transformToUppercase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToLowercase'] = ['editor.action.transformToLowercase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToTitlecase'] = ['editor.action.transformToTitlecase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.smartSelect.expand'] = ['editor.action.smartSelect.expand', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.smartSelect.shrink'] = ['editor.action.smartSelect.shrink', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.forceRetokenize'] = ['editor.action.forceRetokenize', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.toggleTabFocusMode'] = ['editor.action.toggleTabFocusMode', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.gotoLine'] = ['editor.action.gotoLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.quickOutline'] = ['editor.action.quickOutline', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inPlaceReplace.up'] = ['editor.action.inPlaceReplace.up', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inPlaceReplace.down'] = ['editor.action.inPlaceReplace.down', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.diffReview.next'] = ['editor.action.diffReview.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.diffReview.prev'] = ['editor.action.diffReview.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectToBracket'] = ['editor.action.selectToBracket', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.jumpToBracket'] = ['editor.action.jumpToBracket', CONVERT_VSCODE_TO_MONACO];\n    mappings['actions.findWithSelection'] = ['actions.findWithSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.nextMatchFindAction'] = ['editor.action.nextMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.previousMatchFindAction'] = ['editor.action.previousMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.nextSelectionMatchFindAction'] = ['editor.action.nextSelectionMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.previousSelectionMatchFindAction'] = ['editor.action.previousSelectionMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.openLink'] = ['editor.action.openLink', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.quickFix'] = ['editor.action.quickFix', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.refactor'] = ['editor.action.refactor', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sourceAction'] = ['editor.action.sourceAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.organizeImports'] = ['editor.action.organizeImports', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.autoFix'] = ['editor.action.autoFix', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fixAll'] = ['editor.action.fixAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.rename'] = ['editor.action.rename', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorAbove'] = ['editor.action.insertCursorAbove', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorBelow'] = ['editor.action.insertCursorBelow', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorAtEndOfEachLineSelected'] = ['editor.action.insertCursorAtEndOfEachLineSelected', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addSelectionToNextFindMatch'] = ['editor.action.addSelectionToNextFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addSelectionToPreviousFindMatch'] = ['editor.action.addSelectionToPreviousFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveSelectionToNextFindMatch'] = ['editor.action.moveSelectionToNextFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveSelectionToPreviousFindMatch'] = ['editor.action.moveSelectionToPreviousFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectHighlights'] = ['editor.action.selectHighlights', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.changeAll'] = ['editor.action.changeAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCursorsToBottom'] = ['editor.action.addCursorsToBottom', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCursorsToTop'] = ['editor.action.addCursorsToTop', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.triggerParameterHints'] = ['editor.action.triggerParameterHints', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.next'] = ['editor.action.wordHighlight.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.prev'] = ['editor.action.wordHighlight.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.trigger'] = ['editor.action.wordHighlight.trigger', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showAccessibilityHelp'] = ['editor.action.showAccessibilityHelp', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inspectTokens'] = ['editor.action.inspectTokens', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.next'] = ['editor.action.marker.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.prev'] = ['editor.action.marker.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.nextInFiles'] = ['editor.action.marker.nextInFiles', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.prevInFiles'] = ['editor.action.marker.prevInFiles', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showHover'] = ['editor.action.showHover', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDefinition'] = ['editor.action.revealDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDefinitionAside'] = ['editor.action.revealDefinitionAside', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekDefinition'] = ['editor.action.peekDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDeclaration'] = ['editor.action.revealDeclaration', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekDeclaration'] = ['editor.action.peekDeclaration', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.goToImplementation'] = ['editor.action.goToImplementation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekImplementation'] = ['editor.action.peekImplementation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.goToTypeDefinition'] = ['editor.action.goToTypeDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekTypeDefinition'] = ['editor.action.peekTypeDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.referenceSearch.trigger'] = ['editor.action.referenceSearch.trigger', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.triggerSuggest'] = ['editor.action.triggerSuggest', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeReferenceSearchEditor'] = ['closeReferenceSearchEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['cancelSelection'] = ['cancelSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorBottom'] = ['cursorBottom', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorBottomSelect'] = ['cursorBottomSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorDown'] = ['cursorDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorDownSelect'] = ['cursorDownSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorEnd'] = ['cursorEnd', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorEndSelect'] = ['cursorEndSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorHome'] = ['cursorHome', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorHomeSelect'] = ['cursorHomeSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorLeft'] = ['cursorLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorLeftSelect'] = ['cursorLeftSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageDown'] = ['cursorPageDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageDownSelect'] = ['cursorPageDownSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageUp'] = ['cursorPageUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageUpSelect'] = ['cursorPageUpSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorRight'] = ['cursorRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorRightSelect'] = ['cursorRightSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorTop'] = ['cursorTop', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorTopSelect'] = ['cursorTopSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUp'] = ['cursorUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUpSelect'] = ['cursorUpSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteLeft'] = ['deleteLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteRight'] = ['deleteRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectAll'] = ['editor.action.selectAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['expandLineSelection'] = ['expandLineSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['outdent'] = ['outdent', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollLineDown'] = ['scrollLineDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollLineUp'] = ['scrollLineUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollPageDown'] = ['scrollPageDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollPageUp'] = ['scrollPageUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['tab'] = ['tab', CONVERT_VSCODE_TO_MONACO];\n    mappings['removeSecondaryCursors'] = ['removeSecondaryCursors', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordRight'] = ['cursorWordEndRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordEndRight'] = ['cursorWordEndRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordEndRightSelect'] = ['cursorWordEndRightSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordLeft'] = ['cursorWordStartLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordStartLeft'] = ['cursorWordStartLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordStartLeftSelect'] = ['cursorWordStartLeftSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteWordLeft'] = ['deleteWordLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteWordRight'] = ['deleteWordRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.cancelOperation'] = ['editor.cancelOperation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.gotoNextSymbolFromResult'] = ['editor.gotoNextSymbolFromResult', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.gotoNextSymbolFromResult.cancel'] = ['editor.gotoNextSymbolFromResult.cancel', CONVERT_VSCODE_TO_MONACO];\n    mappings['openReferenceToSide'] = ['openReferenceToSide', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleExplainMode'] = ['toggleExplainMode', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeFindWidget'] = ['closeFindWidget', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.replaceAll'] = ['editor.action.replaceAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.replaceOne'] = ['editor.action.replaceOne', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectAllMatches'] = ['editor.action.selectAllMatches', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindCaseSensitive'] = ['toggleFindCaseSensitive', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindInSelection'] = ['toggleFindInSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindRegex'] = ['toggleFindRegex', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindWholeWord'] = ['toggleFindWholeWord', CONVERT_VSCODE_TO_MONACO];\n    mappings['jumpToNextSnippetPlaceholder'] = ['jumpToNextSnippetPlaceholder', CONVERT_VSCODE_TO_MONACO];\n    mappings['jumpToPrevSnippetPlaceholder'] = ['jumpToPrevSnippetPlaceholder', CONVERT_VSCODE_TO_MONACO];\n    mappings['leaveEditorMessage'] = ['leaveEditorMessage', CONVERT_VSCODE_TO_MONACO];\n    mappings['leaveSnippet'] = ['leaveSnippet', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeMarkersNavigation'] = ['closeMarkersNavigation', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToNextReferenceFromEmbeddedEditor'] = ['goToNextReferenceFromEmbeddedEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToPreviousReferenceFromEmbeddedEditor'] = ['goToPreviousReferenceFromEmbeddedEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeParameterHints'] = ['closeParameterHints', CONVERT_VSCODE_TO_MONACO];\n    mappings['showNextParameterHint'] = ['showNextParameterHint', CONVERT_VSCODE_TO_MONACO];\n    mappings['showPrevParameterHint'] = ['showPrevParameterHint', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptSelectedSuggestion'] = ['acceptSelectedSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptSelectedSuggestionOnEnter'] = ['acceptSelectedSuggestionOnEnter', CONVERT_VSCODE_TO_MONACO];\n    mappings['hideSuggestWidget'] = ['hideSuggestWidget', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertBestCompletion'] = ['insertBestCompletion', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertNextSuggestion'] = ['insertNextSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertPrevSuggestion'] = ['insertPrevSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectNextPageSuggestion'] = ['selectNextPageSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectNextSuggestion'] = ['selectNextSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectPrevPageSuggestion'] = ['selectPrevPageSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectPrevSuggestion'] = ['selectPrevSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleSuggestionDetails'] = ['toggleSuggestionDetails', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleSuggestionFocus'] = ['toggleSuggestionFocus', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptRenameInput'] = ['acceptRenameInput', CONVERT_VSCODE_TO_MONACO];\n    mappings['cancelRenameInput'] = ['cancelRenameInput', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeAccessibilityHelp'] = ['closeAccessibilityHelp', CONVERT_VSCODE_TO_MONACO];\n    mappings['history.showNext'] = ['history.showNext', CONVERT_VSCODE_TO_MONACO];\n    mappings['history.showPrevious'] = ['history.showPrevious', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeReferenceSearch'] = ['closeReferenceSearch', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToNextReference'] = ['goToNextReference', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToPreviousReference'] = ['goToPreviousReference', CONVERT_VSCODE_TO_MONACO];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const CONVERT_MONACO_TO_VSCODE = (args: any | undefined) => {\n        if (!args) {\n            return args;\n        }\n        if (!Array.isArray(args)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return monacoToVscodeArgsConverter(args);\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const argsArray: any[] = args;\n        const argStack: ConversionFunction[] = [];\n        argsArray.forEach(_ => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            argStack.push((arg: any) => monacoToVscodeArgsConverter(arg));\n        });\n        if (argsArray) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return createConversionFunction(...argStack)(argsArray);\n        }\n    };\n\n    // vscode-'executeXXX'-like commands\n    mappings['vscode.executeReferenceProvider'] = ['vscode.executeReferenceProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeImplementationProvider'] = ['vscode.executeImplementationProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeDefinitionProvider'] = ['vscode.executeDefinitionProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeDeclarationProvider'] = ['vscode.executeDeclarationProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeTypeDefinitionProvider'] = ['vscode.executeTypeDefinitionProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeHoverProvider'] = ['vscode.executeHoverProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeDocumentHighlights'] = ['vscode.executeDocumentHighlights', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeFormatDocumentProvider'] = ['vscode.executeFormatDocumentProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeFormatRangeProvider'] = ['vscode.executeFormatRangeProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeFormatOnTypeProvider'] = ['vscode.executeFormatOnTypeProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.prepareCallHierarchy'] = ['vscode.prepareCallHierarchy', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideIncomingCalls'] = ['vscode.provideIncomingCalls', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideOutgoingCalls'] = ['vscode.provideOutgoingCalls', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.prepareTypeHierarchy'] = ['vscode.prepareTypeHierarchy', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideSupertypes'] = ['vscode.provideSupertypes', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideSubtypes'] = ['vscode.provideSubtypes', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n\n    mappings['vscode.open'] = ['vscode.open', CONVERT_VSCODE_TO_MONACO];\n    mappings['vscode.diff'] = ['vscode.diff', CONVERT_VSCODE_TO_MONACO];\n\n    // terminal commands\n    mappings['workbench.action.terminal.new'] = ['terminal:new', identity];\n    mappings['workbench.action.terminal.newWithProfile'] = ['terminal:new:profile', identity];\n    mappings['workbench.action.terminal.selectDefaultShell'] = ['terminal:profile:default', identity];\n    mappings['workbench.action.terminal.newInActiveWorkspace'] = ['terminal:new:active:workspace', identity];\n    mappings['workbench.action.terminal.clear'] = ['terminal:clear', identity];\n    mappings['openInTerminal'] = ['terminal:context', createConversionFunction((uri: URI) => new TheiaURI(uri))];\n    mappings['workbench.action.terminal.split'] = ['terminal:split', identity];\n    mappings['workbench.action.terminal.focusFind'] = ['terminal:find', identity];\n    mappings['workbench.action.terminal.hideFind'] = ['terminal:find:cancel', identity];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function map<T>(id: string, args: any[] | undefined, toDo: (mappedId: string, mappedArgs: any[] | undefined, mappedResult: ConversionFunction | undefined) => T): T {\n        if (mappings[id]) {\n            return toDo(mappings[id][0], mappings[id][1](args), mappings[id][2] ? (result => mappings[id][2]!(result)) : undefined);\n        } else {\n            return toDo(id, args, undefined);\n        }\n    }\n\n    export function mapped(id: string): boolean {\n        return !!mappings[id];\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export type ConversionFunction = ((parameter: any) => any) | undefined;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    function createConversionFunction(...conversions: ConversionFunction[]): (args: any[] | undefined) => any[] | undefined {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return function (args: any[] | undefined): any[] | undefined {\n            if (!args) {\n                return args;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return args.map(function (arg: any, index: number): any {\n                if (index < conversions.length) {\n                    const conversion = conversions[index];\n                    if (conversion) {\n                        return conversion(arg);\n                    }\n                }\n                return arg;\n            });\n        };\n    }\n\n    function fromPositionToP(p: theia.Position): P {\n        return P.create(p.line, p.character);\n    }\n\n    function fromRangeToR(r: theia.Range): R {\n        return R.create(fromPositionToP(r.start), fromPositionToP(r.end));\n    }\n\n    function fromLocationToL(l: theia.Location): L {\n        return L.create(l.uri.toString(), fromRangeToR(l.range));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/tslint/config\n    function vscodeToMonacoArgsConverter(args: any[]) {\n        // tslint:disable-next-line:typedef\n        return cloneAndChange(args, function (value) {\n            if (CallHierarchyItem.isCallHierarchyItem(value)) {\n                return fromCallHierarchyItem(value);\n            }\n            if (TypeHierarchyItem.isTypeHierarchyItem(value)) {\n                return fromTypeHierarchyItem(value);\n            }\n            if (TextDocumentShowOptions.isTextDocumentShowOptions(value)) {\n                return fromTextDocumentShowOptions(value);\n            }\n            if (Position.isPosition(value)) {\n                return fromPosition(value);\n            }\n            if (Range.isRange(value)) {\n                return fromRange(value);\n            }\n            if (Location.isLocation(value)) {\n                return fromLocation(value);\n            }\n            if (!Array.isArray(value)) {\n                return value;\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/tslint/config\n    function monacoToVscodeArgsConverter(args: any[]) {\n        // tslint:disable-next-line:typedef\n        return cloneAndChange(args, function (value) {\n            if (isModelCallHierarchyItem(value)) {\n                return toCallHierarchyItem(value);\n            }\n            if (isModelTypeHierarchyItem(value)) {\n                return toTypeHierarchyItem(value);\n            }\n            if (isModelCallHierarchyIncomingCall(value)) {\n                return toCallHierarchyIncomingCall(value);\n            }\n            if (isModelCallHierarchyOutgoingCall(value)) {\n                return toCallHierarchyOutgoingCall(value);\n            }\n            if (isModelLocation(value)) {\n                return toLocation(value);\n            }\n            if (!Array.isArray(value)) {\n                return value;\n            }\n\n        });\n    }\n}\n\nfunction toArrayConversion<T, U>(f: (a: T) => U): (a: T[]) => U[] {\n    // tslint:disable-next-line:typedef\n    return function (a: T[]) {\n        return a.map(f);\n    };\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { ResourceLabelFormatter } from '@theia/plugin';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { LabelServiceExt, LabelServiceMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\n\nexport class LabelServiceExtImpl implements LabelServiceExt {\n    private handle: number = 0;\n    private proxy: LabelServiceMain;\n    constructor(readonly rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LABEL_SERVICE_MAIN);\n    }\n\n    $registerResourceLabelFormatter(formatter: ResourceLabelFormatter): Disposable {\n        const handle = this.handle++;\n        this.proxy.$registerResourceLabelFormatter(handle, formatter);\n        return Disposable.create(() => {\n            this.proxy.$unregisterResourceLabelFormatter(handle);\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { SerializedIndentationRule, SerializedOnEnterRule, SerializedRegExp } from '../common';\n\nexport function serializeEnterRules(rules?: theia.OnEnterRule[]): SerializedOnEnterRule[] | undefined {\n    if (typeof rules === 'undefined' || rules === null) {\n        return undefined;\n    }\n\n    return rules.map(r =>\n    ({\n        beforeText: serializeRegExp(r.beforeText),\n        afterText: serializeRegExp(r.afterText),\n        previousLineText: serializeRegExp(r.previousLineText),\n        action: r.action,\n    } as SerializedOnEnterRule));\n}\n\nexport function serializeRegExp(regexp?: RegExp): SerializedRegExp | undefined {\n    if (typeof regexp === 'undefined' || regexp === null) {\n        return undefined;\n    }\n\n    return {\n        pattern: regexp.source,\n        flags: (regexp.global ? 'g' : '') + (regexp.ignoreCase ? 'i' : '') + (regexp.multiline ? 'm' : '')\n    };\n}\n\nexport function serializeIndentation(indentationRules?: theia.IndentationRule): SerializedIndentationRule | undefined {\n    if (typeof indentationRules === 'undefined' || indentationRules === null) {\n        return undefined;\n    }\n\n    return {\n        increaseIndentPattern: serializeRegExp(indentationRules.increaseIndentPattern),\n        decreaseIndentPattern: serializeRegExp(indentationRules.decreaseIndentPattern),\n        indentNextLinePattern: serializeRegExp(indentationRules.indentNextLinePattern),\n        unIndentedLinePattern: serializeRegExp(indentationRules.unIndentedLinePattern)\n    };\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport {\n    LanguagesExt,\n    PLUGIN_RPC_CONTEXT,\n    LanguagesMain,\n    SerializedLanguageConfiguration,\n    Position,\n    Selection,\n    RawColorInfo,\n    WorkspaceEditDto,\n    PluginInfo,\n    Plugin,\n    InlayHintsDto,\n    InlayHintDto,\n    IdentifiableInlineCompletions,\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from './documents';\nimport { PluginModel } from '../common/plugin-protocol';\nimport { Disposable, URI, LanguageStatusSeverity } from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport {\n    CodeActionProviderDocumentation,\n    CompletionContext,\n    CompletionResultDto,\n    Completion,\n    SerializedDocumentFilter,\n    SignatureHelp,\n    Hover,\n    DocumentHighlight,\n    Range,\n    TextEdit,\n    FormattingOptions,\n    Definition,\n    DocumentLink,\n    CodeLensSymbol,\n    DocumentSymbol,\n    ReferenceContext,\n    Location,\n    ColorPresentation,\n    RenameLocation,\n    SignatureHelpContext,\n    CodeActionContext,\n    CodeAction,\n    FoldingRange,\n    SelectionRange,\n    ChainedCacheId,\n    CallHierarchyItem,\n    CallHierarchyIncomingCall,\n    CallHierarchyOutgoingCall,\n    LinkedEditingRanges,\n    EvaluatableExpression,\n    InlineValue,\n    InlineValueContext,\n    TypeHierarchyItem,\n    InlineCompletionContext,\n    DocumentDropEdit,\n    DataTransferDTO\n} from '../common/plugin-api-rpc-model';\nimport { CompletionAdapter } from './languages/completion';\nimport { Diagnostics } from './languages/diagnostics';\nimport { SignatureHelpAdapter } from './languages/signature';\nimport { HoverAdapter } from './languages/hover';\nimport { EvaluatableExpressionAdapter } from './languages/evaluatable-expression';\nimport { InlineValuesAdapter } from './languages/inline-values';\nimport { DocumentHighlightAdapter } from './languages/document-highlight';\nimport { DocumentFormattingAdapter } from './languages/document-formatting';\nimport { RangeFormattingAdapter } from './languages/range-formatting';\nimport { OnTypeFormattingAdapter } from './languages/on-type-formatting';\nimport { DefinitionAdapter } from './languages/definition';\nimport { ImplementationAdapter } from './languages/implementation';\nimport { TypeDefinitionAdapter } from './languages/type-definition';\nimport { CodeActionAdapter } from './languages/code-action';\nimport { LinkProviderAdapter } from './languages/link-provider';\nimport { CodeLensAdapter } from './languages/lens';\nimport { OutlineAdapter } from './languages/outline';\nimport { ReferenceAdapter } from './languages/reference';\nimport { WorkspaceSymbolAdapter } from './languages/workspace-symbol';\nimport { SymbolInformation } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { FoldingProviderAdapter } from './languages/folding';\nimport { SelectionRangeProviderAdapter } from './languages/selection-range';\nimport { ColorProviderAdapter } from './languages/color';\nimport { RenameAdapter } from './languages/rename';\nimport { Event } from '@theia/core/lib/common/event';\nimport { CommandRegistryImpl } from './command-registry';\nimport { DeclarationAdapter } from './languages/declaration';\nimport { CallHierarchyAdapter } from './languages/call-hierarchy';\nimport { TypeHierarchyAdapter } from './languages/type-hierarchy';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { DocumentSemanticTokensAdapter, DocumentRangeSemanticTokensAdapter } from './languages/semantic-highlighting';\nimport { isReadonlyArray } from '../common/arrays';\nimport { DisposableCollection, disposableTimeout, Disposable as TheiaDisposable } from '@theia/core/lib/common/disposable';\nimport { Severity } from '@theia/core/lib/common/severity';\nimport { LinkedEditingRangeAdapter } from './languages/linked-editing-range';\nimport { serializeEnterRules, serializeIndentation, serializeRegExp } from './languages-utils';\nimport { InlayHintsAdapter } from './languages/inlay-hints';\nimport { InlineCompletionAdapter, InlineCompletionAdapterBase } from './languages/inline-completion';\nimport { DocumentDropEditAdapter } from './languages/document-drop-edit';\nimport { IDisposable } from '@theia/monaco-editor-core';\nimport { FileSystemExtImpl, FsLinkProvider } from './file-system-ext-impl';\n\ntype Adapter = CompletionAdapter |\n    SignatureHelpAdapter |\n    HoverAdapter |\n    EvaluatableExpressionAdapter |\n    InlineValuesAdapter |\n    DocumentHighlightAdapter |\n    DocumentFormattingAdapter |\n    RangeFormattingAdapter |\n    OnTypeFormattingAdapter |\n    DefinitionAdapter |\n    DeclarationAdapter |\n    ImplementationAdapter |\n    TypeDefinitionAdapter |\n    LinkProviderAdapter |\n    CodeLensAdapter |\n    CodeActionAdapter |\n    OutlineAdapter |\n    ReferenceAdapter |\n    WorkspaceSymbolAdapter |\n    FoldingProviderAdapter |\n    SelectionRangeProviderAdapter |\n    ColorProviderAdapter |\n    InlayHintsAdapter |\n    RenameAdapter |\n    CallHierarchyAdapter |\n    DocumentRangeSemanticTokensAdapter |\n    DocumentSemanticTokensAdapter |\n    LinkedEditingRangeAdapter |\n    TypeHierarchyAdapter |\n    InlineCompletionAdapter |\n    DocumentDropEditAdapter;\n\nexport class LanguagesExtImpl implements LanguagesExt {\n\n    private proxy: LanguagesMain;\n\n    private readonly diagnostics: Diagnostics;\n\n    private linkProviderRegistration?: IDisposable;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, Adapter>();\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl,\n        private readonly filesSystem: FileSystemExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n        this.diagnostics = new Diagnostics(rpc);\n        filesSystem.onWillRegisterFileSystemProvider(linkProvider => this.registerLinkProviderIfNotYetRegistered(linkProvider));\n    }\n\n    dispose(): void {\n        if (this.linkProviderRegistration) {\n            this.linkProviderRegistration.dispose();\n        }\n    }\n\n    get onDidChangeDiagnostics(): Event<theia.DiagnosticChangeEvent> {\n        return this.diagnostics.onDidChangeDiagnostics;\n    }\n\n    getLanguages(): Promise<string[]> {\n        return this.proxy.$getLanguages();\n    }\n\n    changeLanguage(uri: URI, languageId: string): Promise<theia.TextDocument> {\n        return this.proxy.$changeLanguage(uri, languageId).then(() => {\n            const doc = this.documents.getDocumentData(uri);\n            if (!doc) {\n                throw new Error('No document found by URI ' + uri.toString());\n            }\n            return doc.document;\n        });\n    }\n\n    setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n        const { wordPattern } = configuration;\n\n        if (wordPattern) {\n            this.documents.setWordDefinitionFor(language, wordPattern);\n        } else {\n            this.documents.setWordDefinitionFor(language, null);\n        }\n\n        const callId = this.nextCallId();\n\n        const config: SerializedLanguageConfiguration = {\n            brackets: configuration.brackets,\n            comments: configuration.comments,\n            onEnterRules: serializeEnterRules(configuration.onEnterRules),\n            wordPattern: serializeRegExp(configuration.wordPattern),\n            indentationRules: serializeIndentation(configuration.indentationRules)\n        };\n\n        this.proxy.$setLanguageConfiguration(callId, language, config);\n        return this.createDisposable(callId);\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number, onDispose?: () => void): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n            onDispose?.();\n        });\n    }\n\n    private addNewAdapter(adapter: Adapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async withAdapter<A, R>(handle: number, ctor: { new(...args: any[]): A }, callback: (adapter: A) => Promise<R>, fallbackValue: R): Promise<R> {\n        const adapter = this.adaptersMap.get(handle);\n        if (!adapter) {\n            return fallbackValue;\n        }\n        if (adapter instanceof ctor) {\n            return callback(adapter);\n        }\n        throw new Error('no adapter found');\n    }\n\n    private transformDocumentSelector(selector: theia.DocumentSelector): SerializedDocumentFilter[] {\n        if (isReadonlyArray(selector)) {\n            return selector.map(sel => this.doTransformDocumentSelector(sel)!);\n        }\n\n        return [this.doTransformDocumentSelector(selector)!];\n    }\n\n    private doTransformDocumentSelector(selector: string | theia.DocumentFilter): SerializedDocumentFilter | undefined {\n        if (typeof selector === 'string') {\n            return {\n                $serialized: true,\n                language: selector\n            };\n        }\n\n        if (selector) {\n            return {\n                $serialized: true,\n                language: selector.language,\n                scheme: selector.scheme,\n                pattern: selector.pattern,\n                notebookType: selector.notebookType\n            };\n        }\n\n        return undefined;\n    }\n\n    private registerLinkProviderIfNotYetRegistered(linkProvider: FsLinkProvider): void {\n        if (!this.linkProviderRegistration) {\n            this.linkProviderRegistration = this.registerDocumentLinkProvider('*', linkProvider, {\n                id: 'theia.fs-ext-impl',\n                name: 'fs-ext-impl'\n            });\n        }\n    }\n\n    // ### Completion begin\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position,\n        context: CompletionContext, token: theia.CancellationToken): Promise<CompletionResultDto | undefined> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.provideCompletionItems(URI.revive(resource), position, context, token), undefined);\n    }\n\n    $resolveCompletionItem(handle: number, chainedId: ChainedCacheId, token: theia.CancellationToken): Promise<Completion | undefined> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.resolveCompletionItem(chainedId, token), undefined);\n    }\n\n    $releaseCompletionItems(handle: number, id: number): void {\n        this.withAdapter(handle, CompletionAdapter, async adapter => adapter.releaseCompletionItems(id), undefined);\n    }\n\n    registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, triggerCharacters: string[],\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new CompletionAdapter(provider, this.documents, this.commands));\n        this.proxy.$registerCompletionSupport(callId, pluginInfo, this.transformDocumentSelector(selector), triggerCharacters, CompletionAdapter.hasResolveSupport(provider));\n        return this.createDisposable(callId);\n    }\n    // ### Completion end\n\n    // ### Inline completion provider begin\n    registerInlineCompletionsProvider(selector: theia.DocumentSelector, provider: theia.InlineCompletionItemProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new InlineCompletionAdapter(this.documents, provider, this.commands));\n        this.proxy.$registerInlineCompletionsSupport(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideInlineCompletions(\n        handle: number,\n        resource: UriComponents,\n        position: Position,\n        context: InlineCompletionContext,\n        token: theia.CancellationToken\n    ): Promise<IdentifiableInlineCompletions | undefined> {\n        return this.withAdapter(handle, InlineCompletionAdapterBase, adapter => adapter.provideInlineCompletions(URI.revive(resource), position, context, token), undefined);\n    }\n\n    $freeInlineCompletionsList(handle: number, pid: number): void {\n        this.withAdapter(handle, InlineCompletionAdapterBase, async adapter => { adapter.disposeCompletions(pid); }, undefined);\n    }\n    // ### Inline completion provider end\n\n    // ### Definition provider begin\n    $provideDefinition(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, DefinitionAdapter, adapter => adapter.provideDefinition(URI.revive(resource), position, token), undefined);\n    }\n\n    registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DefinitionAdapter(provider, this.documents));\n        this.proxy.$registerDefinitionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Definition provider end\n\n    // ### Declaration provider begin\n    $provideDeclaration(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, DeclarationAdapter, adapter => adapter.provideDeclaration(URI.revive(resource), position, token), undefined);\n    }\n\n    registerDeclarationProvider(selector: theia.DocumentSelector, provider: theia.DeclarationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DeclarationAdapter(provider, this.documents));\n        this.proxy.$registerDeclarationProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Declaration provider end\n\n    // ### Signature help begin\n    $provideSignatureHelp(\n        handle: number, resource: UriComponents, position: Position, context: SignatureHelpContext, token: theia.CancellationToken\n    ): Promise<SignatureHelp | undefined> {\n        return this.withAdapter(handle, SignatureHelpAdapter, adapter => adapter.provideSignatureHelp(URI.revive(resource), position, token, context), undefined);\n    }\n\n    $releaseSignatureHelp(handle: number, id: number): void {\n        this.withAdapter(handle, SignatureHelpAdapter, async adapter => adapter.releaseSignatureHelp(id), undefined);\n    }\n\n    registerSignatureHelpProvider(selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, metadata: theia.SignatureHelpProviderMetadata,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new SignatureHelpAdapter(provider, this.documents));\n        this.proxy.$registerSignatureHelpProvider(callId, pluginInfo, this.transformDocumentSelector(selector), metadata);\n        return this.createDisposable(callId);\n    }\n    // ### Signature help end\n\n    // ### Diagnostics begin\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        return this.diagnostics.getDiagnostics(resource!);\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        return this.diagnostics.createDiagnosticCollection(name);\n    }\n    // ### Diagnostics end\n\n    // ### Implementation provider begin\n    $provideImplementation(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, ImplementationAdapter, adapter => adapter.provideImplementation(URI.revive(resource), position, token), undefined);\n    }\n\n    registerImplementationProvider(selector: theia.DocumentSelector, provider: theia.ImplementationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ImplementationAdapter(provider, this.documents));\n        this.proxy.$registerImplementationProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Implementation provider end\n\n    // ### Type Definition provider begin\n    $provideTypeDefinition(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, TypeDefinitionAdapter, adapter => adapter.provideTypeDefinition(URI.revive(resource), position, token), undefined);\n    }\n\n    registerTypeDefinitionProvider(selector: theia.DocumentSelector, provider: theia.TypeDefinitionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new TypeDefinitionAdapter(provider, this.documents));\n        this.proxy.$registerTypeDefinitionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Type Definition provider end\n\n    // ### Hover Provider begin\n    registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new HoverAdapter(provider, this.documents));\n        this.proxy.$registerHoverProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideHover(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Hover | undefined> {\n        return this.withAdapter(handle, HoverAdapter, adapter => adapter.provideHover(URI.revive(resource), position, token), undefined);\n    }\n    // ### Hover Provider end\n\n    // ### EvaluatableExpression Provider begin\n    registerEvaluatableExpressionProvider(selector: theia.DocumentSelector, provider: theia.EvaluatableExpressionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new EvaluatableExpressionAdapter(provider, this.documents));\n        this.proxy.$registerEvaluatableExpressionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideEvaluatableExpression(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<EvaluatableExpression | undefined> {\n        return this.withAdapter(handle, EvaluatableExpressionAdapter, adapter => adapter.provideEvaluatableExpression(URI.revive(resource), position, token), undefined);\n    }\n    // ### EvaluatableExpression Provider end\n\n    // ### InlineValues Provider begin\n    registerInlineValuesProvider(selector: theia.DocumentSelector, provider: theia.InlineValuesProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const eventHandle = typeof provider.onDidChangeInlineValues === 'function' ? this.nextCallId() : undefined;\n        const callId = this.addNewAdapter(new InlineValuesAdapter(provider, this.documents));\n        this.proxy.$registerInlineValuesProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined) {\n            const subscription = provider.onDidChangeInlineValues!(_ => this.proxy.$emitInlineValuesEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n        return result;\n    }\n\n    $provideInlineValues(handle: number, resource: UriComponents, range: Range, context: InlineValueContext, token: theia.CancellationToken): Promise<InlineValue[] | undefined> {\n        return this.withAdapter(handle, InlineValuesAdapter, adapter => adapter.provideInlineValues(URI.revive(resource), range, context, token), undefined);\n    }\n    // ### InlineValue Provider end\n\n    // ### Document Highlight Provider begin\n    registerDocumentHighlightProvider(selector: theia.DocumentSelector, provider: theia.DocumentHighlightProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentHighlightAdapter(provider, this.documents));\n        this.proxy.$registerDocumentHighlightProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentHighlights(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<DocumentHighlight[] | undefined> {\n        return this.withAdapter(handle, DocumentHighlightAdapter, adapter => adapter.provideDocumentHighlights(URI.revive(resource), position, token), undefined);\n    }\n    // ### Document Highlight Provider end\n\n    // ### WorkspaceSymbol Provider begin\n    registerWorkspaceSymbolProvider(provider: theia.WorkspaceSymbolProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new WorkspaceSymbolAdapter(provider));\n        this.proxy.$registerWorkspaceSymbolProvider(callId, pluginInfo);\n        return this.createDisposable(callId);\n    }\n\n    $provideWorkspaceSymbols(handle: number, query: string, token: theia.CancellationToken): PromiseLike<SymbolInformation[]> {\n        return this.withAdapter(handle, WorkspaceSymbolAdapter, adapter => adapter.provideWorkspaceSymbols(query, token), []);\n    }\n\n    $resolveWorkspaceSymbol(handle: number, symbol: SymbolInformation, token: theia.CancellationToken): PromiseLike<SymbolInformation | undefined> {\n        return this.withAdapter(handle, WorkspaceSymbolAdapter, adapter => adapter.resolveWorkspaceSymbol(symbol, token), undefined);\n    }\n    // ### WorkspaceSymbol Provider end\n\n    // ### Document Formatting Edit begin\n    registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentFormattingAdapter(provider, this.documents));\n        this.proxy.$registerDocumentFormattingSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, DocumentFormattingAdapter, adapter => adapter.provideDocumentFormattingEdits(URI.revive(resource), options, token), undefined);\n    }\n    // ### Document Formatting Edit end\n\n    // ### Drop Edit Provider start\n    $provideDocumentDropEdits(handle: number, resource: UriComponents, position: Position,\n        dataTransfer: DataTransferDTO, token: theia.CancellationToken): Promise<DocumentDropEdit | undefined> {\n        return this.withAdapter(handle, DocumentDropEditAdapter, adapter => adapter.provideDocumentDropEdits(URI.revive(resource), position, dataTransfer, token), undefined);\n    }\n\n    registerDocumentDropEditProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.DocumentDropEditProvider,\n        metadata?: theia.DocumentDropEditProviderMetadata\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentDropEditAdapter(provider, this.documents, this.filesSystem));\n        this.proxy.$registerDocumentDropEditProvider(callId, this.transformDocumentSelector(selector), metadata);\n        return this.createDisposable(callId);\n    }\n    // ### Drop Edit Provider end\n\n    // ### Document Range Formatting Edit begin\n    registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new RangeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerRangeFormattingSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangeFormattingEdits(URI.revive(resource), range, options, token), undefined);\n    }\n    // ### Document Range Formatting Edit end\n\n    // ### On Type Formatting Edit begin\n    registerOnTypeFormattingEditProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.OnTypeFormattingEditProvider,\n        triggerCharacters: string[],\n        pluginInfo: PluginInfo\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new OnTypeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerOnTypeFormattingProvider(callId, pluginInfo, this.transformDocumentSelector(selector), triggerCharacters);\n        return this.createDisposable(callId);\n    }\n\n    $provideOnTypeFormattingEdits(handle: number, resource: UriComponents, position: Position, ch: string,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, OnTypeFormattingAdapter, adapter => adapter.provideOnTypeFormattingEdits(URI.revive(resource), position, ch, options, token), undefined);\n    }\n    // ### On Type Formatting Edit end\n\n    // ### Document Link Provider begin\n    $provideDocumentLinks(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<DocumentLink[] | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.provideLinks(URI.revive(resource), token), undefined);\n    }\n\n    $resolveDocumentLink(handle: number, link: DocumentLink, token: theia.CancellationToken): Promise<DocumentLink | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.resolveLink(link, token), undefined);\n    }\n\n    registerDocumentLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new LinkProviderAdapter(provider, this.documents));\n        this.proxy.$registerDocumentLinkProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $releaseDocumentLinks(handle: number, ids: number[]): void {\n        this.withAdapter(handle, LinkProviderAdapter, async adapter => adapter.releaseDocumentLinks(ids), undefined);\n    }\n\n    // ### Document Link Provider end\n\n    // ### Code Actions Provider begin\n    registerCodeActionsProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.CodeActionProvider,\n        pluginModel: PluginModel,\n        pluginInfo: PluginInfo,\n        metadata?: theia.CodeActionProviderMetadata\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeActionAdapter(provider, this.documents, this.diagnostics, pluginModel ? pluginModel.id : '', this.commands));\n\n        let documentation: CodeActionProviderDocumentation | undefined;\n        let disposables: DisposableCollection | undefined;\n        if (metadata && metadata.documentation) {\n            disposables = new DisposableCollection();\n            documentation = metadata.documentation.map(doc => ({\n                kind: doc.kind.value,\n                command: this.commands.converter.toSafeCommand(doc.command, disposables!)\n            }));\n        }\n\n        this.proxy.$registerQuickFixProvider(\n            callId,\n            pluginInfo,\n            this.transformDocumentSelector(selector),\n            metadata && metadata.providedCodeActionKinds ? metadata.providedCodeActionKinds.map(kind => kind.value) : undefined,\n            documentation\n        );\n\n        return this.createDisposable(callId, disposables?.dispose);\n    }\n\n    $provideCodeActions(\n        handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: CodeActionContext,\n        token: theia.CancellationToken\n    ): Promise<CodeAction[] | undefined> {\n        return this.withAdapter(handle, CodeActionAdapter, adapter => adapter.provideCodeAction(URI.revive(resource), rangeOrSelection, context, token), undefined);\n    }\n\n    $releaseCodeActions(handle: number, cacheIds: number[]): void {\n        this.withAdapter(handle, CodeActionAdapter, adapter => adapter.releaseCodeActions(cacheIds), undefined);\n    }\n\n    $resolveCodeAction(handle: number, cacheId: number, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        return this.withAdapter(handle, CodeActionAdapter, adapter => adapter.resolveCodeAction(cacheId, token), undefined);\n    };\n\n    // ### Code Actions Provider end\n\n    // ### Code Lens Provider begin\n    registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeLensAdapter(provider, this.documents, this.commands));\n        const eventHandle = typeof provider.onDidChangeCodeLenses === 'function' ? this.nextCallId() : undefined;\n        this.proxy.$registerCodeLensSupport(callId, pluginInfo, this.transformDocumentSelector(selector), eventHandle);\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined && provider.onDidChangeCodeLenses) {\n            const subscription = provider.onDidChangeCodeLenses(e => this.proxy.$emitCodeLensEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideCodeLenses(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<CodeLensSymbol[] | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.provideCodeLenses(URI.revive(resource), token), undefined);\n    }\n\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol, token: theia.CancellationToken): Promise<CodeLensSymbol | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.resolveCodeLens(URI.revive(resource), symbol, token), undefined);\n    }\n\n    $releaseCodeLenses(handle: number, ids: number[]): void {\n        this.withAdapter(handle, CodeLensAdapter, async adapter => adapter.releaseCodeLenses(ids), undefined);\n    }\n    // ### Code Lens Provider end\n\n    // ### Code Reference Provider begin\n    $provideReferences(handle: number, resource: UriComponents, position: Position, context: ReferenceContext, token: theia.CancellationToken): Promise<Location[] | undefined> {\n        return this.withAdapter(handle, ReferenceAdapter, adapter => adapter.provideReferences(URI.revive(resource), position, context, token), undefined);\n    }\n\n    registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ReferenceAdapter(provider, this.documents));\n        this.proxy.$registerReferenceProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Code Reference Provider end\n\n    // ### Document Symbol Provider begin\n    registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider, pluginInfo: PluginInfo,\n        metadata?: theia.DocumentSymbolProviderMetadata): theia.Disposable {\n        const callId = this.addNewAdapter(new OutlineAdapter(this.documents, provider));\n        const displayName = (metadata && metadata.label) || getPluginLabel(pluginInfo);\n        this.proxy.$registerOutlineSupport(callId, pluginInfo, this.transformDocumentSelector(selector), displayName);\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentSymbols(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<DocumentSymbol[] | undefined> {\n        return this.withAdapter(handle, OutlineAdapter, adapter => adapter.provideDocumentSymbols(URI.revive(resource), token), undefined);\n    }\n    // ### Document Symbol Provider end\n\n    // ### Color Provider begin\n    registerColorProvider(selector: theia.DocumentSelector, provider: theia.DocumentColorProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ColorProviderAdapter(this.documents, provider));\n        this.proxy.$registerDocumentColorProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentColors(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<RawColorInfo[]> {\n        return this.withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColors(URI.revive(resource), token), []);\n    }\n\n    $provideColorPresentations(handle: number, resource: UriComponents, colorInfo: RawColorInfo, token: theia.CancellationToken): Promise<ColorPresentation[]> {\n        return this.withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColorPresentations(URI.revive(resource), colorInfo, token), []);\n    }\n    // ### Color Provider end\n\n    // ### InlayHints Provider begin\n    registerInlayHintsProvider(selector: theia.DocumentSelector, provider: theia.InlayHintsProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const eventHandle = typeof provider.onDidChangeInlayHints === 'function' ? this.nextCallId() : undefined;\n        const callId = this.addNewAdapter(new InlayHintsAdapter(provider, this.documents, this.commands));\n        this.proxy.$registerInlayHintsProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined) {\n            const subscription = provider.onDidChangeInlayHints!(() => this.proxy.$emitInlayHintsEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideInlayHints(handle: number, resource: UriComponents, range: Range, token: theia.CancellationToken): Promise<InlayHintsDto | undefined> {\n        return this.withAdapter(handle, InlayHintsAdapter, adapter => adapter.provideInlayHints(URI.revive(resource), range, token), undefined);\n    }\n\n    $resolveInlayHint(handle: number, id: ChainedCacheId, token: theia.CancellationToken): Promise<InlayHintDto | undefined> {\n        return this.withAdapter(handle, InlayHintsAdapter, adapter => adapter.resolveInlayHint(id, token), undefined);\n    }\n\n    $releaseInlayHints(handle: number, id: number): void {\n        this.withAdapter(handle, InlayHintsAdapter, async adapter => adapter.releaseHints(id), undefined);\n    }\n    // ### InlayHints Provider end\n\n    // ### Folding Range Provider begin\n    registerFoldingRangeProvider(selector: theia.DocumentSelector, provider: theia.FoldingRangeProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new FoldingProviderAdapter(provider, this.documents));\n        const eventHandle = typeof provider.onDidChangeFoldingRanges === 'function' ? this.nextCallId() : undefined;\n\n        this.proxy.$registerFoldingRangeProvider(callId, pluginInfo, this.transformDocumentSelector(selector), eventHandle);\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined) {\n            const subscription = provider.onDidChangeFoldingRanges!(() => this.proxy.$emitFoldingRangeEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n        return result;\n    }\n\n    $provideFoldingRange(\n        callId: number,\n        resource: UriComponents,\n        context: theia.FoldingContext,\n        token: theia.CancellationToken\n    ): Promise<FoldingRange[] | undefined> {\n        return this.withAdapter(callId, FoldingProviderAdapter, adapter => adapter.provideFoldingRanges(URI.revive(resource), context, token), undefined);\n    }\n    // ### Folding Range Provider end\n\n    registerSelectionRangeProvider(selector: theia.DocumentSelector, provider: theia.SelectionRangeProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new SelectionRangeProviderAdapter(provider, this.documents));\n        this.proxy.$registerSelectionRangeProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideSelectionRanges(handle: number, resource: UriComponents, positions: Position[], token: theia.CancellationToken): Promise<SelectionRange[][]> {\n        return this.withAdapter(handle, SelectionRangeProviderAdapter, adapter => adapter.provideSelectionRanges(URI.revive(resource), positions, token), []);\n    }\n\n    // ### Rename Provider begin\n    registerRenameProvider(selector: theia.DocumentSelector, provider: theia.RenameProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new RenameAdapter(provider, this.documents));\n        this.proxy.$registerRenameProvider(callId, pluginInfo, this.transformDocumentSelector(selector), RenameAdapter.supportsResolving(provider));\n        return this.createDisposable(callId);\n    }\n\n    $provideRenameEdits(handle: number, resource: UriComponents, position: Position, newName: string, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        return this.withAdapter(handle, RenameAdapter, adapter => adapter.provideRenameEdits(URI.revive(resource), position, newName, token), undefined);\n    }\n\n    $resolveRenameLocation(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<RenameLocation | undefined> {\n        return this.withAdapter(handle, RenameAdapter, adapter => adapter.resolveRenameLocation(URI.revive(resource), position, token), undefined);\n    }\n    // ### Rename Provider end\n\n    // ### Call Hierarchy Provider begin\n    registerCallHierarchyProvider(selector: theia.DocumentSelector, provider: theia.CallHierarchyProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new CallHierarchyAdapter(provider, this.documents));\n        this.proxy.$registerCallHierarchyProvider(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideRootDefinition(\n        handle: number, resource: UriComponents, location: Position, token: theia.CancellationToken\n    ): Promise<CallHierarchyItem[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideRootDefinition(URI.revive(resource), location, token), undefined);\n    }\n\n    $provideCallers(handle: number, definition: CallHierarchyItem, token: theia.CancellationToken): Promise<CallHierarchyIncomingCall[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallers(definition, token), undefined);\n    }\n\n    $provideCallees(handle: number, definition: CallHierarchyItem, token: theia.CancellationToken): Promise<CallHierarchyOutgoingCall[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallees(definition, token), undefined);\n    }\n\n    $releaseCallHierarchy(handle: number, session?: string): Promise<boolean> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.releaseSession(session), false);\n    }\n    // ### Call Hierarchy Provider end\n\n    // ### Type hierarchy Provider begin\n    registerTypeHierarchyProvider(selector: theia.DocumentSelector, provider: theia.TypeHierarchyProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new TypeHierarchyAdapter(provider, this.documents));\n        this.proxy.$registerTypeHierarchyProvider(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $prepareTypeHierarchy(handle: number, resource: UriComponents, location: Position, token: theia.CancellationToken\n    ): Promise<TypeHierarchyItem[] | undefined> {\n        return this.withAdapter(\n            handle,\n            TypeHierarchyAdapter,\n            adapter => adapter.prepareSession(URI.revive(resource), location, token),\n            undefined\n        );\n    }\n\n    $provideSuperTypes(handle: number, sessionId: string, itemId: string, token: theia.CancellationToken):\n        Promise<TypeHierarchyItem[] | undefined> {\n        return this.withAdapter(\n            handle,\n            TypeHierarchyAdapter,\n            adapter => adapter.provideSupertypes(sessionId, itemId, token),\n            undefined\n        );\n    }\n\n    $provideSubTypes(handle: number, sessionId: string, itemId: string, token: theia.CancellationToken):\n        Promise<TypeHierarchyItem[] | undefined> {\n        return this.withAdapter(\n            handle,\n            TypeHierarchyAdapter,\n            adapter => adapter.provideSubtypes(sessionId, itemId, token),\n            undefined\n        );\n    }\n\n    $releaseTypeHierarchy(handle: number, session?: string): Promise<boolean> {\n        return this.withAdapter(\n            handle,\n            TypeHierarchyAdapter,\n            adapter => adapter.releaseSession(session),\n            false);\n    }\n\n    // ### Type hierarchy Provider end\n\n    // ### Linked Editing Range Provider begin\n    registerLinkedEditingRangeProvider(selector: theia.DocumentSelector, provider: theia.LinkedEditingRangeProvider): theia.Disposable {\n        const handle = this.addNewAdapter(new LinkedEditingRangeAdapter(this.documents, provider));\n        this.proxy.$registerLinkedEditingRangeProvider(handle, this.transformDocumentSelector(selector));\n        return this.createDisposable(handle);\n    }\n\n    $provideLinkedEditingRanges(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<LinkedEditingRanges | undefined> {\n        return this.withAdapter(handle, LinkedEditingRangeAdapter, async adapter => adapter.provideRanges(URI.revive(resource), position, token), undefined);\n    }\n\n    // ### Linked Editing Range Provider end\n\n    // #region semantic coloring\n\n    registerDocumentSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentSemanticTokensProvider, legend: theia.SemanticTokensLegend,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const eventHandle = (typeof provider.onDidChangeSemanticTokens === 'function' ? this.nextCallId() : undefined);\n\n        const handle = this.addNewAdapter(new DocumentSemanticTokensAdapter(this.documents, provider));\n        this.proxy.$registerDocumentSemanticTokensProvider(handle, pluginInfo, this.transformDocumentSelector(selector), legend, eventHandle);\n        let result = this.createDisposable(handle);\n\n        if (eventHandle) {\n            // eslint-disable-next-line no-unsanitized/method\n            const subscription = provider.onDidChangeSemanticTokens!(_ => this.proxy.$emitDocumentSemanticTokensEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideDocumentSemanticTokens(handle: number, resource: UriComponents, previousResultId: number, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        return this.withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.provideDocumentSemanticTokens(URI.revive(resource), previousResultId, token), null);\n    }\n\n    $releaseDocumentSemanticTokens(handle: number, semanticColoringResultId: number): void {\n        this.withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.releaseDocumentSemanticColoring(semanticColoringResultId), undefined);\n    }\n\n    registerDocumentRangeSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeSemanticTokensProvider,\n        legend: theia.SemanticTokensLegend, pluginInfo: PluginInfo): theia.Disposable {\n        const handle = this.addNewAdapter(new DocumentRangeSemanticTokensAdapter(this.documents, provider));\n        this.proxy.$registerDocumentRangeSemanticTokensProvider(handle, pluginInfo, this.transformDocumentSelector(selector), legend);\n        return this.createDisposable(handle);\n    }\n\n    $provideDocumentRangeSemanticTokens(handle: number, resource: UriComponents, range: Range, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        return this.withAdapter(handle, DocumentRangeSemanticTokensAdapter, adapter => adapter.provideDocumentRangeSemanticTokens(URI.revive(resource), range, token), null);\n    }\n\n    // Copied from https://github.com/microsoft/vscode/blob/7d9b1c37f8e5ae3772782ba3b09d827eb3fdd833/src/vs/workbench/api/common/extHostLanguages.ts\n    protected statusItemHandlePool = 0;\n    protected readonly statusItemIds = new Set<string>();\n    createLanguageStatusItem(extension: Plugin, id: string, selector: theia.DocumentSelector): theia.LanguageStatusItem {\n\n        const handle = this.statusItemHandlePool++;\n        const proxy = this.proxy;\n        const ids = this.statusItemIds;\n\n        // enforce extension unique identifier\n        const fullyQualifiedId = `${extension.model.id}/${id}`;\n        if (ids.has(fullyQualifiedId)) {\n            throw new Error(`LanguageStatusItem with id '${id}' ALREADY exists`);\n        }\n        ids.add(fullyQualifiedId);\n\n        const data: Omit<theia.LanguageStatusItem, 'dispose'> = {\n            selector,\n            id,\n            name: extension.model.displayName ?? extension.model.name,\n            severity: LanguageStatusSeverity.Information,\n            command: undefined,\n            text: '',\n            detail: '',\n            busy: false\n        };\n\n        let soonHandle: TheiaDisposable | undefined;\n        const commandDisposables = new DisposableCollection();\n        const updateAsync = () => {\n            soonHandle?.dispose();\n            soonHandle = disposableTimeout(() => {\n                commandDisposables.dispose();\n                commandDisposables.push({ dispose: () => { } }); // Mark disposable as undisposed.\n                this.proxy.$setLanguageStatus(handle, {\n                    id: fullyQualifiedId,\n                    name: data.name ?? extension.model.displayName ?? extension.model.name,\n                    source: extension.model.displayName ?? extension.model.name,\n                    selector: this.transformDocumentSelector(data.selector),\n                    label: data.text,\n                    detail: data.detail ?? '',\n                    severity: data.severity === LanguageStatusSeverity.Error ? Severity.Error : data.severity === LanguageStatusSeverity.Warning ? Severity.Warning : Severity.Info,\n                    command: data.command && this.commands.converter.toSafeCommand(data.command, commandDisposables),\n                    accessibilityInfo: data.accessibilityInformation,\n                    busy: data.busy\n                });\n            }, 0);\n        };\n\n        const result: theia.LanguageStatusItem = {\n            dispose(): void {\n                commandDisposables.dispose();\n                soonHandle?.dispose();\n                proxy.$removeLanguageStatus(handle);\n                ids.delete(fullyQualifiedId);\n            },\n            get id(): string {\n                return data.id;\n            },\n            get name(): string | undefined {\n                return data.name;\n            },\n            set name(value) {\n                data.name = value;\n                updateAsync();\n            },\n            get selector(): theia.DocumentSelector {\n                return data.selector;\n            },\n            set selector(value) {\n                data.selector = value;\n                updateAsync();\n            },\n            get text(): string {\n                return data.text;\n            },\n            set text(value) {\n                data.text = value;\n                updateAsync();\n            },\n            get detail(): string | undefined {\n                return data.detail;\n            },\n            set detail(value) {\n                data.detail = value;\n                updateAsync();\n            },\n            get severity(): theia.LanguageStatusSeverity {\n                return data.severity;\n            },\n            set severity(value) {\n                data.severity = value;\n                updateAsync();\n            },\n            get accessibilityInformation(): theia.AccessibilityInformation | undefined {\n                return data.accessibilityInformation;\n            },\n            set accessibilityInformation(value) {\n                data.accessibilityInformation = value;\n                updateAsync();\n            },\n            get command(): theia.Command | undefined {\n                return data.command;\n            },\n            set command(value) {\n                data.command = value;\n                updateAsync();\n            },\n            get busy(): boolean {\n                return data.busy;\n            },\n            set busy(value: boolean) {\n                data.busy = value;\n                updateAsync();\n            }\n        };\n        updateAsync();\n        return result;\n    }\n    // #endregion\n\n    // region DocumentPaste\n\n    /** @stubbed */\n    registerDocumentPasteEditProvider(\n        extension: Plugin, selector: theia.DocumentSelector, provider: theia.DocumentPasteEditProvider, metadata: theia.DocumentPasteProviderMetadata\n    ): theia.Disposable {\n        return Disposable.NULL;\n    }\n    // #endregion\n}\n\nfunction getPluginLabel(pluginInfo: PluginInfo): string {\n    return pluginInfo.displayName || pluginInfo.name;\n}\n\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as dto from '../../common/plugin-api-rpc-model';\nimport * as rpc from '../../common/plugin-api-rpc';\nimport * as types from '../types-impl';\nimport { fromRange, SymbolKind } from '../type-converters';\n\nexport class CallHierarchyAdapter {\n\n    constructor(\n        private readonly provider: theia.CallHierarchyProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    protected sessionIds = 0;\n    protected readonly cache = new Map<string, Map<string, theia.CallHierarchyItem>>();\n\n    async provideRootDefinition(\n        resource: URI, position: rpc.Position, token: theia.CancellationToken\n    ): Promise<dto.CallHierarchyItem[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const definition = await this.provider.prepareCallHierarchy(documentData.document,\n            new types.Position(\n                position.lineNumber,\n                position.column\n            ),\n            token\n        );\n\n        if (!definition) {\n            return undefined;\n        }\n        const sessionId = (this.sessionIds++).toString(36);\n        this.cache.set(sessionId, new Map());\n        return Array.isArray(definition) ? definition.map(item => this.fromCallHierarchyItem(item, sessionId)) : [this.fromCallHierarchyItem(definition, sessionId)];\n    }\n\n    async provideCallers(definition: dto.CallHierarchyItem, token: theia.CancellationToken): Promise<dto.CallHierarchyIncomingCall[] | undefined> {\n        const callers = await this.provider.provideCallHierarchyIncomingCalls(this.toCallHierarchyItem(definition), token);\n        if (!callers) {\n            return undefined;\n        }\n\n        return callers.map(item => this.fromCallHierarchyIncomingCall(item, definition._sessionId!));\n    }\n\n    async provideCallees(definition: dto.CallHierarchyItem, token: theia.CancellationToken): Promise<dto.CallHierarchyOutgoingCall[] | undefined> {\n        const callees = await this.provider.provideCallHierarchyOutgoingCalls(this.toCallHierarchyItem(definition), token);\n        if (!callees) {\n            return undefined;\n        }\n\n        return callees.map(item => this.fromCallHierarchyOutgoingCall(item, definition._sessionId!));\n    }\n\n    private fromCallHierarchyItem(item: theia.CallHierarchyItem, sessionId: string): dto.CallHierarchyItem {\n        const sessionCache = this.cache.get(sessionId)!;\n        const itemId = sessionCache.size.toString(36);\n        const definition: dto.CallHierarchyItem = {\n            uri: item.uri,\n            range: fromRange(item.range),\n            selectionRange: fromRange(item.selectionRange),\n            name: item.name,\n            kind: SymbolKind.fromSymbolKind(item.kind),\n            tags: item.tags,\n            _itemId: itemId,\n            _sessionId: sessionId,\n        };\n        sessionCache.set(itemId, item);\n        return definition;\n    }\n\n    private toCallHierarchyItem(definition: dto.CallHierarchyItem): theia.CallHierarchyItem {\n        const cached = this.cache.get(definition._sessionId!)?.get(definition._itemId!);\n        if (!cached) {\n            throw new Error(`Found no cached item corresponding to ${definition.name} in ${definition.uri.path} with ID ${definition.data}.`);\n        }\n        return cached;\n    }\n\n    private fromCallHierarchyIncomingCall(caller: theia.CallHierarchyIncomingCall, sessionId: string): dto.CallHierarchyIncomingCall {\n        return {\n            from: this.fromCallHierarchyItem(caller.from, sessionId),\n            fromRanges: caller.fromRanges.map(r => fromRange(r))\n        };\n    }\n\n    protected fromCallHierarchyOutgoingCall(caller: theia.CallHierarchyOutgoingCall, sessionId: string): dto.CallHierarchyOutgoingCall {\n        return {\n            to: this.fromCallHierarchyItem(caller.to, sessionId),\n            fromRanges: caller.fromRanges.map(r => fromRange(r)),\n        };\n    }\n\n    releaseSession(session?: string): Promise<boolean> {\n        if (session !== undefined) {\n            return Promise.resolve(this.cache.delete(session));\n        } else {\n            this.cache.clear();\n            return Promise.resolve(true);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { Selection, WorkspaceEditDto } from '../../common/plugin-api-rpc';\nimport { Range, CodeActionContext, CodeAction } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { DocumentsExtImpl } from '../documents';\nimport { Diagnostics } from './diagnostics';\nimport { CodeActionKind } from '../types-impl';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { isObject } from '@theia/core/lib/common';\n\nexport class CodeActionAdapter {\n\n    constructor(\n        private readonly provider: theia.CodeActionProvider,\n        private readonly document: DocumentsExtImpl,\n        private readonly diagnostics: Diagnostics,\n        private readonly pluginId: string,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    private readonly cache = new Map<number, theia.CodeAction | theia.Command>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    private cacheId = 0;\n\n    async provideCodeAction(resource: URI, rangeOrSelection: Range | Selection,\n        context: CodeActionContext, token: theia.CancellationToken): Promise<CodeAction[] | undefined> {\n        const document = this.document.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = CodeActionAdapter._isSelection(rangeOrSelection)\n            ? <theia.Selection>Converter.toSelection(rangeOrSelection)\n            : <theia.Range>Converter.toRange(rangeOrSelection);\n        const allDiagnostics: theia.Diagnostic[] = [];\n\n        for (const diagnostic of this.diagnostics.getDiagnostics(resource)) {\n            if (ran.intersection(diagnostic.range)) {\n                allDiagnostics.push(diagnostic);\n            }\n        }\n\n        const codeActionContext: theia.CodeActionContext = {\n            diagnostics: allDiagnostics,\n            only: context.only ? new CodeActionKind(context.only) : undefined,\n            triggerKind: Converter.toCodeActionTriggerKind(context.trigger)\n        };\n\n        const commandsOrActions = await this.provider.provideCodeActions(doc, ran, codeActionContext, token);\n\n        if (!Array.isArray(commandsOrActions) || commandsOrActions.length === 0) {\n            return undefined;\n        }\n        const result: CodeAction[] = [];\n        for (const candidate of commandsOrActions) {\n            if (!candidate) {\n                continue;\n            }\n\n            // Cache candidates and created commands.\n            const nextCacheId = this.nextCacheId();\n            const toDispose = new DisposableCollection();\n            this.cache.set(nextCacheId, candidate);\n            this.disposables.set(nextCacheId, toDispose);\n\n            if (CodeActionAdapter._isCommand(candidate)) {\n                result.push({\n                    cacheId: nextCacheId,\n                    title: candidate.title || '',\n                    command: this.commands.converter.toSafeCommand(candidate, toDispose)\n                });\n            } else {\n                if (codeActionContext.only) {\n                    if (!candidate.kind) {\n                        /* eslint-disable-next-line max-len */\n                        console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`);\n                    } else if (!codeActionContext.only.contains(candidate.kind)) {\n                        /* eslint-disable-next-line max-len */\n                        console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action is of kind '${candidate.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code action.`);\n                    }\n                }\n\n                result.push({\n                    cacheId: nextCacheId,\n                    title: candidate.title,\n                    command: this.commands.converter.toSafeCommand(candidate.command, toDispose),\n                    diagnostics: candidate.diagnostics && candidate.diagnostics.map(Converter.convertDiagnosticToMarkerData),\n                    edit: candidate.edit && Converter.fromWorkspaceEdit(candidate.edit),\n                    kind: candidate.kind && candidate.kind.value,\n                    disabled: candidate.disabled,\n                    isPreferred: candidate.isPreferred\n                });\n            }\n        }\n\n        return result;\n    }\n\n    async releaseCodeActions(cacheIds: number[]): Promise<void> {\n        cacheIds.forEach(id => {\n            this.cache.delete(id);\n            const toDispose = this.disposables.get(id);\n            if (toDispose) {\n                toDispose.dispose();\n                this.disposables.delete(id);\n            }\n        });\n    }\n\n    async resolveCodeAction(cacheId: number, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        if (!this.provider.resolveCodeAction) {\n            return undefined;\n        }\n\n        // Code actions are only resolved if they are not legacy commands and don't have an edit property\n        // https://code.visualstudio.com/api/references/vscode-api#CodeActionProvider\n        const candidate = this.cache.get(cacheId);\n        if (!candidate || CodeActionAdapter._isCommand(candidate) || candidate.edit) {\n            return undefined;\n        }\n\n        const resolved = await this.provider.resolveCodeAction(candidate, token);\n        return resolved?.edit && Converter.fromWorkspaceEdit(resolved.edit);\n    }\n\n    private nextCacheId(): number {\n        return this.cacheId++;\n    }\n\n    private static _isCommand(arg: unknown): arg is theia.Command {\n        return isObject<theia.Command>(arg) && typeof arg.command === 'string';\n    }\n\n    private static _isSelection(arg: unknown): arg is Selection {\n        return isObject<Selection>(arg)\n            && typeof arg.selectionStartLineNumber === 'number'\n            && typeof arg.selectionStartColumn === 'number'\n            && typeof arg.positionLineNumber === 'number'\n            && typeof arg.positionColumn === 'number';\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { RawColorInfo } from '../../common/plugin-api-rpc';\nimport { ColorPresentation } from '../../common/plugin-api-rpc-model';\n\nexport class ColorProviderAdapter {\n\n    constructor(\n        private documents: DocumentsExtImpl,\n        private provider: theia.DocumentColorProvider\n    ) { }\n\n    provideColors(resource: URI, token: theia.CancellationToken): Promise<RawColorInfo[]> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(\n            this.provider.provideDocumentColors(doc, token)\n        ).then(colors => {\n            if (!Array.isArray(colors)) {\n                return [];\n            }\n\n            const colorInfos: RawColorInfo[] = colors.map(colorInfo => ({\n                color: Converter.fromColor(colorInfo.color),\n                range: Converter.fromRange(colorInfo.range)!\n            }));\n\n            return colorInfos;\n        });\n    }\n\n    provideColorPresentations(resource: URI, raw: RawColorInfo, token: theia.CancellationToken): Promise<ColorPresentation[]> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const range = Converter.toRange(raw.range);\n        const color = Converter.toColor(raw.color);\n        return Promise.resolve(\n            this.provider.provideColorPresentations(color, { document: doc, range: range }, token)\n        ).then(value => {\n            if (!Array.isArray(value)) {\n                return [];\n            }\n\n            return value.map(Converter.fromColorPresentation);\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { CompletionItemTag, CompletionList, Range, SnippetString } from '../types-impl';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { CompletionContext, CompletionResultDto, Completion, CompletionDto, CompletionItemInsertTextRule, ChainedCacheId } from '../../common/plugin-api-rpc-model';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class CompletionAdapter {\n    private cacheId = 0;\n    private readonly cache = new Map<number, theia.CompletionItem[]>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly delegate: theia.CompletionItemProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    provideCompletionItems(resource: URI, position: Position, context: CompletionContext, token: theia.CancellationToken): Promise<CompletionResultDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const doc = document.document;\n\n        const pos = Converter.toPosition(position);\n\n        // The default insert/replace ranges. It's important to compute them\n        // before asynchronously asking the provider for its results. See\n        // https://github.com/microsoft/vscode/issues/83400#issuecomment-546851421\n        const replacing = doc.getWordRangeAtPosition(pos) || new Range(pos, pos);\n        const inserting = replacing.with({ end: pos });\n\n        return Promise.resolve(this.delegate.provideCompletionItems(doc, pos, token, context)).then(value => {\n            const id = this.cacheId++;\n\n            const toDispose = new DisposableCollection();\n            this.disposables.set(id, toDispose);\n\n            const result: CompletionResultDto = {\n                id,\n                completions: [],\n                defaultRange: {\n                    insert: Converter.fromRange(inserting),\n                    replace: Converter.fromRange(replacing)\n                }\n            };\n\n            let list: CompletionList;\n            if (!value) {\n                return undefined;\n            } else if (Array.isArray(value)) {\n                list = new CompletionList(value);\n            } else {\n                list = value;\n                result.incomplete = list.isIncomplete;\n            }\n\n            for (let i = 0; i < list.items.length; i++) {\n                const suggestion = this.convertCompletionItem(list.items[i], i, id, inserting, replacing);\n                if (suggestion) {\n                    result.completions.push(suggestion);\n                }\n            }\n            this.cache.set(id, list.items);\n\n            return result;\n        });\n    }\n\n    async resolveCompletionItem(chainedId: ChainedCacheId, token: theia.CancellationToken): Promise<Completion | undefined> {\n        const [parentId, id] = chainedId;\n        if (typeof this.delegate.resolveCompletionItem !== 'function') {\n            return undefined;\n        }\n        const item = this.cache.get(parentId)?.[id];\n        if (!item) {\n            return undefined;\n        }\n        const resolvedItem = await this.delegate.resolveCompletionItem(item, token);\n        if (!resolvedItem) {\n            return undefined;\n        }\n        return this.convertCompletionItem(resolvedItem, id, parentId);\n    }\n\n    async releaseCompletionItems(id: number): Promise<void> {\n        this.cache.delete(id);\n        const toDispose = this.disposables.get(id);\n        if (toDispose) {\n            toDispose.dispose();\n            this.disposables.delete(id);\n        }\n    }\n\n    private convertCompletionItem(item: theia.CompletionItem, id: number, parentId: number,\n        defaultInserting?: theia.Range, defaultReplacing?: theia.Range): CompletionDto | undefined {\n\n        const itemLabel = typeof item.label === 'string' ? item.label : item.label.label;\n        if (itemLabel.length === 0) {\n            console.warn('Invalid Completion Item -> must have at least a label');\n            return undefined;\n        }\n\n        const toDispose = this.disposables.get(parentId);\n        if (!toDispose) {\n            throw Error('DisposableCollection is missing...');\n        }\n\n        let insertText = itemLabel;\n        let insertTextRules = item.keepWhitespace ? CompletionItemInsertTextRule.KeepWhitespace : 0;\n        if (item.textEdit) {\n            insertText = item.textEdit.newText;\n        } else if (typeof item.insertText === 'string') {\n            insertText = item.insertText;\n        } else if (item.insertText instanceof SnippetString) {\n            insertText = item.insertText.value;\n            insertTextRules |= CompletionItemInsertTextRule.InsertAsSnippet;\n        }\n\n        let range: Completion['range'] | undefined;\n        const itemRange = item.textEdit?.range || item.range;\n        if (Range.isRange(itemRange)) {\n            range = Converter.fromRange(itemRange);\n        } else if (itemRange && (!defaultInserting?.isEqual(itemRange.inserting) || !defaultReplacing?.isEqual(itemRange.replacing))) {\n            range = {\n                insert: Converter.fromRange(itemRange.inserting),\n                replace: Converter.fromRange(itemRange.replacing)\n            };\n        }\n\n        const tags = (!!item.tags?.length || item.deprecated === true)\n            ? [CompletionItemTag.Deprecated]\n            : undefined;\n\n        const documentation = typeof item.documentation !== 'undefined'\n            ? Converter.fromMarkdown(item.documentation)\n            : undefined;\n\n        return {\n            id,\n            parentId,\n            label: item.label,\n            kind: Converter.fromCompletionItemKind(item.kind),\n            detail: item.detail,\n            documentation,\n            filterText: item.filterText,\n            sortText: item.sortText,\n            preselect: item.preselect,\n            insertText,\n            insertTextRules,\n            range,\n            additionalTextEdits: item.additionalTextEdits && item.additionalTextEdits.map(Converter.fromTextEdit),\n            command: this.commands.converter.toSafeCommand(item.command, toDispose),\n            commitCharacters: item.commitCharacters,\n            tags\n        };\n    }\n\n    static hasResolveSupport(provider: theia.CompletionItemProvider): boolean {\n        return typeof provider.resolveCompletionItem === 'function';\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, Location, LocationLink } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class DeclarationAdapter {\n\n    constructor(\n        private readonly provider: theia.DeclarationProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideDeclaration(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideDeclaration(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, LocationLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class DefinitionAdapter {\n\n    constructor(\n        private readonly delegate: theia.DefinitionProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    provideDefinition(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.delegate.provideDefinition(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { convertDiagnosticToMarkerData } from '../type-converters';\nimport { DiagnosticSeverity, MarkerSeverity } from '../types-impl';\nimport { MarkerData } from '../../common/plugin-api-rpc-model';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, LanguagesMain } from '../../common/plugin-api-rpc';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { v4 } from 'uuid';\n\nexport class DiagnosticCollection implements theia.DiagnosticCollection {\n    private static DIAGNOSTICS_PRIORITY = [\n        DiagnosticSeverity.Error, DiagnosticSeverity.Warning, DiagnosticSeverity.Information, DiagnosticSeverity.Hint\n    ];\n\n    private collectionName: string;\n    private diagnosticsLimitPerResource: number;\n    private proxy: LanguagesMain;\n    private onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>;\n\n    private diagnostics: Map<string, theia.Diagnostic[]>; // uri -> diagnostics\n    private isDisposed: boolean;\n    private onDisposeCallback: (() => void) | undefined;\n\n    constructor(name: string, maxCountPerFile: number, proxy: LanguagesMain, onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>) {\n        this.collectionName = name;\n        this.diagnosticsLimitPerResource = maxCountPerFile;\n        this.proxy = proxy;\n        this.onDidChangeDiagnosticsEmitter = onDidChangeDiagnosticsEmitter;\n\n        this.diagnostics = new Map<string, theia.Diagnostic[]>();\n        this.isDisposed = false;\n        this.onDisposeCallback = undefined;\n    }\n\n    get name(): string {\n        return this.collectionName;\n    }\n\n    set(uri: theia.Uri, diagnostics: theia.Diagnostic[] | undefined): void;\n    set(entries: [theia.Uri, theia.Diagnostic[] | undefined][]): void;\n    set(arg: theia.Uri | [theia.Uri, theia.Diagnostic[] | undefined][], diagnostics?: theia.Diagnostic[] | undefined): void {\n        this.ensureNotDisposed();\n\n        if (arg instanceof URI) {\n            this.setDiagnosticsForUri(arg, diagnostics);\n        } else if (!arg) {\n            this.clear();\n        } else if (arg instanceof Array) {\n            this.setDiagnostics(arg);\n        }\n    }\n\n    private setDiagnosticsForUri(uri: URI, diagnostics?: theia.Diagnostic[]): void {\n        if (!diagnostics) {\n            this.diagnostics.delete(uri.toString());\n        } else {\n            this.diagnostics.set(uri.toString(), diagnostics);\n        }\n        this.fireDiagnosticChangeEvent(uri);\n        this.sendChangesToEditor([uri]);\n    }\n\n    private setDiagnostics(entries: [URI, theia.Diagnostic[] | undefined][]): void {\n        const delta: URI[] = [];\n\n        // clear old diagnostics for given resources\n        for (const [uri] of entries) {\n            this.diagnostics.delete(uri.toString());\n        }\n\n        for (const [uri, diagnostics] of entries) {\n            const uriString = uri.toString();\n\n            if (!diagnostics) {\n                // clear existed\n                this.diagnostics.delete(uriString);\n                delta.push(uri);\n            } else {\n                // merge with existed if any\n                const existedDiagnostics = this.diagnostics.get(uriString);\n                if (existedDiagnostics) {\n                    existedDiagnostics.push(...diagnostics);\n                } else {\n                    this.diagnostics.set(uriString, diagnostics);\n                }\n            }\n\n            if (delta.indexOf(uri) === -1) {\n                delta.push(uri);\n            }\n        }\n\n        this.fireDiagnosticChangeEvent(delta);\n        this.sendChangesToEditor(delta);\n    }\n\n    delete(uri: URI): void {\n        if (this.has(uri)) {\n            this.fireDiagnosticChangeEvent(uri);\n            this.diagnostics.delete(uri.toString());\n            this.proxy.$changeDiagnostics(this.name, [[uri.toString(), []]]);\n        }\n    }\n\n    clear(): void {\n        this.ensureNotDisposed();\n        this.fireDiagnosticChangeEvent(this.getAllResourcesUris());\n        this.diagnostics.clear();\n        this.proxy.$clearDiagnostics(this.name);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    forEach(callback: (uri: URI, diagnostics: theia.Diagnostic[], collection: theia.DiagnosticCollection) => any, thisArg?: any): void {\n        this.ensureNotDisposed();\n        this.diagnostics.forEach((diagnostics, uriString) => {\n            const uri = URI.parse(uriString);\n            callback.apply(thisArg, [uri, this.getDiagnosticsByUri(uri), this]);\n        });\n    }\n\n    get(uri: URI): theia.Diagnostic[] | undefined {\n        this.ensureNotDisposed();\n        return this.getDiagnosticsByUri(uri);\n    }\n\n    has(uri: URI): boolean {\n        this.ensureNotDisposed();\n        return (this.diagnostics.get(uri.toString()) instanceof Array);\n    }\n\n    dispose(): void {\n        if (!this.isDisposed) {\n            if (this.onDisposeCallback) {\n                this.onDisposeCallback();\n            }\n            this.clear();\n            this.isDisposed = true;\n        }\n    }\n\n    setOnDisposeCallback(onDisposeCallback: (() => void) | undefined): void {\n        this.onDisposeCallback = onDisposeCallback;\n    }\n\n    private ensureNotDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('Diagnostic collection with name \"' + this.name + '\" is already disposed.');\n        }\n    }\n\n    private getAllResourcesUris(): string[] {\n        const resourcesUris: string[] = [];\n        this.diagnostics.forEach((diagnostics, uri) => resourcesUris.push(uri));\n        return resourcesUris;\n    }\n\n    private getDiagnosticsByUri(uri: URI): theia.Diagnostic[] | undefined {\n        const diagnostics = this.diagnostics.get(uri.toString());\n        return (diagnostics instanceof Array) ? <theia.Diagnostic[]>Object.freeze(diagnostics) : undefined;\n    }\n\n    private fireDiagnosticChangeEvent(arg: string | string[] | URI | URI[]): void {\n        this.onDidChangeDiagnosticsEmitter.fire({ uris: this.toUrisArray(arg) });\n    }\n\n    private toUrisArray(arg: string | string[] | URI | URI[]): URI[] {\n        if (arg instanceof Array) {\n            if (arg.length === 0) {\n                return [];\n            }\n\n            if (arg[0] instanceof URI) {\n                return arg as URI[];\n            } else {\n                const result: URI[] = [];\n                for (const uriString of arg as string[]) {\n                    result.push(URI.parse(uriString));\n                }\n                return result;\n            }\n        } else {\n            if (arg instanceof URI) {\n                return [arg];\n            } else {\n                return [URI.parse(arg)];\n            }\n        }\n    }\n\n    private sendChangesToEditor(uris: URI[]): void {\n        const markers: [string, MarkerData[]][] = [];\n        nextUri:\n        for (const uri of uris) {\n            const uriMarkers: MarkerData[] = [];\n            const uriDiagnostics = this.diagnostics.get(uri.toString());\n            if (uriDiagnostics) {\n                if (uriDiagnostics.length > this.diagnosticsLimitPerResource) {\n                    for (const severity of DiagnosticCollection.DIAGNOSTICS_PRIORITY) {\n                        for (const diagnostic of uriDiagnostics) {\n                            if (severity === diagnostic.severity) {\n                                if (uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)) + 1 === this.diagnosticsLimitPerResource) {\n                                    const lastMarker = uriMarkers[uriMarkers.length - 1];\n                                    uriMarkers.push({\n                                        severity: MarkerSeverity.Info,\n                                        message: 'Limit of diagnostics is reached. ' + (uriDiagnostics.length - this.diagnosticsLimitPerResource) + ' items are hidden',\n                                        startLineNumber: lastMarker.startLineNumber,\n                                        startColumn: lastMarker.startColumn,\n                                        endLineNumber: lastMarker.endLineNumber,\n                                        endColumn: lastMarker.endColumn\n                                    });\n                                    markers.push([uri.toString(), uriMarkers]);\n                                    continue nextUri;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    uriDiagnostics.forEach(diagnostic => uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)));\n                    markers.push([uri.toString(), uriMarkers]);\n                }\n            } else {\n                markers.push([uri.toString(), []]);\n            }\n        }\n\n        this.proxy.$changeDiagnostics(this.name, markers);\n    }\n}\n\nexport class Diagnostics {\n    public static MAX_DIAGNOSTICS_PER_FILE = 1000;\n    private static GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX = '_generated_diagnostic_collection_name_#';\n\n    private proxy: LanguagesMain;\n    private diagnosticCollections: Map<string, DiagnosticCollection>; // id -> diagnostic collection\n\n    private diagnosticsChangedEmitter = new Emitter<theia.DiagnosticChangeEvent>();\n    public readonly onDidChangeDiagnostics: Event<theia.DiagnosticChangeEvent> = this.diagnosticsChangedEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n\n        this.diagnosticCollections = new Map<string, DiagnosticCollection>();\n    }\n\n    getDiagnostics(resource: theia.Uri): theia.Diagnostic[];\n    getDiagnostics(): [theia.Uri, theia.Diagnostic[]][];\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        if (resource) {\n            return this.getAllDiagnosticsForResource(resource);\n        } else {\n            return this.getAllDiagnostics();\n        }\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        if (!name) {\n            do {\n                name = Diagnostics.GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX + this.getNextId();\n            } while (this.diagnosticCollections.has(name));\n        } else if (this.diagnosticCollections.has(name)) {\n            console.warn(`Diagnostic collection with name '${name}' already exist.`);\n        }\n\n        const diagnosticCollection = new DiagnosticCollection(name, Diagnostics.MAX_DIAGNOSTICS_PER_FILE, this.proxy, this.diagnosticsChangedEmitter);\n        diagnosticCollection.setOnDisposeCallback(() => {\n            this.diagnosticCollections.delete(name!);\n        });\n        this.diagnosticCollections.set(name, diagnosticCollection);\n        return diagnosticCollection;\n    }\n\n    private getNextId(): string {\n        return v4();\n    }\n\n    private getAllDiagnosticsForResource(uri: URI): theia.Diagnostic[] {\n        let result: theia.Diagnostic[] = [];\n        this.diagnosticCollections.forEach(diagnosticCollection => {\n            const diagnostics = diagnosticCollection.get(uri);\n            if (diagnostics) {\n                result = result.concat(...diagnostics);\n            }\n        });\n        return result;\n    }\n\n    private getAllDiagnostics(): [URI, theia.Diagnostic[]][] {\n        const result: [URI, theia.Diagnostic[]][] = [];\n        // Holds uri index in result array of tuples.\n        const urisIndexes = new Map<string, number>();\n        let nextIndex = 0;\n        this.diagnosticCollections.forEach(diagnosticsCollection =>\n            diagnosticsCollection.forEach((uri, diagnostics) => {\n                let uriIndex = urisIndexes.get(uri.toString());\n                if (uriIndex === undefined) {\n                    uriIndex = nextIndex++;\n                    urisIndexes.set(uri.toString(), uriIndex);\n                    result.push([uri, [...diagnostics]]);\n                } else {\n                    result[uriIndex][1] = result[uriIndex][1].concat(...diagnostics);\n                }\n            })\n        );\n        return result;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport * as theia from '@theia/plugin';\nimport { DataTransferDTO, DocumentDropEdit } from '../../common/plugin-api-rpc-model';\nimport { CancellationToken } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { Position } from '../../common/plugin-api-rpc';\nimport * as Converter from '../type-converters';\nimport { DocumentsExtImpl } from '../documents';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FileSystemExtImpl } from '../file-system-ext-impl';\nimport * as os from 'os';\nimport * as path from 'path';\n\nexport class DocumentDropEditAdapter {\n    constructor(private readonly provider: theia.DocumentDropEditProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly fileSystem: FileSystemExtImpl) { }\n\n    async provideDocumentDropEdits(resource: URI, position: Position, dataTransfer: DataTransferDTO, token: CancellationToken): Promise<DocumentDropEdit | undefined> {\n        return this.provider.provideDocumentDropEdits(\n            this.documents.getDocument(resource),\n            Converter.toPosition(position),\n            Converter.DataTransfer.toDataTransfer(dataTransfer, itemId => this.resolveFileData(itemId)),\n            token) as DocumentDropEdit | undefined;\n    }\n\n    private async resolveFileData(itemId: string): Promise<Uint8Array> {\n        const filePath = URI.file(path.resolve(os.tmpdir(), 'theia_upload', itemId));\n        return this.fileSystem.fileSystem.readFile(filePath);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FormattingOptions, TextEdit } from '../../common/plugin-api-rpc-model';\n\nexport class DocumentFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentFormattingEdits(resource: URI, options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideDocumentFormattingEdits(doc, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { DocumentHighlight } from '../../common/plugin-api-rpc-model';\n\nexport class DocumentHighlightAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentHighlightProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideDocumentHighlights(resource: URI, position: Position, token: theia.CancellationToken): Promise<DocumentHighlight[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideDocumentHighlights(document, zeroBasedPosition, token)).then(documentHighlights => {\n            if (!documentHighlights) {\n                return undefined;\n            }\n\n            if (this.isDocumentHighlightArray(documentHighlights)) {\n                const highlights: DocumentHighlight[] = [];\n\n                for (const highlight of documentHighlights) {\n                    highlights.push(Converter.fromDocumentHighlight(highlight));\n                }\n\n                return highlights;\n            }\n        });\n    }\n\n    private isDocumentHighlightArray(array: unknown): array is types.DocumentHighlight[] {\n        return Array.isArray(array) && array.length > 0 && array[0] instanceof types.DocumentHighlight;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { EvaluatableExpression } from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\n\nexport class EvaluatableExpressionAdapter {\n\n    constructor(\n        private readonly provider: theia.EvaluatableExpressionProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    async provideEvaluatableExpression(resource: URI, position: Position, token: theia.CancellationToken): Promise<EvaluatableExpression | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document data for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideEvaluatableExpression(document, pos, token)).then(expression => {\n            if (!expression) {\n                return undefined;\n            }\n            return Converter.fromEvaluatableExpression(expression);\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as Converter from '../type-converters';\nimport * as model from '../../common/plugin-api-rpc-model';\n\nexport class FoldingProviderAdapter {\n\n    constructor(\n        private readonly provider: theia.FoldingRangeProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideFoldingRanges(resource: URI, context: model.FoldingContext, token: theia.CancellationToken): Promise<model.FoldingRange[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideFoldingRanges(doc, context, token)).then(ranges => {\n            if (!Array.isArray(ranges)) {\n                return undefined;\n            }\n\n            return ranges.map(Converter.fromFoldingRange);\n        });\n    }\n}\n","\n// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { Hover } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { Range } from '../types-impl';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class HoverAdapter {\n\n    constructor(\n        private readonly provider: theia.HoverProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    public provideHover(resource: URI, position: Position, token: theia.CancellationToken): Promise<Hover | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideHover(doc, pos, token)).then(value => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (!value || !Array.isArray(value.contents) || (value.contents as Array<any>).length === 0) {\n                return undefined;\n            }\n            if (!value.range) {\n                value.range = doc.getWordRangeAtPosition(pos);\n            }\n            if (!value.range) {\n                value.range = new Range(pos, pos);\n            }\n\n            return Converter.fromHover(value);\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, LocationLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class ImplementationAdapter {\n\n    constructor(\n        private readonly provider: theia.ImplementationProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideImplementation(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideImplementation(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.65.0/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L1178-L1288\n\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport { Cache } from '../../common/cache';\nimport { ChainedCacheId, InlayHint, InlayHintLabelPart, Range } from '../../common/plugin-api-rpc-model';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { DocumentsExtImpl } from '../documents';\nimport { InlayHintDto, InlayHintsDto } from '../../common';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { isLocationArray } from './util';\n\nexport class InlayHintsAdapter {\n\n    private cache = new Cache<theia.InlayHint>('InlayHints');\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly provider: theia.InlayHintsProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    async provideInlayHints(resource: URI, range: Range, token: theia.CancellationToken): Promise<InlayHintsDto | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no documents for ${resource}`));\n        }\n\n        const doc = documentData.document;\n        const ran = Converter.toRange(range);\n        const hints = await this.provider.provideInlayHints(doc, ran, token);\n\n        if (!Array.isArray(hints) || hints.length === 0) {\n            return undefined;\n        }\n\n        if (token.isCancellationRequested) {\n            return undefined;\n        }\n\n        const pid = this.cache.add(hints);\n        this.disposables.set(pid, new DisposableCollection());\n        const result: InlayHintsDto = { hints: [], cacheId: pid };\n\n        for (let i = 0; i < hints.length; i++) {\n            if (this.isValidInlayHint(hints[i], ran)) {\n                result.hints.push(this.convertInlayHint(hints[i], [pid, i]));\n            }\n        }\n\n        return result;\n    }\n\n    async resolveInlayHint(id: ChainedCacheId, token: theia.CancellationToken): Promise<InlayHint | undefined> {\n        if (typeof this.provider.resolveInlayHint !== 'function') {\n            return undefined;\n        }\n        const item = this.cache.get(...id);\n        if (!item) {\n            return undefined;\n        }\n        const hint = await this.provider.resolveInlayHint!(item, token);\n        if (!hint) {\n            return undefined;\n        }\n        if (!this.isValidInlayHint(hint)) {\n            return undefined;\n        }\n        return this.convertInlayHint(hint, id);\n    }\n\n    private isValidInlayHint(hint: theia.InlayHint, range?: theia.Range): boolean {\n        if (hint.label.length === 0 || Array.isArray(hint.label) && hint.label.every(part => part.value.length === 0)) {\n            return false;\n        }\n        if (range && !range.contains(hint.position)) {\n            return false;\n        }\n        return true;\n    }\n\n    private convertInlayHint(hint: theia.InlayHint, id: ChainedCacheId): InlayHintDto {\n\n        const disposables = this.disposables.get(id[0]);\n        if (!disposables) {\n            throw Error('DisposableCollection is missing...');\n        }\n\n        const result: InlayHintDto = {\n            label: '', // fill-in below.\n            cacheId: id,\n            tooltip: hint.tooltip,\n            position: Converter.fromPosition(hint.position),\n            textEdits: hint.textEdits && hint.textEdits.map(Converter.fromTextEdit),\n            kind: hint.kind && Converter.InlayHintKind.from(hint.kind),\n            paddingLeft: hint.paddingLeft,\n            paddingRight: hint.paddingRight,\n        };\n\n        if (typeof hint.label === 'string') {\n            result.label = hint.label;\n        } else {\n            result.label = hint.label.map(part => {\n                const partResult: InlayHintLabelPart = { label: part.value };\n                if (part.tooltip) {\n                    partResult.tooltip = typeof partResult === 'string' ? part.tooltip : Converter.fromMarkdown(part.tooltip);\n                }\n                if (isLocationArray(part.location)) {\n                    partResult.location = Converter.fromLocation(part.location);\n                }\n                if (part.command) {\n                    partResult.command = this.commands.converter.toSafeCommand(part.command, disposables);\n                }\n                return partResult;\n            });\n        }\n\n        return result;\n    }\n\n    async releaseHints(id: number): Promise<void> {\n        this.disposables.get(id)?.dispose();\n        this.disposables.delete(id);\n        this.cache.delete(id);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// copied from https://github.com/microsoft/vscode/blob/6261075646f055b99068d3688932416f2346dd3b/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L1069-L1185.\n\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport { DocumentsExtImpl } from '../documents';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { ReferenceMap } from '../../common/reference-map';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { InlineCompletionTriggerKind as TriggerKind } from '../../plugin/types-impl';\nimport { Command, InlineCompletionContext, InlineCompletionTriggerKind } from '../../common/plugin-api-rpc-model';\nimport { IdentifiableInlineCompletion, IdentifiableInlineCompletions, Position } from '../../common/plugin-api-rpc';\n\nexport class InlineCompletionAdapterBase {\n\n    async provideInlineCompletions(\n        _resource: URI,\n        _position: Position,\n        _context: InlineCompletionContext,\n        _token: theia.CancellationToken\n    ): Promise<IdentifiableInlineCompletions | undefined> {\n        return undefined;\n    }\n\n    disposeCompletions(pid: number): void { return; };\n}\n\nexport class InlineCompletionAdapter extends InlineCompletionAdapterBase {\n\n    private readonly references = new ReferenceMap<{\n        dispose(): void;\n        items: readonly theia.InlineCompletionItem[];\n    }>();\n\n    constructor(\n        private readonly documents: DocumentsExtImpl,\n        private readonly provider: theia.InlineCompletionItemProvider,\n        private readonly commands: CommandRegistryImpl,\n    ) {\n        super();\n    }\n\n    private readonly languageTriggerKindToVSCodeTriggerKind: Record<InlineCompletionTriggerKind, TriggerKind> = {\n        [InlineCompletionTriggerKind.Automatic]: TriggerKind.Automatic,\n        [InlineCompletionTriggerKind.Explicit]: TriggerKind.Invoke,\n    };\n\n    override async provideInlineCompletions(\n        resource: URI,\n        position: Position,\n        context: InlineCompletionContext,\n        token: theia.CancellationToken\n    ): Promise<IdentifiableInlineCompletions | undefined> {\n        const doc = this.documents.getDocument(resource);\n        const pos = Converter.toPosition(position);\n\n        const result = await this.provider.provideInlineCompletionItems(doc, pos, {\n            selectedCompletionInfo:\n                context.selectedSuggestionInfo\n                    ? {\n                        range: Converter.toRange(context.selectedSuggestionInfo.range),\n                        text: context.selectedSuggestionInfo.text\n                    }\n                    : undefined,\n            triggerKind: this.languageTriggerKindToVSCodeTriggerKind[context.triggerKind]\n        }, token);\n\n        if (!result || token.isCancellationRequested) {\n            return undefined;\n        }\n\n        const normalizedResult = Array.isArray(result) ? result : result.items;\n\n        let disposableCollection: DisposableCollection | undefined = undefined;\n        const pid = this.references.createReferenceId({\n            dispose(): void {\n                disposableCollection?.dispose();\n            },\n            items: normalizedResult\n        });\n\n        return {\n            pid,\n            items: normalizedResult.map<IdentifiableInlineCompletion>((item, idx) => {\n                let command: Command | undefined = undefined;\n                if (item.command) {\n                    if (!disposableCollection) {\n                        disposableCollection = new DisposableCollection();\n                    }\n                    command = this.commands.converter.toSafeCommand(item.command, disposableCollection);\n                }\n\n                const insertText = item.insertText;\n                return ({\n                    insertText: typeof insertText === 'string' ? insertText : { snippet: insertText.value },\n                    filterText: item.filterText,\n                    range: item.range ? Converter.fromRange(item.range) : undefined,\n                    command,\n                    idx: idx\n                });\n            })\n        };\n    }\n\n    override disposeCompletions(pid: number): void {\n        const data = this.references.disposeReferenceId(pid);\n        data?.dispose();\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2022 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { InlineValue, InlineValueContext, Range } from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\n\nexport class InlineValuesAdapter {\n\n    constructor(\n        private readonly provider: theia.InlineValuesProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    async provideInlineValues(resource: URI, range: Range, context: InlineValueContext, token: theia.CancellationToken): Promise<InlineValue[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document data for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const viewPort = Converter.toRange(range);\n        const ctx = Converter.toInlineValueContext(context);\n\n        return Promise.resolve(this.provider.provideInlineValues(document, viewPort, ctx, token)).then(inlineValue => {\n            if (!inlineValue) {\n                return undefined;\n            }\n            if (Array.isArray(inlineValue)) {\n                return inlineValue.map(iv => Converter.fromInlineValue(iv));\n            }\n            return undefined;\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { CodeLensSymbol } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\n/** Adapts the calls from main to extension thread for providing/resolving the code lenses. */\nexport class CodeLensAdapter {\n\n    private static readonly BAD_CMD: theia.Command = { command: 'missing', title: '<<MISSING COMMAND>>' };\n\n    private cacheId = 0;\n    private readonly cache = new Map<number, theia.CodeLens>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly provider: theia.CodeLensProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    provideCodeLenses(resource: URI, token: theia.CancellationToken): Promise<CodeLensSymbol[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideCodeLenses(doc, token)).then(lenses => {\n            if (Array.isArray(lenses)) {\n                return lenses.map(lens => {\n                    const cacheId = this.cacheId++;\n                    const toDispose = new DisposableCollection();\n                    const lensSymbol = ObjectIdentifier.mixin({\n                        range: Converter.fromRange(lens.range)!,\n                        command: this.commands.converter.toSafeCommand(lens.command, toDispose)\n                    }, cacheId);\n                    this.cache.set(cacheId, lens);\n                    this.disposables.set(cacheId, toDispose);\n                    return lensSymbol;\n                });\n            }\n            return undefined;\n        });\n    }\n\n    async resolveCodeLens(resource: URI, symbol: CodeLensSymbol, token: theia.CancellationToken): Promise<CodeLensSymbol | undefined> {\n        const cacheId = ObjectIdentifier.of(symbol);\n        const lens = this.cache.get(cacheId);\n        if (!lens) {\n            return undefined;\n        }\n\n        let newLens: theia.CodeLens | undefined | null;\n        if (typeof this.provider.resolveCodeLens === 'function' && !lens.isResolved) {\n            newLens = await this.provider.resolveCodeLens(lens, token);\n            if (token.isCancellationRequested) {\n                return undefined;\n            }\n        }\n        newLens = newLens || lens;\n\n        const disposables = this.disposables.get(cacheId);\n        if (!disposables) {\n            // already been disposed of\n            return undefined;\n        }\n        symbol.command = this.commands.converter.toSafeCommand(newLens.command ? newLens.command : CodeLensAdapter.BAD_CMD, disposables);\n        return symbol;\n    }\n\n    releaseCodeLenses(ids: number[]): void {\n        ids.forEach(id => {\n            this.cache.delete(id);\n            const toDispose = this.disposables.get(id);\n            if (toDispose) {\n                toDispose.dispose();\n                this.disposables.delete(id);\n            }\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { DocumentLink } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\n\nexport class LinkProviderAdapter {\n    private cacheId = 0;\n    private cache = new Map<number, theia.DocumentLink>();\n\n    constructor(\n        private readonly provider: theia.DocumentLinkProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideLinks(resource: URI, token: theia.CancellationToken): Promise<DocumentLink[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentLinks(doc, token)).then(links => {\n            if (!Array.isArray(links)) {\n                return undefined;\n            }\n            const result: DocumentLink[] = [];\n            for (const link of links) {\n                const data = Converter.DocumentLink.from(link);\n                const id = this.cacheId++;\n                ObjectIdentifier.mixin(data, id);\n                this.cache.set(id, link);\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    resolveLink(link: DocumentLink, token: theia.CancellationToken): Promise<DocumentLink | undefined> {\n        if (typeof this.provider.resolveDocumentLink !== 'function') {\n            return Promise.resolve(undefined);\n        }\n        const id = ObjectIdentifier.of(link);\n        const item = this.cache.get(id);\n        if (!item) {\n            return Promise.resolve(undefined);\n        }\n        return Promise.resolve(this.provider.resolveDocumentLink(item, token)).then(value => {\n            if (value) {\n                return Converter.DocumentLink.from(value);\n            }\n            return undefined;\n        });\n    }\n\n    releaseDocumentLinks(ids: number[]): void {\n        ids.forEach(id => {\n            this.cache.delete(id);\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport * as rpc from '../../common/plugin-api-rpc';\nimport { DocumentsExtImpl } from '../documents';\nimport { LinkedEditingRanges } from '../../common/plugin-api-rpc-model';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { coalesce } from '../../common/arrays';\nimport { fromRange, toPosition } from '../type-converters';\nimport { serializeRegExp } from '../languages-utils';\n\nexport class LinkedEditingRangeAdapter {\n\n    constructor(\n        private readonly documents: DocumentsExtImpl,\n        private readonly provider: theia.LinkedEditingRangeProvider\n    ) { }\n\n    async provideRanges(resource: URI, position: rpc.Position, token: theia.CancellationToken): Promise<LinkedEditingRanges | undefined> {\n\n        const doc = this.documents.getDocument(resource);\n        const pos = toPosition(position);\n\n        const value = await this.provider.provideLinkedEditingRanges(doc, pos, token);\n        if (value && Array.isArray(value.ranges)) {\n            return {\n                ranges: coalesce(value.ranges.map(r => fromRange(r))),\n                wordPattern: serializeRegExp(value.wordPattern)\n            };\n        }\n        return undefined;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FormattingOptions, TextEdit } from '../../common/plugin-api-rpc-model';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class OnTypeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.OnTypeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideOnTypeFormattingEdits(resource: URI, position: Position, ch: string,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideOnTypeFormattingEdits(doc, pos, ch, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { DocumentSymbol, Range } from '../../common/plugin-api-rpc-model';\nimport * as types from '../types-impl';\n\n/** Adapts the calls from main to extension thread for providing the document symbols. */\nexport class OutlineAdapter {\n\n    constructor(\n        private readonly documents: DocumentsExtImpl,\n        private readonly provider: theia.DocumentSymbolProvider\n    ) { }\n\n    provideDocumentSymbols(resource: URI, token: theia.CancellationToken): Promise<DocumentSymbol[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentSymbols(doc, token)).then(value => {\n            if (!value || value.length === 0) {\n                return undefined;\n            }\n            if (value[0] instanceof types.DocumentSymbol) {\n                return (<types.DocumentSymbol[]>value).map(Converter.fromDocumentSymbol);\n            } else {\n                return OutlineAdapter.asDocumentSymbolTree(resource, <types.SymbolInformation[]>value);\n            }\n        });\n    }\n\n    private static asDocumentSymbolTree(resource: URI, infos: types.SymbolInformation[]): DocumentSymbol[] {\n        // first sort by start (and end) and then loop over all elements\n        // and build a tree based on containment.\n        infos = infos.slice(0).sort((a, b) => {\n            let r = a.location.range.start.compareTo(b.location.range.start);\n            if (r === 0) {\n                r = b.location.range.end.compareTo(a.location.range.end);\n            }\n            return r;\n        });\n        const res: DocumentSymbol[] = [];\n        const parentStack: DocumentSymbol[] = [];\n        for (const info of infos) {\n            const element = <DocumentSymbol>{\n                name: info.name,\n                detail: '',\n                kind: Converter.SymbolKind.fromSymbolKind(info.kind),\n                containerName: info.containerName,\n                range: Converter.fromRange(info.location.range),\n                selectionRange: Converter.fromRange(info.location.range),\n                children: [],\n                tags: info.tags && info.tags.length > 0 ? info.tags.map(Converter.fromSymbolTag) : [],\n            };\n\n            while (true) {\n                if (parentStack.length === 0) {\n                    parentStack.push(element);\n                    res.push(element);\n                    break;\n                }\n                const parent = parentStack[parentStack.length - 1];\n                if (OutlineAdapter.containsRange(parent.range, element.range) && !OutlineAdapter.equalsRange(parent.range, element.range)) {\n                    parent.children!.push(element);\n                    parentStack.push(element);\n                    break;\n                }\n                parentStack.pop();\n            }\n        }\n        return res;\n    }\n\n    /**\n     * Test if `otherRange` is in `range`. If the ranges are equal, will return true.\n     */\n    private static containsRange(range: Range, otherRange: Range): boolean {\n        if (otherRange.startLineNumber < range.startLineNumber || otherRange.endLineNumber < range.startLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber > range.endLineNumber || otherRange.endLineNumber > range.endLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber === range.startLineNumber && otherRange.startColumn < range.startColumn) {\n            return false;\n        }\n        if (otherRange.endLineNumber === range.endLineNumber && otherRange.endColumn > range.endColumn) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Test if range `a` equals `b`.\n     */\n    private static equalsRange(a: Range, b: Range): boolean {\n        return (\n            !!a &&\n            !!b &&\n            a.startLineNumber === b.startLineNumber &&\n            a.startColumn === b.startColumn &&\n            a.endLineNumber === b.endLineNumber &&\n            a.endColumn === b.endColumn\n        );\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FormattingOptions, TextEdit, Range } from '../../common/plugin-api-rpc-model';\n\nexport class RangeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentRangeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentRangeFormattingEdits(resource: URI, range: Range, options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = Converter.toRange(range);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideDocumentRangeFormattingEdits(doc, ran, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { ReferenceContext, Location } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { isLocationArray } from './util';\n\nexport class ReferenceAdapter {\n\n    constructor(\n        private readonly provider: theia.ReferenceProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideReferences(resource: URI, position: Position, context: ReferenceContext, token: theia.CancellationToken): Promise<Location[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideReferences(document, zeroBasedPosition, context, token)).then(reference => {\n            if (!reference) {\n                return undefined;\n            }\n\n            if (isLocationArray(reference)) {\n                const locations: Location[] = [];\n\n                for (const location of reference) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport { Position, WorkspaceEditDto } from '../../common/plugin-api-rpc';\nimport { Range } from '../types-impl';\nimport { isObject } from '../../common/types';\n\nexport class RenameAdapter {\n\n    static supportsResolving(provider: theia.RenameProvider): boolean {\n        return typeof provider.prepareRename === 'function';\n    }\n\n    constructor(\n        private readonly provider: theia.RenameProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideRenameEdits(resource: URI, position: Position, newName: string, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(\n            this.provider.provideRenameEdits(doc, pos, newName, token)\n        ).then(value => {\n            if (!value) {\n                return undefined;\n            }\n\n            return Converter.fromWorkspaceEdit(value);\n        }, error => {\n            const rejectReason = RenameAdapter.asMessage(error);\n            if (rejectReason) {\n                return <WorkspaceEditDto>{\n                    rejectReason,\n                    edits: []\n                };\n            } else {\n                return Promise.reject<WorkspaceEditDto>(error);\n            }\n        });\n    }\n\n    resolveRenameLocation(resource: URI, position: Position, token: theia.CancellationToken): Promise<model.RenameLocation & model.Rejection | undefined> {\n        if (typeof this.provider.prepareRename !== 'function') {\n            return Promise.resolve(undefined);\n        }\n\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(\n            this.provider.prepareRename(doc, pos, token)\n        ).then(rangeOrLocation => {\n\n            let range: theia.Range | undefined;\n            let text: string;\n            if (rangeOrLocation && Range.isRange(rangeOrLocation)) {\n                range = rangeOrLocation;\n                text = doc.getText(rangeOrLocation);\n            } else if (rangeOrLocation && isObject(rangeOrLocation)) {\n                range = rangeOrLocation.range;\n                text = rangeOrLocation.placeholder;\n            }\n\n            if (!range) {\n                return undefined;\n            }\n            if (range.start.line > pos.line || range.end.line < pos.line) {\n                console.warn('INVALID rename location: position line must be within range start/end lines');\n                return undefined;\n            }\n            return {\n                range: Converter.fromRange(range)!,\n                text: text!\n            };\n        }, error => {\n            const rejectReason = RenameAdapter.asMessage(error);\n            if (rejectReason) {\n                return Promise.resolve(<model.RenameLocation & model.Rejection>{\n                    rejectReason,\n                    range: undefined!,\n                    text: undefined!\n                });\n            } else {\n                return Promise.reject(error);\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private static asMessage(err: any): string | undefined {\n        if (typeof err === 'string') {\n            return err;\n        } else if (err instanceof Error && typeof err.message === 'string') {\n            return err.message;\n        } else {\n            return undefined;\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/standalone/0.19.x/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L1107-L1151\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport * as types from '../types-impl';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class SelectionRangeProviderAdapter {\n\n    constructor(\n        private readonly provider: theia.SelectionRangeProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideSelectionRanges(resource: URI, position: Position[], token: theia.CancellationToken): Promise<model.SelectionRange[][]> {\n        const documentData = this.documents.getDocumentData(resource);\n\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const document = documentData.document;\n        const positions = position.map(pos => Converter.toPosition(pos));\n\n        return Promise.resolve(this.provider.provideSelectionRanges(document, positions, token)).then(allProviderRanges => {\n            if (!Array.isArray(allProviderRanges) || allProviderRanges.length === 0) {\n                return [];\n            }\n\n            if (allProviderRanges.length !== positions.length) {\n                return [];\n            }\n\n            const allResults: model.SelectionRange[][] = [];\n            for (let i = 0; i < positions.length; i++) {\n                const oneResult: model.SelectionRange[] = [];\n                allResults.push(oneResult);\n\n                let last: types.Position | theia.Range = positions[i];\n                let selectionRange = allProviderRanges[i];\n\n                while (true) {\n                    if (!selectionRange.range.contains(last)) {\n                        return Promise.reject(new Error('INVALID selection range, must contain the previous range'));\n                    }\n                    oneResult.push(Converter.fromSelectionRange(selectionRange));\n                    if (!selectionRange.parent) {\n                        break;\n                    }\n                    last = selectionRange.range;\n                    selectionRange = selectionRange.parent;\n                }\n            }\n            return allResults;\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/0eb3a02ca2bcfab5faa3dc6e52d7c079efafcab0/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L692-L869\n\n/* eslint-disable @typescript-eslint/consistent-type-definitions */\n\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { SemanticTokens, SemanticTokensEdit, SemanticTokensEdits } from '../types-impl';\nimport { DocumentsExtImpl } from '../documents';\nimport { toRange } from '../type-converters';\nimport { encodeSemanticTokensDto } from '../../common/semantic-tokens-dto';\nimport { Range } from '../../common/plugin-api-rpc-model';\n\nclass SemanticTokensPreviousResult {\n    constructor(\n        public readonly resultId: string | undefined,\n        public readonly tokens?: Uint32Array,\n    ) { }\n}\n\ntype RelaxedSemanticTokens = { readonly resultId?: string; readonly data: number[]; };\ntype RelaxedSemanticTokensEdit = { readonly start: number; readonly deleteCount: number; readonly data?: number[]; };\ntype RelaxedSemanticTokensEdits = { readonly resultId?: string; readonly edits: RelaxedSemanticTokensEdit[]; };\n\ntype ProvidedSemanticTokens = theia.SemanticTokens | RelaxedSemanticTokens;\ntype ProvidedSemanticTokensEdits = theia.SemanticTokensEdits | RelaxedSemanticTokensEdits;\n\nexport class DocumentSemanticTokensAdapter {\n\n    private readonly _previousResults: Map<number, SemanticTokensPreviousResult>;\n    private _nextResultId = 1;\n\n    constructor(\n        private readonly _documents: DocumentsExtImpl,\n        private readonly _provider: theia.DocumentSemanticTokensProvider,\n    ) {\n        this._previousResults = new Map<number, SemanticTokensPreviousResult>();\n    }\n\n    async provideDocumentSemanticTokens(resource: URI, previousResultId: number, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        const doc = this._documents.getDocument(resource);\n        const previousResult = (previousResultId !== 0 ? this._previousResults.get(previousResultId) : null);\n        let value: ProvidedSemanticTokens | ProvidedSemanticTokensEdits | null | undefined;\n        if (previousResult && typeof previousResult.resultId === 'string' && typeof this._provider.provideDocumentSemanticTokensEdits === 'function') {\n            value = await this._provider.provideDocumentSemanticTokensEdits(doc, previousResult.resultId, token);\n        } else {\n            value = await this._provider.provideDocumentSemanticTokens(doc, token);\n        }\n        if (previousResult) {\n            this._previousResults.delete(previousResultId);\n        }\n        if (!value) {\n            return null;\n        }\n        value = DocumentSemanticTokensAdapter._fixProvidedSemanticTokens(value);\n        return this._send(DocumentSemanticTokensAdapter._convertToEdits(previousResult, value), value);\n    }\n\n    async releaseDocumentSemanticColoring(semanticColoringResultId: number): Promise<void> {\n        this._previousResults.delete(semanticColoringResultId);\n    }\n\n    private static _fixProvidedSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): theia.SemanticTokens | theia.SemanticTokensEdits {\n        if (DocumentSemanticTokensAdapter._isSemanticTokens(v)) {\n            if (DocumentSemanticTokensAdapter._isCorrectSemanticTokens(v)) {\n                return v;\n            }\n            return new SemanticTokens(new Uint32Array(v.data), v.resultId);\n        } else if (DocumentSemanticTokensAdapter._isSemanticTokensEdits(v)) {\n            if (DocumentSemanticTokensAdapter._isCorrectSemanticTokensEdits(v)) {\n                return v;\n            }\n            return new SemanticTokensEdits(v.edits.map(edit => new SemanticTokensEdit(edit.start, edit.deleteCount, edit.data ?\n                new Uint32Array(edit.data) : edit.data)), v.resultId);\n        }\n        return v;\n    }\n\n    private static _isSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokens {\n        return v && !!((v as ProvidedSemanticTokens).data);\n    }\n\n    private static _isCorrectSemanticTokens(v: ProvidedSemanticTokens): v is theia.SemanticTokens {\n        return (v.data instanceof Uint32Array);\n    }\n\n    private static _isSemanticTokensEdits(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokensEdits {\n        return v && Array.isArray((v as ProvidedSemanticTokensEdits).edits);\n    }\n\n    private static _isCorrectSemanticTokensEdits(v: ProvidedSemanticTokensEdits): v is theia.SemanticTokensEdits {\n        for (const edit of v.edits) {\n            if (!(edit.data instanceof Uint32Array)) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private static _convertToEdits(previousResult: SemanticTokensPreviousResult | null | undefined, newResult: theia.SemanticTokens | theia.SemanticTokensEdits):\n        theia.SemanticTokens | theia.SemanticTokensEdits {\n        if (!DocumentSemanticTokensAdapter._isSemanticTokens(newResult)) {\n            return newResult;\n        }\n        if (!previousResult || !previousResult.tokens) {\n            return newResult;\n        }\n        const oldData = previousResult.tokens;\n        const oldLength = oldData.length;\n        const newData = newResult.data;\n        const newLength = newData.length;\n\n        let commonPrefixLength = 0;\n        const maxCommonPrefixLength = Math.min(oldLength, newLength);\n        while (commonPrefixLength < maxCommonPrefixLength && oldData[commonPrefixLength] === newData[commonPrefixLength]) {\n            commonPrefixLength++;\n        }\n\n        if (commonPrefixLength === oldLength && commonPrefixLength === newLength) {\n            // complete overlap!\n            return new SemanticTokensEdits([], newResult.resultId);\n        }\n\n        let commonSuffixLength = 0;\n        const maxCommonSuffixLength = maxCommonPrefixLength - commonPrefixLength;\n        while (commonSuffixLength < maxCommonSuffixLength && oldData[oldLength - commonSuffixLength - 1] === newData[newLength - commonSuffixLength - 1]) {\n            commonSuffixLength++;\n        }\n\n        return new SemanticTokensEdits([{\n            start: commonPrefixLength,\n            deleteCount: (oldLength - commonPrefixLength - commonSuffixLength),\n            data: newData.subarray(commonPrefixLength, newLength - commonSuffixLength)\n        }], newResult.resultId);\n    }\n\n    private _send(value: theia.SemanticTokens | theia.SemanticTokensEdits, original: theia.SemanticTokens | theia.SemanticTokensEdits): BinaryBuffer | null {\n        if (DocumentSemanticTokensAdapter._isSemanticTokens(value)) {\n            const myId = this._nextResultId++;\n            this._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId, value.data));\n            return encodeSemanticTokensDto({\n                id: myId,\n                type: 'full',\n                data: value.data\n            });\n        }\n\n        if (DocumentSemanticTokensAdapter._isSemanticTokensEdits(value)) {\n            const myId = this._nextResultId++;\n            if (DocumentSemanticTokensAdapter._isSemanticTokens(original)) {\n                // store the original\n                this._previousResults.set(myId, new SemanticTokensPreviousResult(original.resultId, original.data));\n            } else {\n                this._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId));\n            }\n            return encodeSemanticTokensDto({\n                id: myId,\n                type: 'delta',\n                deltas: (value.edits || []).map(edit => ({ start: edit.start, deleteCount: edit.deleteCount, data: edit.data }))\n            });\n        }\n\n        return null;\n    }\n}\n\nexport class DocumentRangeSemanticTokensAdapter {\n\n    constructor(\n        private readonly _documents: DocumentsExtImpl,\n        private readonly _provider: theia.DocumentRangeSemanticTokensProvider,\n    ) {\n    }\n\n    async provideDocumentRangeSemanticTokens(resource: URI, range: Range, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        const doc = this._documents.getDocument(resource);\n        const value = await this._provider.provideDocumentRangeSemanticTokens(doc, toRange(range), token);\n        if (!value) {\n            return null;\n        }\n        return this._send(value);\n    }\n\n    private _send(value: theia.SemanticTokens): BinaryBuffer | null {\n        return encodeSemanticTokensDto({\n            id: 0,\n            type: 'full',\n            data: value.data\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L771\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { SignatureHelp, SignatureHelpContext } from '../../common/plugin-api-rpc-model';\n\nexport class SignatureHelpAdapter {\n\n    private idSequence = 1;\n    private readonly cache = new Map<number, theia.SignatureHelp>();\n\n    constructor(\n        private readonly delegate: theia.SignatureHelpProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    async provideSignatureHelp(resource: URI, position: Position, token: theia.CancellationToken, context: SignatureHelpContext): Promise<SignatureHelp | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n        const pluginHelpContext = this.reviveContext(context);\n\n        const value = await this.delegate.provideSignatureHelp(document, zeroBasedPosition, token, pluginHelpContext);\n        if (!value) {\n            return undefined;\n        }\n        value.activeParameter = value.signatures[value.activeSignature].activeParameter ?? value.activeParameter;\n        const id = this.idSequence++;\n        this.cache.set(id, value);\n        return Converter.SignatureHelp.from(id, value);\n    }\n\n    private reviveContext(context: SignatureHelpContext): theia.SignatureHelpContext {\n        let activeSignatureHelp: theia.SignatureHelp | undefined = undefined;\n        if (context.activeSignatureHelp) {\n            const revivedSignatureHelp = Converter.SignatureHelp.to(context.activeSignatureHelp);\n            const saved = typeof context.activeSignatureHelp.id === 'number' && this.cache.get(context.activeSignatureHelp.id);\n            if (saved) {\n                activeSignatureHelp = saved;\n                activeSignatureHelp.activeSignature = revivedSignatureHelp.activeSignature;\n                const { activeSignature } = revivedSignatureHelp;\n                activeSignatureHelp.activeParameter = revivedSignatureHelp.signatures[activeSignature].activeParameter ?? revivedSignatureHelp.activeParameter;\n            } else {\n                activeSignatureHelp = revivedSignatureHelp;\n            }\n        }\n        return { ...context, activeSignatureHelp };\n    }\n\n    releaseSignatureHelp(id: number): void {\n        this.cache.delete(id);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, LocationLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class TypeDefinitionAdapter {\n\n    constructor(\n        private readonly provider: theia.TypeDefinitionProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideTypeDefinition(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideTypeDefinition(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { IdGenerator } from '../../common/id-generator';\nimport * as rpc from '../../common/plugin-api-rpc';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport { fromRange, SymbolKind } from '../type-converters';\nimport * as types from '../types-impl';\n\nexport class TypeHierarchyAdapter {\n\n    private readonly idGenerator = new IdGenerator('');\n    protected readonly cache = new Map<string, Map<string, theia.TypeHierarchyItem>>();\n\n    constructor(\n        private readonly provider: theia.TypeHierarchyProvider,\n        private readonly documents: DocumentsExtImpl,\n    ) { }\n\n    private fromTypeHierarchyItem(item: theia.TypeHierarchyItem, sessionId: string): model.TypeHierarchyItem {\n        const sessionCache = this.cache.get(sessionId)!;\n        const itemId = sessionCache.size.toString(36);\n\n        const definition: model.TypeHierarchyItem = {\n            _itemId: itemId,\n            _sessionId: sessionId,\n\n            kind: SymbolKind.fromSymbolKind(item.kind),\n            tags: item.tags,\n            name: item.name,\n            detail: item.detail,\n            uri: item.uri,\n\n            range: fromRange(item.range),\n            selectionRange: fromRange(item.selectionRange),\n        };\n        sessionCache.set(itemId, item);\n        return definition;\n    }\n\n    async prepareSession(uri: URI, position: rpc.Position, token: theia.CancellationToken): Promise<model.TypeHierarchyItem[] | undefined> {\n        const documentData = this.documents.getDocumentData(uri);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${uri}`));\n        }\n\n        const definition = await this.provider.prepareTypeHierarchy(documentData.document,\n            new types.Position(\n                position.lineNumber,\n                position.column\n            ),\n            token\n        );\n\n        if (!definition) {\n            return undefined;\n        }\n\n        const sessionId = this.idGenerator.nextId();\n\n        this.cache.set(sessionId, new Map());\n        return Array.isArray(definition) ? definition.map(item => this.fromTypeHierarchyItem(item, sessionId)) : [this.fromTypeHierarchyItem(definition, sessionId)];\n    }\n\n    async provideSupertypes(sessionId: string, itemId: string, token: theia.CancellationToken): Promise<model.TypeHierarchyItem[] | undefined> {\n        const item = this.fetchItemFromCatch(sessionId, itemId);\n        if (!item) {\n            throw new Error('missing type hierarchy item');\n        }\n        const supertypes = await this.provider.provideTypeHierarchySupertypes(item, token);\n        if (!supertypes) {\n            return undefined;\n        }\n        return supertypes.map(supertype => this.fromTypeHierarchyItem(supertype, sessionId));\n    }\n\n    async provideSubtypes(sessionId: string, itemId: string, token: theia.CancellationToken): Promise<model.TypeHierarchyItem[] | undefined> {\n        const item = this.fetchItemFromCatch(sessionId, itemId);\n        if (!item) {\n            throw new Error('missing type hierarchy item');\n        }\n        const subTypes = await this.provider.provideTypeHierarchySubtypes(item, token);\n        if (!subTypes) {\n            return undefined;\n        }\n        return subTypes.map(subtype => this.fromTypeHierarchyItem(subtype, sessionId));\n    }\n\n    private fetchItemFromCatch(sessionId: string, itemId: string): theia.TypeHierarchyItem | undefined {\n        return this.cache.get(sessionId!)?.get(itemId!);\n    }\n\n    releaseSession(session?: string): Promise<boolean> {\n        if (session !== undefined) {\n            return Promise.resolve(this.cache.delete(session));\n        } else {\n            this.cache.clear();\n            return Promise.resolve(true);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport * as types from '../types-impl';\n\nexport function isLocationArray(array: unknown): array is types.Location[] {\n    return Array.isArray(array) && array.length > 0 && array[0] instanceof types.Location;\n}\n\nexport function isDefinitionLinkArray(array: unknown): array is theia.DefinitionLink[] {\n    return Array.isArray(array) && array.length > 0 && array[0].hasOwnProperty('targetUri') && array[0].hasOwnProperty('targetRange');\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { SymbolInformation } from '@theia/core/shared/vscode-languageserver-protocol';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\n\nexport class WorkspaceSymbolAdapter {\n\n    constructor(\n        private readonly provider: theia.WorkspaceSymbolProvider\n    ) { }\n\n    provideWorkspaceSymbols(query: string, token: theia.CancellationToken): Promise<SymbolInformation[]> {\n        return Promise.resolve(this.provider.provideWorkspaceSymbols(query, token)).then(workspaceSymbols => {\n            if (!workspaceSymbols) {\n                return [];\n            }\n\n            const newSymbols: SymbolInformation[] = [];\n            for (const sym of workspaceSymbols) {\n                const convertedSymbol = Converter.fromSymbolInformation(sym);\n                if (convertedSymbol) {\n                    newSymbols.push(convertedSymbol);\n                }\n            }\n            return newSymbols;\n        });\n    }\n\n    resolveWorkspaceSymbol(symbol: SymbolInformation, token: theia.CancellationToken): Promise<SymbolInformation> {\n        if (this.provider.resolveWorkspaceSymbol && typeof this.provider.resolveWorkspaceSymbol === 'function') {\n            const theiaSymbol = Converter.toSymbolInformation(symbol);\n            if (!theiaSymbol) {\n                return Promise.resolve(symbol);\n            } else {\n                return Promise.resolve(this.provider.resolveWorkspaceSymbol(theiaSymbol, token)).then(workspaceSymbol => {\n                    if (!workspaceSymbol) {\n                        return symbol;\n                    }\n\n                    const converted = Converter.fromSymbolInformation(workspaceSymbol);\n                    if (converted) {\n                        return converted;\n                    }\n                    return symbol;\n                });\n            }\n        }\n        return Promise.resolve(symbol);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { nls } from '@theia/core';\nimport { Localization } from '@theia/core/lib/common/i18n/localization';\nimport { LocalizationExt, LocalizationMain, Plugin, PLUGIN_RPC_CONTEXT, StringDetails } from '../common';\nimport { LanguagePackBundle } from '../common/language-pack-service';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { URI } from './types-impl';\n\nexport class LocalizationExtImpl implements LocalizationExt {\n\n    private readonly _proxy: LocalizationMain;\n    private currentLanguage?: string;\n    private isDefaultLanguage = true;\n    private readonly bundleCache = new Map<string, LanguagePackBundle | undefined>();\n\n    constructor(rpc: RPCProtocol) {\n        this._proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LOCALIZATION_MAIN);\n    }\n\n    translateMessage(pluginId: string, details: StringDetails): string {\n        const { message, args, comment } = details;\n        if (this.isDefaultLanguage) {\n            return Localization.format(message, (args ?? {}));\n        }\n\n        let key = message;\n        if (comment && comment.length > 0) {\n            key += `/${Array.isArray(comment) ? comment.join() : comment}`;\n        }\n        const str = this.bundleCache.get(pluginId)?.contents[key];\n        return Localization.format(str ?? message, (args ?? {}));\n    }\n\n    getBundle(pluginId: string): { [key: string]: string } | undefined {\n        return this.bundleCache.get(pluginId)?.contents;\n    }\n\n    getBundleUri(pluginId: string): URI | undefined {\n        const uri = this.bundleCache.get(pluginId)?.uri;\n        return uri ? URI.parse(uri) : undefined;\n    }\n\n    async initializeLocalizedMessages(plugin: Plugin, currentLanguage: string): Promise<void> {\n        this.currentLanguage ??= currentLanguage;\n        this.isDefaultLanguage = this.currentLanguage === nls.defaultLocale;\n\n        if (this.isDefaultLanguage) {\n            return;\n        }\n\n        if (this.bundleCache.has(plugin.model.id)) {\n            return;\n        }\n\n        let bundle: LanguagePackBundle | undefined;\n\n        try {\n            bundle = await this._proxy.$fetchBundle(plugin.model.id);\n        } catch (e) {\n            console.error(`Failed to load translations for ${plugin.model.id}: ${e.message}`);\n            return;\n        }\n\n        this.bundleCache.set(plugin.model.id, bundle);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Mutable } from '@theia/core';\nimport { MarkdownStringImpl as BaseMarkdownString, MarkdownString as MarkdownStringInterface } from '@theia/core/lib/common/markdown-rendering';\nimport * as pluginAPI from '@theia/plugin';\nimport { es5ClassCompat } from '../common/types';\nimport { URI } from './types-impl';\n\n// Copied from https://github.com/microsoft/vscode/blob/7d9b1c37f8e5ae3772782ba3b09d827eb3fdd833/src/vs/workbench/api/common/extHostTypes.ts\n\n@es5ClassCompat\nexport class MarkdownString implements pluginAPI.MarkdownString {\n\n    readonly #delegate: BaseMarkdownString;\n\n    /**\n     * @returns whether the thing is a markdown string implementation with helper methods.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isMarkdownString(thing: any): thing is pluginAPI.MarkdownString {\n        if (thing instanceof MarkdownString) {\n            return true;\n        }\n        return thing && thing.appendCodeblock && thing.appendMarkdown && thing.appendText && (thing.value !== undefined);\n    }\n\n    constructor(value?: string, supportThemeIcons: boolean = false) {\n        this.#delegate = new BaseMarkdownString(value, { supportThemeIcons });\n    }\n\n    get value(): string {\n        return this.#delegate.value;\n    }\n    set value(value: string) {\n        this.#delegate.value = value;\n    }\n\n    get isTrusted(): boolean | undefined {\n        return this.#delegate.isTrusted;\n    }\n\n    set isTrusted(value: boolean | undefined) {\n        this.#delegate.isTrusted = value;\n    }\n\n    get supportThemeIcons(): boolean | undefined {\n        return this.#delegate.supportThemeIcons;\n    }\n\n    set supportThemeIcons(value: boolean | undefined) {\n        this.#delegate.supportThemeIcons = value;\n    }\n\n    get supportHtml(): boolean | undefined {\n        return this.#delegate.supportHtml;\n    }\n\n    set supportHtml(value: boolean | undefined) {\n        this.#delegate.supportHtml = value;\n    }\n\n    get baseUri(): pluginAPI.Uri | undefined {\n        return URI.revive(this.#delegate.baseUri);\n    }\n\n    set baseUri(value: pluginAPI.Uri | undefined) {\n        this.#delegate.baseUri = value;\n    }\n\n    appendText(value: string): pluginAPI.MarkdownString {\n        this.#delegate.appendText(value);\n        return this;\n    }\n\n    appendMarkdown(value: string): pluginAPI.MarkdownString {\n        this.#delegate.appendMarkdown(value);\n        return this;\n    }\n\n    appendCodeblock(value: string, language?: string): pluginAPI.MarkdownString {\n        this.#delegate.appendCodeblock(language ?? '', value);\n        return this;\n    }\n\n    toJSON(): MarkdownStringInterface {\n        const plainObject: Mutable<MarkdownStringInterface> = { value: this.value };\n        if (this.isTrusted !== undefined) {\n            plainObject.isTrusted = this.isTrusted;\n        }\n        if (this.supportThemeIcons !== undefined) {\n            plainObject.supportThemeIcons = this.supportThemeIcons;\n        }\n        if (this.supportHtml !== undefined) {\n            plainObject.supportHtml = this.supportHtml;\n        }\n        if (this.baseUri !== undefined) {\n            plainObject.baseUri = this.baseUri.toJSON();\n        }\n        return plainObject;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, MessageRegistryMain, MainMessageOptions, MainMessageType\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { MessageItem, MessageOptions } from '@theia/plugin';\n\nexport class MessageRegistryExt {\n\n    private proxy: MessageRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.MESSAGE_REGISTRY_MAIN);\n    }\n\n    async showMessage(type: MainMessageType, message: string,\n        optionsOrFirstItem?: MessageOptions | string | MessageItem,\n        ...rest: (string | MessageItem)[]): Promise<string | MessageItem | undefined> {\n        const options: MainMessageOptions = {};\n        const actions: MessageItem[] = [];\n        const items: (string | MessageItem)[] = [];\n        const pushItem = (item: string | MessageItem) => {\n            items.push(item);\n            if (typeof item === 'string') {\n                actions.push({ title: item });\n            } else {\n                actions.push({ title: item.title, isCloseAffordance: item.isCloseAffordance });\n                if (item.isCloseAffordance) {\n                    options.onCloseActionHandle = actions.length - 1;\n                }\n            }\n        };\n        if (optionsOrFirstItem) {\n            if (typeof optionsOrFirstItem === 'string' || 'title' in optionsOrFirstItem) {\n                pushItem(optionsOrFirstItem);\n            } else {\n                if ('modal' in optionsOrFirstItem) {\n                    options.modal = optionsOrFirstItem.modal;\n                    if ('detail' in optionsOrFirstItem) {\n                        options.detail = optionsOrFirstItem.detail;\n                    }\n                }\n            }\n        }\n        for (const item of rest) {\n            pushItem(item);\n        }\n        const actionHandle = await this.proxy.$showMessage(type, message, options, actions);\n        return actionHandle !== undefined ? items[actionHandle] : undefined;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Arm and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { PluginDebugAdapterCreator } from '../../debug/plugin-debug-adapter-creator';\nimport * as path from 'path';\nimport * as theia from '@theia/plugin';\nimport { PlatformSpecificAdapterContribution, PluginPackageDebuggersContribution } from '../../../common';\nimport { isWindows, isOSX } from '@theia/core/lib/common/os';\nimport * as net from 'net';\nimport { ChildProcess, spawn, fork, ForkOptions } from 'child_process';\nimport { DebugAdapter } from '@theia/debug/lib/common/debug-model';\nimport { DebugAdapterExecutable, DebugAdapterInlineImplementation, DebugAdapterNamedPipeServer, DebugAdapterServer } from '../../types-impl';\nimport { ProcessDebugAdapter, SocketDebugAdapter } from '@theia/debug/lib/node/stream-debug-adapter';\nconst isElectron = require('is-electron');\n\nexport class NodeDebugAdapterCreator extends PluginDebugAdapterCreator {\n    public override async resolveDebugAdapterExecutable(\n        pluginPath: string,\n        debuggerContribution: PluginPackageDebuggersContribution\n    ): Promise<theia.DebugAdapterExecutable | undefined> {\n        const info = this.toPlatformInfo(debuggerContribution);\n        let program = (info && info.program || debuggerContribution.program);\n        if (!program) {\n            return undefined;\n        }\n        program = path.join(pluginPath, program);\n        const programArgs = info && info.args || debuggerContribution.args || [];\n        let runtime = info && info.runtime || debuggerContribution.runtime;\n        if (runtime && runtime.indexOf('./') === 0) {\n            runtime = path.join(pluginPath, runtime);\n        }\n        const runtimeArgs = info && info.runtimeArgs || debuggerContribution.runtimeArgs || [];\n        const command = runtime ? runtime : program;\n        const args = runtime ? [...runtimeArgs, program, ...programArgs] : programArgs;\n        return {\n            command,\n            args\n        };\n    }\n\n    public override async createDebugAdapter(\n        session: theia.DebugSession,\n        debugConfiguration: theia.DebugConfiguration,\n        executable: theia.DebugAdapterExecutable | undefined,\n        descriptorFactory: theia.DebugAdapterDescriptorFactory | undefined\n    ): Promise<DebugAdapter> {\n        if (descriptorFactory) {\n            // 'createDebugAdapterDescriptor' is called at the start of a debug session to provide details about the debug adapter to use.\n            // These details must be returned as objects of type [DebugAdapterDescriptor](#DebugAdapterDescriptor).\n            // Currently two types of debug adapters are supported:\n            // - a debug adapter executable is specified as a command path and arguments (see [DebugAdapterExecutable](#DebugAdapterExecutable)),\n            // - a debug adapter server reachable via a communication port (see [DebugAdapterServer](#DebugAdapterServer)).\n            // If the method is not implemented the default behavior is this:\n            //   createDebugAdapter(session: DebugSession, executable: DebugAdapterExecutable) {\n            //      if (typeof session.configuration.debugServer === 'number') {\n            //         return new DebugAdapterServer(session.configuration.debugServer);\n            //      }\n            //      return executable;\n            //   }\n            //  @param session The [debug session](#DebugSession) for which the debug adapter will be used.\n            //  @param executable The debug adapter's executable information as specified in the package.json (or undefined if no such information exists).\n            const descriptor = await descriptorFactory.createDebugAdapterDescriptor(session, executable);\n            if (descriptor) {\n                if (DebugAdapterServer.is(descriptor)) {\n                    return this.connectSocketDebugAdapter(descriptor);\n                } else if (DebugAdapterExecutable.is(descriptor)) {\n                    return this.startDebugAdapter(descriptor);\n                } else if (DebugAdapterNamedPipeServer.is(descriptor)) {\n                    return this.connectPipeDebugAdapter(descriptor);\n                } else if (DebugAdapterInlineImplementation.is(descriptor)) {\n                    return this.connectInlineDebugAdapter(descriptor);\n                }\n            }\n        }\n\n        if ('debugServer' in debugConfiguration) {\n            return this.connectSocketDebugAdapter({ port: debugConfiguration.debugServer });\n        } else {\n            if (!executable) {\n                throw new Error('It is not possible to provide debug adapter executable.');\n            }\n            return this.startDebugAdapter(executable);\n        }\n    }\n\n    protected toPlatformInfo(executable: PluginPackageDebuggersContribution): PlatformSpecificAdapterContribution | undefined {\n        if (isWindows && !process.env.hasOwnProperty('PROCESSOR_ARCHITEW6432')) {\n            return executable.winx86 || executable.win || executable.windows;\n        }\n        if (isWindows) {\n            return executable.win || executable.windows;\n        }\n        if (isOSX) {\n            return executable.osx;\n        }\n        return executable.linux;\n    }\n\n    public startDebugAdapter(executable: DebugAdapterExecutable): DebugAdapter {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const options: any = { stdio: ['pipe', 'pipe', 2] };\n\n        if (executable.options) {\n            options.cwd = executable.options.cwd;\n\n            // The additional environment of the executed program or shell. If omitted\n            // the parent process' environment is used. If provided it is merged with\n            // the parent process' environment.\n            options.env = Object.assign({}, process.env);\n            Object.assign(options.env, executable.options.env);\n        }\n\n        let childProcess: ChildProcess;\n        const { command, args } = executable;\n        if (command === 'node') {\n            if (Array.isArray(args) && args.length > 0) {\n                const forkOptions: ForkOptions = {\n                    env: options.env,\n                    // When running in Electron, fork will automatically add ELECTRON_RUN_AS_NODE=1 to the env,\n                    // but this will cause issues when debugging Electron apps, so we'll remove it.\n                    execArgv: isElectron()\n                        ? ['-e', 'delete process.env.ELECTRON_RUN_AS_NODE;require(process.argv[1])']\n                        : [],\n                    silent: true\n                };\n                if (options.cwd) {\n                    forkOptions.cwd = options.cwd;\n                }\n                options.stdio.push('ipc');\n                forkOptions.stdio = options.stdio;\n                childProcess = fork(args[0], args.slice(1), forkOptions);\n            } else {\n                throw new Error(`It is not possible to launch debug adapter with the command: ${JSON.stringify(executable)}`);\n            }\n        } else {\n            childProcess = spawn(command, args, options);\n        }\n\n        return new ProcessDebugAdapter(childProcess);\n    }\n\n    /**\n     * Connects to a remote debug server.\n     */\n    public connectSocketDebugAdapter(server: DebugAdapterServer): SocketDebugAdapter {\n        const socket = net.createConnection(server.port, server.host);\n        return new SocketDebugAdapter(socket);\n    }\n\n    public connectPipeDebugAdapter(adapter: DebugAdapterNamedPipeServer): SocketDebugAdapter {\n        const socket = net.createConnection(adapter.path);\n        return new SocketDebugAdapter(socket);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as mac from 'macaddress';\nimport { EnvExtImpl } from '../env';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { createHash } from 'crypto';\nimport { v4 } from 'uuid';\nimport fs = require('fs');\n\n/**\n * Provides machineId using mac address. It's only possible on node side\n * Extending the common class\n */\nexport class EnvNodeExtImpl extends EnvExtImpl {\n\n    private macMachineId: string;\n    private _isNewAppInstall: boolean;\n\n    constructor(rpc: RPCProtocol) {\n        super(rpc);\n        mac.one((err, macAddress) => {\n            if (err) {\n                this.macMachineId = v4();\n            } else {\n                this.macMachineId = createHash('sha256').update(macAddress, 'utf8').digest('hex');\n            }\n        });\n        this._isNewAppInstall = this.computeIsNewAppInstall();\n    }\n\n    /**\n     * override machineID\n     */\n    override get machineId(): string {\n        return this.macMachineId;\n    }\n\n    /**\n     * Provides application root.\n     */\n    get appRoot(): string {\n        return __dirname;\n    }\n\n    get isNewAppInstall(): boolean {\n        return this._isNewAppInstall;\n    }\n\n    private computeIsNewAppInstall(): boolean {\n        const creation = fs.statSync(__filename).birthtimeMs;\n        const current = Date.now();\n        const dayMs = 24 * 3600 * 1000;\n        return (current - creation) < dayMs;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as theia from '@theia/plugin';\nimport * as rpc from '../../common';\nimport { EditorsAndDocumentsExtImpl } from '../editors-and-documents';\nimport * as notebookCommon from '@theia/notebook/lib/common';\nimport { Disposable, URI } from '@theia/core';\nimport * as typeConverters from '../type-converters';\nimport { ModelAddedData, NotebookCellDto, NotebookCellsChangedEventDto, NotebookModelAddedData, NotebookOutputDto } from '../../common';\nimport { NotebookRange } from '../types-impl';\nimport { UriComponents } from '../../common/uri-components';\nimport { DocumentsExtImpl } from '../documents';\n\nclass RawContentChangeEvent {\n\n    constructor(\n        readonly start: number,\n        readonly deletedCount: number,\n        readonly deletedItems: theia.NotebookCell[],\n        readonly items: Cell[]\n    ) { }\n\n    asApiEvent(): theia.NotebookDocumentContentChange {\n        return {\n            range: new NotebookRange(this.start, this.start + this.deletedCount),\n            addedCells: this.items.map(cell => cell.apiCell),\n            removedCells: this.deletedItems,\n        };\n    }\n}\n\nexport class Cell {\n\n    static asModelAddData(notebook: theia.NotebookDocument, cell: NotebookCellDto): ModelAddedData & { notebook: theia.NotebookDocument } {\n        return {\n            EOL: cell.eol,\n            lines: cell.source,\n            languageId: cell.language,\n            uri: cell.uri,\n            isDirty: false,\n            versionId: 1,\n            notebook,\n            modeId: ''\n        };\n    }\n\n    private cell: theia.NotebookCell | undefined;\n\n    readonly handle: number;\n    readonly uri: URI;\n    readonly cellKind: notebookCommon.CellKind;\n\n    private outputs: theia.NotebookCellOutput[];\n    private metadata: Readonly<notebookCommon.NotebookCellMetadata>;\n    private previousResult: Readonly<theia.NotebookCellExecutionSummary | undefined>;\n\n    internalMetadata: notebookCommon.NotebookCellInternalMetadata;\n\n    get language(): string {\n        return this.apiCell.document.languageId;\n    }\n\n    constructor(\n        public readonly notebookDocument: NotebookDocument,\n        private readonly editorsAndDocuments: EditorsAndDocumentsExtImpl,\n        private readonly cellData: rpc.NotebookCellDto,\n    ) {\n        this.handle = cellData.handle;\n        this.uri = URI.fromComponents(cellData.uri);\n        this.cellKind = cellData.cellKind;\n        this.outputs = cellData.outputs.map(typeConverters.NotebookCellOutputConverter.to);\n        this.internalMetadata = cellData.internalMetadata ?? {};\n        this.metadata = Object.freeze(cellData.metadata ?? {});\n        this.previousResult = Object.freeze(typeConverters.NotebookCellExecutionSummary.to(cellData.internalMetadata ?? {}));\n    }\n\n    get apiCell(): theia.NotebookCell {\n        if (!this.cell) {\n            const that = this;\n            const data = this.editorsAndDocuments.getDocument(this.uri.toString());\n            if (!data) {\n                throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);\n            }\n            const apiCell: theia.NotebookCell = {\n                get index(): number { return that.notebookDocument.getCellIndex(that); },\n                notebook: that.notebookDocument.apiNotebook,\n                kind: typeConverters.NotebookCellKind.to(this.cellData.cellKind),\n                document: data.document,\n                get outputs(): theia.NotebookCellOutput[] { return that.outputs.slice(0); },\n                get metadata(): notebookCommon.NotebookCellMetadata { return that.metadata; },\n                get executionSummary(): theia.NotebookCellExecutionSummary | undefined { return that.previousResult; }\n            };\n            this.cell = Object.freeze(apiCell);\n        }\n        return this.cell;\n    }\n\n    setOutputs(newOutputs: NotebookOutputDto[]): void {\n        this.outputs = newOutputs.map(typeConverters.NotebookCellOutputConverter.to);\n    }\n\n    // setOutputItems(outputId: string, append: boolean, newOutputItems: NotebookOutputItemDto[]): void {\n    //     const newItems = newOutputItems.map(typeConverters.NotebookCellOutputItem.to);\n    //     const output = this.outputs.find(op => op.id === outputId);\n    //     if (output) {\n    //         if (!append) {\n    //             output.items.length = 0;\n    //         }\n    //         output.items.push(...newItems);\n\n    //         // if (output.items.length > 1 && output.items.every(item => notebookCommon.isTextStreamMime(item.mime))) {\n    //         //     // Look for the mimes in the items, and keep track of their order.\n    //         //     // Merge the streams into one output item, per mime type.\n    //         //     const mimeOutputs = new Map<string, Uint8Array[]>();\n    //         //     const mimeTypes: string[] = [];\n    //         //     output.items.forEach(item => {\n    //         //         let items: Uint8Array[];\n    //         //         if (mimeOutputs.has(item.mime)) {\n    //         //             items = mimeOutputs.get(item.mime)!;\n    //         //         } else {\n    //         //             items = [];\n    //         //             mimeOutputs.set(item.mime, items);\n    //         //             mimeTypes.push(item.mime);\n    //         //         }\n    //         //         items.push(item.data);\n    //         //     });\n    //         //     output.items.length = 0;\n    //         //     mimeTypes.forEach(mime => {\n    //         //         const compressed = notebookCommon.compressOutputItemStreams(mimeOutputs.get(mime)!);\n    //         //         output.items.push({\n    //         //             mime,\n    //         //             data: compressed.buffer\n    //         //         });\n    //         //     });\n    //         // }\n    //     }\n    // }\n\n    setMetadata(newMetadata: notebookCommon.NotebookCellMetadata): void {\n        this.metadata = Object.freeze(newMetadata);\n    }\n\n    setInternalMetadata(newInternalMetadata: notebookCommon.NotebookCellInternalMetadata): void {\n        this.internalMetadata = newInternalMetadata;\n        this.previousResult = Object.freeze(typeConverters.NotebookCellExecutionSummary.to(newInternalMetadata));\n    }\n\n}\n\nexport class NotebookDocument implements Disposable {\n\n    private readonly cells: Cell[];\n\n    private readonly notebookType: string;\n\n    private notebook?: theia.NotebookDocument;\n    private metadata: Record<string, unknown>;\n    private versionId: number = 0;\n    private isDirty: boolean = false;\n    private disposed: boolean = false;\n\n    constructor(\n        private readonly proxy: rpc.NotebookDocumentsMain,\n        private readonly editorsAndDocuments: EditorsAndDocumentsExtImpl,\n        private readonly textDocuments: DocumentsExtImpl,\n        public readonly uri: theia.Uri,\n        notebookData: NotebookModelAddedData\n    ) {\n        this.notebookType = notebookData.viewType;\n        this.metadata = notebookData.metadata ?? {};\n        this.versionId = notebookData.versionId;\n        this.cells = notebookData.cells.map(cell => new Cell(this, editorsAndDocuments, cell));\n    }\n\n    get apiNotebook(): theia.NotebookDocument {\n        if (!this.notebook) {\n            const that = this;\n            const apiObject: theia.NotebookDocument = {\n                get uri(): theia.Uri { return that.uri; },\n                get version(): number { return that.versionId; },\n                get notebookType(): string { return that.notebookType; },\n                get isDirty(): boolean { return that.isDirty; },\n                get isUntitled(): boolean { return that.uri.scheme === 'untitled'; },\n                get isClosed(): boolean { return that.disposed; },\n                get metadata(): Record<string, unknown> { return that.metadata; },\n                get cellCount(): number { return that.cells.length; },\n                cellAt(index): theia.NotebookCell {\n                    index = that.validateIndex(index);\n                    return that.cells[index].apiCell;\n                },\n                getCells(range): theia.NotebookCell[] {\n                    const cells = range ? that.getCells(range) : that.cells;\n                    return cells.map(cell => cell.apiCell);\n                },\n                save(): Promise<boolean> {\n                    return that.save();\n                }\n            };\n            this.notebook = Object.freeze(apiObject);\n        }\n        return this.notebook;\n    }\n\n    private validateIndex(index: number): number {\n        index = index | 0;\n        if (index < 0) {\n            return 0;\n        } else if (index >= this.cells.length) {\n            return this.cells.length - 1;\n        } else {\n            return index;\n        }\n    }\n\n    private validateRange(range: theia.NotebookRange): theia.NotebookRange {\n        let start = range.start | 0;\n        let end = range.end | 0;\n        if (start < 0) {\n            start = 0;\n        }\n        if (end > this.cells.length) {\n            end = this.cells.length;\n        }\n        return range.with({ start, end });\n    }\n\n    private getCells(range: theia.NotebookRange): Cell[] {\n        range = this.validateRange(range);\n        const result: Cell[] = [];\n        for (let i = range.start; i < range.end; i++) {\n            result.push(this.cells[i]);\n        }\n        return result;\n    }\n\n    private async save(): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('Notebook has been closed'));\n        }\n        return this.proxy.$trySaveNotebook(this.uri);\n    }\n\n    acceptDirty(isDirty: boolean): void {\n        this.isDirty = isDirty;\n    }\n\n    acceptModelChanged(event: NotebookCellsChangedEventDto, isDirty: boolean, newMetadata: notebookCommon.NotebookDocumentMetadata | undefined): theia.NotebookDocumentChangeEvent {\n        this.versionId = event.versionId;\n        this.isDirty = isDirty;\n        // this.acceptDocumentPropertiesChanged({ metadata: newMetadata });\n\n        const result = {\n            notebook: this.apiNotebook,\n            metadata: newMetadata,\n            cellChanges: <theia.NotebookDocumentCellChange[]>[],\n            contentChanges: <theia.NotebookDocumentContentChange[]>[],\n        };\n\n        type RelaxedCellChange = Partial<theia.NotebookDocumentCellChange> & { cell: theia.NotebookCell };\n        const relaxedCellChanges: RelaxedCellChange[] = [];\n\n        // -- apply change and populate content changes\n\n        for (const rawEvent of event.rawEvents) {\n            if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.ModelChange) {\n                this.spliceNotebookCells(rawEvent.changes, false, result.contentChanges);\n            } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.Move) {\n                this.moveCells(rawEvent.index, rawEvent.length, rawEvent.newIdx, result.contentChanges);\n            } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.Output) {\n                this.setCellOutputs(rawEvent.index, rawEvent.outputs);\n                relaxedCellChanges.push({ cell: this.cells[rawEvent.index].apiCell, outputs: this.cells[rawEvent.index].apiCell.outputs });\n\n            // } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.OutputItem) {\n            //     this._setCellOutputItems(rawEvent.index, rawEvent.outputId, rawEvent.append, rawEvent.outputItems);\n            //     relaxedCellChanges.push({ cell: this.cells[rawEvent.index].apiCell, outputs: this.cells[rawEvent.index].apiCell.outputs });\n            } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.ChangeCellLanguage) {\n                this.changeCellLanguage(rawEvent.index, rawEvent.language);\n                relaxedCellChanges.push({ cell: this.cells[rawEvent.index].apiCell, document: this.cells[rawEvent.index].apiCell.document });\n            } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.ChangeCellContent) {\n                relaxedCellChanges.push({ cell: this.cells[rawEvent.index].apiCell, document: this.cells[rawEvent.index].apiCell.document });\n\n            // } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.ChangeCellMime) {\n            //     this._changeCellMime(rawEvent.index, rawEvent.mime);\n            } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.ChangeCellMetadata) {\n                this.changeCellMetadata(rawEvent.index, rawEvent.metadata);\n                relaxedCellChanges.push({ cell: this.cells[rawEvent.index].apiCell, metadata: this.cells[rawEvent.index].apiCell.metadata });\n\n            } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.ChangeCellInternalMetadata) {\n                this.changeCellInternalMetadata(rawEvent.index, rawEvent.internalMetadata);\n                relaxedCellChanges.push({ cell: this.cells[rawEvent.index].apiCell, executionSummary: this.cells[rawEvent.index].apiCell.executionSummary });\n            }\n        }\n\n        // -- compact cellChanges\n\n        const map = new Map<theia.NotebookCell, number>();\n        for (let i = 0; i < relaxedCellChanges.length; i++) {\n            const relaxedCellChange = relaxedCellChanges[i];\n            const existing = map.get(relaxedCellChange.cell);\n            if (existing === undefined) {\n                const newLen = result.cellChanges.push({\n                    document: undefined,\n                    executionSummary: undefined,\n                    metadata: undefined,\n                    outputs: undefined,\n                    ...relaxedCellChange,\n                });\n                map.set(relaxedCellChange.cell, newLen - 1);\n            } else {\n                result.cellChanges[existing] = {\n                    ...result.cellChanges[existing],\n                    ...relaxedCellChange\n                };\n            }\n        }\n\n        // Freeze event properties so handlers cannot accidentally modify them\n        Object.freeze(result);\n        Object.freeze(result.cellChanges);\n        Object.freeze(result.contentChanges);\n\n        return result;\n    }\n\n    private spliceNotebookCells(splices: notebookCommon.NotebookCellTextModelSplice<NotebookCellDto>[], initialization: boolean,\n        bucket: theia.NotebookDocumentContentChange[] | undefined): void {\n        if (this.disposed) {\n            return;\n        }\n\n        const contentChangeEvents: RawContentChangeEvent[] = [];\n        const addedCellDocuments: ModelAddedData[] = [];\n        const removedCellDocuments: UriComponents[] = [];\n\n        splices.reverse().forEach(splice => {\n            const cellDtos = splice[2];\n            const newCells = cellDtos.map((cell: NotebookCellDto) => {\n\n                const extCell = new Cell(this, this.editorsAndDocuments, cell);\n                if (!initialization) {\n                    addedCellDocuments.push(Cell.asModelAddData(this.apiNotebook, cell));\n                }\n                return extCell;\n            });\n\n            const changeEvent = new RawContentChangeEvent(splice[0], splice[1], [], newCells);\n            const deletedItems = this.cells.splice(splice[0], splice[1], ...newCells);\n            for (const cell of deletedItems) {\n                removedCellDocuments.push(cell.uri.toComponents());\n                changeEvent.deletedItems.push(cell.apiCell);\n            }\n            contentChangeEvents.push(changeEvent);\n        });\n\n        if (bucket) {\n            for (const changeEvent of contentChangeEvents) {\n                bucket.push(changeEvent.asApiEvent());\n            }\n        }\n    }\n\n    private moveCells(index: number, length: number, newIdx: number, bucket: theia.NotebookDocumentContentChange[]): void {\n        const cells = this.cells.splice(index, length);\n        this.cells.splice(newIdx, 0, ...cells);\n        const changes = [\n            new RawContentChangeEvent(index, length, cells.map(c => c.apiCell), []),\n            new RawContentChangeEvent(newIdx, 0, [], cells)\n        ];\n        for (const change of changes) {\n            bucket.push(change.asApiEvent());\n        }\n    }\n\n    private setCellOutputs(index: number, outputs: NotebookOutputDto[]): void {\n        const cell = this.cells[index];\n        cell.setOutputs(outputs);\n    }\n\n    // private _setCellOutputItems(index: number, outputId: string, append: boolean, outputItems: NotebookOutputItemDto[]): void {\n    //     const cell = this.cells[index];\n    //     cell.setOutputItems(outputId, append, outputItems);\n    // }\n\n    private changeCellLanguage(index: number, newLanguageId: string): void {\n        const cell = this.cells[index];\n        if (cell.apiCell.document.languageId !== newLanguageId) {\n            this.textDocuments.$acceptModelModeChanged(cell.uri.toComponents(), cell.language, newLanguageId);\n        }\n    }\n\n    private changeCellMetadata(index: number, newMetadata: notebookCommon.NotebookCellMetadata): void {\n        const cell = this.cells[index];\n        cell.setMetadata(newMetadata);\n    }\n\n    private changeCellInternalMetadata(index: number, newInternalMetadata: notebookCommon.NotebookCellInternalMetadata): void {\n        const cell = this.cells[index];\n        cell.setInternalMetadata(newInternalMetadata);\n    }\n\n    getCellFromApiCell(apiCell: theia.NotebookCell): Cell | undefined {\n        return this.cells.find(cell => cell.apiCell === apiCell);\n    }\n\n    getCell(cellHandle: number): Cell | undefined {\n        return this.cells.find(cell => cell.handle === cellHandle);\n    }\n\n    getCellFromIndex(index: number): Cell | undefined {\n        return this.cells[index];\n    }\n\n    getCellIndex(cell: Cell): number {\n        return this.cells.indexOf(cell);\n    }\n\n    dispose(): void {\n        this.disposed = true;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as theia from '@theia/plugin';\nimport { Emitter } from '@theia/core';\nimport { UriComponents } from '../../common/uri-components';\nimport { NotebookCellsChangedEventDto, NotebookDocumentsExt } from '../../common';\nimport { NotebooksExtImpl } from './notebooks';\nimport { URI } from '../types-impl';\n\nexport type NotebookDocumentMetadata = Record<string, unknown>;\n\nexport class NotebookDocumentsExtImpl implements NotebookDocumentsExt {\n\n    private readonly didSaveNotebookDocumentEmitter = new Emitter<theia.NotebookDocument>();\n    readonly onDidSaveNotebookDocument = this.didSaveNotebookDocumentEmitter.event;\n\n    private readonly didChangeNotebookDocumentEmitter = new Emitter<theia.NotebookDocumentChangeEvent>();\n    readonly onDidChangeNotebookDocument = this.didChangeNotebookDocumentEmitter.event;\n\n    constructor(\n        private readonly notebooksAndEditors: NotebooksExtImpl,\n    ) { }\n\n    $acceptModelChanged(uri: UriComponents, event: NotebookCellsChangedEventDto,\n        isDirty: boolean, newMetadata?: NotebookDocumentMetadata): void {\n        const document = this.notebooksAndEditors.getNotebookDocument(URI.from(uri));\n        const e = document.acceptModelChanged(event, isDirty, newMetadata);\n        this.didChangeNotebookDocumentEmitter.fire(e);\n    }\n\n    $acceptDirtyStateChanged(uri: UriComponents, isDirty: boolean): void {\n        const document = this.notebooksAndEditors.getNotebookDocument(URI.from(uri));\n        document.acceptDirty(isDirty);\n    }\n\n    $acceptModelSaved(uri: UriComponents): void {\n        const document = this.notebooksAndEditors.getNotebookDocument(URI.from(uri));\n        this.didSaveNotebookDocumentEmitter.fire(document.apiNotebook);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as theia from '@theia/plugin';\nimport { NotebookDocument } from './notebook-document';\n\nexport class NotebookEditor {\n\n    public static readonly apiEditorsToExtHost = new WeakMap<theia.NotebookEditor, NotebookEditor>();\n\n    private selections: theia.NotebookRange[] = [];\n    private visibleRanges: theia.NotebookRange[] = [];\n    private viewColumn?: theia.ViewColumn;\n\n    private internalVisible: boolean = false;\n\n    private editor?: theia.NotebookEditor;\n\n    constructor(\n        readonly id: string,\n        // private readonly _proxy: MainThreadNotebookEditorsShape,\n        readonly notebookData: NotebookDocument,\n        visibleRanges: theia.NotebookRange[],\n        selections: theia.NotebookRange[],\n        viewColumn: theia.ViewColumn | undefined\n    ) {\n        this.selections = selections;\n        this.visibleRanges = visibleRanges;\n        this.viewColumn = viewColumn;\n    }\n\n    get apiEditor(): theia.NotebookEditor {\n        if (!this.editor) {\n            const that = this;\n            this.editor = {\n                get notebook(): theia.NotebookDocument {\n                    return that.notebookData.apiNotebook;\n                },\n                get selection(): theia.NotebookRange {\n                    return that.selections[0];\n                },\n                set selection(selection: theia.NotebookRange) {\n                    this.selections = [selection];\n                },\n                get selections(): theia.NotebookRange[] {\n                    return that.selections;\n                },\n                set selections(value: theia.NotebookRange[]) {\n                    // if (!Array.isArray(value) || !value.every(extHostTypes.NotebookRange.isNotebookRange)) {\n                    //     throw illegalArgument('selections');\n                    // }\n                    that.selections = value;\n                    that.trySetSelections(value);\n                },\n                get visibleRanges(): theia.NotebookRange[] {\n                    return that.visibleRanges;\n                },\n                revealRange(range, revealType): void {\n                    // that._proxy.$tryRevealRange(\n                    //     that.id,\n                    //     extHostConverter.NotebookRange.from(range),\n                    //     revealType ?? extHostTypes.NotebookEditorRevealType.Default\n                    // );\n                },\n                get viewColumn(): theia.ViewColumn | undefined {\n                    return that.viewColumn;\n                },\n            };\n\n            NotebookEditor.apiEditorsToExtHost.set(this.editor, this);\n        }\n        return this.editor;\n    }\n\n    get visible(): boolean {\n        return this.internalVisible;\n    }\n\n    acceptVisibility(value: boolean): void {\n        this.internalVisible = value;\n    }\n\n    acceptVisibleRanges(value: theia.NotebookRange[]): void {\n        this.visibleRanges = value;\n    }\n\n    acceptSelections(selections: theia.NotebookRange[]): void {\n        this.selections = selections;\n    }\n\n    private trySetSelections(value: theia.NotebookRange[]): void {\n        // NB Unimplemented: implement \"selections\"\n        // this._proxy.$trySetSelections(this.id, value.map(extHostConverter.NotebookRange.from));\n    }\n\n    acceptViewColumn(value: theia.ViewColumn | undefined): void {\n        this.viewColumn = value;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '@theia/core';\nimport { NotebookEditorPropertiesChangeData, NotebookEditorsExt, NotebookEditorViewColumnInfo } from '../../common';\nimport * as typeConverters from '../type-converters';\nimport * as theia from '@theia/plugin';\nimport { NotebooksExtImpl } from './notebooks';\n\nexport class NotebookEditorsExtImpl implements NotebookEditorsExt {\n\n    private readonly DidChangeNotebookEditorSelectionEmitter = new Emitter<theia.NotebookEditorSelectionChangeEvent>();\n    private readonly DidChangeNotebookEditorVisibleRangesEmitter = new Emitter<theia.NotebookEditorVisibleRangesChangeEvent>();\n\n    readonly onDidChangeNotebookEditorSelection = this.DidChangeNotebookEditorSelectionEmitter.event;\n    readonly onDidChangeNotebookEditorVisibleRanges = this.DidChangeNotebookEditorVisibleRangesEmitter.event;\n\n    constructor(\n        private readonly notebooksAndEditors: NotebooksExtImpl,\n    ) { }\n\n    $acceptEditorPropertiesChanged(id: string, data: NotebookEditorPropertiesChangeData): void {\n        const editor = this.notebooksAndEditors.getEditorById(id);\n        // ONE: make all state updates\n        if (data.visibleRanges) {\n            editor.acceptVisibleRanges(data.visibleRanges.ranges.map(typeConverters.NotebookRange.to));\n        }\n        if (data.selections) {\n            editor.acceptSelections(data.selections.selections.map(typeConverters.NotebookRange.to));\n        }\n\n        // TWO: send all events after states have been updated\n        if (data.visibleRanges) {\n            this.DidChangeNotebookEditorVisibleRangesEmitter.fire({\n                notebookEditor: editor.apiEditor,\n                visibleRanges: editor.apiEditor.visibleRanges\n            });\n        }\n        if (data.selections) {\n            this.DidChangeNotebookEditorSelectionEmitter.fire(Object.freeze({\n                notebookEditor: editor.apiEditor,\n                selections: editor.apiEditor.selections\n            }));\n        }\n    }\n\n    $acceptEditorViewColumns(data: NotebookEditorViewColumnInfo): void {\n        // eslint-disable-next-line guard-for-in\n        for (const id in data) {\n            const editor = this.notebooksAndEditors.getEditorById(id);\n            editor.acceptViewColumn(typeConverters.ViewColumn.to(data[id]));\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '@theia/plugin';\nimport {\n    CellExecuteUpdateDto, NotebookKernelDto, NotebookKernelsExt, NotebookKernelsMain, NotebookKernelSourceActionDto, NotebookOutputDto, PLUGIN_RPC_CONTEXT\n} from '../../common';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { UriComponents } from '../../common/uri-components';\nimport * as theia from '@theia/plugin';\nimport { CancellationTokenSource, Disposable, DisposableCollection, Emitter } from '@theia/core';\nimport { Cell } from './notebook-document';\nimport { NotebooksExtImpl } from './notebooks';\nimport { NotebookCellOutputConverter, NotebookCellOutputItem, NotebookKernelSourceAction } from '../type-converters';\nimport { timeout, Deferred } from '@theia/core/lib/common/promise-util';\nimport { CellExecutionUpdateType, NotebookCellExecutionState } from '@theia/notebook/lib/common';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { NotebookCellOutput, NotebookRendererScript, URI } from '../types-impl';\n\ninterface KernelData {\n    extensionId: string;\n    controller: theia.NotebookController;\n    onDidChangeSelection: Emitter<{ selected: boolean; notebook: theia.NotebookDocument }>;\n    onDidReceiveMessage: Emitter<{ editor: theia.NotebookEditor; message: unknown }>;\n    associatedNotebooks: Map<string, boolean>;\n}\n\nexport class NotebookKernelsExtImpl implements NotebookKernelsExt {\n\n    private readonly activeExecutions = new Map<string, NotebookCellExecutionTask>();\n\n    private readonly kernelData = new Map<number, KernelData>();\n\n    private readonly proxy: NotebookKernelsMain;\n\n    private kernelDetectionTasks = new Map<number, theia.NotebookControllerDetectionTask>();\n    private currentKernelDetectionTaskHandle = 0;\n\n    private kernelSourceActionProviders = new Map<number, theia.NotebookKernelSourceActionProvider>();\n    private currentSourceActionProviderHandle = 0;\n\n    private readonly onDidChangeCellExecutionStateEmitter = new Emitter<theia.NotebookCellExecutionStateChangeEvent>();\n    readonly onDidChangeNotebookCellExecutionState = this.onDidChangeCellExecutionStateEmitter.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly notebooks: NotebooksExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTEBOOK_KERNELS_MAIN);\n    }\n\n    private currentHandle = 0;\n\n    createNotebookController(extensionId: string, id: string, viewType: string, label: string, handler?: (cells: theia.NotebookCell[],\n        notebook: theia.NotebookDocument, controller: theia.NotebookController) => void | Thenable<void>, rendererScripts?: NotebookRendererScript[]): theia.NotebookController {\n\n        for (const kernelData of this.kernelData.values()) {\n            if (kernelData.controller.id === id && extensionId === kernelData.extensionId) {\n                throw new Error(`notebook controller with id '${id}' ALREADY exist`);\n            }\n        }\n\n        const handle = this.currentHandle++;\n        const that = this;\n\n        console.debug(`NotebookController[${handle}], CREATED by ${extensionId}, ${id}`);\n\n        const defaultExecuteHandler = () => console.warn(`NO execute handler from notebook controller '${data.id}' of extension: '${extensionId}'`);\n\n        let isDisposed = false;\n        const commandDisposables = new DisposableCollection();\n\n        const onDidChangeSelection = new Emitter<{ selected: boolean; notebook: theia.NotebookDocument }>();\n        const onDidReceiveMessage = new Emitter<{ editor: theia.NotebookEditor; message: unknown }>();\n\n        const data: NotebookKernelDto = {\n            id: createKernelId(extensionId, id),\n            notebookType: viewType,\n            extensionId: extensionId,\n            label: label || extensionId,\n        };\n\n        //\n        let executeHandler = handler ?? defaultExecuteHandler;\n        let interruptHandler: ((this: theia.NotebookController, notebook: theia.NotebookDocument) => void | Thenable<void>) | undefined;\n\n        this.proxy.$addKernel(handle, data).catch(err => {\n            // this can happen when a kernel with that ID is already registered\n            console.log(err);\n            isDisposed = true;\n        });\n\n        // update: all setters write directly into the dto object\n        // and trigger an update. the actual update will only happen\n        // once per event loop execution\n        let tokenPool = 0;\n        const update = () => {\n            if (isDisposed) {\n                return;\n            }\n            const myToken = ++tokenPool;\n            Promise.resolve().then(() => {\n                if (myToken === tokenPool) {\n                    this.proxy.$updateKernel(handle, data);\n                }\n            });\n        };\n\n        // notebook documents that are associated to this controller\n        const associatedNotebooks = new Map<string, boolean>();\n\n        const controller: theia.NotebookController = {\n            get id(): string { return id; },\n            get notebookType(): string { return data.notebookType; },\n            onDidChangeSelectedNotebooks: onDidChangeSelection.event,\n            onDidReceiveMessage: onDidReceiveMessage.event,\n            get label(): string {\n                return data.label;\n            },\n            set label(value) {\n                data.label = value ?? extensionId;\n                update();\n            },\n            get detail(): string {\n                return data.detail ?? '';\n            },\n            set detail(value) {\n                data.detail = value;\n                update();\n            },\n            get description(): string {\n                return data.description ?? '';\n            },\n            set description(value) {\n                data.description = value;\n                update();\n            },\n            get supportedLanguages(): string[] | undefined {\n                return data.supportedLanguages;\n            },\n            set supportedLanguages(value) {\n                data.supportedLanguages = value;\n                update();\n            },\n            get supportsExecutionOrder(): boolean {\n                return data.supportsExecutionOrder ?? false;\n            },\n            set supportsExecutionOrder(value) {\n                data.supportsExecutionOrder = value;\n                update();\n            },\n            get rendererScripts(): NotebookRendererScript[] {\n                return data.rendererScripts ?? [];\n            },\n            set rendererScripts(value) {\n                data.rendererScripts = value;\n                update();\n            },\n            get executeHandler(): (cells: theia.NotebookCell[], notebook: theia.NotebookDocument, controller: theia.NotebookController) => void | Thenable<void> {\n                return executeHandler;\n            },\n            set executeHandler(value) {\n                executeHandler = value ?? defaultExecuteHandler;\n            },\n            get interruptHandler(): ((this: theia.NotebookController, notebook: theia.NotebookDocument) => void | Thenable<void>) | undefined {\n                return interruptHandler;\n            },\n            set interruptHandler(value) {\n                interruptHandler = value;\n                data.supportsInterrupt = Boolean(value);\n                update();\n            },\n            createNotebookCellExecution(cell): theia.NotebookCellExecution {\n                if (isDisposed) {\n                    throw new Error('notebook controller is DISPOSED');\n                }\n                if (!associatedNotebooks.has(cell.notebook.uri.toString())) {\n                    console.debug(`NotebookController[${handle}] NOT associated to notebook, associated to THESE notebooks:`,\n                        Array.from(associatedNotebooks.keys()).map(u => u.toString()));\n                    throw new Error(`notebook controller is NOT associated to notebook: ${cell.notebook.uri.toString()}`);\n                }\n                return that.createNotebookCellExecution(cell, createKernelId(extensionId, this.id));\n            },\n            dispose: () => {\n                if (!isDisposed) {\n                    console.debug(`NotebookController[${handle}], DISPOSED`);\n                    isDisposed = true;\n                    this.kernelData.delete(handle);\n                    commandDisposables.dispose();\n                    onDidChangeSelection.dispose();\n                    onDidReceiveMessage.dispose();\n                    this.proxy.$removeKernel(handle);\n                }\n            },\n            updateNotebookAffinity(notebook, priority): void {\n                that.proxy.$updateNotebookPriority(handle, notebook.uri, priority);\n            },\n            async postMessage(message: unknown, editor?: theia.NotebookEditor): Promise<boolean> {\n                return Promise.resolve(true); // TODO needs implementation\n            },\n            asWebviewUri(localResource: theia.Uri): theia.Uri {\n                throw new Error('Method not implemented.');\n            }\n        };\n\n        this.kernelData.set(handle, {\n            extensionId: extensionId,\n            controller,\n            onDidReceiveMessage,\n            onDidChangeSelection,\n            associatedNotebooks\n        });\n        return controller;\n    }\n\n    createNotebookCellExecution(cell: theia.NotebookCell, controllerId: string): theia.NotebookCellExecution {\n        if (cell.index < 0) {\n            throw new Error('CANNOT execute cell that has been REMOVED from notebook');\n        }\n        const notebook = this.notebooks.getNotebookDocument(URI.from(cell.notebook.uri));\n        const cellObj = notebook.getCellFromApiCell(cell);\n        if (!cellObj) {\n            throw new Error('invalid cell');\n        }\n        if (this.activeExecutions.has(cellObj.uri.toString())) {\n            throw new Error(`duplicate execution for ${cellObj.uri}`);\n        }\n        const execution = new NotebookCellExecutionTask(controllerId, cellObj, this.proxy);\n        this.activeExecutions.set(cellObj.uri.toString(), execution);\n        const listener = execution.onDidChangeState(() => {\n            if (execution.state === NotebookCellExecutionTaskState.Resolved) {\n                execution.dispose();\n                listener.dispose();\n                this.activeExecutions.delete(cellObj.uri.toString());\n            }\n        });\n        return execution.asApiObject();\n    }\n\n    createNotebookControllerDetectionTask(viewType: string): theia.NotebookControllerDetectionTask {\n        const handle = this.currentKernelDetectionTaskHandle++;\n        const that = this;\n\n        this.proxy.$addKernelDetectionTask(handle, viewType);\n\n        const detectionTask: theia.NotebookControllerDetectionTask = {\n            dispose: () => {\n                this.kernelDetectionTasks.delete(handle);\n                that.proxy.$removeKernelDetectionTask(handle);\n            }\n        };\n\n        this.kernelDetectionTasks.set(handle, detectionTask);\n        return detectionTask;\n    }\n\n    registerKernelSourceActionProvider(viewType: string, provider: theia.NotebookKernelSourceActionProvider): Disposable {\n        const handle = this.currentSourceActionProviderHandle++;\n        const eventHandle = typeof provider.onDidChangeNotebookKernelSourceActions === 'function' ? handle : undefined;\n        const that = this;\n\n        this.kernelSourceActionProviders.set(handle, provider);\n        this.proxy.$addKernelSourceActionProvider(handle, handle, viewType);\n\n        let subscription: theia.Disposable | undefined;\n        if (eventHandle !== undefined) {\n            subscription = provider.onDidChangeNotebookKernelSourceActions!(_ => this.proxy.$emitNotebookKernelSourceActionsChangeEvent(eventHandle));\n        }\n\n        return {\n            dispose: () => {\n                this.kernelSourceActionProviders.delete(handle);\n                that.proxy.$removeKernelSourceActionProvider(handle, handle);\n                subscription?.dispose();\n            }\n        };\n    }\n\n    $acceptNotebookAssociation(handle: number, uri: UriComponents, value: boolean): void {\n        const obj = this.kernelData.get(handle);\n        if (obj) {\n            // update data structure\n            const notebook = this.notebooks.getNotebookDocument(URI.from(uri))!;\n            if (value) {\n                obj.associatedNotebooks.set(notebook.uri.toString(), true);\n            } else {\n                obj.associatedNotebooks.delete(notebook.uri.toString());\n            }\n            console.debug(`NotebookController[${handle}] ASSOCIATE notebook`, notebook.uri.toString(), value);\n            // send event\n            obj.onDidChangeSelection.fire({\n                selected: value,\n                notebook: notebook.apiNotebook\n            });\n        }\n\n    }\n\n    async $executeCells(handle: number, uri: UriComponents, handles: number[]): Promise<void> {\n        const obj = this.kernelData.get(handle);\n        if (!obj) {\n            // extension can dispose kernels in the meantime\n            return Promise.resolve();\n        }\n        const document = this.notebooks.getNotebookDocument(URI.from(uri));\n        const cells: theia.NotebookCell[] = [];\n        for (const cellHandle of handles) {\n            const cell = document.getCell(cellHandle);\n            if (cell) {\n                cells.push(cell.apiCell);\n            }\n        }\n\n        try {\n            console.debug(`NotebookController[${handle}] EXECUTE cells`, document.uri.toString(), cells.length);\n            await obj.controller.executeHandler.call(obj.controller, cells, document.apiNotebook, obj.controller);\n        } catch (err) {\n            console.error(`NotebookController[${handle}] execute cells FAILED`, err);\n            console.error(err);\n        }\n\n    }\n\n    async $cancelCells(handle: number, uri: UriComponents, handles: number[]): Promise<void> {\n        const obj = this.kernelData.get(handle);\n        if (!obj) {\n            // extension can dispose kernels in the meantime\n            return Promise.resolve();\n        }\n\n        // cancel or interrupt depends on the controller. When an interrupt handler is used we\n        // don't trigger the cancelation token of executions.N\n        const document = this.notebooks.getNotebookDocument(URI.from(uri));\n        if (obj.controller.interruptHandler) {\n            await obj.controller.interruptHandler.call(obj.controller, document.apiNotebook);\n\n        } else {\n            for (const cellHandle of handles) {\n                const cell = document.getCell(cellHandle);\n                if (cell) {\n                    this.activeExecutions.get(cell.uri.toString())?.cancel();\n                }\n            }\n        }\n    }\n\n    $acceptKernelMessageFromRenderer(handle: number, editorId: string, message: unknown): void {\n        const obj = this.kernelData.get(handle);\n        if (!obj) {\n            // extension can dispose kernels in the meantime\n            return;\n        }\n\n        const editor = this.notebooks.getEditorById(editorId);\n        obj.onDidReceiveMessage.fire(Object.freeze({ editor: editor.apiEditor, message }));\n    }\n\n    $cellExecutionChanged(uri: UriComponents, cellHandle: number, state: NotebookCellExecutionState | undefined): void {\n        // Proposed Api though seems needed by jupyter for telemetry\n    }\n\n    async $provideKernelSourceActions(handle: number, token: CancellationToken): Promise<NotebookKernelSourceActionDto[]> {\n        const provider = this.kernelSourceActionProviders.get(handle);\n        if (provider) {\n            const disposables = new DisposableCollection();\n            const ret = await provider.provideNotebookKernelSourceActions(token);\n            return (ret ?? []).map(item => NotebookKernelSourceAction.from(item, this.commands.converter, disposables));\n        }\n        return [];\n\n    }\n\n}\n\nenum NotebookCellExecutionTaskState {\n    Init,\n    Started,\n    Resolved\n}\n\nclass NotebookCellExecutionTask implements Disposable {\n    private static HANDLE = 0;\n    private _handle = NotebookCellExecutionTask.HANDLE++;\n\n    private _onDidChangeState = new Emitter<void>();\n    readonly onDidChangeState = this._onDidChangeState.event;\n\n    private _state = NotebookCellExecutionTaskState.Init;\n    get state(): NotebookCellExecutionTaskState { return this._state; }\n\n    private readonly tokenSource = new CancellationTokenSource();\n\n    private readonly collector: TimeoutBasedCollector<CellExecuteUpdateDto>;\n\n    private executionOrder: number | undefined;\n\n    constructor(\n        controllerId: string,\n        private readonly cell: Cell,\n        private readonly proxy: NotebookKernelsMain\n    ) {\n        this.collector = new TimeoutBasedCollector(10, updates => this.update(updates));\n\n        this.executionOrder = cell.internalMetadata.executionOrder;\n        this.proxy.$createExecution(this._handle, controllerId, this.cell.notebookDocument.uri, this.cell.handle);\n    }\n\n    cancel(): void {\n        this.tokenSource.cancel();\n    }\n\n    private async updateSoon(update: CellExecuteUpdateDto): Promise<void> {\n        await this.collector.addItem(update);\n    }\n\n    private async update(update: CellExecuteUpdateDto | CellExecuteUpdateDto[]): Promise<void> {\n        const updates = Array.isArray(update) ? update : [update];\n        return this.proxy.$updateExecution(this._handle, updates);\n    }\n\n    private verifyStateForOutput(): void {\n        if (this._state === NotebookCellExecutionTaskState.Init) {\n            throw new Error('Must call start before modifying cell output');\n        }\n\n        if (this._state === NotebookCellExecutionTaskState.Resolved) {\n            throw new Error('Cannot modify cell output after calling resolve');\n        }\n    }\n\n    private cellIndexToHandle(cellOrCellIndex: theia.NotebookCell | undefined): number {\n        let cell: Cell | undefined = this.cell;\n        if (cellOrCellIndex) {\n            cell = this.cell.notebookDocument.getCellFromApiCell(cellOrCellIndex);\n        }\n        if (!cell) {\n            throw new Error('INVALID cell');\n        }\n        return cell.handle;\n    }\n\n    private validateAndConvertOutputs(items: NotebookCellOutput[]): NotebookOutputDto[] {\n        return items.map(output => {\n            const newOutput = NotebookCellOutputConverter.ensureUniqueMimeTypes(output.items, true);\n            if (newOutput === output.items) {\n                return NotebookCellOutputConverter.from(output);\n            }\n            return NotebookCellOutputConverter.from({\n                items: newOutput,\n                outputId: output.outputId,\n                metadata: output.metadata\n            });\n        });\n    }\n\n    private async updateOutputs(outputs: NotebookCellOutput | NotebookCellOutput[], cell: theia.NotebookCell | undefined, append: boolean): Promise<void> {\n        const handle = this.cellIndexToHandle(cell);\n        const outputDtos = this.validateAndConvertOutputs(Array.isArray(outputs) ? outputs : [outputs]);\n        return this.updateSoon(\n            {\n                editType: CellExecutionUpdateType.Output,\n                cellHandle: handle,\n                append,\n                outputs: outputDtos\n            });\n    }\n\n    private async updateOutputItems(items: theia.NotebookCellOutputItem | theia.NotebookCellOutputItem[], output: theia.NotebookCellOutput, append: boolean): Promise<void> {\n        items = NotebookCellOutputConverter.ensureUniqueMimeTypes(Array.isArray(items) ? items : [items], true);\n        return this.updateSoon({\n            editType: CellExecutionUpdateType.OutputItems,\n            items: items.map(NotebookCellOutputItem.from),\n            append\n        });\n    }\n\n    asApiObject(): theia.NotebookCellExecution {\n        const that = this;\n        const result: theia.NotebookCellExecution = {\n            get token(): CancellationToken { return that.tokenSource.token; },\n            get cell(): theia.NotebookCell { return that.cell.apiCell; },\n            get executionOrder(): number | undefined { return that.executionOrder; },\n            set executionOrder(v: number | undefined) {\n                that.executionOrder = v;\n                that.update([{\n                    editType: CellExecutionUpdateType.ExecutionState,\n                    executionOrder: that.executionOrder\n                }]);\n            },\n\n            start(startTime?: number): void {\n                if (that._state === NotebookCellExecutionTaskState.Resolved || that._state === NotebookCellExecutionTaskState.Started) {\n                    throw new Error('Cannot call start again');\n                }\n\n                that._state = NotebookCellExecutionTaskState.Started;\n                that._onDidChangeState.fire();\n\n                that.update({\n                    editType: CellExecutionUpdateType.ExecutionState,\n                    runStartTime: startTime\n                });\n            },\n\n            end(success: boolean | undefined, endTime?: number): void {\n                if (that._state === NotebookCellExecutionTaskState.Resolved) {\n                    throw new Error('Cannot call resolve twice');\n                }\n\n                that._state = NotebookCellExecutionTaskState.Resolved;\n                that._onDidChangeState.fire();\n\n                // The last update needs to be ordered correctly and applied immediately,\n                // so we use updateSoon and immediately flush.\n                that.collector.flush();\n\n                that.proxy.$completeExecution(that._handle, {\n                    runEndTime: endTime,\n                    lastRunSuccess: success\n                });\n            },\n\n            clearOutput(cell?: theia.NotebookCell): Thenable<void> {\n                that.verifyStateForOutput();\n                return that.updateOutputs([], cell, false);\n            },\n\n            appendOutput(outputs: NotebookCellOutput | NotebookCellOutput[], cell?: theia.NotebookCell): Promise<void> {\n                that.verifyStateForOutput();\n                return that.updateOutputs(outputs, cell, true);\n            },\n\n            replaceOutput(outputs: NotebookCellOutput | NotebookCellOutput[], cell?: theia.NotebookCell): Promise<void> {\n                that.verifyStateForOutput();\n                return that.updateOutputs(outputs, cell, false);\n            },\n\n            appendOutputItems(items: theia.NotebookCellOutputItem | theia.NotebookCellOutputItem[], output: theia.NotebookCellOutput): Promise<void> {\n                that.verifyStateForOutput();\n                return that.updateOutputItems(items, output, true);\n            },\n\n            replaceOutputItems(items: theia.NotebookCellOutputItem | theia.NotebookCellOutputItem[], output: theia.NotebookCellOutput): Promise<void> {\n                that.verifyStateForOutput();\n                return that.updateOutputItems(items, output, false);\n            }\n        };\n        return Object.freeze(result);\n    }\n\n    dispose(): void {\n\n    }\n}\n\nclass TimeoutBasedCollector<T> {\n    private batch: T[] = [];\n    private startedTimer = Date.now();\n    private currentDeferred: Deferred<void> | undefined;\n\n    constructor(\n        private readonly delay: number,\n        private readonly callback: (items: T[]) => Promise<void>) { }\n\n    addItem(item: T): Promise<void> {\n        this.batch.push(item);\n        if (!this.currentDeferred) {\n            this.currentDeferred = new Deferred<void>();\n            this.startedTimer = Date.now();\n            timeout(this.delay).then(() => this.flush());\n        }\n\n        // This can be called by the extension repeatedly for a long time before the timeout is able to run.\n        // Force a flush after the delay.\n        if (Date.now() - this.startedTimer > this.delay) {\n            return this.flush();\n        }\n\n        return this.currentDeferred.promise;\n    }\n\n    flush(): Promise<void> {\n        if (this.batch.length === 0 || !this.currentDeferred) {\n            return Promise.resolve();\n        }\n\n        const deferred = this.currentDeferred;\n        this.currentDeferred = undefined;\n        const batch = this.batch;\n        this.batch = [];\n        return this.callback(batch)\n            .finally(() => deferred.resolve());\n    }\n}\n\nexport function createKernelId(extensionIdentifier: string, id: string): string {\n    return `${extensionIdentifier}/${id}`;\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { NotebookRenderersExt, NotebookRenderersMain, PLUGIN_RPC_CONTEXT } from '../../common';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { NotebooksExtImpl } from './notebooks';\nimport * as theia from '@theia/plugin';\nimport { NotebookEditor } from './notebook-editor';\nimport { Emitter } from '@theia/core';\n\nexport class NotebookRenderersExtImpl implements NotebookRenderersExt {\n    private readonly rendererMessageEmitters = new Map<string /* rendererId */, Emitter<{ editor: theia.NotebookEditor; message: unknown }>>();\n    private readonly proxy: NotebookRenderersMain;\n\n    constructor(rpc: RPCProtocol, private readonly notebooksExt: NotebooksExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTEBOOK_RENDERERS_MAIN);\n    }\n\n    public $postRendererMessage(editorId: string, rendererId: string, message: unknown): void {\n        const editor = this.notebooksExt.getEditorById(editorId);\n        this.rendererMessageEmitters.get(rendererId)?.fire({ editor: editor.apiEditor, message });\n    }\n\n    public createRendererMessaging(rendererId: string): theia.NotebookRendererMessaging {\n\n        const messaging: theia.NotebookRendererMessaging = {\n            onDidReceiveMessage: (listener, thisArg, disposables) => this.getOrCreateEmitterFor(rendererId).event(listener, thisArg, disposables),\n            postMessage: (message, editorOrAlias) => {\n\n                const extHostEditor = editorOrAlias && NotebookEditor.apiEditorsToExtHost.get(editorOrAlias);\n                return this.proxy.$postMessage(extHostEditor?.id, rendererId, message);\n            },\n        };\n\n        return messaging;\n    }\n\n    private getOrCreateEmitterFor(rendererId: string): Emitter<{ editor: theia.NotebookEditor, message: unknown }> {\n        let emitter = this.rendererMessageEmitters.get(rendererId);\n        if (emitter) {\n            return emitter;\n        }\n\n        emitter = new Emitter({\n            onLastListenerRemove: () => {\n                emitter?.dispose();\n                this.rendererMessageEmitters.delete(rendererId);\n            }\n        });\n\n        this.rendererMessageEmitters.set(rendererId, emitter);\n\n        return emitter;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken, Disposable, DisposableCollection, Emitter, Event, URI } from '@theia/core';\nimport { URI as TheiaURI } from '../types-impl';\nimport * as theia from '@theia/plugin';\nimport {\n    CommandRegistryExt, NotebookCellStatusBarListDto, NotebookDataDto,\n    NotebookDocumentsAndEditorsDelta, NotebookDocumentShowOptions, NotebookDocumentsMain, NotebookEditorAddData, NotebookEditorsMain, NotebooksExt, NotebooksMain, Plugin,\n    PLUGIN_RPC_CONTEXT\n} from '../../common';\nimport { Cache } from '../../common/cache';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { UriComponents } from '../../common/uri-components';\nimport { CommandsConverter } from '../command-registry';\nimport * as typeConverters from '../type-converters';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { NotebookDocument } from './notebook-document';\nimport { NotebookEditor } from './notebook-editor';\nimport { EditorsAndDocumentsExtImpl } from '../editors-and-documents';\nimport { DocumentsExtImpl } from '../documents';\n\nexport class NotebooksExtImpl implements NotebooksExt {\n\n    private readonly notebookStatusBarItemProviders = new Map<number, theia.NotebookCellStatusBarItemProvider>();\n    private readonly commandsConverter: CommandsConverter;\n\n    private readonly onDidChangeActiveNotebookEditorEmitter = new Emitter<theia.NotebookEditor | undefined>();\n    readonly onDidChangeActiveNotebookEditor = this.onDidChangeActiveNotebookEditorEmitter.event;\n\n    private readonly onDidOpenNotebookDocumentEmitter = new Emitter<theia.NotebookDocument>();\n    onDidOpenNotebookDocument: Event<theia.NotebookDocument> = this.onDidOpenNotebookDocumentEmitter.event;\n    private readonly onDidCloseNotebookDocumentEmitter = new Emitter<theia.NotebookDocument>();\n    onDidCloseNotebookDocument: Event<theia.NotebookDocument> = this.onDidCloseNotebookDocumentEmitter.event;\n\n    private readonly onDidChangeVisibleNotebookEditorsEmitter = new Emitter<theia.NotebookEditor[]>();\n    onDidChangeVisibleNotebookEditors = this.onDidChangeVisibleNotebookEditorsEmitter.event;\n\n    private activeNotebookEditor: NotebookEditor | undefined;\n    get activeApiNotebookEditor(): theia.NotebookEditor | undefined {\n        return this.activeNotebookEditor?.apiEditor;\n    }\n\n    private visibleNotebookEditors: NotebookEditor[] = [];\n    get visibleApiNotebookEditors(): theia.NotebookEditor[] {\n        return this.visibleNotebookEditors.map(editor => editor.apiEditor);\n    }\n\n    private readonly documents = new Map<string, NotebookDocument>();\n    private readonly editors = new Map<string, NotebookEditor>();\n    private statusBarRegistry = new Cache<Disposable>('NotebookCellStatusBarCache');\n\n    private notebookProxy: NotebooksMain;\n    private notebookDocumentsProxy: NotebookDocumentsMain;\n    private notebookEditors: NotebookEditorsMain;\n\n    constructor(\n        rpc: RPCProtocol,\n        commands: CommandRegistryExt,\n        private textDocumentsAndEditors: EditorsAndDocumentsExtImpl,\n        private textDocuments: DocumentsExtImpl\n    ) {\n        this.notebookProxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTEBOOKS_MAIN);\n        this.notebookDocumentsProxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTEBOOK_DOCUMENTS_MAIN);\n        this.notebookEditors = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTEBOOK_EDITORS_MAIN);\n\n        commands.registerArgumentProcessor({\n            processArgument: (arg: { uri: URI }) => {\n                if (arg && arg.uri && this.documents.has(arg.uri.toString())) {\n                    return this.documents.get(arg.uri.toString())?.apiNotebook;\n                }\n                return arg;\n            }\n        });\n    }\n\n    async $provideNotebookCellStatusBarItems(handle: number, uri: UriComponents, index: number, token: CancellationToken): Promise<NotebookCellStatusBarListDto | undefined> {\n        const provider = this.notebookStatusBarItemProviders.get(handle);\n        const revivedUri = URI.fromComponents(uri);\n        const document = this.documents.get(revivedUri.toString());\n        if (!document || !provider) {\n            return;\n        }\n\n        const cell = document.getCellFromIndex(index);\n        if (!cell) {\n            return;\n        }\n\n        const result = await provider.provideCellStatusBarItems(cell.apiCell, token);\n        if (!result) {\n            return undefined;\n        }\n\n        const disposables = new DisposableCollection();\n        const cacheId = this.statusBarRegistry.add([disposables]);\n        const resultArr = Array.isArray(result) ? result : [result];\n        const items = resultArr.map(item => typeConverters.NotebookStatusBarItem.from(item, this.commandsConverter, disposables));\n        return {\n            cacheId,\n            items\n        };\n    }\n\n    $releaseNotebookCellStatusBarItems(cacheId: number): void {\n        this.statusBarRegistry.delete(cacheId);\n    }\n\n    // --- serialize/deserialize\n\n    private currentSerializerHandle = 0;\n    private readonly notebookSerializer = new Map<number, theia.NotebookSerializer>();\n\n    registerNotebookSerializer(plugin: Plugin, viewType: string, serializer: theia.NotebookSerializer,\n        options?: theia.NotebookDocumentContentOptions): theia.Disposable {\n        if (!viewType || !viewType.trim()) {\n            throw new Error('viewType cannot be empty or just whitespace');\n        }\n        const handle = this.currentSerializerHandle++;\n        this.notebookSerializer.set(handle, serializer);\n        this.notebookProxy.$registerNotebookSerializer(\n            handle,\n            { id: plugin.model.id, location: plugin.pluginUri },\n            viewType,\n            typeConverters.NotebookDocumentContentOptions.from(options),\n        );\n        return Disposable.create(() => {\n            this.notebookProxy.$unregisterNotebookSerializer(handle);\n        });\n    }\n\n    async $dataToNotebook(handle: number, bytes: BinaryBuffer, token: CancellationToken): Promise<NotebookDataDto> {\n        const serializer = this.notebookSerializer.get(handle);\n        if (!serializer) {\n            throw new Error('No serializer found');\n        }\n        const data = await serializer.deserializeNotebook(bytes.buffer, token);\n        return typeConverters.NotebookData.from(data);\n    }\n\n    async $notebookToData(handle: number, data: NotebookDataDto, token: CancellationToken): Promise<BinaryBuffer> {\n        const serializer = this.notebookSerializer.get(handle);\n        if (!serializer) {\n            throw new Error('No serializer found');\n        }\n        const bytes = await serializer.serializeNotebook(typeConverters.NotebookData.to(data), token);\n        return BinaryBuffer.wrap(bytes);\n    }\n\n    registerNotebookCellStatusBarItemProvider(notebookType: string, provider: theia.NotebookCellStatusBarItemProvider): theia.Disposable {\n\n        const handle = this.currentSerializerHandle++;\n        const eventHandle = typeof provider.onDidChangeCellStatusBarItems === 'function' ? this.currentSerializerHandle++ : undefined;\n\n        this.notebookStatusBarItemProviders.set(handle, provider);\n        this.notebookProxy.$registerNotebookCellStatusBarItemProvider(handle, eventHandle, notebookType);\n\n        let subscription: theia.Disposable | undefined;\n        if (eventHandle !== undefined) {\n            subscription = provider.onDidChangeCellStatusBarItems!(_ => this.notebookProxy.$emitCellStatusBarEvent(eventHandle));\n        }\n\n        return Disposable.create(() => {\n            this.notebookStatusBarItemProviders.delete(handle);\n            this.notebookProxy.$unregisterNotebookCellStatusBarItemProvider(handle, eventHandle);\n            subscription?.dispose();\n        });\n    }\n\n    getEditorById(editorId: string): NotebookEditor {\n        const editor = this.editors.get(editorId);\n        if (!editor) {\n            throw new Error(`unknown text editor: ${editorId}. known editors: ${[...this.editors.keys()]} `);\n        }\n        return editor;\n    }\n\n    getAllApiDocuments(): theia.NotebookDocument[] {\n        return [...this.documents.values()].map(doc => doc.apiNotebook);\n    }\n\n    async $acceptDocumentsAndEditorsDelta(delta: NotebookDocumentsAndEditorsDelta): Promise<void> {\n        if (delta.removedDocuments) {\n            for (const uri of delta.removedDocuments) {\n                const revivedUri = URI.fromComponents(uri);\n                const document = this.documents.get(revivedUri.toString());\n\n                if (document) {\n                    document.dispose();\n                    this.documents.delete(revivedUri.toString());\n                    this.onDidCloseNotebookDocumentEmitter.fire(document.apiNotebook);\n                }\n\n                for (const editor of this.editors.values()) {\n                    if (editor.notebookData.uri.toString() === revivedUri.toString()) {\n                        this.editors.delete(editor.id);\n                    }\n                }\n            }\n        }\n\n        if (delta.addedDocuments) {\n            for (const modelData of delta.addedDocuments) {\n                const uri = TheiaURI.from(modelData.uri);\n\n                if (this.documents.has(uri.toString())) {\n                    throw new Error(`adding EXISTING notebook ${uri} `);\n                }\n\n                const document = new NotebookDocument(\n                    this.notebookDocumentsProxy,\n                    this.textDocumentsAndEditors,\n                    this.textDocuments,\n                    uri,\n                    modelData\n                );\n\n                this.documents.get(uri.toString())?.dispose();\n                this.documents.set(uri.toString(), document);\n\n                this.onDidOpenNotebookDocumentEmitter.fire(document.apiNotebook);\n            }\n        }\n\n        if (delta.addedEditors) {\n            for (const editorModelData of delta.addedEditors) {\n                if (this.editors.has(editorModelData.id)) {\n                    return;\n                }\n\n                const revivedUri = URI.fromComponents(editorModelData.documentUri);\n                const document = this.documents.get(revivedUri.toString());\n\n                if (document) {\n                    this.createExtHostEditor(document, editorModelData.id, editorModelData);\n                }\n            }\n        }\n\n        const removedEditors: NotebookEditor[] = [];\n\n        if (delta.removedEditors) {\n            for (const editorId of delta.removedEditors) {\n                const editor = this.editors.get(editorId);\n\n                if (editor) {\n                    this.editors.delete(editorId);\n\n                    if (this.activeNotebookEditor?.id === editor.id) {\n                        this.activeNotebookEditor = undefined;\n                    }\n\n                    removedEditors.push(editor);\n                }\n            }\n        }\n\n        if (delta.visibleEditors) {\n            this.visibleNotebookEditors = delta.visibleEditors.map(id => this.editors.get(id)!).filter(editor => !!editor) as NotebookEditor[];\n            const visibleEditorsSet = new Set<string>();\n            this.visibleNotebookEditors.forEach(editor => visibleEditorsSet.add(editor.id));\n\n            for (const editor of this.editors.values()) {\n                const newValue = visibleEditorsSet.has(editor.id);\n                editor.acceptVisibility(newValue);\n            }\n\n            this.visibleNotebookEditors = [...this.editors.values()].map(e => e).filter(e => e.visible);\n            this.onDidChangeVisibleNotebookEditorsEmitter.fire(this.visibleApiNotebookEditors);\n        }\n\n        if (delta.newActiveEditor === null) {\n            // clear active notebook as current active editor is non-notebook editor\n            this.activeNotebookEditor = undefined;\n        } else if (delta.newActiveEditor) {\n            const activeEditor = this.editors.get(delta.newActiveEditor);\n            if (!activeEditor) {\n                console.error(`FAILED to find active notebook editor ${delta.newActiveEditor}`);\n            }\n            this.activeNotebookEditor = this.editors.get(delta.newActiveEditor);\n        }\n        if (delta.newActiveEditor !== undefined) {\n            this.onDidChangeActiveNotebookEditorEmitter.fire(this.activeNotebookEditor?.apiEditor);\n        }\n    }\n\n    getNotebookDocument(uri: TheiaURI, relaxed: true): NotebookDocument | undefined;\n    getNotebookDocument(uri: TheiaURI): NotebookDocument;\n    getNotebookDocument(uri: TheiaURI, relaxed?: true): NotebookDocument | undefined {\n        const result = this.documents.get(uri.toString());\n        if (!result && !relaxed) {\n            throw new Error(`NO notebook document for '${uri}'`);\n        }\n        return result;\n    }\n\n    private createExtHostEditor(document: NotebookDocument, editorId: string, data: NotebookEditorAddData): void {\n\n        if (this.editors.has(editorId)) {\n            throw new Error(`editor with id ALREADY EXISTS: ${editorId}`);\n        }\n\n        const editor = new NotebookEditor(\n            editorId,\n            document,\n            data.visibleRanges.map(typeConverters.NotebookRange.to),\n            data.selections.map(typeConverters.NotebookRange.to),\n            typeof data.viewColumn === 'number' ? typeConverters.ViewColumn.to(data.viewColumn) : undefined\n        );\n\n        this.editors.set(editorId, editor);\n    }\n\n    async createNotebookDocument(options: { viewType: string; content?: theia.NotebookData }): Promise<TheiaURI> {\n        const canonicalUri = await this.notebookDocumentsProxy.$tryCreateNotebook({\n            viewType: options.viewType,\n            content: options.content && typeConverters.NotebookData.from(options.content)\n        });\n        return TheiaURI.from(canonicalUri);\n    }\n\n    async openNotebookDocument(uri: TheiaURI): Promise<theia.NotebookDocument> {\n        const cached = this.documents.get(uri.toString());\n        if (cached) {\n            return cached.apiNotebook;\n        }\n        const canonicalUri = await this.notebookDocumentsProxy.$tryOpenNotebook(uri);\n        const document = this.documents.get(URI.fromComponents(canonicalUri).toString());\n        return document?.apiNotebook!;\n    }\n\n    async showNotebookDocument(notebookOrUri: theia.NotebookDocument | TheiaURI, options?: theia.NotebookDocumentShowOptions): Promise<theia.NotebookEditor> {\n\n        if (URI.isUri(notebookOrUri)) {\n            notebookOrUri = await this.openNotebookDocument(notebookOrUri as TheiaURI);\n        }\n\n        const notebook = notebookOrUri as theia.NotebookDocument;\n\n        let resolvedOptions: NotebookDocumentShowOptions;\n        if (typeof options === 'object') {\n            resolvedOptions = {\n                position: typeConverters.ViewColumn.from(options.viewColumn),\n                preserveFocus: options.preserveFocus,\n                selections: options.selections && options.selections.map(typeConverters.NotebookRange.from),\n                pinned: typeof options.preview === 'boolean' ? !options.preview : undefined\n            };\n        } else {\n            resolvedOptions = {\n                preserveFocus: false\n            };\n        }\n\n        const editorId = await this.notebookEditors.$tryShowNotebookDocument(notebook.uri, notebook.notebookType, resolvedOptions);\n        const editor = editorId && this.editors.get(editorId)?.apiEditor;\n\n        if (editor) {\n            return editor;\n        }\n\n        if (editorId) {\n            throw new Error(`Could NOT open editor for \"${notebook.uri.toString()}\" because another editor opened in the meantime.`);\n        } else {\n            throw new Error(`Could NOT open editor for \"${notebook.uri.toString()}\".`);\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { PLUGIN_RPC_CONTEXT, NotificationExt, NotificationMain } from '../common/plugin-api-rpc';\nimport { CancellationToken, Progress, ProgressOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { ProgressLocation } from './types-impl';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport class NotificationExtImpl implements NotificationExt {\n    private readonly proxy: NotificationMain;\n    private mapProgressIdToCancellationSource: Map<string, CancellationTokenSource> = new Map();\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN);\n    }\n\n    async withProgress<R>(\n        options: ProgressOptions,\n        task: (progress: Progress<{ message?: string; increment?: number }>, token: CancellationToken) => PromiseLike<R>\n    ): Promise<R> {\n        const source = new CancellationTokenSource();\n        const id = new Deferred<string>();\n        const progress = task({ report: async item => this.proxy.$updateProgress(await id.promise, item) }, source.token);\n        const title = options.title ? options.title : '';\n        const location = this.mapLocation(options.location);\n        const cancellable = options.cancellable;\n\n        id.resolve(await this.proxy.$startProgress({ title, location, cancellable }));\n\n        if (cancellable) {\n            const progressId = await id.promise;\n            this.mapProgressIdToCancellationSource.set(progressId, source);\n        }\n\n        const stop = async () => this.proxy.$stopProgress(await id.promise);\n        const promise = Promise.all([\n            progress,\n            new Promise(resolve => setTimeout(resolve, 250)) // try to show even if it's done immediately\n        ]);\n        promise.then(stop, stop);\n        return progress;\n    }\n\n    public $acceptProgressCanceled(id: string): void {\n        const source = this.mapProgressIdToCancellationSource.get(id);\n        if (source) {\n            source.cancel();\n            this.mapProgressIdToCancellationSource.delete(id);\n        }\n    }\n\n    protected mapLocation(location: ProgressLocation | { viewId: string }): string | undefined {\n        if (typeof location === 'object') {\n            return location.viewId;\n        }\n\n        switch (location) {\n            case ProgressLocation.Notification: return 'notification';\n            case ProgressLocation.SourceControl: return 'scm';\n            case ProgressLocation.Window: return 'window';\n            default: return undefined;\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { PLUGIN_RPC_CONTEXT as Ext, OutputChannelRegistryExt, OutputChannelRegistryMain, PluginInfo } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { isObject } from '../common/types';\nimport { LogOutputChannelImpl } from './output-channel/log-output-channel';\nimport { OutputChannelImpl } from './output-channel/output-channel-item';\n\nexport class OutputChannelRegistryExtImpl implements OutputChannelRegistryExt {\n\n    proxy: OutputChannelRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.OUTPUT_CHANNEL_REGISTRY_MAIN);\n    }\n\n    createOutputChannel(name: string, pluginInfo: PluginInfo): theia.OutputChannel;\n    createOutputChannel(name: string, pluginInfo: PluginInfo, options: { log: true; }): theia.LogOutputChannel;\n    createOutputChannel(name: string, pluginInfo: PluginInfo, options?: { log: true; }): theia.OutputChannel | theia.LogOutputChannel {\n        name = name.trim();\n        if (!name) {\n            throw new Error('illegal argument \\'name\\'. must not be falsy');\n        }\n        const isLogOutput = options && isObject(options);\n        return isLogOutput\n            ? this.doCreateLogOutputChannel(name, pluginInfo)\n            : this.doCreateOutputChannel(name, pluginInfo);\n    }\n\n    private doCreateOutputChannel(name: string, pluginInfo: PluginInfo): OutputChannelImpl {\n        return new OutputChannelImpl(name, this.proxy, pluginInfo);\n    }\n\n    private doCreateLogOutputChannel(name: string, pluginInfo: PluginInfo): LogOutputChannelImpl {\n        return new LogOutputChannelImpl(name, this.proxy, pluginInfo);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Emitter } from '@theia/core/shared/vscode-languageserver-protocol';\nimport * as theia from '@theia/plugin';\n\nimport { OutputChannelRegistryMain, PluginInfo } from '../../common/plugin-api-rpc';\nimport { OutputChannelImpl } from './output-channel-item';\nimport { LogLevel } from '../types-impl';\nimport { isArray, isObject } from '@theia/core';\n\nexport class LogOutputChannelImpl extends OutputChannelImpl implements theia.LogOutputChannel {\n\n    readonly onDidChangeLogLevelEmitter: Emitter<theia.LogLevel> = new Emitter<theia.LogLevel>();\n    readonly onDidChangeLogLevel: theia.Event<theia.LogLevel> = this.onDidChangeLogLevelEmitter.event;\n    public logLevel: theia.LogLevel;\n\n    constructor(name: string, proxy: OutputChannelRegistryMain, pluginInfo: PluginInfo) {\n        super(name, proxy, pluginInfo);\n        this.setLogLevel(LogLevel.Info);\n    }\n\n    setLogLevel(level: theia.LogLevel): void {\n        if (this.logLevel !== level) {\n            this.logLevel = level;\n            this.onDidChangeLogLevelEmitter.fire(this.logLevel);\n        }\n    }\n\n    getLogLevel(): theia.LogLevel {\n        return this.logLevel;\n    }\n\n    override append(value: string): void {\n        super.validate();\n        this.info(value);\n    }\n\n    override appendLine(value: string): void {\n        super.validate();\n        this.append(value + '\\n');\n    }\n\n    override dispose(): void {\n        super.dispose();\n        this.onDidChangeLogLevelEmitter.dispose();\n    }\n\n    protected log(level: theia.LogLevel, message: string): void {\n        super.validate();\n        if (this.checkLogLevel(level)) {\n            const now = new Date();\n            const eol = message.endsWith('\\n') ? '' : '\\n';\n            const logMessage = `${now.toISOString()} [${LogLevel[level]}] ${message}${eol}`;\n            this.proxy.$append(this.name, logMessage, this.pluginInfo);\n        }\n    }\n\n    private checkLogLevel(level: theia.LogLevel): boolean {\n        return this.logLevel <= level;\n    }\n\n    trace(message: string, ...args: any[]): void {\n        this.log(LogLevel.Trace, this.format(message, args));\n    }\n\n    debug(message: string, ...args: any[]): void {\n        this.log(LogLevel.Debug, this.format(message, args));\n    }\n\n    info(message: string, ...args: any[]): void {\n        this.log(LogLevel.Info, this.format(message, args));\n    }\n\n    warn(message: string, ...args: any[]): void {\n        this.log(LogLevel.Warning, this.format(message, args));\n    }\n\n    error(errorMsg: string | Error, ...args: any[]): void {\n        if (errorMsg instanceof Error) {\n            this.log(LogLevel.Error, this.format(errorMsg.stack || errorMsg.message, args));\n        } else {\n            this.log(LogLevel.Error, this.format(errorMsg, args));\n        }\n    }\n\n    private format(message: string, args: any[]): string {\n        if (args.length > 0) {\n            return `${message} ${args.map((arg: any) => isObject(arg) || isArray(arg) ? JSON.stringify(arg) : arg).join(' ')}`;\n        }\n        return message;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport * as theia from '@theia/plugin';\nimport { OutputChannelRegistryMain, PluginInfo } from '../../common/plugin-api-rpc';\n\nexport class OutputChannelImpl implements theia.OutputChannel {\n\n    private disposed: boolean;\n\n    constructor(readonly name: string, protected readonly proxy: OutputChannelRegistryMain, protected readonly pluginInfo: PluginInfo) {\n    }\n\n    dispose(): void {\n        if (!this.disposed) {\n            this.proxy.$dispose(this.name).then(() => {\n                this.disposed = true;\n            });\n        }\n    }\n\n    append(value: string): void {\n        this.validate();\n        this.proxy.$append(this.name, value, this.pluginInfo);\n    }\n\n    appendLine(value: string): void {\n        this.validate();\n        this.append(value + '\\n');\n    }\n\n    replace(value: string): void {\n        this.validate();\n        this.clear();\n        this.append(value);\n    }\n\n    clear(): void {\n        this.validate();\n        this.proxy.$clear(this.name);\n    }\n\n    show(preserveFocusOrColumn?: boolean | theia.ViewColumn, preserveFocus?: boolean): void {\n        this.validate();\n        if (typeof preserveFocusOrColumn === 'boolean') {\n            preserveFocus = preserveFocusOrColumn;\n        }\n        this.proxy.$reveal(this.name, !!preserveFocus);\n    }\n\n    hide(): void {\n        this.validate();\n        this.proxy.$close(this.name);\n    }\n\n    protected validate(): void {\n        if (this.disposed) {\n            throw new Error('Channel has been closed');\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nconst separator = '/';\n\nexport function normalize(path: string): string {\n    if (!path || path.length === 0) {\n        return '.';\n    }\n\n    const isAbsolute = path.charCodeAt(0) === 47;\n    const trailingSlash = path.charCodeAt(path.length - 1) === 47;\n\n    const parts = path.split(separator);\n\n    const result: string[] = [];\n\n    for (let i = 0; i < parts.length; i++) {\n        const p = parts[i];\n        if (p === '') {\n            continue;\n        }\n\n        if (p === '..') {\n            result.pop();\n            continue;\n        }\n\n        result.push(p);\n    }\n\n    if (result.length === 0) {\n        return '.';\n    }\n\n    path = result.join(separator);\n    if (isAbsolute) {\n        path = '/' + path;\n    }\n\n    if (trailingSlash) {\n        path += '/';\n    }\n\n    return path;\n}\n\nexport function join(...paths: string[]): string {\n    if (paths.length === 0) {\n        return '.';\n    }\n\n    const path = paths.join(separator);\n    return normalize(path);\n}\n","// *****************************************************************************\n// Copyright (C) 2018-2022 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* tslint:disable:typedef */\n\nimport type * as theia from '@theia/plugin';\nimport { CommandRegistryImpl } from './command-registry';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { CancellationError, CancellationToken, CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { QuickOpenExtImpl } from './quick-open';\nimport {\n    MAIN_RPC_CONTEXT,\n    Plugin as InternalPlugin,\n    PluginManager,\n    PluginAPIFactory,\n    MainMessageType,\n    DebugConfigurationProviderTriggerKind,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { MessageRegistryExt } from './message-registry';\nimport { StatusBarMessageRegistryExt } from './status-bar-message-registry';\nimport { WindowStateExtImpl } from './window-state';\nimport { WorkspaceExtImpl } from './workspace';\nimport { EnvExtImpl } from './env';\nimport { QueryParameters } from '../common/env';\nimport {\n    ConfigurationTarget,\n    Disposable,\n    Position,\n    Range,\n    Selection,\n    ViewColumn,\n    TextEditorSelectionChangeKind,\n    EndOfLine,\n    SnippetString,\n    ThemeColor,\n    ThemeIcon,\n    TextEditorRevealType,\n    TextEditorLineNumbersStyle,\n    DecorationRangeBehavior,\n    OverviewRulerLane,\n    StatusBarAlignment,\n    RelativePattern,\n    IndentAction,\n    CompletionItem,\n    CompletionItemKind,\n    CompletionList,\n    TextEdit,\n    SnippetTextEdit,\n    CompletionTriggerKind,\n    Diagnostic,\n    DiagnosticRelatedInformation,\n    DebugConsoleMode,\n    DiagnosticSeverity,\n    DiagnosticTag,\n    CompletionItemTag,\n    Location,\n    LogLevel,\n    Progress,\n    ProgressOptions,\n    ProgressLocation,\n    ParameterInformation,\n    SignatureInformation,\n    SignatureHelp,\n    SignatureHelpTriggerKind,\n    Hover,\n    EvaluatableExpression,\n    InlineValueEvaluatableExpression,\n    InlineValueText,\n    InlineValueVariableLookup,\n    InlineValueContext,\n    DocumentHighlightKind,\n    DocumentHighlight,\n    DocumentLink,\n    DocumentDropEdit,\n    CodeLens,\n    CodeActionKind,\n    CodeActionTrigger,\n    CodeActionTriggerKind,\n    TextDocumentSaveReason,\n    CodeAction,\n    DataTransferItem,\n    DataTransfer,\n    TreeItem,\n    TreeItemCollapsibleState,\n    TreeItemCheckboxState,\n    DocumentSymbol,\n    SymbolTag,\n    WorkspaceEdit,\n    SymbolInformation,\n    FileType,\n    FileChangeType,\n    ShellQuoting,\n    ShellExecution,\n    ProcessExecution,\n    CustomExecution,\n    TaskScope,\n    TaskPanelKind,\n    TaskRevealKind,\n    TaskGroup,\n    Task,\n    Task2,\n    DebugAdapterExecutable,\n    DebugAdapterServer,\n    DebugAdapterNamedPipeServer,\n    DebugAdapterInlineImplementation,\n    Breakpoint,\n    SourceBreakpoint,\n    FunctionBreakpoint,\n    FoldingRange,\n    FoldingRangeKind,\n    SelectionRange,\n    Color,\n    ColorInformation,\n    ColorPresentation,\n    OperatingSystem,\n    WebviewPanelTargetArea,\n    UIKind,\n    FileSystemError,\n    CommentThreadState,\n    CommentThreadCollapsibleState,\n    QuickInputButtons,\n    QuickPickItemKind,\n    CommentMode,\n    CallHierarchyItem,\n    CallHierarchyIncomingCall,\n    CallHierarchyOutgoingCall,\n    TypeHierarchyItem,\n    TimelineItem,\n    EnvironmentVariableMutatorType,\n    SemanticTokensLegend,\n    SemanticTokensBuilder,\n    SemanticTokens,\n    SemanticTokensEdits,\n    SemanticTokensEdit,\n    ColorThemeKind,\n    SourceControlInputBoxValidationType,\n    URI,\n    FileDecoration,\n    ExtensionMode,\n    LinkedEditingRanges,\n    LanguageStatusSeverity,\n    TextDocumentChangeReason,\n    InputBoxValidationSeverity,\n    TerminalLink,\n    TerminalLocation,\n    TerminalExitReason,\n    TerminalProfile,\n    TerminalQuickFixType,\n    InlayHint,\n    InlayHintKind,\n    InlayHintLabelPart,\n    TelemetryTrustedValue,\n    NotebookCellKind,\n    NotebookCellExecutionState,\n    NotebookCellStatusBarAlignment,\n    NotebookEditorRevealType,\n    NotebookControllerAffinity,\n    NotebookCellData,\n    NotebookCellOutput,\n    NotebookCellOutputItem,\n    NotebookData,\n    NotebookRange,\n    NotebookCellStatusBarItem,\n    NotebookEdit,\n    NotebookKernelSourceAction,\n    NotebookRendererScript,\n    TestRunProfileKind,\n    TestTag,\n    TestRunRequest,\n    TestMessage,\n    ExtensionKind,\n    InlineCompletionItem,\n    InlineCompletionList,\n    InlineCompletionTriggerKind,\n    TextTabInput,\n    CustomEditorTabInput,\n    NotebookDiffEditorTabInput,\n    NotebookEditorTabInput,\n    TerminalEditorTabInput,\n    TextDiffTabInput,\n    TextMergeTabInput,\n    WebviewEditorTabInput,\n    DocumentPasteEdit,\n    ExternalUriOpenerPriority,\n    EditSessionIdentityMatch,\n    TerminalOutputAnchor\n} from './types-impl';\nimport { AuthenticationExtImpl } from './authentication-ext';\nimport { SymbolKind } from '../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorsExtImpl } from './text-editors';\nimport { DocumentsExtImpl } from './documents';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { OutputChannelRegistryExtImpl } from './output-channel-registry';\nimport { TerminalServiceExtImpl, TerminalExtImpl } from './terminal-ext';\nimport { LanguagesExtImpl } from './languages';\nimport { fromDocumentSelector, pluginToPluginInfo, fromGlobPattern } from './type-converters';\nimport { DialogsExtImpl } from './dialogs';\nimport { NotificationExtImpl } from './notification';\nimport { score } from '@theia/editor/lib/common/language-selector';\nimport { MarkdownString } from './markdown-string';\nimport { TreeViewsExtImpl } from './tree/tree-views';\nimport { ConnectionImpl } from '../common/connection';\nimport { TasksExtImpl } from './tasks/tasks';\nimport { DebugExtImpl } from './debug/debug-ext';\nimport { FileSystemExtImpl } from './file-system-ext-impl';\nimport { ScmExtImpl } from './scm';\nimport { DecorationsExtImpl } from './decorations';\nimport { TextEditorExt } from './text-editor';\nimport { ClipboardExt } from './clipboard-ext';\nimport { WebviewsExtImpl } from './webviews';\nimport { ExtHostFileSystemEventService } from './file-system-event-service-ext-impl';\nimport { LabelServiceExtImpl } from '../plugin/label-service';\nimport {\n    createRunProfile,\n    createTestRun,\n    testItemCollection,\n    createTestItem\n} from './stubs/tests-api';\nimport { TimelineExtImpl } from './timeline';\nimport { ThemingExtImpl } from './theming';\nimport { CommentsExtImpl } from './comments';\nimport { CustomEditorsExtImpl } from './custom-editors';\nimport { WebviewViewsExtImpl } from './webview-views';\nimport { PluginPackage } from '../common';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\nimport { FilePermission } from '@theia/filesystem/lib/common/files';\nimport { TabsExtImpl } from './tabs';\nimport { LocalizationExtImpl } from './localization-ext';\nimport { NotebooksExtImpl } from './notebook/notebooks';\nimport { TelemetryExtImpl } from './telemetry-ext';\nimport { NotebookDocument } from './notebook/notebook-document';\nimport { NotebookRenderersExtImpl } from './notebook/notebook-renderers';\nimport { NotebookKernelsExtImpl } from './notebook/notebook-kernels';\nimport { NotebookDocumentsExtImpl } from './notebook/notebook-documents';\nimport { NotebookEditorsExtImpl } from './notebook/notebook-editors';\n\nexport function createAPIFactory(\n    rpc: RPCProtocol,\n    pluginManager: PluginManager,\n    envExt: EnvExtImpl,\n    debugExt: DebugExtImpl,\n    preferenceRegistryExt: PreferenceRegistryExtImpl,\n    editorsAndDocumentsExt: EditorsAndDocumentsExtImpl,\n    workspaceExt: WorkspaceExtImpl,\n    messageRegistryExt: MessageRegistryExt,\n    clipboard: ClipboardExt,\n    webviewExt: WebviewsExtImpl,\n    localizationExt: LocalizationExtImpl\n): PluginAPIFactory {\n\n    const authenticationExt = rpc.set(MAIN_RPC_CONTEXT.AUTHENTICATION_EXT, new AuthenticationExtImpl(rpc));\n    const commandRegistry = rpc.set(MAIN_RPC_CONTEXT.COMMAND_REGISTRY_EXT, new CommandRegistryImpl(rpc));\n    const quickOpenExt = rpc.set(MAIN_RPC_CONTEXT.QUICK_OPEN_EXT, new QuickOpenExtImpl(rpc));\n    const dialogsExt = new DialogsExtImpl(rpc);\n    const windowStateExt = rpc.set(MAIN_RPC_CONTEXT.WINDOW_STATE_EXT, new WindowStateExtImpl(rpc));\n    const notificationExt = rpc.set(MAIN_RPC_CONTEXT.NOTIFICATION_EXT, new NotificationExtImpl(rpc));\n    const editors = rpc.set(MAIN_RPC_CONTEXT.TEXT_EDITORS_EXT, new TextEditorsExtImpl(rpc, editorsAndDocumentsExt));\n    const documents = rpc.set(MAIN_RPC_CONTEXT.DOCUMENTS_EXT, new DocumentsExtImpl(rpc, editorsAndDocumentsExt));\n    const notebooksExt = rpc.set(MAIN_RPC_CONTEXT.NOTEBOOKS_EXT, new NotebooksExtImpl(rpc, commandRegistry, editorsAndDocumentsExt, documents));\n    const notebookEditors = rpc.set(MAIN_RPC_CONTEXT.NOTEBOOK_EDITORS_EXT, new NotebookEditorsExtImpl(notebooksExt));\n    const notebookRenderers = rpc.set(MAIN_RPC_CONTEXT.NOTEBOOK_RENDERERS_EXT, new NotebookRenderersExtImpl(rpc, notebooksExt));\n    const notebookKernels = rpc.set(MAIN_RPC_CONTEXT.NOTEBOOK_KERNELS_EXT, new NotebookKernelsExtImpl(rpc, notebooksExt, commandRegistry));\n    const notebookDocuments = rpc.set(MAIN_RPC_CONTEXT.NOTEBOOK_DOCUMENTS_EXT, new NotebookDocumentsExtImpl(notebooksExt));\n    const statusBarMessageRegistryExt = new StatusBarMessageRegistryExt(rpc);\n    const terminalExt = rpc.set(MAIN_RPC_CONTEXT.TERMINAL_EXT, new TerminalServiceExtImpl(rpc));\n    const outputChannelRegistryExt = rpc.set(MAIN_RPC_CONTEXT.OUTPUT_CHANNEL_REGISTRY_EXT, new OutputChannelRegistryExtImpl(rpc));\n    const treeViewsExt = rpc.set(MAIN_RPC_CONTEXT.TREE_VIEWS_EXT, new TreeViewsExtImpl(rpc, commandRegistry));\n    const tasksExt = rpc.set(MAIN_RPC_CONTEXT.TASKS_EXT, new TasksExtImpl(rpc, terminalExt));\n    const connectionExt = rpc.set(MAIN_RPC_CONTEXT.CONNECTION_EXT, new ConnectionImpl(rpc.getProxy(PLUGIN_RPC_CONTEXT.CONNECTION_MAIN)));\n    const fileSystemExt = rpc.set(MAIN_RPC_CONTEXT.FILE_SYSTEM_EXT, new FileSystemExtImpl(rpc));\n    const languagesExt = rpc.set(MAIN_RPC_CONTEXT.LANGUAGES_EXT, new LanguagesExtImpl(rpc, documents, commandRegistry, fileSystemExt));\n    const extHostFileSystemEvent = rpc.set(MAIN_RPC_CONTEXT.ExtHostFileSystemEventService, new ExtHostFileSystemEventService(rpc, editorsAndDocumentsExt));\n    const scmExt = rpc.set(MAIN_RPC_CONTEXT.SCM_EXT, new ScmExtImpl(rpc, commandRegistry));\n    const decorationsExt = rpc.set(MAIN_RPC_CONTEXT.DECORATIONS_EXT, new DecorationsExtImpl(rpc));\n    const labelServiceExt = rpc.set(MAIN_RPC_CONTEXT.LABEL_SERVICE_EXT, new LabelServiceExtImpl(rpc));\n    const timelineExt = rpc.set(MAIN_RPC_CONTEXT.TIMELINE_EXT, new TimelineExtImpl(rpc, commandRegistry));\n    const themingExt = rpc.set(MAIN_RPC_CONTEXT.THEMING_EXT, new ThemingExtImpl(rpc));\n    const commentsExt = rpc.set(MAIN_RPC_CONTEXT.COMMENTS_EXT, new CommentsExtImpl(rpc, commandRegistry, documents));\n    const tabsExt = rpc.set(MAIN_RPC_CONTEXT.TABS_EXT, new TabsExtImpl(rpc));\n    const customEditorExt = rpc.set(MAIN_RPC_CONTEXT.CUSTOM_EDITORS_EXT, new CustomEditorsExtImpl(rpc, documents, webviewExt, workspaceExt));\n    const webviewViewsExt = rpc.set(MAIN_RPC_CONTEXT.WEBVIEW_VIEWS_EXT, new WebviewViewsExtImpl(rpc, webviewExt));\n    const telemetryExt = rpc.set(MAIN_RPC_CONTEXT.TELEMETRY_EXT, new TelemetryExtImpl());\n    rpc.set(MAIN_RPC_CONTEXT.DEBUG_EXT, debugExt);\n\n    return function (plugin: InternalPlugin): typeof theia {\n        const authentication: typeof theia.authentication = {\n            registerAuthenticationProvider(id: string, label: string, provider: theia.AuthenticationProvider, options?: theia.AuthenticationProviderOptions): theia.Disposable {\n                return authenticationExt.registerAuthenticationProvider(id, label, provider, options);\n            },\n            getSession(providerId: string, scopes: string[], options: theia.AuthenticationGetSessionOptions) {\n                return authenticationExt.getSession(plugin, providerId, scopes, options as any);\n            },\n            get onDidChangeSessions(): theia.Event<theia.AuthenticationSessionsChangeEvent> {\n                return authenticationExt.onDidChangeSessions;\n            }\n        };\n        function commandIsDeclaredInPackage(id: string, model: PluginPackage): boolean {\n            const rawCommands = model.contributes?.commands;\n            if (!rawCommands) { return false; }\n            return Array.isArray(rawCommands) ? rawCommands.some(candidate => candidate.command === id) : rawCommands.command === id;\n        }\n        const commands: typeof theia.commands = {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            registerCommand(command: theia.CommandDescription | string, handler?: <T>(...args: any[]) => T | Thenable<T | undefined>, thisArg?: any): Disposable {\n                // use of the ID when registering commands\n                if (typeof command === 'string') {\n                    if (handler && commandIsDeclaredInPackage(command, plugin.rawModel)) {\n                        return commandRegistry.registerHandler(command, handler, thisArg);\n                    }\n                    return commandRegistry.registerCommand({ id: command }, handler, thisArg);\n                }\n                return commandRegistry.registerCommand(command, handler, thisArg);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            executeCommand<T>(commandId: string, ...args: any[]): PromiseLike<T | undefined> {\n                return commandRegistry.executeCommand<T>(commandId, ...args);\n            },\n            registerTextEditorCommand(command: string, handler: (textEditor: theia.TextEditor, edit: theia.TextEditorEdit, ...arg: any[]) => void, thisArg?: any): Disposable {\n                const internalHandler = (...args: any[]): any => {\n                    const activeTextEditor = editors.getActiveEditor();\n                    if (!activeTextEditor) {\n                        console.warn('Cannot execute ' + command + ' because there is no active text editor.');\n                        return undefined;\n                    }\n\n                    return activeTextEditor.edit((edit: theia.TextEditorEdit) => {\n                        args.unshift(activeTextEditor, edit);\n                        handler.apply(thisArg, args);\n                    }).then(result => {\n                        if (!result) {\n                            console.warn('Edits from command ' + command + ' were not applied.');\n                        }\n                    }, err => {\n                        console.warn('An error occurred while running command ' + command, err);\n                    });\n                };\n                return commandIsDeclaredInPackage(command, plugin.rawModel)\n                    ? commandRegistry.registerHandler(command, internalHandler)\n                    : commandRegistry.registerCommand({ id: command }, internalHandler);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            registerHandler(commandId: string, handler: (...args: any[]) => any, thisArg?: any): Disposable {\n                return commandRegistry.registerHandler(commandId, handler, thisArg);\n            },\n            getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n                return commandRegistry.getKeyBinding(commandId);\n            },\n            getCommands(filterInternal: boolean = false): PromiseLike<string[]> {\n                return commandRegistry.getCommands(filterInternal);\n            },\n            registerDiffInformationCommand(command: string, callback: (diff: theia.LineChange[], ...args: any[]) => any, thisArg?: any): Disposable {\n                // Dummy implementation.\n                return new Disposable(() => { });\n            }\n        };\n\n        const { onDidChangeActiveTerminal, onDidChangeTerminalState, onDidCloseTerminal, onDidOpenTerminal } = terminalExt;\n        const showInformationMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Info);\n        const showWarningMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Warning);\n        const showErrorMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Error);\n        const window: typeof theia.window = {\n\n            get activeTerminal(): TerminalExtImpl | undefined {\n                return terminalExt.activeTerminal;\n            },\n            get activeTextEditor(): TextEditorExt | undefined {\n                return editors.getActiveEditor();\n            },\n            get visibleTextEditors(): theia.TextEditor[] {\n                return editors.getVisibleTextEditors();\n            },\n            get terminals(): TerminalExtImpl[] {\n                return terminalExt.terminals;\n            },\n            onDidChangeActiveTerminal,\n            onDidChangeActiveTextEditor(listener, thisArg?, disposables?) {\n                return editors.onDidChangeActiveTextEditor(listener, thisArg, disposables);\n            },\n            onDidChangeVisibleTextEditors(listener, thisArg?, disposables?) {\n                return editors.onDidChangeVisibleTextEditors(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorSelection(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorSelection(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorOptions(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorOptions(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorViewColumn(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorViewColumn(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorVisibleRanges(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorVisibleRanges(listener, thisArg, disposables);\n            },\n            async showTextDocument(documentArg: theia.TextDocument | URI,\n                columnOrOptions?: theia.TextDocumentShowOptions | theia.ViewColumn,\n                preserveFocus?: boolean\n            ): Promise<theia.TextEditor> {\n                let documentOptions: theia.TextDocumentShowOptions | undefined;\n                const uri: URI = documentArg instanceof URI ? documentArg : documentArg.uri;\n                if (typeof columnOrOptions === 'number') {\n                    documentOptions = {\n                        viewColumn: columnOrOptions\n                    };\n                } else if (columnOrOptions && (columnOrOptions.preserveFocus || columnOrOptions.preview || columnOrOptions.selection || columnOrOptions.viewColumn)) {\n                    documentOptions = {\n                        ...columnOrOptions\n                    };\n                }\n                if (preserveFocus) {\n                    if (documentOptions) {\n                        documentOptions.preserveFocus = preserveFocus;\n                    } else {\n                        documentOptions = { preserveFocus };\n                    }\n                }\n                await documents.showDocument(uri, documentOptions);\n                const textEditor = editors.getVisibleTextEditors().find(editor => editor.document.uri.toString() === uri.toString());\n                if (textEditor) {\n                    return Promise.resolve(textEditor);\n                } else {\n                    throw new Error(`Failed to show text document ${documentArg.toString()}`);\n                }\n            },\n            get visibleNotebookEditors(): theia.NotebookEditor[] {\n                return notebooksExt.visibleApiNotebookEditors;\n            },\n            onDidChangeVisibleNotebookEditors(listener, thisArg?, disposables?) {\n                return notebooksExt.onDidChangeVisibleNotebookEditors(listener, thisArg, disposables);\n            },\n            get activeNotebookEditor(): theia.NotebookEditor | undefined {\n                return notebooksExt.activeApiNotebookEditor;\n            }, onDidChangeActiveNotebookEditor(listener, thisArg?, disposables?) {\n                return notebooksExt.onDidChangeActiveNotebookEditor(listener, thisArg, disposables);\n            },\n            onDidChangeNotebookEditorSelection(listener, thisArg?, disposables?) {\n                return notebookEditors.onDidChangeNotebookEditorSelection(listener, thisArg, disposables);\n            },\n            onDidChangeNotebookEditorVisibleRanges(listener, thisArg?, disposables?) {\n                return notebookEditors.onDidChangeNotebookEditorVisibleRanges(listener, thisArg, disposables);\n            },\n            showNotebookDocument(document: theia.NotebookDocument, options?: theia.NotebookDocumentShowOptions) {\n                return notebooksExt.showNotebookDocument(document, options);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            showQuickPick(items: any, options?: theia.QuickPickOptions, token?: theia.CancellationToken): any {\n                return quickOpenExt.showQuickPick(items, options, token);\n            },\n            createQuickPick<T extends theia.QuickPickItem>(): theia.QuickPick<T> {\n                return quickOpenExt.createQuickPick(plugin);\n            },\n            showWorkspaceFolderPick(options?: theia.WorkspaceFolderPickOptions): PromiseLike<theia.WorkspaceFolder | undefined> {\n                return workspaceExt.pickWorkspaceFolder(options);\n            },\n            showInformationMessage,\n            showWarningMessage,\n            showErrorMessage,\n            showOpenDialog(options: theia.OpenDialogOptions): PromiseLike<URI[] | undefined> {\n                return dialogsExt.showOpenDialog(options);\n            },\n            showSaveDialog(options: theia.SaveDialogOptions): PromiseLike<URI | undefined> {\n                return dialogsExt.showSaveDialog(options);\n            },\n            showUploadDialog(options: theia.UploadDialogOptions): PromiseLike<URI[] | undefined> {\n                return dialogsExt.showUploadDialog(options);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            setStatusBarMessage(text: string, arg?: number | PromiseLike<any>): Disposable {\n                return statusBarMessageRegistryExt.setStatusBarMessage(text, arg);\n            },\n            showInputBox(options?: theia.InputBoxOptions, token?: theia.CancellationToken): PromiseLike<string | undefined> {\n                return quickOpenExt.showInput(options, token);\n            },\n            createStatusBarItem(alignmentOrId?: theia.StatusBarAlignment | string, priorityOrAlignment?: number | theia.StatusBarAlignment,\n                priorityArg?: number): theia.StatusBarItem {\n                let id: string | undefined;\n                let alignment: number | undefined;\n                let priority: number | undefined;\n\n                if (typeof alignmentOrId === 'string') {\n                    id = alignmentOrId;\n                    alignment = priorityOrAlignment;\n                    priority = priorityArg;\n                } else {\n                    alignment = alignmentOrId;\n                    priority = priorityOrAlignment;\n                }\n\n                return statusBarMessageRegistryExt.createStatusBarItem(alignment, priority, id);\n            },\n            createOutputChannel(name: string, options?: { log: true }): any {\n                return !options\n                    ? outputChannelRegistryExt.createOutputChannel(name, pluginToPluginInfo(plugin))\n                    : outputChannelRegistryExt.createOutputChannel(name, pluginToPluginInfo(plugin), options);\n            },\n            createWebviewPanel(viewType: string,\n                title: string,\n                showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n                options: theia.WebviewPanelOptions & theia.WebviewOptions = {}): theia.WebviewPanel {\n                return webviewExt.createWebview(viewType, title, showOptions, options, plugin);\n            },\n            registerWebviewPanelSerializer(viewType: string, serializer: theia.WebviewPanelSerializer): theia.Disposable {\n                return webviewExt.registerWebviewPanelSerializer(viewType, serializer, plugin);\n            },\n            registerCustomEditorProvider(viewType: string,\n                provider: theia.CustomTextEditorProvider | theia.CustomReadonlyEditorProvider,\n                options: { webviewOptions?: theia.WebviewPanelOptions, supportsMultipleEditorsPerDocument?: boolean } = {}): theia.Disposable {\n                return customEditorExt.registerCustomEditorProvider(viewType, provider, options, plugin);\n            },\n            registerWebviewViewProvider(viewType: string,\n                provider: theia.WebviewViewProvider,\n                options?: {\n                    webviewOptions?: {\n                        retainContextWhenHidden?: boolean\n                    }\n                }): theia.Disposable {\n                return webviewViewsExt.registerWebviewViewProvider(viewType, provider, plugin, options?.webviewOptions);\n            },\n            get state(): theia.WindowState {\n                return windowStateExt.getWindowState();\n            },\n            onDidChangeWindowState(listener, thisArg?, disposables?): theia.Disposable {\n                return windowStateExt.onDidChangeWindowState(listener, thisArg, disposables);\n            },\n            createTerminal(nameOrOptions: theia.TerminalOptions | theia.ExtensionTerminalOptions | theia.ExtensionTerminalOptions | (string | undefined),\n                shellPath?: string,\n                shellArgs?: string[] | string): theia.Terminal {\n                return terminalExt.createTerminal(nameOrOptions, shellPath, shellArgs);\n            },\n            onDidChangeTerminalState,\n            onDidCloseTerminal,\n            onDidOpenTerminal,\n            createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n                return editors.createTextEditorDecorationType(options);\n            },\n            registerTreeDataProvider<T>(viewId: string, treeDataProvider: theia.TreeDataProvider<T>): Disposable {\n                return treeViewsExt.registerTreeDataProvider(plugin, viewId, treeDataProvider);\n            },\n            createTreeView<T>(viewId: string, options: theia.TreeViewOptions<T>): theia.TreeView<T> {\n                return treeViewsExt.createTreeView(plugin, viewId, options);\n            },\n            withScmProgress<R>(task: (progress: theia.Progress<number>) => Thenable<R>) {\n                const options: ProgressOptions = { location: ProgressLocation.SourceControl };\n                return notificationExt.withProgress(options, () => task({ report() { /* noop */ } }));\n            },\n            withProgress<R>(\n                options: ProgressOptions,\n                task: (progress: Progress<{ message?: string; increment?: number }>, token: theia.CancellationToken) => PromiseLike<R>\n            ): PromiseLike<R> {\n                return notificationExt.withProgress(options, task);\n            },\n            registerFileDecorationProvider(provider: theia.FileDecorationProvider): theia.Disposable {\n                return decorationsExt.registerFileDecorationProvider(provider, pluginToPluginInfo(plugin));\n            },\n            registerUriHandler(handler: theia.UriHandler): theia.Disposable {\n                // TODO ?\n                return new Disposable(() => { });\n            },\n            createInputBox(): theia.InputBox {\n                return quickOpenExt.createInputBox(plugin);\n            },\n            registerTerminalLinkProvider(provider: theia.TerminalLinkProvider): theia.Disposable {\n                return terminalExt.registerTerminalLinkProvider(provider);\n            },\n            registerTerminalProfileProvider(id: string, provider: theia.TerminalProfileProvider): theia.Disposable {\n                return terminalExt.registerTerminalProfileProvider(id, provider);\n            },\n            get activeColorTheme(): theia.ColorTheme {\n                return themingExt.activeColorTheme;\n            },\n            onDidChangeActiveColorTheme(listener, thisArg?, disposables?) {\n                return themingExt.onDidChangeActiveColorTheme(listener, thisArg, disposables);\n            },\n            get tabGroups(): theia.TabGroups {\n                return tabsExt.tabGroups;\n            },\n            /** @stubbed ExternalUriOpener */\n            registerExternalUriOpener(id: string, opener: theia.ExternalUriOpener, metadata: theia.ExternalUriOpenerMetadata): theia.Disposable {\n                return Disposable.NULL;\n            },\n            /** @stubbed ProfileContentHandler */\n            registerProfileContentHandler(id: string, profileContentHandler: theia.ProfileContentHandler): theia.Disposable {\n                return Disposable.NULL;\n            },\n            /** @stubbed TerminalQuickFixProvider */\n            registerTerminalQuickFixProvider(id: string, provider: theia.TerminalQuickFixProvider): theia.Disposable {\n                return terminalExt.registerTerminalQuickFixProvider(id, provider);\n            },\n            /** @stubbed ShareProvider */\n            registerShareProvider: () => Disposable.NULL,\n        };\n\n        const workspace: typeof theia.workspace = {\n\n            get fs(): theia.FileSystem {\n                return fileSystemExt.fileSystem;\n            },\n\n            get rootPath(): string | undefined {\n                return workspaceExt.rootPath;\n            },\n            get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n                return workspaceExt.workspaceFolders;\n            },\n            get workspaceFile(): URI | undefined {\n                return workspaceExt.workspaceFile;\n            },\n            get name(): string | undefined {\n                return workspaceExt.name;\n            },\n            onDidChangeWorkspaceFolders(listener, thisArg?, disposables?): theia.Disposable {\n                return workspaceExt.onDidChangeWorkspaceFolders(listener, thisArg, disposables);\n            },\n            get notebookDocuments(): theia.NotebookDocument[] {\n                return notebooksExt.getAllApiDocuments();\n            },\n            get textDocuments(): theia.TextDocument[] {\n                return documents.getAllDocumentData().map(data => data.document);\n            },\n            onDidChangeTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidChangeDocument(listener, thisArg, disposables);\n            },\n            onDidCloseTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidRemoveDocument(listener, thisArg, disposables);\n            },\n            onDidOpenNotebookDocument(listener, thisArg?, disposables?) {\n                return notebooksExt.onDidOpenNotebookDocument(listener, thisArg, disposables);\n            },\n            onDidCloseNotebookDocument(listener, thisArg?, disposables?) {\n                return notebooksExt.onDidCloseNotebookDocument(listener, thisArg, disposables);\n            },\n            onWillSaveNotebookDocument(listener, thisArg?, disposables?) {\n                return Disposable.NULL;\n            },\n            onDidSaveNotebookDocument(listener, thisArg, disposables) {\n                return notebookDocuments.onDidSaveNotebookDocument(listener, thisArg, disposables);\n            },\n            onDidChangeNotebookDocument(listener, thisArg, disposables) {\n                return notebookDocuments.onDidChangeNotebookDocument(listener, thisArg, disposables);\n            },\n            onDidOpenTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidAddDocument(listener, thisArg, disposables);\n            },\n            onWillSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onWillSaveTextDocument(listener, thisArg, disposables);\n            },\n            onDidSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidSaveTextDocument(listener, thisArg, disposables);\n            },\n            onDidCreateFiles: (listener, thisArg, disposables) => extHostFileSystemEvent.onDidCreateFile(listener, thisArg, disposables),\n            onDidDeleteFiles: (listener, thisArg, disposables) => extHostFileSystemEvent.onDidDeleteFile(listener, thisArg, disposables),\n            onDidRenameFiles: (listener, thisArg, disposables) => extHostFileSystemEvent.onDidRenameFile(listener, thisArg, disposables),\n            onWillCreateFiles: (listener: (e: theia.FileWillCreateEvent) => any, thisArg?: any, disposables?: theia.Disposable[]) =>\n                extHostFileSystemEvent.getOnWillCreateFileEvent(plugin)(listener, thisArg, disposables),\n            onWillDeleteFiles: (listener: (e: theia.FileWillDeleteEvent) => any, thisArg?: any, disposables?: theia.Disposable[]) =>\n                extHostFileSystemEvent.getOnWillDeleteFileEvent(plugin)(listener, thisArg, disposables),\n            onWillRenameFiles: (listener: (e: theia.FileWillRenameEvent) => any, thisArg?: any, disposables?: theia.Disposable[]) =>\n                extHostFileSystemEvent.getOnWillRenameFileEvent(plugin)(listener, thisArg, disposables),\n            getConfiguration(section, resource): theia.WorkspaceConfiguration {\n                return preferenceRegistryExt.getConfiguration(section, resource);\n            },\n            onDidChangeConfiguration(listener, thisArgs?, disposables?): theia.Disposable {\n                return preferenceRegistryExt.onDidChangeConfiguration(listener, thisArgs, disposables);\n            },\n            async openTextDocument(uriOrFileNameOrOptions?: theia.Uri | string | { language?: string; content?: string; }): Promise<theia.TextDocument | undefined> {\n                const options = uriOrFileNameOrOptions as { language?: string; content?: string; };\n\n                let uri: URI;\n                if (typeof uriOrFileNameOrOptions === 'string') {\n                    uri = URI.file(uriOrFileNameOrOptions);\n\n                } else if (uriOrFileNameOrOptions instanceof URI) {\n                    uri = uriOrFileNameOrOptions;\n\n                } else if (!options || typeof options === 'object') {\n                    uri = await documents.createDocumentData(options);\n\n                } else {\n                    return Promise.reject(new Error('illegal argument - uriOrFileNameOrOptions'));\n                }\n\n                const data = await documents.openDocument(uri);\n                return data && data.document;\n            },\n            async openNotebookDocument(uriOrType: theia.Uri | string, content?: NotebookData): Promise<theia.NotebookDocument | undefined> {\n                let uri: URI;\n                if (URI.isUri(uriOrType)) {\n                    uri = uriOrType;\n                    await notebooksExt.openNotebookDocument(uriOrType as URI);\n                } else if (typeof uriOrType === 'string') {\n                    uri = URI.revive(await notebooksExt.createNotebookDocument({ viewType: uriOrType, content }));\n                } else {\n                    throw new Error('Invalid arguments');\n                }\n                return notebooksExt.getNotebookDocument(uri).apiNotebook;\n\n            },\n            createFileSystemWatcher: (pattern, ignoreCreate, ignoreChange, ignoreDelete): theia.FileSystemWatcher =>\n                extHostFileSystemEvent.createFileSystemWatcher(fromGlobPattern(pattern), ignoreCreate, ignoreChange, ignoreDelete),\n            findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | null, maxResults?: number, token?: CancellationToken): PromiseLike<URI[]> {\n                return workspaceExt.findFiles(include, exclude, maxResults, token);\n            },\n            findTextInFiles(query: theia.TextSearchQuery, optionsOrCallback: theia.FindTextInFilesOptions | ((result: theia.TextSearchResult) => void),\n                callbackOrToken?: CancellationToken | ((result: theia.TextSearchResult) => void), token?: CancellationToken): Promise<theia.TextSearchComplete> {\n                return workspaceExt.findTextInFiles(query, optionsOrCallback, callbackOrToken, token);\n            },\n            saveAll(includeUntitled?: boolean): PromiseLike<boolean> {\n                return editors.saveAll(includeUntitled);\n            },\n            applyEdit(edit: theia.WorkspaceEdit, metadata?: theia.WorkspaceEditMetadata): PromiseLike<boolean> {\n                return editors.applyWorkspaceEdit(edit, metadata);\n            },\n            registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n                return workspaceExt.registerTextDocumentContentProvider(scheme, provider);\n            },\n            registerFileSystemProvider(scheme: string, provider: theia.FileSystemProvider, options?: { isCaseSensitive?: boolean, isReadonly?: boolean }): theia.Disposable {\n                return fileSystemExt.registerFileSystemProvider(scheme, provider, options);\n            },\n            getWorkspaceFolder(uri: theia.Uri): theia.WorkspaceFolder | undefined {\n                return workspaceExt.getWorkspaceFolder(uri);\n            },\n            asRelativePath(pathOrUri: theia.Uri | string, includeWorkspace?: boolean): string | undefined {\n                return workspaceExt.getRelativePath(pathOrUri, includeWorkspace);\n            },\n            updateWorkspaceFolders: (index, deleteCount, ...workspaceFoldersToAdd) =>\n                workspaceExt.updateWorkspaceFolders(index, deleteCount || 0, ...workspaceFoldersToAdd)\n            ,\n            registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n                return tasks.registerTaskProvider(type, provider);\n            },\n            registerResourceLabelFormatter(formatter: theia.ResourceLabelFormatter): theia.Disposable {\n                return labelServiceExt.$registerResourceLabelFormatter(formatter);\n            },\n            registerTimelineProvider(scheme: string | string[], provider: theia.TimelineProvider): theia.Disposable {\n                return timelineExt.registerTimelineProvider(plugin, scheme, provider);\n            },\n            registerNotebookSerializer(notebookType: string, serializer: theia.NotebookSerializer, options?: theia.NotebookDocumentContentOptions): theia.Disposable {\n                return notebooksExt.registerNotebookSerializer(plugin, notebookType, serializer, options);\n            },\n            get isTrusted(): boolean {\n                return workspaceExt.trusted;\n            },\n            async requestWorkspaceTrust(options?: theia.WorkspaceTrustRequestOptions): Promise<boolean | undefined> {\n                return workspaceExt.requestWorkspaceTrust(options);\n            },\n            get onDidGrantWorkspaceTrust(): theia.Event<void> {\n                return workspaceExt.onDidGrantWorkspaceTrust;\n            },\n            registerEditSessionIdentityProvider(scheme: string, provider: theia.EditSessionIdentityProvider) {\n                return workspaceExt.$registerEditSessionIdentityProvider(scheme, provider);\n            },\n            /**\n             * @stubbed\n             * This is a stub implementation, that should minimally satisfy vscode built-in extensions\n             * that currently use this proposed API.\n             */\n            onWillCreateEditSessionIdentity: () => Disposable.NULL,\n            registerCanonicalUriProvider(scheme: string, provider: theia.CanonicalUriProvider): theia.Disposable {\n                return workspaceExt.registerCanonicalUriProvider(scheme, provider);\n            },\n            getCanonicalUri(uri: theia.Uri, options: theia.CanonicalUriRequestOptions, token: CancellationToken): theia.ProviderResult<theia.Uri> {\n                return workspaceExt.getCanonicalUri(uri, options, token);\n            }\n        };\n\n        const onDidChangeLogLevel = new Emitter<theia.LogLevel>();\n        const env: typeof theia.env = Object.freeze({\n            get appName(): string { return envExt.appName; },\n            get appRoot(): string { return envExt.appRoot; },\n            get appHost(): string { return envExt.appHost; },\n            get language(): string { return envExt.language; },\n            get isNewAppInstall(): boolean { return envExt.isNewAppInstall; },\n            get isTelemetryEnabled(): boolean { return telemetryExt.isTelemetryEnabled; },\n            get onDidChangeTelemetryEnabled(): theia.Event<boolean> {\n                return telemetryExt.onDidChangeTelemetryEnabled;\n            },\n            createTelemetryLogger(sender: theia.TelemetrySender, options?: theia.TelemetryLoggerOptions): theia.TelemetryLogger {\n                return telemetryExt.createTelemetryLogger(sender, options);\n            },\n            get remoteName(): string | undefined { return envExt.remoteName; },\n            get machineId(): string { return envExt.machineId; },\n            get sessionId(): string { return envExt.sessionId; },\n            get uriScheme(): string { return envExt.uriScheme; },\n            get shell(): string { return envExt.shell; },\n            get uiKind(): theia.UIKind { return envExt.uiKind; },\n            clipboard,\n            getEnvVariable(envVarName: string): PromiseLike<string | undefined> {\n                return envExt.getEnvVariable(envVarName);\n            },\n            getQueryParameter(queryParamName: string): string | string[] | undefined {\n                return envExt.getQueryParameter(queryParamName);\n            },\n            getQueryParameters(): QueryParameters {\n                return envExt.getQueryParameters();\n            },\n            getClientOperatingSystem(): PromiseLike<theia.OperatingSystem> {\n                return envExt.getClientOperatingSystem();\n            },\n            openExternal(uri: theia.Uri): PromiseLike<boolean> {\n                return windowStateExt.openUri(uri);\n            },\n            asExternalUri(target: theia.Uri): PromiseLike<theia.Uri> {\n                return windowStateExt.asExternalUri(target);\n            },\n            get logLevel(): theia.LogLevel { return LogLevel.Info; },\n            get onDidChangeLogLevel(): theia.Event<theia.LogLevel> { return onDidChangeLogLevel.event; }\n        });\n\n        const extensions: typeof theia.extensions = Object.freeze({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            getExtension<T = any>(extensionId: string, includeFromDifferentExtensionHosts: boolean = false): theia.Extension<T> | undefined {\n                includeFromDifferentExtensionHosts = false;\n                const plg = pluginManager.getPluginById(extensionId.toLowerCase());\n                if (plg) {\n                    return new PluginExt(pluginManager, plg);\n                }\n                return undefined;\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            get all(): readonly theia.Extension<any>[] {\n                return pluginManager.getAllPlugins().map(plg => new PluginExt(pluginManager, plg));\n            },\n            get allAcrossExtensionHosts(): readonly theia.Extension<any>[] {\n                // we only support one extension host ATM so equivalent to calling \"all()\"\n                return this.all;\n            },\n            get onDidChange(): theia.Event<void> {\n                return pluginManager.onDidChange;\n            }\n        });\n\n        const languages: typeof theia.languages = {\n            getLanguages(): PromiseLike<string[]> {\n                return languagesExt.getLanguages();\n            },\n            setTextDocumentLanguage(document: theia.TextDocument, languageId: string): PromiseLike<theia.TextDocument> {\n                return languagesExt.changeLanguage(document.uri, languageId);\n            },\n            match(selector: theia.DocumentSelector, document: theia.TextDocument): number {\n                return score(fromDocumentSelector(selector), document.uri.scheme, document.uri.path, document.languageId, true);\n            },\n            get onDidChangeDiagnostics(): theia.Event<theia.DiagnosticChangeEvent> {\n                return languagesExt.onDidChangeDiagnostics;\n            },\n            getDiagnostics(resource?: URI) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                return <any>languagesExt.getDiagnostics(resource);\n            },\n            createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n                return languagesExt.createDiagnosticCollection(name);\n            },\n            setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n                return languagesExt.setLanguageConfiguration(language, configuration);\n            },\n            registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, ...triggerCharacters: string[]): theia.Disposable {\n                return languagesExt.registerCompletionItemProvider(selector, provider, triggerCharacters, pluginToPluginInfo(plugin));\n            },\n            registerInlineCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.InlineCompletionItemProvider): theia.Disposable {\n                return languagesExt.registerInlineCompletionsProvider(selector, provider);\n            },\n            registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider): theia.Disposable {\n                return languagesExt.registerDefinitionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDeclarationProvider(selector: theia.DocumentSelector, provider: theia.DeclarationProvider): theia.Disposable {\n                return languagesExt.registerDeclarationProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerSignatureHelpProvider(\n                selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, first?: string | theia.SignatureHelpProviderMetadata, ...remaining: string[]\n            ): theia.Disposable {\n                let metadata: theia.SignatureHelpProviderMetadata;\n                if (typeof first === 'object') {\n                    metadata = first;\n                } else {\n                    const triggerCharacters: string[] = [];\n                    metadata = { triggerCharacters, retriggerCharacters: [] };\n                    if (first) {\n                        triggerCharacters.push(first, ...remaining);\n                    }\n                }\n                return languagesExt.registerSignatureHelpProvider(selector, provider, metadata, pluginToPluginInfo(plugin));\n            },\n            registerTypeDefinitionProvider(selector: theia.DocumentSelector, provider: theia.TypeDefinitionProvider): theia.Disposable {\n                return languagesExt.registerTypeDefinitionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerImplementationProvider(selector: theia.DocumentSelector, provider: theia.ImplementationProvider): theia.Disposable {\n                return languagesExt.registerImplementationProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider): theia.Disposable {\n                return languagesExt.registerHoverProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerEvaluatableExpressionProvider(selector: theia.DocumentSelector, provider: theia.EvaluatableExpressionProvider): theia.Disposable {\n                return languagesExt.registerEvaluatableExpressionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerInlineValuesProvider(selector: theia.DocumentSelector, provider: theia.InlineValuesProvider): theia.Disposable {\n                return languagesExt.registerInlineValuesProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentHighlightProvider(selector: theia.DocumentSelector, provider: theia.DocumentHighlightProvider): theia.Disposable {\n                return languagesExt.registerDocumentHighlightProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerWorkspaceSymbolProvider(provider: theia.WorkspaceSymbolProvider): theia.Disposable {\n                return languagesExt.registerWorkspaceSymbolProvider(provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentFormattingEditProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentRangeFormattingEditProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerOnTypeFormattingEditProvider(\n                selector: theia.DocumentSelector,\n                provider: theia.OnTypeFormattingEditProvider,\n                firstTriggerCharacter: string,\n                ...moreTriggerCharacters: string[]\n            ): theia.Disposable {\n                return languagesExt.registerOnTypeFormattingEditProvider(selector, provider, [firstTriggerCharacter].concat(moreTriggerCharacters), pluginToPluginInfo(plugin));\n            },\n            registerDocumentDropEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentDropEditProvider, metadata?: theia.DocumentDropEditProviderMetadata) {\n                return languagesExt.registerDocumentDropEditProvider(selector, provider, metadata);\n            },\n            registerDocumentLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider): theia.Disposable {\n                return languagesExt.registerDocumentLinkProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerCodeActionsProvider(selector: theia.DocumentSelector, provider: theia.CodeActionProvider, metadata?: theia.CodeActionProviderMetadata): theia.Disposable {\n                return languagesExt.registerCodeActionsProvider(selector, provider, plugin.model, pluginToPluginInfo(plugin), metadata);\n            },\n            registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider): theia.Disposable {\n                return languagesExt.registerCodeLensProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider): theia.Disposable {\n                return languagesExt.registerReferenceProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider,\n                metadata?: theia.DocumentSymbolProviderMetadata): theia.Disposable {\n                return languagesExt.registerDocumentSymbolProvider(selector, provider, pluginToPluginInfo(plugin), metadata);\n            },\n            registerColorProvider(selector: theia.DocumentSelector, provider: theia.DocumentColorProvider): theia.Disposable {\n                return languagesExt.registerColorProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerInlayHintsProvider(selector: theia.DocumentSelector, provider: theia.InlayHintsProvider): theia.Disposable {\n                return languagesExt.registerInlayHintsProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerFoldingRangeProvider(selector: theia.DocumentSelector, provider: theia.FoldingRangeProvider): theia.Disposable {\n                return languagesExt.registerFoldingRangeProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerSelectionRangeProvider(selector: theia.DocumentSelector, provider: theia.SelectionRangeProvider): theia.Disposable {\n                return languagesExt.registerSelectionRangeProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerRenameProvider(selector: theia.DocumentSelector, provider: theia.RenameProvider): theia.Disposable {\n                return languagesExt.registerRenameProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentSemanticTokensProvider, legend: theia.SemanticTokensLegend):\n                theia.Disposable {\n                return languagesExt.registerDocumentSemanticTokensProvider(selector, provider, legend, pluginToPluginInfo(plugin));\n            },\n            registerDocumentRangeSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeSemanticTokensProvider, legend: theia.SemanticTokensLegend):\n                theia.Disposable {\n                return languagesExt.registerDocumentRangeSemanticTokensProvider(selector, provider, legend, pluginToPluginInfo(plugin));\n            },\n            registerCallHierarchyProvider(selector: theia.DocumentSelector, provider: theia.CallHierarchyProvider): theia.Disposable {\n                return languagesExt.registerCallHierarchyProvider(selector, provider);\n            },\n            registerTypeHierarchyProvider(selector: theia.DocumentSelector, provider: theia.TypeHierarchyProvider): theia.Disposable {\n                return languagesExt.registerTypeHierarchyProvider(selector, provider);\n            },\n            registerLinkedEditingRangeProvider(selector: theia.DocumentSelector, provider: theia.LinkedEditingRangeProvider): theia.Disposable {\n                return languagesExt.registerLinkedEditingRangeProvider(selector, provider);\n            },\n            createLanguageStatusItem(id: string, selector: theia.DocumentSelector): theia.LanguageStatusItem {\n                return languagesExt.createLanguageStatusItem(plugin, id, selector);\n            },\n            registerDocumentPasteEditProvider(\n                selector: theia.DocumentSelector, provider: theia.DocumentPasteEditProvider, metadata: theia.DocumentPasteProviderMetadata\n            ): theia.Disposable {\n                return languagesExt.registerDocumentPasteEditProvider(plugin, selector, provider, metadata);\n            }\n        };\n\n        // Tests API (@stubbed)\n        // The following implementation is temporarily `@stubbed` and marked as such under `theia.d.ts`\n        const tests: typeof theia.tests = {\n            createTestController(\n                provider,\n                controllerLabel: string,\n                refreshHandler?: (\n                    token: theia.CancellationToken\n                ) => Thenable<void> | void\n            ) {\n                return {\n                    id: provider,\n                    label: controllerLabel,\n                    items: testItemCollection,\n                    refreshHandler,\n                    createRunProfile,\n                    createTestRun,\n                    createTestItem,\n                    dispose: () => undefined,\n                };\n            },\n        };\n        /* End of Tests API */\n\n        const plugins: typeof theia.plugins = {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            get all(): theia.Plugin<any>[] {\n                return pluginManager.getAllPlugins().map(plg => new PluginExt(pluginManager, plg));\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            getPlugin(pluginId: string): theia.Plugin<any> | undefined {\n                const plg = pluginManager.getPluginById(pluginId.toLowerCase());\n                if (plg) {\n                    return new PluginExt(pluginManager, plg);\n                }\n                return undefined;\n            },\n            get onDidChange(): theia.Event<void> {\n                return pluginManager.onDidChange;\n            }\n        };\n\n        const debuggersContributions = plugin.rawModel.contributes && plugin.rawModel.contributes.debuggers || [];\n        debugExt.assistedInject(connectionExt, commandRegistry);\n        debugExt.registerDebuggersContributions(plugin.pluginFolder, plugin.model.entryPoint.frontend ? 'frontend' : 'backend', debuggersContributions);\n        const debug: typeof theia.debug = {\n            get activeDebugSession(): theia.DebugSession | undefined {\n                return debugExt.activeDebugSession;\n            },\n            get activeDebugConsole(): theia.DebugConsole {\n                return debugExt.activeDebugConsole;\n            },\n            get breakpoints(): theia.Breakpoint[] {\n                return debugExt.breakpoints;\n            },\n            get onDidChangeActiveDebugSession(): theia.Event<theia.DebugSession | undefined> {\n                return debugExt.onDidChangeActiveDebugSession;\n            },\n            get onDidStartDebugSession(): theia.Event<theia.DebugSession> {\n                return debugExt.onDidStartDebugSession;\n            },\n            get onDidReceiveDebugSessionCustomEvent(): theia.Event<theia.DebugSessionCustomEvent> {\n                return debugExt.onDidReceiveDebugSessionCustomEvent;\n            },\n            get onDidTerminateDebugSession(): theia.Event<theia.DebugSession> {\n                return debugExt.onDidTerminateDebugSession;\n            },\n            get onDidChangeBreakpoints(): theia.Event<theia.BreakpointsChangeEvent> {\n                return debugExt.onDidChangeBreakpoints;\n            },\n            registerDebugAdapterDescriptorFactory(debugType: string, factory: theia.DebugAdapterDescriptorFactory): Disposable {\n                return debugExt.registerDebugAdapterDescriptorFactory(debugType, factory);\n            },\n            registerDebugConfigurationProvider(\n                debugType: string,\n                provider: theia.DebugConfigurationProvider,\n                triggerKind?: theia.DebugConfigurationProviderTriggerKind\n            ): Disposable {\n                return debugExt.registerDebugConfigurationProvider(debugType, provider, triggerKind || DebugConfigurationProviderTriggerKind.Initial);\n            },\n            registerDebugAdapterTrackerFactory(debugType: string, factory: theia.DebugAdapterTrackerFactory): Disposable {\n                return debugExt.registerDebugAdapterTrackerFactory(debugType, factory);\n            },\n            startDebugging(\n                folder: theia.WorkspaceFolder | undefined,\n                nameOrConfiguration: string | theia.DebugConfiguration,\n                parentSessionOrOptions?: theia.DebugSession | theia.DebugSessionOptions\n            ): Thenable<boolean> {\n                if (!parentSessionOrOptions || (typeof parentSessionOrOptions === 'object' && 'configuration' in parentSessionOrOptions)) {\n                    return debugExt.startDebugging(folder, nameOrConfiguration, { parentSession: parentSessionOrOptions });\n                }\n                return debugExt.startDebugging(folder, nameOrConfiguration, parentSessionOrOptions || {});\n            },\n            stopDebugging(session?: theia.DebugSession): Thenable<void> {\n                return debugExt.stopDebugging(session);\n            },\n            addBreakpoints(breakpoints: readonly theia.Breakpoint[]): void {\n                debugExt.addBreakpoints(breakpoints);\n            },\n            removeBreakpoints(breakpoints: readonly theia.Breakpoint[]): void {\n                debugExt.removeBreakpoints(breakpoints);\n            },\n            asDebugSourceUri(source: theia.DebugProtocolSource, session?: theia.DebugSession): theia.Uri {\n                return debugExt.asDebugSourceUri(source, session);\n            }\n        };\n\n        const tasks: typeof theia.tasks = {\n            registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n                return tasksExt.registerTaskProvider(type, provider);\n            },\n\n            fetchTasks(filter?: theia.TaskFilter): Thenable<theia.Task[]> {\n                return tasksExt.fetchTasks(filter);\n            },\n\n            executeTask(task: theia.Task): Thenable<theia.TaskExecution> {\n                return tasksExt.executeTask(task);\n            },\n\n            get taskExecutions(): ReadonlyArray<theia.TaskExecution> {\n                return tasksExt.taskExecutions;\n            },\n            onDidStartTask(listener, thisArg?, disposables?) {\n                return tasksExt.onDidStartTask(listener, thisArg, disposables);\n            },\n            onDidEndTask(listener, thisArg?, disposables?) {\n                return tasksExt.onDidEndTask(listener, thisArg, disposables);\n            },\n            onDidStartTaskProcess(listener, thisArg?, disposables?) {\n                return tasksExt.onDidStartTaskProcess(listener, thisArg, disposables);\n            },\n            onDidEndTaskProcess(listener, thisArg?, disposables?) {\n                return tasksExt.onDidEndTaskProcess(listener, thisArg, disposables);\n            }\n        };\n\n        const scm: typeof theia.scm = {\n            get inputBox(): theia.SourceControlInputBox {\n                const inputBox = scmExt.getLastInputBox(plugin);\n                if (inputBox) {\n                    return inputBox;\n                } else {\n                    throw new Error('Input box not found!');\n                }\n            },\n            createSourceControl(id: string, label: string, rootUri?: URI): theia.SourceControl {\n                return scmExt.createSourceControl(plugin, id, label, rootUri);\n            }\n        };\n\n        const comments: typeof theia.comments = {\n            createCommentController(id: string, label: string): theia.CommentController {\n                return commentsExt.createCommentController(plugin, id, label);\n            }\n        };\n\n        const l10n: typeof theia.l10n = {\n            // eslint-disable-next-line max-len\n            t(...params: [message: string, ...args: Array<string | number | boolean>] | [message: string, args: Record<string, any>] | [{ message: string; args?: Array<string | number | boolean> | Record<string, any>; comment: string | string[] }]): string {\n                if (typeof params[0] === 'string') {\n                    const key = params.shift() as string;\n\n                    // We have either rest args which are Array<string | number | boolean> or an array with a single Record<string, any>.\n                    // This ensures we get a Record<string | number, any> which will be formatted correctly.\n                    const argsFormatted = !params || typeof params[0] !== 'object' ? params : params[0];\n                    return localizationExt.translateMessage(plugin.model.id, { message: key, args: argsFormatted as Record<string | number, any> | undefined });\n                }\n                return localizationExt.translateMessage(plugin.model.id, params[0]);\n            },\n            get bundle() {\n                return localizationExt.getBundle(plugin.model.id);\n            },\n            get uri() {\n                return localizationExt.getBundleUri(plugin.model.id);\n            }\n        };\n\n        // notebooks API (@stubbed)\n        // The following implementation is temporarily `@stubbed` and marked as such under `theia.d.ts`\n        const notebooks: typeof theia.notebooks = {\n            createNotebookController(\n                id,\n                notebookType,\n                label,\n                handler?: (cells: theia.NotebookCell[],\n                    notebook: theia.NotebookDocument,\n                    controller: theia.NotebookController) => void | Thenable<void>,\n                rendererScripts?: NotebookRendererScript[]\n            ) {\n                return notebookKernels.createNotebookController(plugin.model.id, id, notebookType, label, handler, rendererScripts);\n            },\n            createRendererMessaging(rendererId) {\n                return notebookRenderers.createRendererMessaging(rendererId);\n            },\n            registerNotebookCellStatusBarItemProvider(\n                notebookType,\n                provider\n            ) {\n                return notebooksExt.registerNotebookCellStatusBarItemProvider(notebookType, provider);\n            },\n            onDidChangeNotebookCellExecutionState: notebookKernels.onDidChangeNotebookCellExecutionState,\n\n            createNotebookControllerDetectionTask(notebookType: string) {\n                return notebookKernels.createNotebookControllerDetectionTask(notebookType);\n            },\n            registerKernelSourceActionProvider(notebookType: string, provider: theia.NotebookKernelSourceActionProvider) {\n                return notebookKernels.registerKernelSourceActionProvider(notebookType, provider);\n            }\n        };\n\n        return <typeof theia>{\n            version: require('../../package.json').version,\n            authentication,\n            commands,\n            comments,\n            window,\n            workspace,\n            env,\n            extensions,\n            languages,\n            plugins,\n            debug,\n            tasks,\n            scm,\n            notebooks,\n            l10n,\n            tests,\n            // Types\n            StatusBarAlignment: StatusBarAlignment,\n            Disposable: Disposable,\n            EventEmitter: Emitter,\n            CancellationTokenSource: CancellationTokenSource,\n            MarkdownString,\n            Position: Position,\n            Range: Range,\n            Selection: Selection,\n            ViewColumn: ViewColumn,\n            TextEditorSelectionChangeKind: TextEditorSelectionChangeKind,\n            Uri: URI,\n            EndOfLine,\n            TextEditorRevealType,\n            TextEditorCursorStyle,\n            TextEditorLineNumbersStyle,\n            ThemeColor,\n            ThemeIcon,\n            SnippetString,\n            DecorationRangeBehavior,\n            OverviewRulerLane,\n            ConfigurationTarget,\n            RelativePattern,\n            IndentAction,\n            CompletionItem,\n            CompletionItemKind,\n            CompletionList,\n            DebugConsoleMode,\n            DiagnosticSeverity,\n            DiagnosticRelatedInformation,\n            LanguageStatusSeverity,\n            Location,\n            LogLevel,\n            DiagnosticTag,\n            CompletionItemTag,\n            Diagnostic,\n            CompletionTriggerKind,\n            TextEdit,\n            SnippetTextEdit,\n            ProgressLocation,\n            ProgressOptions,\n            Progress,\n            ParameterInformation,\n            QuickPickItemKind,\n            SignatureInformation,\n            SignatureHelp,\n            SignatureHelpTriggerKind,\n            Hover,\n            EvaluatableExpression,\n            InlineValueEvaluatableExpression,\n            InlineValueText,\n            InlineValueVariableLookup,\n            InlineValueContext,\n            DocumentHighlightKind,\n            DocumentHighlight,\n            DocumentLink,\n            DocumentDropEdit,\n            CodeLens,\n            CodeActionKind,\n            CodeActionTrigger,\n            CodeActionTriggerKind,\n            TextDocumentSaveReason,\n            CodeAction,\n            DataTransferItem,\n            DataTransfer,\n            TreeItem,\n            TreeItemCollapsibleState,\n            TreeItemCheckboxState,\n            SymbolKind,\n            SymbolTag,\n            DocumentSymbol,\n            WorkspaceEdit,\n            SymbolInformation,\n            FileType,\n            FilePermission,\n            FileChangeType,\n            ShellQuoting,\n            ShellExecution,\n            ProcessExecution,\n            CustomExecution,\n            TaskScope,\n            TaskRevealKind,\n            TaskPanelKind,\n            TaskGroup,\n            Task,\n            Task2,\n            DebugAdapterExecutable,\n            DebugAdapterServer,\n            DebugAdapterNamedPipeServer,\n            DebugAdapterInlineImplementation,\n            DebugConfigurationProviderTriggerKind,\n            Breakpoint,\n            SourceBreakpoint,\n            FunctionBreakpoint,\n            Color,\n            ColorInformation,\n            ColorPresentation,\n            FoldingRange,\n            SelectionRange,\n            FoldingRangeKind,\n            OperatingSystem,\n            WebviewPanelTargetArea,\n            UIKind,\n            FileSystemError,\n            CommentThreadState,\n            CommentThreadCollapsibleState,\n            QuickInputButtons,\n            CommentMode,\n            CallHierarchyItem,\n            CallHierarchyIncomingCall,\n            CallHierarchyOutgoingCall,\n            TypeHierarchyItem,\n            TimelineItem,\n            EnvironmentVariableMutatorType,\n            SemanticTokensLegend,\n            SemanticTokensBuilder,\n            SemanticTokens,\n            SemanticTokensEdits,\n            SemanticTokensEdit,\n            TextDocumentChangeReason,\n            ColorThemeKind,\n            SourceControlInputBoxValidationType,\n            FileDecoration,\n            TerminalLink,\n            TerminalProfile,\n            CancellationError,\n            ExtensionMode,\n            LinkedEditingRanges,\n            InputBoxValidationSeverity,\n            InlayHint,\n            InlayHintKind,\n            InlayHintLabelPart,\n            TelemetryTrustedValue,\n            NotebookCellData,\n            NotebookCellExecutionState,\n            NotebookCellKind,\n            NotebookCellOutput,\n            NotebookCellOutputItem,\n            NotebookCellStatusBarAlignment,\n            NotebookCellStatusBarItem,\n            NotebookControllerAffinity,\n            NotebookData,\n            NotebookEditorRevealType,\n            NotebookDocument,\n            NotebookRange,\n            NotebookEdit,\n            NotebookKernelSourceAction,\n            NotebookRendererScript,\n            TestRunProfileKind,\n            TestTag,\n            TestRunRequest,\n            TestMessage,\n            ExtensionKind,\n            InlineCompletionItem,\n            InlineCompletionList,\n            InlineCompletionTriggerKind,\n            TabInputText: TextTabInput,\n            TabInputTextDiff: TextDiffTabInput,\n            TabInputTextMerge: TextMergeTabInput,\n            TabInputCustom: CustomEditorTabInput,\n            TabInputNotebook: NotebookEditorTabInput,\n            TabInputNotebookDiff: NotebookDiffEditorTabInput,\n            TabInputWebview: WebviewEditorTabInput,\n            TabInputTerminal: TerminalEditorTabInput,\n            TerminalLocation,\n            TerminalOutputAnchor,\n            TerminalExitReason,\n            DocumentPasteEdit,\n            ExternalUriOpenerPriority,\n            TerminalQuickFixType,\n            EditSessionIdentityMatch\n        };\n    };\n}\n\n/**\n * Represents a Theia plugin as well as a VSCode extension.\n */\nexport interface ExtensionPlugin<T> extends theia.Plugin<T> {\n    /**\n     * The uri of the directory containing the extension. Same as {@linkcode theia.Plugin.pluginUri}.\n     */\n    readonly extensionUri: theia.Uri;\n\n    /**\n     * The absolute file path of the directory containing this extension.\n     * Same as {@linkcode theia.Plugin.pluginPath}.\n     */\n    readonly extensionPath: string;\n\n    /**\n     * The extension kind describes if an extension runs where the UI runs\n     * or if an extension runs where the remote extension host runs. The extension kind\n     * is defined in the `package.json`-file of extensions. When no remote extension host exists,\n     * the value is {@linkcode ExtensionKind.UI}.\n     */\n    extensionKind: theia.ExtensionKind;\n}\n\nexport class Plugin<T> implements theia.Plugin<T> {\n    #pluginManager: PluginManager;\n\n    id: string;\n    pluginPath: string;\n    pluginUri: theia.Uri;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    packageJSON: any;\n    pluginType: theia.PluginType;\n\n    constructor(pluginManager: PluginManager, plugin: InternalPlugin) {\n        this.#pluginManager = pluginManager;\n\n        this.id = plugin.model.id;\n        this.pluginPath = plugin.pluginFolder;\n        this.packageJSON = plugin.rawModel;\n        this.pluginType = plugin.model.entryPoint.frontend ? 'frontend' : 'backend';\n\n        if (this.pluginType === 'frontend') {\n            const { origin } = new Endpoint();\n            this.pluginUri = URI.parse(origin + '/' + PluginPackage.toPluginUrl(plugin.model, ''));\n        } else {\n            this.pluginUri = URI.parse(plugin.pluginUri);\n        }\n    }\n\n    get isActive(): boolean {\n        return this.#pluginManager.isActive(this.id);\n    }\n\n    get exports(): T {\n        return <T>this.#pluginManager.getPluginExport(this.id);\n    }\n\n    activate(): PromiseLike<T> {\n        return this.#pluginManager.activatePlugin(this.id).then(() => this.exports);\n    }\n}\n\nexport class PluginExt<T> extends Plugin<T> implements ExtensionPlugin<T> {\n    #pluginManager: PluginManager;\n\n    extensionPath: string;\n    extensionUri: theia.Uri;\n    extensionKind: ExtensionKind;\n    isFromDifferentExtensionHost: boolean;\n\n    constructor(pluginManager: PluginManager, plugin: InternalPlugin, isFromDifferentExtensionHost = false) {\n        super(pluginManager, plugin);\n        this.#pluginManager = pluginManager;\n\n        this.extensionPath = this.pluginPath;\n        this.extensionUri = this.pluginUri;\n        this.extensionKind = ExtensionKind.UI; // stub as a local extension (not running on a remote workspace)\n        this.isFromDifferentExtensionHost = isFromDifferentExtensionHost;\n    }\n\n    override get isActive(): boolean {\n        return this.#pluginManager.isActive(this.id);\n    }\n\n    override get exports(): T {\n        return <T>this.#pluginManager.getPluginExport(this.id);\n    }\n\n    override activate(): PromiseLike<T> {\n        return this.#pluginManager.activatePlugin(this.id).then(() => this.exports);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as path from 'path';\nimport { URI } from './types-impl';\nimport { IconUrl, PluginPackage } from '../common/plugin-protocol';\nimport { Plugin } from '../common/plugin-api-rpc';\n\nexport type PluginIconPath = string | URI | {\n    light: string | URI,\n    dark: string | URI\n};\nexport namespace PluginIconPath {\n    export function toUrl(iconPath: PluginIconPath | undefined, plugin: Plugin): IconUrl | undefined {\n        if (!iconPath) {\n            return undefined;\n        }\n        if (typeof iconPath === 'object' && 'light' in iconPath) {\n            return {\n                light: asString(iconPath.light, plugin),\n                dark: asString(iconPath.dark, plugin)\n            };\n        }\n        return asString(iconPath, plugin);\n    }\n    export function asString(arg: string | URI, plugin: Plugin): string {\n        arg = arg instanceof URI && arg.scheme === 'file' ? arg.fsPath : arg;\n        if (typeof arg !== 'string') {\n            return arg.toString(true);\n        }\n        const { packagePath } = plugin.rawModel;\n        const absolutePath = path.isAbsolute(arg) ? arg : path.join(packagePath, arg);\n        const normalizedPath = path.normalize(absolutePath);\n        const relativePath = path.relative(packagePath, normalizedPath);\n        return PluginPackage.toPluginUrl(plugin.rawModel, relativePath);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    NotificationMain,\n    MainMessageType,\n    MessageRegistryMain,\n    PluginManagerExt,\n    PluginManager,\n    Plugin,\n    PluginAPI,\n    ConfigStorage,\n    PluginManagerInitializeParams,\n    PluginManagerStartParams,\n    TerminalServiceExt,\n    LocalizationExt\n} from '../common/plugin-api-rpc';\nimport { PluginMetadata, PluginJsonValidationContribution } from '../common/plugin-protocol';\nimport * as theia from '@theia/plugin';\nimport * as types from './types-impl';\nimport { join } from './path';\nimport { EnvExtImpl } from './env';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { Memento, KeyValueStorageProxy, GlobalState } from './plugin-storage';\nimport { ExtPluginApi } from '../common/plugin-ext-api-contribution';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { WebviewsExtImpl } from './webviews';\nimport { URI as Uri } from './types-impl';\nimport { SecretsExtImpl, SecretStorageExt } from '../plugin/secrets-ext';\nimport { PluginExt } from './plugin-context';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport interface PluginHost {\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    loadPlugin(plugin: Plugin): any;\n\n    init(data: PluginMetadata[]): Promise<[Plugin[], Plugin[]]> | [Plugin[], Plugin[]];\n\n    initExtApi(extApi: ExtPluginApi[]): void;\n\n    loadTests?(): Promise<void>;\n}\n\ninterface StopFn {\n    (): void | Promise<void>;\n}\n\ninterface StopOptions {\n    /**\n     * if terminating then stopping will ignore all errors,\n     * since the main side is already gone and any requests are likely to fail\n     * or hang\n     */\n    terminating: boolean\n}\n\nclass ActivatedPlugin {\n    constructor(public readonly pluginContext: theia.PluginContext,\n        public readonly exports?: PluginAPI,\n        public readonly stopFn?: StopFn) {\n    }\n}\n\nexport class PluginManagerExtImpl implements PluginManagerExt, PluginManager {\n\n    static SUPPORTED_ACTIVATION_EVENTS = new Set([\n        '*',\n        'onLanguage',\n        'onCommand',\n        'onDebug',\n        'onDebugInitialConfigurations',\n        'onDebugResolve',\n        'onDebugAdapterProtocolTracker',\n        'onDebugDynamicConfigurations',\n        'onTaskType',\n        'workspaceContains',\n        'onView',\n        'onUri',\n        'onTerminalProfile',\n        'onWebviewPanel',\n        'onFileSystem',\n        'onCustomEditor',\n        'onStartupFinished',\n        'onAuthenticationRequest',\n        'onNotebook',\n        'onNotebookSerializer'\n    ]);\n\n    private configStorage: ConfigStorage | undefined;\n    private readonly registry = new Map<string, Plugin>();\n    private readonly activations = new Map<string, (() => Promise<void>)[] | undefined>();\n    /** promises to whether loading each plugin has been successful */\n    private readonly loadedPlugins = new Map<string, Promise<boolean>>();\n    private readonly activatedPlugins = new Map<string, ActivatedPlugin>();\n    private readonly pluginContextsMap = new Map<string, theia.PluginContext>();\n\n    private onDidChangeEmitter = new Emitter<void>();\n    private messageRegistryProxy: MessageRegistryMain;\n    private notificationMain: NotificationMain;\n    protected fireOnDidChange(): void {\n        this.onDidChangeEmitter.fire(undefined);\n    }\n\n    protected jsonValidation: PluginJsonValidationContribution[] = [];\n    protected ready = new Deferred();\n\n    constructor(\n        private readonly host: PluginHost,\n        private readonly envExt: EnvExtImpl,\n        private readonly terminalService: TerminalServiceExt,\n        private readonly storageProxy: KeyValueStorageProxy,\n        private readonly secrets: SecretsExtImpl,\n        private readonly preferencesManager: PreferenceRegistryExtImpl,\n        private readonly webview: WebviewsExtImpl,\n        private readonly localization: LocalizationExt,\n        private readonly rpc: RPCProtocol\n    ) {\n        this.messageRegistryProxy = this.rpc.getProxy(PLUGIN_RPC_CONTEXT.MESSAGE_REGISTRY_MAIN);\n        this.notificationMain = this.rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN);\n    }\n\n    async $stop(pluginId?: string): Promise<void> {\n        if (!pluginId) {\n            return this.stopAll();\n        }\n        this.registry.delete(pluginId);\n        this.pluginContextsMap.delete(pluginId);\n        this.loadedPlugins.delete(pluginId);\n        const plugin = this.activatedPlugins.get(pluginId);\n        if (!plugin) {\n            return;\n        }\n        this.activatedPlugins.delete(pluginId);\n        return this.stopPlugin(pluginId, plugin);\n    }\n\n    async terminate(): Promise<void> {\n        return this.stopAll({ terminating: true });\n    }\n\n    protected async stopAll(options: StopOptions = { terminating: false }): Promise<void> {\n        const promises = [];\n        for (const [id, plugin] of this.activatedPlugins) {\n            promises.push(this.stopPlugin(id, plugin, options));\n        }\n\n        this.registry.clear();\n        this.loadedPlugins.clear();\n        this.activatedPlugins.clear();\n        this.pluginContextsMap.clear();\n        await Promise.all(promises);\n    }\n\n    protected async stopPlugin(id: string, plugin: ActivatedPlugin, options: StopOptions = { terminating: false }): Promise<void> {\n        let result;\n        if (plugin.stopFn) {\n            try {\n                result = plugin.stopFn();\n            } catch (e) {\n                if (!options.terminating) {\n                    console.error(`[${id}]: failed to stop:`, e);\n                }\n            }\n        }\n\n        const pluginContext = plugin.pluginContext;\n        if (pluginContext) {\n            for (const subscription of pluginContext.subscriptions) {\n                try {\n                    subscription.dispose();\n                } catch (e) {\n                    if (!options.terminating) {\n                        console.error(`[${id}]: failed to dispose subscription:`, e);\n                    }\n                }\n            }\n        }\n\n        try {\n            await result;\n        } catch (e) {\n            if (!options.terminating) {\n                console.error(`[${id}]: failed to stop:`, e);\n            }\n        }\n    }\n\n    async $init(params: PluginManagerInitializeParams): Promise<void> {\n        this.storageProxy.init(params.globalState, params.workspaceState);\n\n        this.envExt.setQueryParameters(params.env.queryParams);\n        this.envExt.setLanguage(params.env.language);\n        this.envExt.setShell(params.env.shell);\n        this.envExt.setUIKind(params.env.uiKind);\n        this.envExt.setApplicationName(params.env.appName);\n        this.envExt.setAppHost(params.env.appHost);\n\n        this.preferencesManager.init(params.preferences);\n\n        if (params.extApi) {\n            this.host.initExtApi(params.extApi);\n        }\n\n        this.webview.init(params.webview);\n        this.jsonValidation = params.jsonValidation;\n    }\n\n    async $start(params: PluginManagerStartParams): Promise<void> {\n        this.configStorage = params.configStorage;\n\n        const [plugins, foreignPlugins] = await this.host.init(params.plugins);\n        // add foreign plugins\n        for (const plugin of foreignPlugins) {\n            this.registerPlugin(plugin);\n        }\n        // add own plugins, before initialization\n        for (const plugin of plugins) {\n            this.registerPlugin(plugin);\n        }\n\n        // ensure plugins are registered before running activation events\n        this.ready.resolve();\n        // run eager plugins\n        await this.$activateByEvent('*');\n        for (const activationEvent of params.activationEvents) {\n            await this.$activateByEvent(activationEvent);\n        }\n\n        if (this.host.loadTests) {\n            return this.host.loadTests();\n        }\n\n        this.fireOnDidChange();\n    }\n\n    protected registerPlugin(plugin: Plugin): void {\n        if (plugin.model.id === 'vscode.json-language-features' && this.jsonValidation.length) {\n            // VS Code contributes all built-in validations via vscode.json-language-features;\n            // we enrich them with Theia validations registered on startup.\n            // Dynamic validations can be provided only via VS Code extensions.\n            // Content is fetched by the extension later via vscode.workspace.openTextDocument.\n            const contributes = plugin.rawModel.contributes = (plugin.rawModel.contributes || {});\n            contributes.jsonValidation = (contributes.jsonValidation || []).concat(this.jsonValidation);\n        }\n        this.registry.set(plugin.model.id, plugin);\n        if (plugin.pluginPath && Array.isArray(plugin.rawModel.activationEvents)) {\n            const activation = () => this.$activatePlugin(plugin.model.id);\n            // an internal activation event is a subject to change\n            this.setActivation(`onPlugin:${plugin.model.id}`, activation);\n            const unsupportedActivationEvents = plugin.rawModel.activationEvents.filter(e => !PluginManagerExtImpl.SUPPORTED_ACTIVATION_EVENTS.has(e.split(':')[0]));\n            if (unsupportedActivationEvents.length) {\n                console.warn(`Unsupported activation events: ${unsupportedActivationEvents.join(', ')}, please open an issue: https://github.com/eclipse-theia/theia/issues/new`);\n            }\n            for (let activationEvent of plugin.rawModel.activationEvents) {\n                if (activationEvent === 'onUri') {\n                    activationEvent = `onUri:theia://${plugin.model.id}`;\n                }\n                this.setActivation(activationEvent, activation);\n            }\n        }\n    }\n    protected setActivation(activationEvent: string, activation: () => Promise<void>): void {\n        const activations = this.activations.get(activationEvent) || [];\n        activations.push(activation);\n        this.activations.set(activationEvent, activations);\n    }\n\n    protected async loadPlugin(plugin: Plugin, configStorage: ConfigStorage, visited = new Set<string>()): Promise<boolean> {\n        // in order to break cycles\n        if (visited.has(plugin.model.id)) {\n            return true;\n        }\n        visited.add(plugin.model.id);\n\n        let loading = this.loadedPlugins.get(plugin.model.id);\n        if (!loading) {\n            loading = (async () => {\n                const progressId = await this.notificationMain.$startProgress({\n                    title: `Activating ${plugin.model.displayName || plugin.model.name}`,\n                    location: 'window'\n                });\n                try {\n                    if (plugin.rawModel.extensionDependencies) {\n                        for (const dependencyId of plugin.rawModel.extensionDependencies) {\n                            const dependency = this.registry.get(dependencyId.toLowerCase());\n                            if (dependency) {\n                                const loadedSuccessfully = await this.loadPlugin(dependency, configStorage, visited);\n                                if (!loadedSuccessfully) {\n                                    throw new Error(`Dependent extension '${dependency.model.displayName || dependency.model.id}' failed to activate.`);\n                                }\n                            } else {\n                                throw new Error(`Dependent extension '${dependencyId}' is not installed.`);\n                            }\n                        }\n                    }\n\n                    let pluginMain = this.host.loadPlugin(plugin);\n                    // see https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostExtensionService.ts#L372-L376\n                    pluginMain = pluginMain || {};\n                    await this.startPlugin(plugin, configStorage, pluginMain);\n                    return true;\n                } catch (err) {\n                    const message = `Activating extension '${plugin.model.displayName || plugin.model.name}' failed:`;\n                    this.messageRegistryProxy.$showMessage(MainMessageType.Error, message + ' ' + err.message, {}, []);\n                    console.error(message, err);\n                    return false;\n                } finally {\n                    this.notificationMain.$stopProgress(progressId);\n                }\n            })();\n        }\n        this.loadedPlugins.set(plugin.model.id, loading);\n        return loading;\n    }\n\n    async $updateStoragePath(path: string | undefined): Promise<void> {\n        if (this.configStorage) {\n            this.configStorage.hostStoragePath = path;\n        }\n        this.pluginContextsMap.forEach((pluginContext: theia.PluginContext, pluginId: string) => {\n            pluginContext.storagePath = path ? join(path, pluginId) : undefined;\n        });\n    }\n\n    async $activateByEvent(activationEvent: string): Promise<void> {\n        // Prevent the plugin manager from performing activations before plugins are registered\n        await this.ready.promise;\n        if (activationEvent.endsWith(':*')) {\n            const baseEvent = activationEvent.substring(0, activationEvent.length - 2);\n            await this.activateByBaseEvent(baseEvent);\n        } else {\n            await this.activateBySingleEvent(activationEvent);\n        }\n    }\n\n    protected async activateByBaseEvent(baseEvent: string): Promise<void> {\n        await Promise.all(Array.from(this.activations.keys(), activation => activation.startsWith(baseEvent) && this.activateBySingleEvent(activation)));\n    }\n\n    protected async activateBySingleEvent(activationEvent: string): Promise<void> {\n        const activations = this.activations.get(activationEvent);\n        if (!activations) {\n            return;\n        }\n        this.activations.set(activationEvent, undefined);\n        const pendingActivations = [];\n        while (activations.length) {\n            pendingActivations.push(activations.pop()!());\n        }\n        await Promise.all(pendingActivations);\n    }\n\n    async $activatePlugin(id: string): Promise<void> {\n        const plugin = this.registry.get(id);\n        if (plugin && this.configStorage) {\n            await this.loadPlugin(plugin, this.configStorage);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async startPlugin(plugin: Plugin, configStorage: ConfigStorage, pluginMain: any): Promise<void> {\n        const subscriptions: theia.Disposable[] = [];\n        const asAbsolutePath = (relativePath: string): string => join(plugin.pluginFolder, relativePath);\n        const logPath = join(configStorage.hostLogPath, plugin.model.id); // todo check format\n        const storagePath = configStorage.hostStoragePath ? join(configStorage.hostStoragePath, plugin.model.id) : undefined;\n        const secrets = new SecretStorageExt(plugin, this.secrets);\n        const globalStoragePath = join(configStorage.hostGlobalStoragePath, plugin.model.id);\n        const extension = new PluginExt(this, plugin);\n        const extensionModeValue = plugin.isUnderDevelopment ? types.ExtensionMode.Development : types.ExtensionMode.Production;\n        const pluginContext: theia.PluginContext = {\n            extensionPath: extension.extensionPath,\n            extensionUri: extension.extensionUri,\n            globalState: new GlobalState(plugin.model.id, true, this.storageProxy),\n            workspaceState: new Memento(plugin.model.id, false, this.storageProxy),\n            subscriptions: subscriptions,\n            asAbsolutePath: asAbsolutePath,\n            logPath: logPath,\n            storagePath: storagePath,\n            storageUri: storagePath ? Uri.file(storagePath) : undefined,\n            secrets,\n            globalStoragePath: globalStoragePath,\n            globalStorageUri: Uri.file(globalStoragePath),\n            environmentVariableCollection: this.terminalService.getEnvironmentVariableCollection(plugin.model.id),\n            extensionMode: extensionModeValue,\n            extension,\n            logUri: Uri.file(logPath)\n        };\n        this.pluginContextsMap.set(plugin.model.id, pluginContext);\n\n        let stopFn = undefined;\n        if (typeof pluginMain[plugin.lifecycle.stopMethod] === 'function') {\n            stopFn = pluginMain[plugin.lifecycle.stopMethod];\n        }\n        const id = plugin.model.displayName || plugin.model.id;\n        if (typeof pluginMain[plugin.lifecycle.startMethod] === 'function') {\n            await this.localization.initializeLocalizedMessages(plugin, this.envExt.language);\n            const pluginExport = await pluginMain[plugin.lifecycle.startMethod].apply(getGlobal(), [pluginContext]);\n            console.log(`calling activation function on ${id}`);\n            this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginExport, stopFn));\n        } else {\n            // https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostExtensionService.ts#L400-L401\n            console.log(`plugin ${id}, ${plugin.lifecycle.startMethod} method is undefined so the module is the extension's exports`);\n            this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginMain));\n        }\n    }\n\n    getAllPlugins(): Plugin[] {\n        return Array.from(this.registry.values());\n    }\n    getPluginExport(pluginId: string): PluginAPI | undefined {\n        const activePlugin = this.activatedPlugins.get(pluginId);\n        if (activePlugin) {\n            return activePlugin.exports;\n        }\n        return undefined;\n    }\n\n    getPluginById(pluginId: string): Plugin | undefined {\n        return this.registry.get(pluginId);\n    }\n\n    isRunning(pluginId: string): boolean {\n        return this.registry.has(pluginId);\n    }\n\n    isActive(pluginId: string): boolean {\n        return this.activatedPlugins.has(pluginId);\n    }\n\n    activatePlugin(pluginId: string): PromiseLike<void> {\n        return this.$activatePlugin(pluginId);\n    }\n\n    get onDidChange(): theia.Event<void> {\n        return this.onDidChangeEmitter.event;\n    }\n\n}\n\n// for electron\nfunction getGlobal(): Window | NodeJS.Global | null {\n    return typeof self === 'undefined' ? typeof global === 'undefined' ? null : global : self;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { PLUGIN_RPC_CONTEXT, StorageMain, StorageExt } from '../common/plugin-api-rpc';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from '../common/types';\nimport { RPCProtocol } from '../common/rpc-protocol';\n\nexport class Memento implements theia.Memento {\n\n    private cache: KeysToAnyValues;\n\n    constructor(\n        private readonly pluginId: string,\n        private readonly isPluginGlobalData: boolean,\n        private readonly storage: KeyValueStorageProxy\n    ) {\n        this.cache = storage.getPerPluginData(pluginId, isPluginGlobalData);\n\n        if (!this.isPluginGlobalData) {\n            this.storage.storageDataChangedEvent((data: KeysToKeysToAnyValue) => {\n                this.cache = data[this.pluginId] ? data[this.pluginId] : {};\n            });\n        }\n    }\n\n    keys(): string[] {\n        return Object.entries(this.cache).filter(([, value]) => value !== undefined).map(([key]) => key);\n    }\n\n    get<T>(key: string): T | undefined;\n    get<T>(key: string, defaultValue: T): T;\n    get<T>(key: string, defaultValue?: T): T | undefined {\n        if (key && this.cache.hasOwnProperty(key)) {\n            return this.cache[key];\n        } else {\n            return defaultValue;\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    update(key: string, value: any): Promise<void> {\n        if (value === undefined) {\n            delete this.cache[key];\n        } else {\n            this.cache[key] = value;\n        }\n        return this.storage.setPerPluginData(this.pluginId, this.cache, this.isPluginGlobalData).then(_ => undefined);\n    }\n}\n\nexport class GlobalState extends Memento {\n\n    /** @todo: API is not yet implemented. */\n    setKeysForSync(keys: readonly string[]): void { }\n}\n\n/**\n * Singleton.\n * Is used to proxy storage requests to main side.\n */\nexport class KeyValueStorageProxy implements StorageExt {\n\n    private storageDataChangedEmitter = new Emitter<KeysToKeysToAnyValue>();\n    public readonly storageDataChangedEvent: Event<KeysToKeysToAnyValue> = this.storageDataChangedEmitter.event;\n\n    private readonly proxy: StorageMain;\n\n    private globalDataCache: KeysToKeysToAnyValue;\n    private workspaceDataCache: KeysToKeysToAnyValue;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy<StorageMain>(PLUGIN_RPC_CONTEXT.STORAGE_MAIN);\n    }\n\n    init(initGlobalData: KeysToKeysToAnyValue, initWorkspaceData: KeysToKeysToAnyValue): void {\n        this.globalDataCache = initGlobalData;\n        this.workspaceDataCache = initWorkspaceData;\n    }\n\n    getPerPluginData(key: string, isGlobal: boolean): KeysToAnyValues {\n        if (isGlobal) {\n            const existed = this.globalDataCache[key];\n            return existed ? existed : {};\n        } else {\n            const existed = this.workspaceDataCache[key];\n            return existed ? existed : {};\n        }\n    }\n\n    setPerPluginData(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean> {\n        if (isGlobal) {\n            this.globalDataCache[key] = value;\n        } else {\n            this.workspaceDataCache[key] = value;\n        }\n\n        return this.proxy.$set(key, value, isGlobal);\n    }\n\n    $updatePluginsWorkspaceData(workspaceData: KeysToKeysToAnyValue): void {\n        this.workspaceDataCache = workspaceData;\n        this.storageDataChangedEmitter.fire(workspaceData);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { isOSX, isWindows } from '@theia/core/lib/common/os';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { ResourceMap } from '@theia/monaco-editor-core/esm/vs/base/common/map';\nimport { IConfigurationOverrides } from '@theia/monaco-editor-core/esm/vs/platform/configuration/common/configuration';\nimport { Configuration, ConfigurationModel, ConfigurationModelParser } from '@theia/monaco-editor-core/esm/vs/platform/configuration/common/configurationModels';\nimport { Workspace, WorkspaceFolder } from '@theia/monaco-editor-core/esm/vs/platform/workspace/common/workspace';\nimport * as theia from '@theia/plugin';\nimport { v4 } from 'uuid';\nimport {\n    PLUGIN_RPC_CONTEXT, PreferenceChangeExt, PreferenceData, PreferenceRegistryExt,\n    PreferenceRegistryMain\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { isObject, mixin } from '../common/types';\nimport { WorkspaceExtImpl } from './workspace';\nimport cloneDeep = require('lodash.clonedeep');\n\nconst injectionRe = /\\b__proto__\\b|\\bconstructor\\.prototype\\b/;\n\nenum ConfigurationTarget {\n    Global = 1,\n    Workspace = 2, // eslint-disable-line @typescript-eslint/no-shadow\n    WorkspaceFolder = 3 // eslint-disable-line @typescript-eslint/no-shadow\n}\n\nexport enum PreferenceScope {\n    Default,\n    User,\n    Workspace, // eslint-disable-line @typescript-eslint/no-shadow\n    Folder,\n}\n\ninterface ConfigurationInspect<T> {\n    key: string;\n    defaultValue?: T;\n    globalValue?: T;\n    workspaceValue?: T;\n    workspaceFolderValue?: T;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction lookUp(tree: any, key: string): any {\n    if (!key) {\n        return;\n    }\n\n    const parts = key.split('.');\n    let node = tree;\n    for (let i = 0; node && i < parts.length; i++) {\n        node = node[parts[i]];\n    }\n    return node;\n}\n\nexport class TheiaWorkspace extends Workspace {\n    constructor(ext: WorkspaceExtImpl) {\n        const folders = (ext.workspaceFolders ?? []).map(folder => new WorkspaceFolder(folder));\n        super(v4(), folders, false, ext.workspaceFile ?? null, () => isOSX || isWindows);\n    }\n}\n\nexport class PreferenceRegistryExtImpl implements PreferenceRegistryExt {\n    private proxy: PreferenceRegistryMain;\n    private _preferences: Configuration;\n    private readonly _onDidChangeConfiguration = new Emitter<theia.ConfigurationChangeEvent>();\n\n    readonly onDidChangeConfiguration: Event<theia.ConfigurationChangeEvent> = this._onDidChangeConfiguration.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly workspace: WorkspaceExtImpl\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.PREFERENCE_REGISTRY_MAIN);\n    }\n\n    init(data: PreferenceData): void {\n        this.preferencesChanged(data);\n    }\n\n    $acceptConfigurationChanged(data: PreferenceData, eventData: PreferenceChangeExt[]): void {\n        this.preferencesChanged(data, eventData);\n    }\n\n    private preferencesChanged(data: PreferenceData, eventData?: PreferenceChangeExt[]): void {\n        this._preferences = this.parse(data);\n        this._onDidChangeConfiguration.fire(this.toConfigurationChangeEvent(eventData ?? []));\n    }\n\n    getConfiguration(rawSection?: string, rawScope?: theia.ConfigurationScope | null, extensionId?: string): theia.WorkspaceConfiguration {\n        const overrides = this.parseConfigurationAccessOptions(rawScope);\n\n        const preferences = this.toReadonlyValue(\n            this._preferences.getValue(rawSection, overrides, new TheiaWorkspace(this.workspace)));\n\n        const configuration: theia.WorkspaceConfiguration = {\n            has(key: string): boolean {\n                return typeof lookUp(preferences, key) !== 'undefined';\n            },\n            get: <T>(key: string, defaultValue?: T) => {\n                const result = lookUp(preferences, key);\n                if (typeof result === 'undefined') {\n                    return defaultValue;\n                } else {\n                    let clonedConfig: any = undefined;\n                    const cloneOnWriteProxy = (target: any, accessor: string): any => {\n                        let clonedTarget: any = undefined;\n                        const cloneTarget = () => {\n                            clonedConfig = clonedConfig ? clonedConfig : cloneDeep(preferences);\n                            clonedTarget = clonedTarget ? clonedTarget : lookUp(clonedConfig, accessor);\n                        };\n\n                        if (!isObject(target)) {\n                            return target;\n                        }\n                        return new Proxy(target, {\n                            get: (targ: any, prop: string) => {\n                                const config = Object.getOwnPropertyDescriptor(targ, prop);\n                                // This check ensures that https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/get#invariants are satisfied\n                                if (config?.configurable === false && config?.writable === false) {\n                                    return targ[prop];\n                                }\n                                if (typeof prop === 'string' && prop.toLowerCase() === 'tojson') {\n                                    cloneTarget();\n                                    return () => clonedTarget;\n                                }\n                                if (clonedConfig) {\n                                    clonedTarget = clonedTarget ? clonedTarget : lookUp(clonedConfig, accessor);\n                                    return clonedTarget[prop];\n                                }\n                                const res = targ[prop];\n                                if (typeof prop === 'string') {\n                                    return cloneOnWriteProxy(res, `${accessor}.${prop}`);\n                                }\n                                return res;\n                            },\n                            set: (targ: any, prop: string, val: any) => {\n                                cloneTarget();\n                                clonedTarget[prop] = val;\n                                return true;\n                            },\n                            deleteProperty: (targ: any, prop: string) => {\n                                cloneTarget();\n                                delete clonedTarget[prop];\n                                return true;\n                            },\n                            defineProperty: (targ: any, prop: string, descr: any) => {\n                                cloneTarget();\n                                Object.defineProperty(clonedTarget, prop, descr);\n                                return true;\n                            }\n                        });\n                    };\n                    return cloneOnWriteProxy(result, key);\n                }\n            },\n            update: (key: string, value: any, targetScope?: ConfigurationTarget | boolean, withLanguageOverride?: boolean): PromiseLike<void> => {\n                const resourceStr = overrides.resource?.toString();\n                const overrideSegment = overrides.overrideIdentifier ? `[${overrides.overrideIdentifier}].` : '';\n                const preferenceKey = rawSection ? `${rawSection}.${key}` : key;\n                const fullPath = overrideSegment + preferenceKey;\n                if (typeof value !== 'undefined') {\n                    return this.proxy.$updateConfigurationOption(targetScope, fullPath, value, resourceStr, withLanguageOverride);\n                } else {\n                    return this.proxy.$removeConfigurationOption(targetScope, fullPath, resourceStr, withLanguageOverride);\n                }\n            },\n            inspect: <T>(key: string): ConfigurationInspect<T> | undefined => {\n                const path = rawSection ? `${rawSection}.${key}` : key;\n                const result = this._preferences.inspect<T>(path, overrides, new TheiaWorkspace(this.workspace));\n\n                if (!result) {\n                    return undefined;\n                }\n\n                const configInspect: ConfigurationInspect<T> = { key };\n                configInspect.defaultValue = result.default?.value;\n                configInspect.globalValue = result.user?.value;\n                configInspect.workspaceValue = result.workspace?.value;\n                configInspect.workspaceFolderValue = result.workspaceFolder?.value;\n                return configInspect;\n            }\n        };\n\n        if (typeof preferences === 'object') {\n            mixin(configuration, preferences, false);\n        }\n\n        return Object.freeze(configuration);\n    }\n\n    private toReadonlyValue(data: any): any {\n        const readonlyProxy = (target: any): any => isObject(target)\n            ? new Proxy(target, {\n                get: (targ: any, prop: string) => {\n                    const config = Object.getOwnPropertyDescriptor(targ, prop);\n                    // This check ensures that https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/get#invariants are satisfied\n                    if (config?.configurable === false && config?.writable === false) {\n                        return targ[prop];\n                    }\n                    return readonlyProxy(targ[prop]);\n                },\n                set: (targ: any, prop: string, val: any) => {\n                    throw new Error(`TypeError: Cannot assign to read only property '${prop}' of object`);\n                },\n                deleteProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot delete read only property '${prop}' of object`);\n                },\n                defineProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot define property '${prop}' of a readonly object`);\n                },\n                setPrototypeOf: (targ: any) => {\n                    throw new Error('TypeError: Cannot set prototype for a readonly object');\n                },\n                isExtensible: () => false,\n                preventExtensions: () => true\n            })\n            : target;\n        return readonlyProxy(data);\n    }\n\n    private parse(data: PreferenceData): Configuration {\n        const defaultConfiguration = this.getConfigurationModel('Default', data[PreferenceScope.Default]);\n        const userConfiguration = this.getConfigurationModel('User', data[PreferenceScope.User]);\n        const workspaceConfiguration = this.getConfigurationModel('Workspace', data[PreferenceScope.Workspace]);\n        const folderConfigurations = new ResourceMap<ConfigurationModel>();\n        Object.keys(data[PreferenceScope.Folder]).forEach(resource => {\n            folderConfigurations.set(URI.parse(resource), this.getConfigurationModel(`Folder: ${resource}`, data[PreferenceScope.Folder][resource]));\n        });\n        return new Configuration(\n            defaultConfiguration,\n            new ConfigurationModel(), /** policy configuration. */\n            new ConfigurationModel(), /** application configuration. */\n            userConfiguration,\n            new ConfigurationModel(), /** remote configuration. */\n            workspaceConfiguration,\n            folderConfigurations\n        );\n    }\n\n    private getConfigurationModel(label: string, data: { [key: string]: any }): ConfigurationModel {\n        const parser = new ConfigurationModelParser(label);\n        const sanitized = this.sanitize(data);\n        parser.parseRaw(sanitized);\n        return parser.configurationModel;\n    }\n\n    /**\n     * Creates a new object and assigns those keys of raw to it that are not likely to cause prototype pollution.\n     * Also preprocesses override identifiers so that they take the form [identifier]: {...contents}.\n     */\n    private sanitize<T = unknown>(raw: T): T {\n        if (!isObject(raw)) { return raw; }\n        const asObject = raw as Record<string, unknown>;\n        const sanitized = Object.create(null);\n        for (const key of Object.keys(asObject)) {\n            if (!injectionRe.test(key)) {\n                const override = this.OVERRIDE_KEY_TEST.exec(key);\n                if (override) {\n                    const overrideKey = `[${override[1]}]`;\n                    const remainder = key.slice(override[0].length);\n                    if (!isObject(sanitized[overrideKey])) {\n                        sanitized[overrideKey] = Object.create(null);\n                    }\n                    sanitized[overrideKey][remainder] = this.sanitize(asObject[key]);\n                } else {\n                    sanitized[key] = this.sanitize(asObject[key]);\n                }\n            }\n        }\n        return sanitized;\n    }\n\n    private readonly OVERRIDE_KEY_TEST = /^\\[([^\\]]+)\\]\\./;\n\n    private toConfigurationChangeEvent(eventData: PreferenceChangeExt[]): theia.ConfigurationChangeEvent {\n        return Object.freeze({\n            affectsConfiguration: (section: string, scope?: theia.ConfigurationScope): boolean => {\n                const { resource, overrideIdentifier } = this.parseConfigurationAccessOptions(scope);\n                const sectionWithLanguage = overrideIdentifier ? `[${overrideIdentifier}].${section}` : section;\n                return eventData.some(change => {\n                    const matchesUri = !resource || !change.scope || (resource.toString() + '/').startsWith(change.scope.endsWith('/') ? change.scope : change.scope + '/');\n                    const sliceIndex = overrideIdentifier ? 0 : (this.OVERRIDE_KEY_TEST.exec(change.preferenceName)?.[0].length ?? 0);\n                    const changedPreferenceName = sliceIndex ? change.preferenceName.slice(sliceIndex) : change.preferenceName;\n                    return matchesUri && (\n                        sectionWithLanguage === changedPreferenceName\n                        || sectionWithLanguage.startsWith(`${changedPreferenceName}.`)\n                        || changedPreferenceName.startsWith(`${sectionWithLanguage}.`));\n                });\n            }\n        });\n    }\n\n    protected parseConfigurationAccessOptions(scope?: theia.ConfigurationScope | null): IConfigurationOverrides {\n        if (!scope) {\n            return {};\n        }\n        let overrideIdentifier: string | undefined = undefined;\n        let resource: theia.Uri | undefined;\n        if ('uri' in scope || 'languageId' in scope) {\n            resource = scope.uri;\n        } else {\n            resource = scope;\n        }\n        if ('languageId' in scope) {\n            overrideIdentifier = scope.languageId;\n        }\n        return { resource, overrideIdentifier };\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// Copied from https://github.com/Microsoft/vscode/blob/master/src/vs/editor/common/viewModel/prefixSumComputer.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * Max unsigned integer that fits on 32 bits.\n */\nconst MAX_UINT_32 = 4294967295; // 2^32 - 1\n\nexport function toUint32(v: number): number {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > MAX_UINT_32) {\n        return MAX_UINT_32;\n    }\n    return v | 0;\n}\n\nexport class PrefixSumIndexOfResult {\n    _prefixSumIndexOfResultBrand: void;\n\n    index: number;\n    remainder: number;\n\n    constructor(index: number, remainder: number) {\n        this.index = index;\n        this.remainder = remainder;\n    }\n}\n\nexport class PrefixSumComputer {\n\n    /**\n     * values[i] is the value at index i\n     */\n    private values: Uint32Array;\n\n    /**\n     * prefixSum[i] = SUM(heights[j]), 0 <= j <= i\n     */\n    private prefixSum: Uint32Array;\n\n    /**\n     * prefixSum[i], 0 <= i <= prefixSumValidIndex can be trusted\n     */\n    private prefixSumValidIndex: Int32Array;\n\n    constructor(values: Uint32Array) {\n        this.values = values;\n        this.prefixSum = new Uint32Array(values.length);\n        this.prefixSumValidIndex = new Int32Array(1);\n        this.prefixSumValidIndex[0] = -1;\n    }\n\n    public getCount(): number {\n        return this.values.length;\n    }\n\n    public insertValues(insertIndex: number, insertValues: Uint32Array): boolean {\n        insertIndex = toUint32(insertIndex);\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n        const insertValuesLen = insertValues.length;\n\n        if (insertValuesLen === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length + insertValuesLen);\n        this.values.set(oldValues.subarray(0, insertIndex), 0);\n        this.values.set(oldValues.subarray(insertIndex), insertIndex + insertValuesLen);\n        this.values.set(insertValues, insertIndex);\n\n        if (insertIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = insertIndex - 1;\n        }\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public changeValue(index: number, value: number): boolean {\n        index = toUint32(index);\n        value = toUint32(value);\n\n        if (this.values[index] === value) {\n            return false;\n        }\n        this.values[index] = value;\n        if (index - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = index - 1;\n        }\n        return true;\n    }\n\n    public removeValues(startIndex: number, count: number): boolean {\n        startIndex = toUint32(startIndex);\n        count = toUint32(count);\n\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n\n        if (startIndex >= oldValues.length) {\n            return false;\n        }\n\n        const maxCount = oldValues.length - startIndex;\n        if (count >= maxCount) {\n            count = maxCount;\n        }\n\n        if (count === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length - count);\n        this.values.set(oldValues.subarray(0, startIndex), 0);\n        this.values.set(oldValues.subarray(startIndex + count), startIndex);\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (startIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = startIndex - 1;\n        }\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public getTotalValue(): number {\n        if (this.values.length === 0) {\n            return 0;\n        }\n        return this._getAccumulatedValue(this.values.length - 1);\n    }\n\n    public getAccumulatedValue(index: number): number {\n        if (index < 0) {\n            return 0;\n        }\n\n        index = toUint32(index);\n        return this._getAccumulatedValue(index);\n    }\n\n    private _getAccumulatedValue(index: number): number {\n        if (index <= this.prefixSumValidIndex[0]) {\n            return this.prefixSum[index];\n        }\n\n        let startIndex = this.prefixSumValidIndex[0] + 1;\n        if (startIndex === 0) {\n            this.prefixSum[0] = this.values[0];\n            startIndex++;\n        }\n\n        if (index >= this.values.length) {\n            index = this.values.length - 1;\n        }\n\n        for (let i = startIndex; i <= index; i++) {\n            this.prefixSum[i] = this.prefixSum[i - 1] + this.values[i];\n        }\n        this.prefixSumValidIndex[0] = Math.max(this.prefixSumValidIndex[0], index);\n        return this.prefixSum[index];\n    }\n\n    public getIndexOf(accumulatedValue: number): PrefixSumIndexOfResult {\n        accumulatedValue = Math.floor(accumulatedValue);\n\n        // Compute all sums (to get a fully valid prefixSum)\n        this.getTotalValue();\n\n        let low = 0;\n        let high = this.values.length - 1;\n        let mid: number;\n        let midStop: number;\n        let midStart: number;\n\n        while (low <= high) {\n            mid = low + ((high - low) / 2) | 0;\n\n            midStop = this.prefixSum[mid];\n            midStart = midStop - this.values[mid];\n\n            if (accumulatedValue < midStart) {\n                high = mid - 1;\n            } else if (accumulatedValue >= midStop) {\n                low = mid + 1;\n            } else {\n                break;\n            }\n        }\n\n        return new PrefixSumIndexOfResult(mid!, accumulatedValue - midStart!);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport {\n    QuickOpenExt, PLUGIN_RPC_CONTEXT as Ext, QuickOpenMain, TransferInputBox, Plugin,\n    Item, TransferQuickInputButton, TransferQuickPickItems, TransferQuickInput\n} from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { InputBoxValidationSeverity, QuickInputButtons, QuickPickItemKind, ThemeIcon } from './types-impl';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as path from 'path';\nimport { convertToTransferQuickPickItems } from './type-converters';\nimport { PluginPackage } from '../common/plugin-protocol';\nimport { QuickInputButtonHandle } from '@theia/core/lib/browser';\nimport { MaybePromise } from '@theia/core/lib/common/types';\nimport Severity from '@theia/monaco-editor-core/esm/vs/base/common/severity';\nimport { ThemeIcon as MonacoThemeIcon } from '@theia/monaco-editor-core/esm/vs/platform/theme/common/themeService';\n\nconst canceledName = 'Canceled';\n/**\n * Checks if the given error is a promise in canceled state\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isPromiseCanceledError(error: any): boolean {\n    return error instanceof Error && error.name === canceledName && error.message === canceledName;\n}\n\nexport function getIconUris(iconPath: theia.QuickInputButton['iconPath']): { dark: URI, light: URI } | { id: string } {\n    if (ThemeIcon.is(iconPath)) {\n        return { id: iconPath.id };\n    }\n    const dark = getDarkIconUri(iconPath as URI | { light: URI; dark: URI; });\n    const light = getLightIconUri(iconPath as URI | { light: URI; dark: URI; });\n    // Tolerate strings: https://github.com/microsoft/vscode/issues/110432#issuecomment-726144556\n    return {\n        dark: typeof dark === 'string' ? URI.file(dark) : dark,\n        light: typeof light === 'string' ? URI.file(light) : light\n    };\n}\n\nexport function getLightIconUri(iconPath: URI | { light: URI; dark: URI; }): URI {\n    return typeof iconPath === 'object' && 'light' in iconPath ? iconPath.light : iconPath;\n}\n\nexport function getDarkIconUri(iconPath: URI | { light: URI; dark: URI; }): URI {\n    return typeof iconPath === 'object' && 'dark' in iconPath ? iconPath.dark : iconPath;\n}\n\nexport function getIconPathOrClass(button: theia.QuickInputButton): { iconPath: { dark: URI; light?: URI | undefined; } | undefined; iconClass: string | undefined; } {\n    const iconPathOrIconClass = getIconUris(button.iconPath);\n    let iconPath: { dark: URI; light?: URI | undefined } | undefined;\n    let iconClass: string | undefined;\n    if ('id' in iconPathOrIconClass) {\n        iconClass = MonacoThemeIcon.asClassName(iconPathOrIconClass);\n    } else {\n        iconPath = iconPathOrIconClass;\n    }\n\n    return {\n        iconPath,\n        iconClass\n    };\n}\n\nexport class QuickOpenExtImpl implements QuickOpenExt {\n    private proxy: QuickOpenMain;\n    private onDidSelectItem: undefined | ((handle: number) => void);\n    private validateInputHandler?: (input: string) => MaybePromise<string | theia.InputBoxValidationMessage | null | undefined>;\n    private _sessions = new Map<number, QuickInputExt>(); // Each quickinput will have a number so that we know where to fire events\n    private _instances = 0;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.QUICK_OPEN_MAIN);\n    }\n\n    /* eslint-disable max-len */\n    showQuickPick(itemsOrItemsPromise: Array<theia.QuickPickItem> | Promise<Array<theia.QuickPickItem>>, options: theia.QuickPickOptions & { canPickMany: true; }, token?: theia.CancellationToken): Promise<Array<theia.QuickPickItem> | undefined>;\n    showQuickPick(itemsOrItemsPromise: string[] | Promise<string[]>, options?: theia.QuickPickOptions, token?: theia.CancellationToken): Promise<string | undefined>;\n    showQuickPick(itemsOrItemsPromise: Array<theia.QuickPickItem> | Promise<Array<theia.QuickPickItem>>, options?: theia.QuickPickOptions, token?: theia.CancellationToken): Promise<theia.QuickPickItem | undefined>;\n    showQuickPick(itemsOrItemsPromise: Item[] | Promise<Item[]>, options?: theia.QuickPickOptions, token: theia.CancellationToken = CancellationToken.None): Promise<Item | Item[] | undefined> {\n        this.onDidSelectItem = undefined;\n\n        const itemsPromise = <Promise<Item[]>>Promise.resolve(itemsOrItemsPromise);\n\n        const instance = ++this._instances;\n\n        const widgetPromise = this.proxy.$show(instance, {\n            title: options && options.title,\n            canPickMany: options && options.canPickMany,\n            placeHolder: options && options.placeHolder,\n            matchOnDescription: options && options.matchOnDescription,\n            matchOnDetail: options && options.matchOnDetail,\n            ignoreFocusLost: options && options.ignoreFocusOut\n        }, token);\n\n        const widgetClosedMarker = {};\n        const widgetClosedPromise = widgetPromise.then(() => widgetClosedMarker);\n\n        return Promise.race([widgetClosedPromise, itemsPromise]).then(result => {\n            if (result === widgetClosedMarker) {\n                return undefined;\n            }\n            return itemsPromise.then(async items => {\n                const pickItems: Array<TransferQuickPickItems> = convertToTransferQuickPickItems(items);\n\n                if (options && typeof options.onDidSelectItem === 'function') {\n                    this.onDidSelectItem = handle => {\n                        options.onDidSelectItem!(items[handle]);\n                    };\n                }\n\n                this.proxy.$setItems(instance, pickItems);\n\n                return widgetPromise.then(handle => {\n                    if (typeof handle === 'number') {\n                        if (options && options.canPickMany) {\n                            return Array.of(items[handle]);\n                        } else {\n                            return items[handle];\n                        }\n\n                    } else if (Array.isArray(handle)) {\n                        return handle.map(h => items[h]);\n                    }\n                    return undefined;\n                });\n            });\n        }).then(undefined, err => {\n            if (isPromiseCanceledError(err)) {\n                return undefined;\n            }\n\n            this.proxy.$setError(instance, err);\n\n            return Promise.reject(err);\n        });\n    }\n\n    $onItemSelected(handle: number): void {\n        if (this.onDidSelectItem) {\n            this.onDidSelectItem(handle);\n        }\n    }\n\n    // ---- input\n\n    showInput(options?: theia.InputBoxOptions, token: theia.CancellationToken = CancellationToken.None): PromiseLike<string | undefined> {\n        this.validateInputHandler = options?.validateInput;\n        if (!options) { options = { placeHolder: '' }; }\n        return this.proxy.$input(options, typeof this.validateInputHandler === 'function', token);\n    }\n\n    async showInputBox(options: TransferInputBox): Promise<string | undefined> {\n        this.validateInputHandler = typeof options.validateInput === 'function' ? options.validateInput : undefined;\n        return this.proxy.$showInputBox(options, typeof this.validateInputHandler === 'function');\n    }\n\n    async $validateInput(input: string): Promise<string | { content: string; severity: Severity; } | null | undefined> {\n        if (!this.validateInputHandler) {\n            return;\n        }\n\n        const result = await this.validateInputHandler(input);\n        if (!result || typeof result === 'string') {\n            return result;\n        }\n\n        let severity: Severity;\n        switch (result.severity) {\n            case InputBoxValidationSeverity.Info:\n                severity = Severity.Info;\n                break;\n            case InputBoxValidationSeverity.Warning:\n                severity = Severity.Warning;\n                break;\n            case InputBoxValidationSeverity.Error:\n                severity = Severity.Error;\n                break;\n            default:\n                severity = result.message ? Severity.Error : Severity.Ignore;\n                break;\n        }\n\n        return {\n            content: result.message,\n            severity\n        };\n    }\n\n    // ---- QuickInput\n\n    createQuickPick<T extends theia.QuickPickItem>(plugin: Plugin): theia.QuickPick<T> {\n        const session: any = new QuickPickExt<T>(this, this.proxy, plugin, () => this._sessions.delete(session._id));\n        this._sessions.set(session._id, session);\n        return session;\n    }\n\n    createInputBox(plugin: Plugin): theia.InputBox {\n        const session: any = new InputBoxExt(this, this.proxy, plugin, () => this._sessions.delete(session._id));\n        this._sessions.set(session._id, session);\n        return session;\n    }\n\n    hide(): void {\n        this.proxy.$hide();\n    }\n\n    async $acceptOnDidAccept(sessionId: number): Promise<void> {\n        const session = this._sessions.get(sessionId);\n        if (session) {\n            session._fireAccept();\n        }\n    }\n\n    async $acceptDidChangeValue(sessionId: number, changedValue: string): Promise<void> {\n        const session = this._sessions.get(sessionId);\n        if (session) {\n            session._fireChangedValue(changedValue);\n        }\n    }\n\n    async $acceptOnDidHide(sessionId: number): Promise<void> {\n        const session = this._sessions.get(sessionId);\n        if (session) {\n            session._fireHide();\n        }\n    }\n\n    async $acceptOnDidTriggerButton(sessionId: number, btn: QuickInputButtonHandle): Promise<void> {\n        const session = this._sessions.get(sessionId);\n        if (session) {\n            if (btn.index === -1) {\n                session._fireButtonTrigger(QuickInputButtons.Back);\n            } else if (session && (session instanceof InputBoxExt || session instanceof QuickPickExt)) {\n                const btnFromIndex = session.buttons[btn.index];\n                session._fireButtonTrigger(btnFromIndex as theia.QuickInputButton);\n            }\n        }\n    }\n\n    $onDidChangeActive(sessionId: number, handles: number[]): void {\n        const session = this._sessions.get(sessionId);\n        if (session instanceof QuickPickExt) {\n            session._fireDidChangeActive(handles);\n        }\n    }\n\n    $onDidChangeSelection(sessionId: number, handles: number[]): void {\n        const session = this._sessions.get(sessionId);\n        if (session instanceof QuickPickExt) {\n            session._fireDidChangeSelection(handles);\n        }\n    }\n\n    $onDidTriggerItemButton(sessionId: number, itemHandle: number, buttonHandle: number): void {\n        const session = this._sessions.get(sessionId);\n        if (session instanceof QuickPickExt) {\n            session._fireDidTriggerItemButton(itemHandle, buttonHandle);\n        }\n    }\n\n}\n\nexport class QuickInputExt implements theia.QuickInput {\n\n    private static _nextId = 1;\n    _id = QuickInputExt._nextId++;\n\n    private _busy: boolean;\n    private _enabled: boolean;\n    private _ignoreFocusOut: boolean;\n    private _step: number | undefined;\n    private _title: string | undefined;\n    private _totalSteps: number | undefined;\n    private _value: string;\n    private _placeholder: string | undefined;\n    private _buttons: theia.QuickInputButton[] = [];\n    private _handlesToButtons = new Map<number, theia.QuickInputButton>();\n    protected expectingHide = false;\n    protected visible: boolean;\n    private _disposed = false;\n    protected disposableCollection: DisposableCollection;\n\n    private onDidAcceptEmitter: Emitter<void>;\n    /**\n     * it has to be named `_onDidChangeValueEmitter`, since Gitlens extension relies on it\n     * https://github.com/eamodio/vscode-gitlens/blob/f22a9cd4199ac498c217643282a6a412e1fc01ae/src/commands/gitCommands.ts#L242-L243\n     */\n    private _onDidChangeValueEmitter: Emitter<string>;\n    private onDidHideEmitter: Emitter<void>;\n    private onDidTriggerButtonEmitter: Emitter<theia.QuickInputButton>;\n    private _updateTimeout: any;\n    private _pendingUpdate: TransferQuickInput = { id: this._id };\n\n    constructor(readonly quickOpen: QuickOpenExtImpl, readonly quickOpenMain: QuickOpenMain, readonly plugin: Plugin, private _onDidDispose: () => void) {\n        this.title = undefined;\n        this.step = undefined;\n        this.totalSteps = undefined;\n        this.enabled = true;\n        this.busy = false;\n        this.ignoreFocusOut = false;\n        this.value = '';\n\n        this.visible = false;\n\n        this.disposableCollection = new DisposableCollection();\n        this.disposableCollection.push(this.onDidAcceptEmitter = new Emitter());\n        this.disposableCollection.push(this._onDidChangeValueEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidHideEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidTriggerButtonEmitter = new Emitter());\n    }\n\n    get title(): string | undefined {\n        return this._title;\n    }\n\n    set title(title: string | undefined) {\n        this._title = title;\n        this.update({ title });\n    }\n\n    get step(): number | undefined {\n        return this._step;\n    }\n\n    set step(step: number | undefined) {\n        this._step = step;\n        this.update({ step });\n    }\n\n    get totalSteps(): number | undefined {\n        return this._totalSteps;\n    }\n\n    set totalSteps(totalSteps: number | undefined) {\n        this._totalSteps = totalSteps;\n        this.update({ totalSteps });\n    }\n\n    get enabled(): boolean {\n        return this._enabled;\n    }\n\n    set enabled(enabled: boolean) {\n        this._enabled = enabled;\n        this.update({ enabled });\n    }\n\n    get busy(): boolean {\n        return this._busy;\n    }\n\n    set busy(busy: boolean) {\n        this._busy = busy;\n        this.update({ busy });\n    }\n\n    get ignoreFocusOut(): boolean {\n        return this._ignoreFocusOut;\n    }\n\n    set ignoreFocusOut(ignoreFocusOut: boolean) {\n        this._ignoreFocusOut = ignoreFocusOut;\n        this.update({ ignoreFocusOut });\n    }\n\n    get value(): string {\n        return this._value;\n    }\n\n    set value(value: string) {\n        this._value = value;\n        this.update({ value });\n    }\n\n    get placeholder(): string | undefined {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string | undefined) {\n        this._placeholder = placeholder;\n        this.update({ placeholder });\n    }\n\n    get buttons(): theia.QuickInputButton[] {\n        return this._buttons;\n    }\n\n    set buttons(buttons: theia.QuickInputButton[]) {\n        this._buttons = buttons.slice();\n        this._handlesToButtons.clear();\n        buttons.forEach((button, i) => {\n            const handle = button === QuickInputButtons.Back ? -1 : i;\n            this._handlesToButtons.set(handle, button);\n        });\n        this.update({\n            buttons: buttons.map<TransferQuickInputButton>((button, i) => ({\n                iconPath: getIconUris(button.iconPath),\n                iconClass: ThemeIcon.is(button.iconPath) ? MonacoThemeIcon.asClassName(button.iconPath) : undefined,\n                tooltip: button.tooltip,\n                handle: button === QuickInputButtons.Back ? -1 : i,\n            }))\n        });\n    }\n\n    show(): void {\n        this.visible = true;\n        this.expectingHide = true;\n        this.update({ visible: true });\n    }\n\n    dispose(): void {\n        if (this._disposed) {\n            return;\n        }\n        this._disposed = true;\n        this._fireHide();\n        this.disposableCollection.dispose();\n        this._onDidDispose();\n        this.quickOpenMain.$dispose(this._id);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected update(properties: Record<string, any>): void {\n        if (this._disposed) {\n            return;\n        }\n        for (const key of Object.keys(properties)) {\n            const value = properties[key];\n            this._pendingUpdate[key] = value === undefined ? null : value;\n        }\n\n        if ('visible' in this._pendingUpdate) {\n            if (this._updateTimeout) {\n                clearTimeout(this._updateTimeout);\n                this._updateTimeout = undefined;\n            }\n            this.dispatchUpdate();\n        } else if (this.visible && !this._updateTimeout) {\n            // Defer the update so that multiple changes to setters dont cause a redraw each\n            this._updateTimeout = setTimeout(() => {\n                this._updateTimeout = undefined;\n                this.dispatchUpdate();\n            }, 0);\n        }\n    }\n\n    private dispatchUpdate(): void {\n        this.quickOpenMain.$createOrUpdate(this._pendingUpdate);\n        this._pendingUpdate = { id: this._id };\n    }\n\n    hide(): void {\n        this.quickOpenMain.$hide();\n        this.dispose();\n    }\n\n    protected convertURL(iconPath: URI | { light: string | URI; dark: string | URI } | ThemeIcon):\n        URI | { light: string | URI; dark: string | URI } | ThemeIcon {\n        const toUrl = (arg: string | URI) => {\n            arg = arg instanceof URI && arg.scheme === 'file' ? arg.fsPath : arg;\n            if (typeof arg !== 'string') {\n                return arg.toString(true);\n            }\n            const { packagePath } = this.plugin.rawModel;\n            const absolutePath = path.isAbsolute(arg) ? arg : path.join(packagePath, arg);\n            const normalizedPath = path.normalize(absolutePath);\n            const relativePath = path.relative(packagePath, normalizedPath);\n            return PluginPackage.toPluginUrl(this.plugin.rawModel, relativePath);\n        };\n        if (ThemeIcon.is(iconPath)) {\n            return iconPath;\n        } else if (typeof iconPath === 'string' || iconPath instanceof URI) {\n            return URI.parse(toUrl(iconPath));\n        } else {\n            const { light, dark } = iconPath as { light: string | URI, dark: string | URI };\n            return {\n                light: toUrl(light),\n                dark: toUrl(dark)\n            };\n        }\n    }\n\n    _fireAccept(): void {\n        this.onDidAcceptEmitter.fire(undefined);\n    }\n\n    _fireChangedValue(changedValue: string): void {\n        this._value = changedValue;\n        this._onDidChangeValueEmitter.fire(changedValue);\n    }\n\n    _fireHide(): void {\n        if (this.expectingHide) {\n            this.expectingHide = false;\n            this.onDidHideEmitter.fire(undefined);\n        }\n    }\n\n    _fireButtonTrigger(btn: theia.QuickInputButton): void {\n        this.onDidTriggerButtonEmitter.fire(btn);\n    }\n\n    get onDidHide(): Event<void> {\n        return this.onDidHideEmitter.event;\n    }\n\n    get onDidAccept(): Event<void> {\n        return this.onDidAcceptEmitter.event;\n    }\n\n    get onDidChangeValue(): Event<string> {\n        return this._onDidChangeValueEmitter.event;\n    }\n\n    get onDidTriggerButton(): Event<theia.QuickInputButton> {\n        return this.onDidTriggerButtonEmitter.event;\n    }\n}\n\n/**\n * Base implementation of {@link InputBox} that uses {@link QuickOpenExt}.\n * Missing functionality is going to be implemented in the scope of https://github.com/eclipse-theia/theia/issues/5109\n */\nexport class InputBoxExt extends QuickInputExt implements theia.InputBox {\n\n    private _password: boolean;\n    private _prompt: string | undefined;\n    private _valueSelection: readonly [number, number] | undefined;\n    private _validationMessage: string | undefined;\n\n    constructor(\n        override readonly quickOpen: QuickOpenExtImpl,\n        override readonly quickOpenMain: QuickOpenMain,\n        override readonly plugin: Plugin,\n        onDispose: () => void\n    ) {\n        super(quickOpen, quickOpenMain, plugin, onDispose);\n\n        this.buttons = [];\n        this.password = false;\n        this.value = '';\n    }\n\n    get password(): boolean {\n        return this._password;\n    }\n\n    set password(password: boolean) {\n        this._password = password;\n        this.update({ password });\n    }\n\n    get prompt(): string | undefined {\n        return this._prompt;\n    }\n\n    set prompt(prompt: string | undefined) {\n        this._prompt = prompt;\n        this.update({ prompt });\n    }\n\n    get valueSelection(): readonly [number, number] | undefined {\n        return this._valueSelection;\n    }\n\n    set valueSelection(valueSelection: readonly [number, number] | undefined) {\n        this._valueSelection = valueSelection;\n        this.update({ valueSelection });\n    }\n\n    get validationMessage(): string | undefined {\n        return this._validationMessage;\n    }\n\n    set validationMessage(validationMessage: string | undefined) {\n        if (this._validationMessage !== validationMessage) {\n            this._validationMessage = validationMessage;\n            this.update({ validationMessage });\n        }\n    }\n}\n\n/**\n * Base implementation of {@link QuickPick} that uses {@link QuickOpenExt}.\n * Missing functionality is going to be implemented in the scope of https://github.com/eclipse-theia/theia/issues/5059\n */\nexport class QuickPickExt<T extends theia.QuickPickItem> extends QuickInputExt implements theia.QuickPick<T> {\n    private _items: T[] = [];\n    private _handlesToItems = new Map<number, T>();\n    private _itemsToHandles = new Map<T, number>();\n    private _canSelectMany = false;\n    private _matchOnDescription = true;\n    private _matchOnDetail = true;\n    private _sortByLabel = true;\n    private _keepScrollPosition = false;\n    private _activeItems: T[] = [];\n    private _selectedItems: T[] = [];\n    private readonly _onDidChangeActiveEmitter = new Emitter<T[]>();\n    private readonly _onDidChangeSelectionEmitter = new Emitter<T[]>();\n    private readonly _onDidTriggerItemButtonEmitter = new Emitter<theia.QuickPickItemButtonEvent<T>>();\n\n    constructor(\n        override readonly quickOpen: QuickOpenExtImpl,\n        override readonly quickOpenMain: QuickOpenMain,\n        override readonly plugin: Plugin,\n        onDispose: () => void\n    ) {\n        super(quickOpen, quickOpenMain, plugin, onDispose);\n        this.buttons = [];\n\n        this.disposableCollection.push(this._onDidChangeActiveEmitter);\n        this.disposableCollection.push(this._onDidChangeSelectionEmitter);\n        this.disposableCollection.push(this._onDidTriggerItemButtonEmitter);\n\n        this.update({ type: 'quickPick' });\n    }\n\n    get items(): T[] {\n        return this._items;\n    }\n\n    set items(items: T[]) {\n        this._items = items.slice();\n        this._handlesToItems.clear();\n        this._itemsToHandles.clear();\n        items.forEach((item, i) => {\n            this._handlesToItems.set(i, item);\n            this._itemsToHandles.set(item, i);\n        });\n\n        const pickItems: TransferQuickPickItems[] = [];\n        for (let handle = 0; handle < items.length; handle++) {\n            const item = items[handle];\n            if (item.kind === QuickPickItemKind.Separator) {\n                pickItems.push({ type: 'separator', label: item.label, handle });\n            } else {\n                pickItems.push({\n                    kind: item.kind,\n                    label: item.label,\n                    description: item.description,\n                    handle,\n                    detail: item.detail,\n                    picked: item.picked,\n                    alwaysShow: item.alwaysShow,\n                    buttons: item.buttons?.map<TransferQuickInputButton>((button, index) => ({\n                        iconPath: getIconUris(button.iconPath),\n                        iconClass: ThemeIcon.is(button.iconPath) ? MonacoThemeIcon.asClassName(button.iconPath) : undefined,\n                        tooltip: button.tooltip,\n                        handle: button === QuickInputButtons.Back ? -1 : index,\n                    }))\n                });\n            }\n        }\n\n        this.update({\n            items: pickItems,\n        });\n    }\n\n    get canSelectMany(): boolean {\n        return this._canSelectMany;\n    }\n\n    set canSelectMany(canSelectMany: boolean) {\n        this._canSelectMany = canSelectMany;\n        this.update({ canSelectMany });\n    }\n\n    get matchOnDescription(): boolean {\n        return this._matchOnDescription;\n    }\n\n    set matchOnDescription(matchOnDescription: boolean) {\n        this._matchOnDescription = matchOnDescription;\n        this.update({ matchOnDescription });\n    }\n\n    get matchOnDetail(): boolean {\n        return this._matchOnDetail;\n    }\n\n    set matchOnDetail(matchOnDetail: boolean) {\n        this._matchOnDetail = matchOnDetail;\n        this.update({ matchOnDetail });\n    }\n\n    get sortByLabel(): boolean {\n        return this._sortByLabel;\n    }\n\n    set sortByLabel(sortByLabel: boolean) {\n        this._sortByLabel = sortByLabel;\n        this.update({ sortByLabel });\n    }\n\n    get keepScrollPosition(): boolean {\n        return this._keepScrollPosition;\n    }\n\n    set keepScrollPosition(keepScrollPosition: boolean) {\n        this._keepScrollPosition = keepScrollPosition;\n        this.update({ keepScrollPosition });\n    }\n\n    get activeItems(): T[] {\n        return this._activeItems;\n    }\n\n    set activeItems(activeItems: T[]) {\n        this._activeItems = activeItems.filter(item => this._itemsToHandles.has(item));\n        this.update({ activeItems: this._activeItems.map(item => this._itemsToHandles.get(item)) });\n    }\n\n    onDidChangeActive = this._onDidChangeActiveEmitter.event;\n\n    get selectedItems(): T[] {\n        return this._selectedItems;\n    }\n\n    set selectedItems(selectedItems: T[]) {\n        this._selectedItems = selectedItems.filter(item => this._itemsToHandles.has(item));\n        this.update({ selectedItems: this._selectedItems.map(item => this._itemsToHandles.get(item)) });\n    }\n\n    onDidChangeSelection = this._onDidChangeSelectionEmitter.event;\n\n    _fireDidChangeActive(handles: number[]): void {\n        const items = handles.map(handle => this._handlesToItems.get(handle)).filter(e => !!e) as T[];\n        this._activeItems = items;\n        this._onDidChangeActiveEmitter.fire(items);\n    }\n\n    _fireDidChangeSelection(handles: number[]): void {\n        const items = handles.map(handle => this._handlesToItems.get(handle)).filter(e => !!e) as T[];\n        this._selectedItems = items;\n        this._onDidChangeSelectionEmitter.fire(items);\n    }\n\n    onDidTriggerItemButton = this._onDidTriggerItemButtonEmitter.event;\n\n    _fireDidTriggerItemButton(itemHandle: number, buttonHandle: number): void {\n        const item = this._handlesToItems.get(itemHandle)!;\n        if (!item || !item.buttons || !item.buttons.length) {\n            return;\n        }\n        const button = item.buttons[buttonHandle];\n        if (button) {\n            this._onDidTriggerItemButtonEmitter.fire({\n                button,\n                item\n            });\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019-2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.52.1/src/vs/workbench/api/common/extHostSCM.ts\n\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport {\n    Plugin, PLUGIN_RPC_CONTEXT,\n    ScmExt,\n    ScmMain, ScmRawResource, ScmRawResourceGroup,\n    ScmRawResourceSplice, ScmRawResourceSplices,\n    SourceControlGroupFeatures\n} from '../common';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CommandRegistryImpl } from '../plugin/command-registry';\nimport { Splice } from '../common/arrays';\nimport { UriComponents } from '../common/uri-components';\nimport { Command } from '../common/plugin-api-rpc-model';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { URI, ThemeIcon } from './types-impl';\nimport { ScmCommandArg } from '../common/plugin-api-rpc';\nimport { sep } from '@theia/core/lib/common/paths';\nimport { PluginIconPath } from './plugin-icon-path';\ntype ProviderHandle = number;\ntype GroupHandle = number;\ntype ResourceStateHandle = number;\n\nfunction getIconResource(decorations?: theia.SourceControlResourceThemableDecorations): UriComponents | ThemeIcon | undefined {\n    if (!decorations || !decorations.iconPath) {\n        return undefined;\n    } else if (typeof decorations.iconPath === 'string') {\n        return URI.file(decorations.iconPath);\n    } else if (URI.isUri(decorations.iconPath)) {\n        return decorations.iconPath;\n    } else if (ThemeIcon.is(decorations.iconPath)) {\n        return decorations.iconPath;\n    } else {\n        console.warn(`Unexpected Value ${decorations.iconPath} in Source Control Resource Themable Decoration. URI, ThemeIcon or string expected.`);\n        return undefined;\n    }\n}\n\nfunction comparePaths(one: string, other: string, caseSensitive = false): number {\n    const oneParts = one.split(sep);\n    const otherParts = other.split(sep);\n\n    const lastOne = oneParts.length - 1;\n    const lastOther = otherParts.length - 1;\n    let endOne: boolean;\n    let endOther: boolean;\n\n    for (let i = 0; ; i++) {\n        endOne = lastOne === i;\n        endOther = lastOther === i;\n\n        if (endOne && endOther) {\n            const onePart = caseSensitive ? oneParts[i].toLocaleLowerCase() : oneParts[i];\n            const otherPart = caseSensitive ? otherParts[i].toLocaleLowerCase() : otherParts[i];\n            return onePart > otherPart ? -1 : 1;\n        } else if (endOne) {\n            return -1;\n        } else if (endOther) {\n            return 1;\n        }\n\n        if (endOne) {\n            return -1;\n        } else if (endOther) {\n            return 1;\n        }\n\n        const result = comparePathComponents(oneParts[i], otherParts[i], caseSensitive);\n\n        if (result !== 0) {\n            return result;\n        }\n    }\n}\n\nfunction comparePathComponents(one: string, other: string, caseSensitive = false): number {\n    if (!caseSensitive) {\n        one = one && one.toLowerCase();\n        other = other && other.toLowerCase();\n    }\n\n    if (one === other) {\n        return 0;\n    }\n\n    return one < other ? -1 : 1;\n}\n\nfunction compareResourceThemableDecorations(a: theia.SourceControlResourceThemableDecorations, b: theia.SourceControlResourceThemableDecorations): number {\n    if (!a.iconPath && !b.iconPath) {\n        return 0;\n    } else if (!a.iconPath) {\n        return -1;\n    } else if (!b.iconPath) {\n        return 1;\n    }\n\n    const aPath = typeof a.iconPath === 'string' ? a.iconPath : URI.isUri(a.iconPath) ? a.iconPath.fsPath : (a.iconPath as ThemeIcon).id;\n    const bPath = typeof b.iconPath === 'string' ? b.iconPath : URI.isUri(b.iconPath) ? b.iconPath.fsPath : (b.iconPath as ThemeIcon).id;\n    return comparePaths(aPath, bPath);\n}\n\nfunction compareResourceStatesDecorations(a: theia.SourceControlResourceDecorations, b: theia.SourceControlResourceDecorations): number {\n    let result = 0;\n\n    if (a.strikeThrough !== b.strikeThrough) {\n        return a.strikeThrough ? 1 : -1;\n    }\n\n    if (a.faded !== b.faded) {\n        return a.faded ? 1 : -1;\n    }\n\n    if (a.tooltip !== b.tooltip) {\n        return (a.tooltip || '').localeCompare(b.tooltip || '');\n    }\n\n    result = compareResourceThemableDecorations(a, b);\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.light && b.light) {\n        result = compareResourceThemableDecorations(a.light, b.light);\n    } else if (a.light) {\n        return 1;\n    } else if (b.light) {\n        return -1;\n    }\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.dark && b.dark) {\n        result = compareResourceThemableDecorations(a.dark, b.dark);\n    } else if (a.dark) {\n        return 1;\n    } else if (b.dark) {\n        return -1;\n    }\n\n    return result;\n}\n\nfunction compareCommands(a: theia.Command, b: theia.Command): number {\n    if (a.command !== b.command) {\n        return a.command! < b.command! ? -1 : 1;\n    }\n\n    if (a.title !== b.title) {\n        return a.title! < b.title! ? -1 : 1;\n    }\n\n    if (a.tooltip !== b.tooltip) {\n        if (a.tooltip !== undefined && b.tooltip !== undefined) {\n            return a.tooltip < b.tooltip ? -1 : 1;\n        } else if (a.tooltip !== undefined) {\n            return 1;\n        } else if (b.tooltip !== undefined) {\n            return -1;\n        }\n    }\n\n    if (a.arguments === b.arguments) {\n        return 0;\n    } else if (!a.arguments) {\n        return -1;\n    } else if (!b.arguments) {\n        return 1;\n    } else if (a.arguments.length !== b.arguments.length) {\n        return a.arguments.length - b.arguments.length;\n    }\n\n    for (let i = 0; i < a.arguments.length; i++) {\n        const aArg = a.arguments[i];\n        const bArg = b.arguments[i];\n\n        if (aArg === bArg) {\n            continue;\n        }\n\n        return aArg < bArg ? -1 : 1;\n    }\n\n    return 0;\n}\n\nfunction compareResourceStates(a: theia.SourceControlResourceState, b: theia.SourceControlResourceState): number {\n    let result = comparePaths(a.resourceUri.fsPath, b.resourceUri.fsPath, true);\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.command && b.command) {\n        result = compareCommands(a.command, b.command);\n    } else if (a.command) {\n        return 1;\n    } else if (b.command) {\n        return -1;\n    }\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.decorations && b.decorations) {\n        result = compareResourceStatesDecorations(a.decorations, b.decorations);\n    } else if (a.decorations) {\n        return 1;\n    } else if (b.decorations) {\n        return -1;\n    }\n\n    return result;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction compareArgs(a: any[], b: any[]): boolean {\n    for (let i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction commandEquals(a: theia.Command, b: theia.Command): boolean {\n    return a.command === b.command\n        && a.title === b.title\n        && a.tooltip === b.tooltip\n        && (a.arguments && b.arguments ? compareArgs(a.arguments, b.arguments) : a.arguments === b.arguments);\n}\n\nfunction commandListEquals(a: readonly theia.Command[], b: readonly theia.Command[]): boolean {\n    return equals(a, b, commandEquals);\n}\n\nfunction equals<T>(one: ReadonlyArray<T> | undefined, other: ReadonlyArray<T> | undefined, itemEquals: (a: T, b: T) => boolean = (a, b) => a === b): boolean {\n    if (one === other) {\n        return true;\n    }\n\n    if (!one || !other) {\n        return false;\n    }\n\n    if (one.length !== other.length) {\n        return false;\n    }\n\n    for (let i = 0, len = one.length; i < len; i++) {\n        if (!itemEquals(one[i], other[i])) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\ninterface ValidateInput {\n    (value: string, cursorPosition: number): theia.ProviderResult<theia.SourceControlInputBoxValidation | undefined | null>;\n}\n\nexport class ScmInputBoxImpl implements theia.SourceControlInputBox {\n\n    private _value: string = '';\n\n    get value(): string {\n        return this._value;\n    }\n\n    set value(value: string) {\n        this.proxy.$setInputBoxValue(this.sourceControlHandle, value);\n        this.updateValue(value);\n    }\n\n    private readonly onDidChangeEmitter = new Emitter<string>();\n\n    get onDidChange(): Event<string> {\n        return this.onDidChangeEmitter.event;\n    }\n\n    private _placeholder: string = '';\n\n    get placeholder(): string {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string) {\n        this.proxy.$setInputBoxPlaceholder(this.sourceControlHandle, placeholder);\n        this._placeholder = placeholder;\n    }\n\n    private _visible: boolean = true;\n\n    get visible(): boolean {\n        return this._visible;\n    }\n\n    set visible(visible: boolean) {\n        this.proxy.$setInputBoxVisible(this.sourceControlHandle, visible);\n        this._visible = visible;\n    }\n\n    private _enabled: boolean;\n\n    get enabled(): boolean {\n        return this._enabled;\n    }\n\n    set enabled(enabled: boolean) {\n        this.proxy.$setInputBoxEnabled(this.sourceControlHandle, enabled);\n        this._enabled = enabled;\n    }\n\n    private _validateInput: ValidateInput | undefined;\n\n    get validateInput(): ValidateInput | undefined {\n        return this._validateInput;\n    }\n\n    set validateInput(fn: ValidateInput | undefined) {\n        if (fn && typeof fn !== 'function') {\n            throw new Error(`[${this.plugin.model.id}]: Invalid SCM input box validation function`);\n        }\n\n        this._validateInput = fn;\n    }\n\n    constructor(private plugin: Plugin, private proxy: ScmMain, private sourceControlHandle: number) {\n        // noop\n    }\n\n    onInputBoxValueChange(value: string): void {\n        this.updateValue(value);\n    }\n\n    private updateValue(value: string): void {\n        this._value = value;\n        this.onDidChangeEmitter.fire(value);\n    }\n}\n\nclass ScmResourceGroupImpl implements theia.SourceControlResourceGroup {\n\n    private static handlePool: number = 0;\n    private resourceHandlePool: number = 0;\n    private _resourceStates: theia.SourceControlResourceState[] = [];\n\n    private resourceStatesMap = new Map<ResourceStateHandle, theia.SourceControlResourceState>();\n    private resourceStatesCommandsMap = new Map<ResourceStateHandle, theia.Command>();\n    private resourceStatesDisposablesMap = new Map<ResourceStateHandle, Disposable>();\n\n    private readonly onDidUpdateResourceStatesEmitter = new Emitter<void>();\n    readonly onDidUpdateResourceStates = this.onDidUpdateResourceStatesEmitter.event;\n\n    private _disposed = false;\n    get disposed(): boolean { return this._disposed; }\n    private readonly onDidDisposeEmitter = new Emitter<void>();\n    readonly onDidDispose = this.onDidDisposeEmitter.event;\n\n    private handlesSnapshot: number[] = [];\n    private resourceSnapshot: theia.SourceControlResourceState[] = [];\n\n    get id(): string { return this._id; }\n\n    get label(): string { return this._label; }\n    set label(label: string) {\n        this._label = label;\n        this.proxy.$updateGroupLabel(this.sourceControlHandle, this.handle, label);\n    }\n\n    private _hideWhenEmpty: boolean | undefined = undefined;\n    get hideWhenEmpty(): boolean | undefined { return this._hideWhenEmpty; }\n    set hideWhenEmpty(hideWhenEmpty: boolean | undefined) {\n        this._hideWhenEmpty = hideWhenEmpty;\n        this.proxy.$updateGroup(this.sourceControlHandle, this.handle, this.features);\n    }\n\n    get features(): SourceControlGroupFeatures {\n        return {\n            hideWhenEmpty: this.hideWhenEmpty\n        };\n    }\n\n    get resourceStates(): theia.SourceControlResourceState[] { return [...this._resourceStates]; }\n    set resourceStates(resources: theia.SourceControlResourceState[]) {\n        this._resourceStates = [...resources];\n        this.onDidUpdateResourceStatesEmitter.fire();\n    }\n\n    readonly handle = ScmResourceGroupImpl.handlePool++;\n\n    constructor(\n        private proxy: ScmMain,\n        private commands: CommandRegistryImpl,\n        private sourceControlHandle: number,\n        private plugin: Plugin,\n        private _id: string,\n        private _label: string,\n    ) { }\n\n    getResourceState(handle: number): theia.SourceControlResourceState | undefined {\n        return this.resourceStatesMap.get(handle);\n    }\n\n    executeResourceCommand(handle: number): Promise<void> {\n        const command = this.resourceStatesCommandsMap.get(handle);\n\n        if (!command) {\n            return Promise.resolve(undefined);\n        }\n\n        return new Promise(() => this.commands.executeCommand(command.command!, ...(command.arguments || [])));\n    }\n\n    takeResourceStateSnapshot(): ScmRawResourceSplice[] {\n        const snapshot = [...this._resourceStates];\n        const diffs = sortedDiff(this.resourceSnapshot, snapshot, compareResourceStates);\n\n        const splices = diffs.map<Splice<{ rawResource: ScmRawResource, handle: number }>>(diff => {\n            const toInsert = diff.toInsert.map(r => {\n                const handle = this.resourceHandlePool++;\n                this.resourceStatesMap.set(handle, r);\n\n                const sourceUri = r.resourceUri;\n\n                const icon = getIconResource(r.decorations);\n                const lightIcon = r.decorations && getIconResource(r.decorations.light) || icon;\n                const darkIcon = r.decorations && getIconResource(r.decorations.dark) || icon;\n                const icons = [this.getThemableIcon(lightIcon), this.getThemableIcon(darkIcon)];\n                let command: Command | undefined;\n\n                if (r.command) {\n                    if (r.command.command === 'theia.open' || r.command.command === 'theia.diff') {\n                        const disposables = new DisposableCollection();\n                        command = this.commands.converter.toSafeCommand(r.command, disposables);\n                        this.resourceStatesDisposablesMap.set(handle, disposables);\n                    } else {\n                        this.resourceStatesCommandsMap.set(handle, r.command);\n                    }\n                }\n\n                const tooltip = (r.decorations && r.decorations.tooltip) || '';\n                const strikeThrough = r.decorations && !!r.decorations.strikeThrough;\n                const faded = r.decorations && !!r.decorations.faded;\n                const contextValue = r.contextValue || '';\n\n                // TODO remove the letter and colorId fields when the FileDecorationProvider is applied, see https://github.com/eclipse-theia/theia/pull/8911\n                const rawResource = {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    handle, sourceUri, letter: (r as any).letter, colorId: (r as any).color.id, icons,\n                    tooltip, strikeThrough, faded, contextValue, command\n                } as ScmRawResource;\n\n                return { rawResource, handle };\n            });\n\n            const { start, deleteCount } = diff;\n            return { start, deleteCount, toInsert };\n        });\n\n        const rawResourceSplices = splices\n            .map(({ start, deleteCount, toInsert }) => ({\n                start: start,\n                deleteCount: deleteCount,\n                rawResources: toInsert.map(i => i.rawResource)\n            } as ScmRawResourceSplice));\n\n        const reverseSplices = splices.reverse();\n\n        for (const { start, deleteCount, toInsert } of reverseSplices) {\n            const handles = toInsert.map(i => i.handle);\n            const handlesToDelete = this.handlesSnapshot.splice(start, deleteCount, ...handles);\n\n            for (const handle of handlesToDelete) {\n                this.resourceStatesMap.delete(handle);\n                this.resourceStatesCommandsMap.delete(handle);\n                this.resourceStatesDisposablesMap.get(handle)?.dispose();\n                this.resourceStatesDisposablesMap.delete(handle);\n            }\n        }\n\n        this.resourceSnapshot = snapshot;\n        return rawResourceSplices;\n    }\n\n    private getThemableIcon(icon: UriComponents | ThemeIcon | undefined): string | ThemeIcon | undefined {\n        if (!icon) {\n            return undefined;\n        } else if (ThemeIcon.is(icon)) {\n            return icon;\n        }\n        return PluginIconPath.asString(URI.revive(icon), this.plugin);\n    }\n\n    dispose(): void {\n        this._disposed = true;\n        this.onDidDisposeEmitter.fire();\n    }\n}\n\nclass SourceControlImpl implements theia.SourceControl {\n\n    private static handlePool: number = 0;\n    private groups: Map<GroupHandle, ScmResourceGroupImpl> = new Map<GroupHandle, ScmResourceGroupImpl>();\n\n    get id(): string {\n        return this._id;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get rootUri(): theia.Uri | undefined {\n        return this._rootUri;\n    }\n\n    private _inputBox: ScmInputBoxImpl;\n    get inputBox(): ScmInputBoxImpl { return this._inputBox; }\n\n    private _count: number | undefined = undefined;\n\n    get count(): number | undefined {\n        return this._count;\n    }\n\n    set count(count: number | undefined) {\n        if (this._count === count) {\n            return;\n        }\n\n        this._count = count;\n        this.proxy.$updateSourceControl(this.handle, { count });\n    }\n\n    private _quickDiffProvider: theia.QuickDiffProvider | undefined = undefined;\n\n    get quickDiffProvider(): theia.QuickDiffProvider | undefined {\n        return this._quickDiffProvider;\n    }\n\n    set quickDiffProvider(quickDiffProvider: theia.QuickDiffProvider | undefined) {\n        this._quickDiffProvider = quickDiffProvider;\n        this.proxy.$updateSourceControl(this.handle, { hasQuickDiffProvider: !!quickDiffProvider });\n    }\n\n    private _commitTemplate: string | undefined = undefined;\n\n    get commitTemplate(): string | undefined {\n        return this._commitTemplate;\n    }\n\n    set commitTemplate(commitTemplate: string | undefined) {\n        if (commitTemplate === this._commitTemplate) {\n            return;\n        }\n\n        this._commitTemplate = commitTemplate;\n        this.proxy.$updateSourceControl(this.handle, { commitTemplate });\n    }\n\n    private acceptInputDisposables = new DisposableCollection();\n    private _acceptInputCommand: theia.Command | undefined = undefined;\n\n    get acceptInputCommand(): theia.Command | undefined {\n        return this._acceptInputCommand;\n    }\n\n    set acceptInputCommand(acceptInputCommand: theia.Command | undefined) {\n        this.acceptInputDisposables = new DisposableCollection();\n\n        this._acceptInputCommand = acceptInputCommand;\n\n        const internal = this.commands.converter.toSafeCommand(acceptInputCommand, this.acceptInputDisposables);\n        this.proxy.$updateSourceControl(this.handle, { acceptInputCommand: internal });\n    }\n\n    private _statusBarDisposables = new DisposableCollection();\n    private _statusBarCommands: theia.Command[] | undefined = undefined;\n\n    get statusBarCommands(): theia.Command[] | undefined {\n        return this._statusBarCommands;\n    }\n\n    set statusBarCommands(statusBarCommands: theia.Command[] | undefined) {\n        if (this._statusBarCommands && statusBarCommands && commandListEquals(this._statusBarCommands, statusBarCommands)) {\n            return;\n        }\n\n        this._statusBarDisposables = new DisposableCollection();\n\n        this._statusBarCommands = statusBarCommands;\n\n        const internal = (statusBarCommands || []).map(c => this.commands.converter.toSafeCommand(c, this._statusBarDisposables)) as Command[];\n        this.proxy.$updateSourceControl(this.handle, { statusBarCommands: internal });\n    }\n\n    private _selected: boolean = false;\n\n    get selected(): boolean {\n        return this._selected;\n    }\n\n    private readonly onDidChangeSelectionEmitter = new Emitter<boolean>();\n    readonly onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n\n    private handle: number = SourceControlImpl.handlePool++;\n\n    constructor(\n        private plugin: Plugin,\n        private proxy: ScmMain,\n        private commands: CommandRegistryImpl,\n        private _id: string,\n        private _label: string,\n        private _rootUri?: theia.Uri\n    ) {\n        this._inputBox = new ScmInputBoxImpl(plugin, this.proxy, this.handle);\n        this.proxy.$registerSourceControl(this.handle, _id, _label, _rootUri);\n    }\n\n    private createdResourceGroups = new Map<ScmResourceGroupImpl, Disposable>();\n    private updatedResourceGroups = new Set<ScmResourceGroupImpl>();\n\n    createResourceGroup(id: string, label: string): ScmResourceGroupImpl {\n        const group = new ScmResourceGroupImpl(this.proxy, this.commands, this.handle, this.plugin, id, label);\n        const disposable = group.onDidDispose(() => this.createdResourceGroups.delete(group));\n        this.createdResourceGroups.set(group, disposable);\n        this.eventuallyAddResourceGroups();\n        return group;\n    }\n\n    eventuallyAddResourceGroups(): void {\n        const groups: ScmRawResourceGroup[] = [];\n        const splices: ScmRawResourceSplices[] = [];\n\n        for (const [group, disposable] of this.createdResourceGroups) {\n            disposable.dispose();\n\n            const updateListener = group.onDidUpdateResourceStates(() => {\n                this.updatedResourceGroups.add(group);\n                this.eventuallyUpdateResourceStates();\n            });\n\n            group.onDidDispose(() => {\n                this.updatedResourceGroups.delete(group);\n                updateListener.dispose();\n                this.groups.delete(group.handle);\n                this.proxy.$unregisterGroup(this.handle, group.handle);\n            });\n\n            const { handle, id, label, features } = group;\n            groups.push({ handle, id, label, features });\n\n            const snapshot = group.takeResourceStateSnapshot();\n\n            if (snapshot.length > 0) {\n                splices.push({ handle: group.handle, splices: snapshot });\n            }\n\n            this.groups.set(group.handle, group);\n        }\n\n        this.proxy.$registerGroups(this.handle, groups, splices);\n        this.createdResourceGroups.clear();\n    }\n\n    eventuallyUpdateResourceStates(): void {\n        const splices: ScmRawResourceSplices[] = [];\n\n        this.updatedResourceGroups.forEach(group => {\n            const snapshot = group.takeResourceStateSnapshot();\n\n            if (snapshot.length === 0) {\n                return;\n            }\n\n            splices.push({ handle: group.handle, splices: snapshot });\n        });\n\n        if (splices.length > 0) {\n            this.proxy.$spliceResourceStates(this.handle, splices);\n        }\n\n        this.updatedResourceGroups.clear();\n    }\n\n    getResourceGroup(handle: GroupHandle): ScmResourceGroupImpl | undefined {\n        return this.groups.get(handle);\n    }\n\n    setSelectionState(selected: boolean): void {\n        this._selected = selected;\n        this.onDidChangeSelectionEmitter.fire(selected);\n    }\n\n    dispose(): void {\n        this.acceptInputDisposables.dispose();\n        this._statusBarDisposables.dispose();\n\n        this.groups.forEach(group => group.dispose());\n        this.proxy.$unregisterSourceControl(this.handle);\n    }\n}\n\nexport class ScmExtImpl implements ScmExt {\n\n    private static handlePool: number = 0;\n\n    private proxy: ScmMain;\n    private sourceControls: Map<ProviderHandle, SourceControlImpl> = new Map<ProviderHandle, SourceControlImpl>();\n    private sourceControlsByExtension: Map<string, SourceControlImpl[]> = new Map<string, SourceControlImpl[]>();\n\n    private readonly onDidChangeActiveProviderEmitter = new Emitter<theia.SourceControl>();\n    get onDidChangeActiveProvider(): Event<theia.SourceControl> { return this.onDidChangeActiveProviderEmitter.event; }\n\n    private selectedSourceControlHandle: number | undefined;\n\n    constructor(rpc: RPCProtocol, private commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.SCM_MAIN);\n\n        commands.registerArgumentProcessor({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            processArgument: (arg: any) => {\n                if (!ScmCommandArg.is(arg)) {\n                    return arg;\n                }\n                const sourceControl = this.sourceControls.get(arg.sourceControlHandle);\n                if (!sourceControl) {\n                    return undefined;\n                }\n                if (typeof arg.resourceGroupHandle !== 'number') {\n                    return sourceControl;\n                }\n                const resourceGroup = sourceControl.getResourceGroup(arg.resourceGroupHandle);\n                if (typeof arg.resourceStateHandle !== 'number') {\n                    return resourceGroup;\n                }\n                return resourceGroup && resourceGroup.getResourceState(arg.resourceStateHandle);\n            }\n        });\n    }\n\n    createSourceControl(extension: Plugin, id: string, label: string, rootUri: theia.Uri | undefined): theia.SourceControl {\n        const handle = ScmExtImpl.handlePool++;\n        const sourceControl = new SourceControlImpl(extension, this.proxy, this.commands, id, label, rootUri);\n        this.sourceControls.set(handle, sourceControl);\n\n        const sourceControls = this.sourceControlsByExtension.get(extension.model.id) || [];\n        sourceControls.push(sourceControl);\n        this.sourceControlsByExtension.set(extension.model.id, sourceControls);\n\n        return sourceControl;\n    }\n\n    getLastInputBox(extension: Plugin): ScmInputBoxImpl | undefined {\n        const sourceControls = this.sourceControlsByExtension.get(extension.model.id);\n        const sourceControl = sourceControls && sourceControls[sourceControls.length - 1];\n        return sourceControl && sourceControl.inputBox;\n    }\n\n    $provideOriginalResource(sourceControlHandle: number, uriComponents: string, token: theia.CancellationToken): Promise<UriComponents | undefined> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl || !sourceControl.quickDiffProvider || !sourceControl.quickDiffProvider.provideOriginalResource) {\n            return Promise.resolve(undefined);\n        }\n\n        return new Promise<UriComponents | undefined>(() => sourceControl.quickDiffProvider!.provideOriginalResource!(URI.file(uriComponents), token))\n            .then<UriComponents | undefined>(r => r || undefined);\n    }\n\n    $onInputBoxValueChange(sourceControlHandle: number, value: string): Promise<void> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl) {\n            return Promise.resolve(undefined);\n        }\n\n        sourceControl.inputBox.onInputBoxValueChange(value);\n        return Promise.resolve(undefined);\n    }\n\n    $executeResourceCommand(sourceControlHandle: number, groupHandle: number, handle: number): Promise<void> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl) {\n            return Promise.resolve(undefined);\n        }\n\n        const group = sourceControl.getResourceGroup(groupHandle);\n\n        if (!group) {\n            return Promise.resolve(undefined);\n        }\n\n        return group.executeResourceCommand(handle);\n    }\n\n    async $validateInput(sourceControlHandle: number, value: string, cursorPosition: number): Promise<[string, number] | undefined> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl) {\n            return Promise.resolve(undefined);\n        }\n\n        if (!sourceControl.inputBox.validateInput) {\n            return Promise.resolve(undefined);\n        }\n\n        const result = await sourceControl.inputBox.validateInput!(value, cursorPosition);\n        if (!result) {\n            return Promise.resolve(undefined);\n        }\n        return [result.message, result.type];\n    }\n\n    $setSelectedSourceControl(selectedSourceControlHandle: number | undefined): Promise<void> {\n        if (selectedSourceControlHandle !== undefined) {\n            this.sourceControls.get(selectedSourceControlHandle)?.setSelectionState(true);\n        }\n\n        if (this.selectedSourceControlHandle !== undefined) {\n            this.sourceControls.get(this.selectedSourceControlHandle)?.setSelectionState(false);\n        }\n\n        this.selectedSourceControlHandle = selectedSourceControlHandle;\n        return Promise.resolve(undefined);\n    }\n}\n\n/**\n * Diffs two *sorted* arrays and computes the splices which apply the diff.\n */\nfunction sortedDiff(before: ReadonlyArray<theia.SourceControlResourceState>,\n    after: ReadonlyArray<theia.SourceControlResourceState>,\n    compare: (a: theia.SourceControlResourceState,\n        b: theia.SourceControlResourceState) => number): Splice<theia.SourceControlResourceState>[] {\n    const result: MutableSplice<theia.SourceControlResourceState>[] = [];\n\n    function pushSplice(start: number, deleteCount: number, toInsert: theia.SourceControlResourceState[]): void {\n        if (deleteCount === 0 && toInsert.length === 0) {\n            return;\n        }\n\n        const latest = result[result.length - 1];\n\n        if (latest && latest.start + latest.deleteCount === start) {\n            latest.deleteCount += deleteCount;\n            latest.toInsert.push(...toInsert);\n        } else {\n            result.push({ start, deleteCount, toInsert });\n        }\n    }\n\n    let beforeIdx = 0;\n    let afterIdx = 0;\n\n    while (true) {\n        if (beforeIdx === before.length) {\n            pushSplice(beforeIdx, 0, after.slice(afterIdx));\n            break;\n        }\n        if (afterIdx === after.length) {\n            pushSplice(beforeIdx, before.length - beforeIdx, []);\n            break;\n        }\n\n        const beforeElement = before[beforeIdx];\n        const afterElement = after[afterIdx];\n        const n = compare(beforeElement, afterElement);\n        if (n === 0) {\n            // equal\n            beforeIdx += 1;\n            afterIdx += 1;\n        } else if (n < 0) {\n            // beforeElement is smaller -> before element removed\n            pushSplice(beforeIdx, 1, []);\n            beforeIdx += 1;\n        } else if (n > 0) {\n            // beforeElement is greater -> after element added\n            pushSplice(beforeIdx, 0, [afterElement]);\n            afterIdx += 1;\n        }\n    }\n\n    return result;\n}\n\ninterface MutableSplice<T> extends Splice<T> {\n    deleteCount: number;\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.55.2/src/vs/workbench/api/common/extHostSecrets.ts\n\nimport { Plugin, PLUGIN_RPC_CONTEXT, SecretsExt, SecretsMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\n\nexport class SecretsExtImpl implements SecretsExt {\n    private proxy: SecretsMain;\n    private onDidChangePasswordEmitter = new Emitter<{ extensionId: string, key: string }>();\n    readonly onDidChangePassword = this.onDidChangePasswordEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.SECRETS_MAIN);\n    }\n\n    async $onDidChangePassword(e: { extensionId: string, key: string }): Promise<void> {\n        this.onDidChangePasswordEmitter.fire(e);\n    }\n\n    get(extensionId: string, key: string): Promise<string | undefined> {\n        return this.proxy.$getPassword(extensionId, key);\n    }\n\n    store(extensionId: string, key: string, value: string): Promise<void> {\n        return this.proxy.$setPassword(extensionId, key, value);\n    }\n\n    delete(extensionId: string, key: string): Promise<void> {\n        return this.proxy.$deletePassword(extensionId, key);\n    }\n}\n\nexport class SecretStorageExt implements theia.SecretStorage {\n\n    protected readonly id: string;\n    readonly secretState: SecretsExtImpl;\n\n    private onDidChangeEmitter = new Emitter<theia.SecretStorageChangeEvent>();\n    readonly onDidChange: Event<theia.SecretStorageChangeEvent> = this.onDidChangeEmitter.event;\n\n    constructor(pluginDescription: Plugin, secretState: SecretsExtImpl) {\n        this.id = pluginDescription.model.id.toLowerCase();\n        this.secretState = secretState;\n\n        this.secretState.onDidChangePassword(e => {\n            if (e.extensionId === this.id) {\n                this.onDidChangeEmitter.fire({ key: e.key });\n            }\n        });\n    }\n\n    get(key: string): Promise<string | undefined> {\n        return this.secretState.get(this.id, key);\n    }\n\n    store(key: string, value: string): Promise<void> {\n        return this.secretState.store(this.id, key, value);\n    }\n\n    delete(key: string): Promise<void> {\n        return this.secretState.delete(this.id, key);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { Disposable, StatusBarAlignment } from './types-impl';\nimport { StatusBarItem } from '@theia/plugin';\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, StatusBarMessageRegistryMain\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { StatusBarItemImpl } from './status-bar/status-bar-item';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport class StatusBarMessageRegistryExt {\n\n    proxy: StatusBarMessageRegistryMain;\n\n    protected readonly statusMessage: StatusBarMessage;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.STATUS_BAR_MESSAGE_REGISTRY_MAIN);\n        this.statusMessage = new StatusBarMessage(this);\n    }\n\n    // copied from https://github.com/Microsoft/vscode/blob/6c8f02b41db9ae5c4d15df767d47755e5c73b9d5/src/vs/workbench/api/node/extHostStatusBar.ts#L174\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    setStatusBarMessage(text: string, timeoutOrThenable?: number | PromiseLike<any>): Disposable {\n        const d = this.statusMessage.setMessage(text);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let handle: any;\n\n        if (typeof timeoutOrThenable === 'number') {\n            handle = setTimeout(() => d.dispose(), timeoutOrThenable);\n        } else if (typeof timeoutOrThenable !== 'undefined') {\n            timeoutOrThenable.then(() => d.dispose(), () => d.dispose());\n        }\n\n        return new Disposable(() => {\n            d.dispose();\n            clearTimeout(handle);\n        });\n\n    }\n\n    createStatusBarItem(alignment?: StatusBarAlignment, priority?: number, id?: string): StatusBarItem {\n        return new StatusBarItemImpl(this.proxy, alignment, priority, id);\n    }\n\n}\n\n// copied from https://github.com/Microsoft/vscode/blob/6c8f02b41db9ae5c4d15df767d47755e5c73b9d5/src/vs/workbench/api/node/extHostStatusBar.ts#L122\nclass StatusBarMessage {\n\n    private _item: StatusBarItem;\n    private _messages: { message: string }[] = [];\n\n    constructor(statusBar: StatusBarMessageRegistryExt) {\n        this._item = statusBar.createStatusBarItem(StatusBarAlignment.Left, Number.MIN_VALUE);\n    }\n\n    dispose(): void {\n        this._messages.length = 0;\n        this._item.dispose();\n    }\n\n    setMessage(message: string): Disposable {\n        const data: { message: string } = { message }; // use object to not confuse equal strings\n        this._messages.unshift(data);\n        this._update();\n\n        return new Disposable(() => {\n            const idx = this._messages.indexOf(data);\n            if (idx >= 0) {\n                this._messages.splice(idx, 1);\n                this._update();\n            }\n        });\n    }\n\n    private _update(): void {\n        if (this._messages.length > 0) {\n            this._item.text = this._messages[0].message;\n            this._item.show();\n        } else {\n            this._item.hide();\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport * as theia from '@theia/plugin';\nimport { ThemeColor, StatusBarAlignment } from '../types-impl';\nimport { StatusBarMessageRegistryMain } from '../../common/plugin-api-rpc';\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\n\nexport class StatusBarItemImpl implements theia.StatusBarItem {\n\n    /** Map from allowed background colors to corresponding foreground colors. */\n    private static BACKGROUND_COLORS = new Map<string, string>([\n        ['statusBarItem.errorBackground', 'statusBarItem.errorForeground'],\n        ['statusBarItem.warningBackground', 'statusBarItem.warningForeground']\n    ]);\n\n    private _id: string;\n\n    private _alignment: StatusBarAlignment;\n    private _priority: number;\n\n    private _name: string | undefined;\n    private _text: string;\n    private _tooltip: string | theia.MarkdownString | undefined;\n    private _color: string | ThemeColor | undefined;\n    private _backgroundColor: ThemeColor | undefined;\n    private _command: string | theia.Command;\n    private _accessibilityInformation: theia.AccessibilityInformation;\n\n    private _isVisible: boolean;\n    private _timeoutHandle: NodeJS.Timer | undefined;\n\n    _proxy: StatusBarMessageRegistryMain;\n\n    constructor(_proxy: StatusBarMessageRegistryMain,\n        alignment: StatusBarAlignment = StatusBarAlignment.Left,\n        priority: number = 0,\n        id = StatusBarItemImpl.nextId()) {\n        this._proxy = _proxy;\n        this._alignment = alignment;\n        this._priority = priority;\n        this._id = id;\n    }\n\n    public get id(): string {\n        return this._id;\n    }\n\n    public get alignment(): theia.StatusBarAlignment {\n        return <theia.StatusBarAlignment>this._alignment;\n    }\n\n    public get priority(): number {\n        return this._priority;\n    }\n\n    public get name(): string | undefined {\n        return this._name;\n    }\n\n    public get text(): string {\n        return this._text;\n    }\n\n    public get tooltip(): string | theia.MarkdownString | undefined {\n        return this._tooltip;\n    }\n\n    public get color(): string | ThemeColor | undefined {\n        return this._color;\n    }\n\n    public get backgroundColor(): ThemeColor | undefined {\n        return this._backgroundColor;\n    }\n\n    public get command(): string | theia.Command {\n        return this._command;\n    }\n\n    public get accessibilityInformation(): theia.AccessibilityInformation {\n        return this._accessibilityInformation;\n    }\n\n    public set name(name: string | undefined) {\n        this._name = name;\n        this.update();\n    }\n\n    public set text(text: string) {\n        this._text = text;\n        this.update();\n    }\n\n    public set tooltip(tooltip: string | theia.MarkdownString | undefined) {\n        this._tooltip = tooltip;\n        this.update();\n    }\n\n    public set color(color: string | ThemeColor | undefined) {\n        this._color = color;\n        this.update();\n    }\n\n    public set backgroundColor(backgroundColor: ThemeColor | undefined) {\n        if (backgroundColor && StatusBarItemImpl.BACKGROUND_COLORS.has(backgroundColor.id)) {\n            this._backgroundColor = backgroundColor;\n        } else {\n            this._backgroundColor = undefined;\n        }\n        this.update();\n    }\n\n    public set command(command: string | theia.Command) {\n        this._command = command;\n        this.update();\n    }\n\n    public set accessibilityInformation(information: theia.AccessibilityInformation) {\n        this._accessibilityInformation = information;\n        this.update();\n    }\n\n    public show(): void {\n        this._isVisible = true;\n        this.update();\n    }\n\n    public hide(): void {\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        this._proxy.$dispose(this.id);\n        this._isVisible = false;\n    }\n\n    private update(): void {\n        if (!this._isVisible) {\n            return;\n        }\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        // Defer the update so that multiple changes to setters don't cause a redraw each\n        this._timeoutHandle = setTimeout(() => {\n            this._timeoutHandle = undefined;\n\n            const commandId = typeof this.command === 'object' ? this.command.command : this.command;\n            const args = typeof this.command === 'object' ? this.command.arguments : undefined;\n\n            let color = this.color;\n            if (this.backgroundColor) {\n                // If an error or warning background color is set, set the corresponding foreground color\n                color = StatusBarItemImpl.BACKGROUND_COLORS.get(this.backgroundColor.id);\n            }\n\n            // Set to status bar\n            this._proxy.$setMessage(\n                this.id,\n                this.name,\n                this.text,\n                this.priority,\n                this.alignment,\n                typeof color === 'string' ? color : color?.id,\n                this.backgroundColor?.id,\n                this.tooltip,\n                commandId,\n                this.accessibilityInformation,\n                args);\n        }, 0);\n    }\n\n    public dispose(): void {\n        this.hide();\n    }\n\n    static nextId(): string {\n        return StatusBarItemImpl.ID_PREFIX + ':' + UUID.uuid4();\n    }\n    static ID_PREFIX = 'plugin-status-bar-item';\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* tslint:disable:typedef */\n\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport type * as theia from '@theia/plugin';\n\nexport const createRunProfile = (\n    label: string,\n    kind: theia.TestRunProfileKind,\n    runHandler: (\n        request: theia.TestRunRequest,\n        token: CancellationToken\n    ) => Thenable<void> | void,\n    isDefault?: boolean,\n    tag?: theia.TestTag,\n    supportsContinuousRun?: boolean\n) => ({\n    label,\n    kind,\n    isDefault: isDefault ?? false,\n    tag,\n    supportsContinuousRun: supportsContinuousRun ?? false,\n    runHandler,\n    configureHandler: undefined,\n    dispose: () => undefined,\n});\n\nexport const createTestRun = (\n    request: theia.TestRunRequest,\n    name?: string,\n    persist?: boolean\n): theia.TestRun => ({\n    name,\n    token: CancellationToken.None,\n    isPersisted: false,\n    enqueued: (test: theia.TestItem) => undefined,\n    started: (test: theia.TestItem) => undefined,\n    skipped: (test: theia.TestItem) => undefined,\n    failed: (\n        test: theia.TestItem,\n        message: theia.TestMessage | readonly theia.TestMessage[],\n        duration?: number\n    ) => undefined,\n    errored: (\n        test: theia.TestItem,\n        message: theia.TestMessage | readonly theia.TestMessage[],\n        duration?: number\n    ) => undefined,\n    passed: (test: theia.TestItem, duration?: number) => undefined,\n    appendOutput: (\n        output: string,\n        location?: theia.Location,\n        test?: theia.TestItem\n    ) => undefined,\n    end: () => undefined,\n});\n\nexport const testItemCollection = {\n    add: () => { },\n    delete: () => { },\n    forEach: () => { },\n    *[Symbol.iterator]() { },\n    get: () => undefined,\n    replace: () => { },\n    size: 0,\n};\n\nexport const createTestItem = (\n    id: string,\n    label: string,\n    uri?: theia.Uri\n): theia.TestItem => ({\n    id,\n    label,\n    uri,\n    children: testItemCollection,\n    parent: undefined,\n    tags: [],\n    canResolveChildren: false,\n    busy: false,\n    range: undefined,\n    error: undefined,\n});\n","// *****************************************************************************\n// Copyright (C) 2022 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { Emitter } from '@theia/core';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, TabDto, TabGroupDto, TabInputKind, TabModelOperationKind, TabOperation, TabsExt, TabsMain } from '../common/plugin-api-rpc';\nimport {\n    CustomEditorTabInput,\n    InteractiveWindowInput,\n    NotebookDiffEditorTabInput,\n    NotebookEditorTabInput,\n    TerminalEditorTabInput,\n    TextDiffTabInput,\n    TextMergeTabInput,\n    TextTabInput,\n    URI,\n    WebviewEditorTabInput\n} from './types-impl';\nimport { assertIsDefined } from '../common/types';\nimport { diffSets } from '../common/collections';\nimport { ViewColumn } from './type-converters';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.71.2/src/vs/workbench/api/common/extHostEditorTabs.ts\n\ntype AnyTabInput =\n    TextTabInput |\n    TextDiffTabInput |\n    CustomEditorTabInput |\n    NotebookEditorTabInput |\n    NotebookDiffEditorTabInput |\n    WebviewEditorTabInput |\n    TerminalEditorTabInput |\n    InteractiveWindowInput;\n\nclass TabExt {\n    private tabApiObject: theia.Tab | undefined;\n    private tabDto!: TabDto;\n    private input: AnyTabInput | undefined;\n    private parentGroup: TabGroupExt;\n    private readonly activeTabIdGetter: () => string;\n\n    constructor(dto: TabDto, parentGroup: TabGroupExt, activeTabIdGetter: () => string) {\n        this.activeTabIdGetter = activeTabIdGetter;\n        this.parentGroup = parentGroup;\n        this.acceptDtoUpdate(dto);\n    }\n\n    get apiObject(): theia.Tab {\n        if (!this.tabApiObject) {\n            // Don't want to lose reference to parent `this` in the getters\n            const that = this;\n            const obj: theia.Tab = {\n                get isActive(): boolean {\n                    // We use a getter function here to always ensure at most 1 active tab per group and prevent iteration for being required\n                    return that.tabDto.id === that.activeTabIdGetter();\n                },\n                get label(): string {\n                    return that.tabDto.label;\n                },\n                get input(): AnyTabInput | undefined {\n                    return that.input;\n                },\n                get isDirty(): boolean {\n                    return that.tabDto.isDirty;\n                },\n                get isPinned(): boolean {\n                    return that.tabDto.isPinned;\n                },\n                get isPreview(): boolean {\n                    return that.tabDto.isPreview;\n                },\n                get group(): theia.TabGroup {\n                    return that.parentGroup.apiObject;\n                }\n            };\n            this.tabApiObject = Object.freeze<theia.Tab>(obj);\n        }\n        return this.tabApiObject;\n    }\n\n    get tabId(): string {\n        return this.tabDto.id;\n    }\n\n    acceptDtoUpdate(tabDto: TabDto): void {\n        this.tabDto = tabDto;\n        this.input = this.initInput();\n    }\n\n    private initInput(): AnyTabInput | undefined {\n        switch (this.tabDto.input.kind) {\n            case TabInputKind.TextInput:\n                return new TextTabInput(URI.revive(this.tabDto.input.uri));\n            case TabInputKind.TextDiffInput:\n                return new TextDiffTabInput(URI.revive(this.tabDto.input.original), URI.revive(this.tabDto.input.modified));\n            case TabInputKind.TextMergeInput:\n                return new TextMergeTabInput(\n                    URI.revive(this.tabDto.input.base),\n                    URI.revive(this.tabDto.input.input1),\n                    URI.revive(this.tabDto.input.input2),\n                    URI.revive(this.tabDto.input.result));\n            case TabInputKind.CustomEditorInput:\n                return new CustomEditorTabInput(URI.revive(this.tabDto.input.uri), this.tabDto.input.viewType);\n            case TabInputKind.WebviewEditorInput:\n                return new WebviewEditorTabInput(this.tabDto.input.viewType);\n            case TabInputKind.NotebookInput:\n                return new NotebookEditorTabInput(URI.revive(this.tabDto.input.uri), this.tabDto.input.notebookType);\n            case TabInputKind.NotebookDiffInput:\n                return new NotebookDiffEditorTabInput(URI.revive(this.tabDto.input.original), URI.revive(this.tabDto.input.modified), this.tabDto.input.notebookType);\n            case TabInputKind.TerminalEditorInput:\n                return new TerminalEditorTabInput();\n            case TabInputKind.InteractiveEditorInput:\n                return new InteractiveWindowInput(URI.revive(this.tabDto.input.uri), URI.revive(this.tabDto.input.inputBoxUri));\n            default:\n                return undefined;\n        }\n    }\n}\n\nclass TabGroupExt {\n\n    private tabGroupApiObject: theia.TabGroup | undefined;\n    private tabGroupDto: TabGroupDto;\n    private tabsArr: TabExt[] = [];\n    private activeTabId: string = '';\n    private activeGroupIdGetter: () => number | undefined;\n\n    constructor(dto: TabGroupDto, activeGroupIdGetter: () => number | undefined) {\n        this.tabGroupDto = dto;\n        this.activeGroupIdGetter = activeGroupIdGetter;\n        // Construct all tabs from the given dto\n        for (const tabDto of dto.tabs) {\n            if (tabDto.isActive) {\n                this.activeTabId = tabDto.id;\n            }\n            this.tabsArr.push(new TabExt(tabDto, this, () => this.getActiveTabId()));\n        }\n    }\n\n    get apiObject(): theia.TabGroup {\n        if (!this.tabGroupApiObject) {\n            // Don't want to lose reference to parent `this` in the getters\n            const that = this;\n            const obj: theia.TabGroup = {\n                get isActive(): boolean {\n                    // We use a getter function here to always ensure at most 1 active group and prevent iteration for being required\n                    return that.tabGroupDto.groupId === that.activeGroupIdGetter();\n                },\n                get viewColumn(): theia.ViewColumn {\n                    return ViewColumn.to(that.tabGroupDto.viewColumn);\n                },\n                get activeTab(): theia.Tab | undefined {\n                    return that.tabsArr.find(tab => tab.tabId === that.activeTabId)?.apiObject;\n                },\n                get tabs(): Readonly<theia.Tab[]> {\n                    return Object.freeze(that.tabsArr.map(tab => tab.apiObject));\n                }\n            };\n            this.tabGroupApiObject = Object.freeze<theia.TabGroup>(obj);\n        }\n        return this.tabGroupApiObject;\n    }\n\n    get groupId(): number {\n        return this.tabGroupDto.groupId;\n    }\n\n    get tabs(): TabExt[] {\n        return this.tabsArr;\n    }\n\n    acceptGroupDtoUpdate(dto: TabGroupDto): void {\n        this.tabGroupDto = dto;\n    }\n\n    acceptTabOperation(operation: TabOperation): TabExt {\n        // In the open case we add the tab to the group\n        if (operation.kind === TabModelOperationKind.TAB_OPEN) {\n            const tab = new TabExt(operation.tabDto, this, () => this.getActiveTabId());\n            // Insert tab at editor index\n            this.tabsArr.splice(operation.index, 0, tab);\n            if (operation.tabDto.isActive) {\n                this.activeTabId = tab.tabId;\n            }\n            return tab;\n        } else if (operation.kind === TabModelOperationKind.TAB_CLOSE) {\n            const tab = this.tabsArr.splice(operation.index, 1)[0];\n            if (!tab) {\n                throw new Error(`Tab close updated received for index ${operation.index} which does not exist`);\n            }\n            if (tab.tabId === this.activeTabId) {\n                this.activeTabId = '';\n            }\n            return tab;\n        } else if (operation.kind === TabModelOperationKind.TAB_MOVE) {\n            if (operation.oldIndex === undefined) {\n                throw new Error('Invalid old index on move IPC');\n            }\n            // Splice to remove at old index and insert at new index === moving the tab\n            const tab = this.tabsArr.splice(operation.oldIndex, 1)[0];\n            if (!tab) {\n                throw new Error(`Tab move updated received for index ${operation.oldIndex} which does not exist`);\n            }\n            this.tabsArr.splice(operation.index, 0, tab);\n            return tab;\n        }\n        const _tab = this.tabsArr.find(extHostTab => extHostTab.tabId === operation.tabDto.id);\n        if (!_tab) {\n            throw new Error('INVALID tab');\n        }\n        if (operation.tabDto.isActive) {\n            this.activeTabId = operation.tabDto.id;\n        } else if (this.activeTabId === operation.tabDto.id && !operation.tabDto.isActive) {\n            // Events aren't guaranteed to be in order so if we receive a dto that matches the active tab id\n            // but isn't active we mark the active tab id as empty. This prevent onDidActiveTabChange from\n            // firing incorrectly\n            this.activeTabId = '';\n        }\n        _tab.acceptDtoUpdate(operation.tabDto);\n        return _tab;\n    }\n\n    // Not a getter since it must be a function to be used as a callback for the tabs\n    getActiveTabId(): string {\n        return this.activeTabId;\n    }\n}\n\nexport class TabsExtImpl implements TabsExt {\n    declare readonly _serviceBrand: undefined;\n\n    private readonly proxy: TabsMain;\n    private readonly onDidChangeTabs = new Emitter<theia.TabChangeEvent>();\n    private readonly onDidChangeTabGroups = new Emitter<theia.TabGroupChangeEvent>();\n\n    // Have to use ! because this gets initialized via an RPC proxy\n    private activeGroupId!: number;\n\n    private tabGroupArr: TabGroupExt[] = [];\n\n    private apiObject: theia.TabGroups | undefined;\n\n    constructor(readonly rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TABS_MAIN);\n    }\n\n    get tabGroups(): theia.TabGroups {\n        if (!this.apiObject) {\n            const that = this;\n            const obj: theia.TabGroups = {\n                // never changes -> simple value\n                onDidChangeTabGroups: that.onDidChangeTabGroups.event,\n                onDidChangeTabs: that.onDidChangeTabs.event,\n                // dynamic -> getters\n                get all(): Readonly<theia.TabGroup[]> {\n                    return Object.freeze(that.tabGroupArr.map(group => group.apiObject));\n                },\n                get activeTabGroup(): theia.TabGroup {\n                    const activeTabGroupId = that.activeGroupId;\n                    const activeTabGroup = assertIsDefined(that.tabGroupArr.find(candidate => candidate.groupId === activeTabGroupId)?.apiObject);\n                    return activeTabGroup;\n                },\n                close: async (tabOrTabGroup: theia.Tab | readonly theia.Tab[] | theia.TabGroup | readonly theia.TabGroup[], preserveFocus?: boolean) => {\n                    const tabsOrTabGroups = Array.isArray(tabOrTabGroup) ? tabOrTabGroup : [tabOrTabGroup];\n                    if (!tabsOrTabGroups.length) {\n                        return true;\n                    }\n                    // Check which type was passed in and call the appropriate close\n                    // Casting is needed as typescript doesn't seem to infer enough from this\n                    if (isTabGroup(tabsOrTabGroups[0])) {\n                        return this._closeGroups(tabsOrTabGroups as theia.TabGroup[], preserveFocus);\n                    } else {\n                        return this._closeTabs(tabsOrTabGroups as theia.Tab[], preserveFocus);\n                    }\n                },\n            };\n            this.apiObject = Object.freeze(obj);\n        }\n        return this.apiObject;\n    }\n\n    $acceptEditorTabModel(tabGroups: TabGroupDto[]): void {\n        const groupIdsBefore = new Set(this.tabGroupArr.map(group => group.groupId));\n        const groupIdsAfter = new Set(tabGroups.map(dto => dto.groupId));\n        const diff = diffSets(groupIdsBefore, groupIdsAfter);\n\n        const closed: theia.TabGroup[] = this.tabGroupArr.filter(group => diff.removed.includes(group.groupId)).map(group => group.apiObject);\n        const opened: theia.TabGroup[] = [];\n        const changed: theia.TabGroup[] = [];\n        const tabsOpened: theia.Tab[] = [];\n\n        this.tabGroupArr = tabGroups.map(tabGroup => {\n            const group = new TabGroupExt(tabGroup, () => this.activeGroupId);\n            if (diff.added.includes(group.groupId)) {\n                opened.push({ activeTab: undefined, isActive: group.apiObject.isActive, tabs: [], viewColumn: group.apiObject.viewColumn });\n                tabsOpened.push(...group.apiObject.tabs);\n            } else {\n                changed.push(group.apiObject);\n            }\n            return group;\n        });\n\n        // Set the active tab group id. skip if no tabgroups are open\n        if (tabGroups.length > 0) {\n            const activeTabGroupId = assertIsDefined(tabGroups.find(group => group.isActive === true)?.groupId);\n            if (this.activeGroupId !== activeTabGroupId) {\n                this.activeGroupId = activeTabGroupId;\n            }\n        }\n        this.onDidChangeTabGroups.fire(Object.freeze({ opened, closed, changed }));\n        this.onDidChangeTabs.fire({ opened: tabsOpened, changed: [], closed: [] });\n    }\n\n    $acceptTabGroupUpdate(groupDto: TabGroupDto): void {\n        const group = this.tabGroupArr.find(tabGroup => tabGroup.groupId === groupDto.groupId);\n        if (!group) {\n            throw new Error('Update Group IPC call received before group creation.');\n        }\n        group.acceptGroupDtoUpdate(groupDto);\n        if (groupDto.isActive) {\n            this.activeGroupId = groupDto.groupId;\n        }\n        this.onDidChangeTabGroups.fire(Object.freeze({ changed: [group.apiObject], opened: [], closed: [] }));\n    }\n\n    $acceptTabOperation(operation: TabOperation): void {\n        const group = this.tabGroupArr.find(tabGroup => tabGroup.groupId === operation.groupId);\n        if (!group) {\n            throw new Error('Update Tabs IPC call received before group creation.');\n        }\n        const tab = group.acceptTabOperation(operation);\n\n        // Construct the tab change event based on the operation\n        switch (operation.kind) {\n            case TabModelOperationKind.TAB_OPEN:\n                this.onDidChangeTabs.fire(Object.freeze({\n                    opened: [tab.apiObject],\n                    closed: [],\n                    changed: []\n                }));\n                return;\n            case TabModelOperationKind.TAB_CLOSE:\n                this.onDidChangeTabs.fire(Object.freeze({\n                    opened: [],\n                    closed: [tab.apiObject],\n                    changed: []\n                }));\n                return;\n            case TabModelOperationKind.TAB_MOVE:\n            case TabModelOperationKind.TAB_UPDATE:\n                this.onDidChangeTabs.fire(Object.freeze({\n                    opened: [],\n                    closed: [],\n                    changed: [tab.apiObject]\n                }));\n                return;\n        }\n    }\n\n    private _findExtHostTabFromApi(apiTab: theia.Tab): TabExt | undefined {\n        for (const group of this.tabGroupArr) {\n            for (const tab of group.tabs) {\n                if (tab.apiObject === apiTab) {\n                    return tab;\n                }\n            }\n        }\n        return;\n    }\n\n    private _findExtHostTabGroupFromApi(apiTabGroup: theia.TabGroup): TabGroupExt | undefined {\n        return this.tabGroupArr.find(candidate => candidate.apiObject === apiTabGroup);\n    }\n\n    private async _closeTabs(tabs: theia.Tab[], preserveFocus?: boolean): Promise<boolean> {\n        const extHostTabIds: string[] = [];\n        for (const tab of tabs) {\n            const extHostTab = this._findExtHostTabFromApi(tab);\n            if (!extHostTab) {\n                throw new Error('Tab close: Invalid tab not found!');\n            }\n            extHostTabIds.push(extHostTab.tabId);\n        }\n        return this.proxy.$closeTab(extHostTabIds, preserveFocus);\n    }\n\n    private async _closeGroups(groups: theia.TabGroup[], preserveFocus?: boolean): Promise<boolean> {\n        const extHostGroupIds: number[] = [];\n        for (const group of groups) {\n            const extHostGroup = this._findExtHostTabGroupFromApi(group);\n            if (!extHostGroup) {\n                throw new Error('Group close: Invalid group not found!');\n            }\n            extHostGroupIds.push(extHostGroup.groupId);\n        }\n        return this.proxy.$closeGroup(extHostGroupIds, preserveFocus);\n    }\n}\n\n// #region Utils\nfunction isTabGroup(obj: unknown): obj is theia.TabGroup {\n    const tabGroup = obj as theia.TabGroup;\n    if (tabGroup.tabs !== undefined) {\n        return true;\n    }\n    return false;\n}\n// #endregion\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { TaskDto } from '../../common';\nimport * as Converter from '../type-converters';\n\nexport class TaskProviderAdapter {\n\n    constructor(private readonly provider: theia.TaskProvider) { }\n\n    provideTasks(token: theia.CancellationToken): Promise<TaskDto[]> {\n        return Promise.resolve(this.provider.provideTasks(token)).then(tasks => {\n            if (!Array.isArray(tasks)) {\n                return [];\n            }\n            const result: TaskDto[] = [];\n            for (const task of tasks) {\n                const data = Converter.fromTask(task);\n                if (!data) {\n                    continue;\n                }\n\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    async resolveTask(task: TaskDto, token: theia.CancellationToken): Promise<TaskDto> {\n        if (typeof this.provider.resolveTask !== 'function') {\n            return task;\n        }\n\n        const item = Converter.toTask(task);\n        if (!item) {\n            return task;\n        }\n\n        const resolved = await this.provider.resolveTask(item, token);\n        const converted = resolved ? Converter.fromTask(resolved) : Converter.fromTask(item);\n        return converted ?? task;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    TasksExt,\n    TasksMain,\n    TaskDto,\n    TaskExecutionDto\n} from '../../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport * as converter from '../type-converters';\nimport { CustomExecution, Disposable } from '../types-impl';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { TaskProviderAdapter } from './task-provider';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { TerminalServiceExtImpl } from '../terminal-ext';\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\n\ntype ExecutionCallback = (resolvedDefinition: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>;\nexport class TasksExtImpl implements TasksExt {\n    private proxy: TasksMain;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, TaskProviderAdapter>();\n    private executions = new Map<number, theia.TaskExecution>();\n    protected callbackIdBase: string = UUID.uuid4();\n    protected callbackId: number;\n    protected customExecutionIds: Map<ExecutionCallback, string> = new Map();\n    protected customExecutionFunctions: Map<string, ExecutionCallback> = new Map();\n    protected lastStartedTask: number | undefined;\n\n    private readonly onDidExecuteTask: Emitter<theia.TaskStartEvent> = new Emitter<theia.TaskStartEvent>();\n    private readonly onDidTerminateTask: Emitter<theia.TaskEndEvent> = new Emitter<theia.TaskEndEvent>();\n    private readonly onDidExecuteTaskProcess: Emitter<theia.TaskProcessStartEvent> = new Emitter<theia.TaskProcessStartEvent>();\n    private readonly onDidTerminateTaskProcess: Emitter<theia.TaskProcessEndEvent> = new Emitter<theia.TaskProcessEndEvent>();\n\n    constructor(rpc: RPCProtocol, readonly terminalExt: TerminalServiceExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TASKS_MAIN);\n    }\n\n    get taskExecutions(): ReadonlyArray<theia.TaskExecution> {\n        return [...this.executions.values()];\n    }\n\n    get onDidStartTask(): Event<theia.TaskStartEvent> {\n        return this.onDidExecuteTask.event;\n    }\n\n    async $onDidStartTask(execution: TaskExecutionDto, terminalId: number): Promise<void> {\n        const customExecution = this.customExecutionFunctions.get(execution.task.executionId || '');\n        if (customExecution) {\n            const taskDefinition = converter.toTask(execution.task).definition;\n            const pty = await customExecution(taskDefinition);\n            this.terminalExt.attachPtyToTerminal(terminalId, pty);\n            if (pty.onDidClose) {\n                const disposable = pty.onDidClose((e: number | void = undefined) => {\n                    disposable.dispose();\n                    // eslint-disable-next-line no-void\n                    this.proxy.$customExecutionComplete(execution.id, e === void 0 ? undefined : e);\n                });\n            }\n        }\n        this.lastStartedTask = execution.id;\n\n        this.onDidExecuteTask.fire({\n            execution: this.getTaskExecution(execution)\n        });\n    }\n\n    get onDidEndTask(): Event<theia.TaskEndEvent> {\n        return this.onDidTerminateTask.event;\n    }\n\n    $onDidEndTask(id: number): void {\n        const taskExecution = this.executions.get(id);\n        if (!taskExecution) {\n            throw new Error(`Task execution with id ${id} is not found`);\n        }\n\n        this.executions.delete(id);\n\n        this.onDidTerminateTask.fire({\n            execution: taskExecution\n        });\n    }\n\n    get onDidStartTaskProcess(): Event<theia.TaskProcessStartEvent> {\n        return this.onDidExecuteTaskProcess.event;\n    }\n\n    $onDidStartTaskProcess(processId: number, executionDto: TaskExecutionDto): void {\n        this.onDidExecuteTaskProcess.fire({\n            processId,\n            execution: this.getTaskExecution(executionDto)\n        });\n    }\n\n    get onDidEndTaskProcess(): Event<theia.TaskProcessEndEvent> {\n        return this.onDidTerminateTaskProcess.event;\n    }\n\n    $onDidEndTaskProcess(exitCode: number, taskId: number): void {\n        const taskExecution = this.executions.get(taskId);\n        if (!taskExecution) {\n            throw new Error(`Task execution with id ${taskId} is not found`);\n        }\n\n        this.onDidTerminateTaskProcess.fire({\n            execution: taskExecution,\n            exitCode\n        });\n    }\n\n    registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new TaskProviderAdapter(provider));\n        this.proxy.$registerTaskProvider(callId, type);\n        return this.createDisposable(callId);\n    }\n\n    async fetchTasks(filter?: theia.TaskFilter): Promise<theia.Task[]> {\n        const taskVersion = filter ? filter.version : undefined;\n        const taskType = filter ? filter.type : undefined;\n        const taskDtos = await this.proxy.$fetchTasks(taskVersion, taskType);\n        return taskDtos.map(dto => converter.toTask(dto));\n    }\n\n    async executeTask(task: theia.Task): Promise<theia.TaskExecution> {\n        const taskDto = converter.fromTask(task);\n        if (taskDto) {\n            // If this task is a custom execution, then we need to save it away\n            // in the provided custom execution map that is cleaned up after the\n            // task is executed.\n            if (CustomExecution.is(task.execution!)) {\n                taskDto.executionId = this.addCustomExecution(task.execution!.callback);\n            }\n            const executionDto = await this.proxy.$executeTask(taskDto);\n            if (executionDto) {\n                const taskExecution = this.getTaskExecution(executionDto);\n                return taskExecution;\n            }\n            throw new Error('Run task config does not return after being started');\n        }\n        throw new Error('Task was not successfully transformed into a task config');\n    }\n\n    async $provideTasks(handle: number): Promise<TaskDto[]> {\n        const adapter = this.adaptersMap.get(handle);\n        if (adapter) {\n            return adapter.provideTasks(CancellationToken.None).then(tasks => {\n                for (const task of tasks) {\n                    if (task.taskType === 'customExecution') {\n                        this.applyCustomExecution(task);\n                    }\n                }\n                return tasks;\n            });\n        } else {\n            throw new Error('No adapter found to provide tasks');\n        }\n    }\n\n    async $resolveTask(handle: number, task: TaskDto, token: theia.CancellationToken): Promise<TaskDto> {\n        const adapter = this.adaptersMap.get(handle);\n        if (adapter) {\n            return adapter.resolveTask(task, token).then(resolvedTask => {\n                // ensure we do not lose task type and execution id during resolution as we need it for custom execution\n                resolvedTask.taskType = resolvedTask.taskType ?? task.taskType;\n                if (resolvedTask.taskType === 'customExecution') {\n                    this.applyCustomExecution(resolvedTask);\n                }\n                return resolvedTask;\n            });\n        } else {\n            throw new Error('No adapter found to resolve task');\n        }\n    }\n\n    private applyCustomExecution(task: TaskDto): void {\n        if (task.callback) {\n            task.executionId = this.addCustomExecution(task.callback);\n            task.callback = undefined;\n        }\n    }\n\n    private addNewAdapter(adapter: TaskProviderAdapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n        });\n    }\n\n    // Initial `this.executions` map with the running tasks from the previous session\n    async $initLoadedTasks(taskExecutions: TaskExecutionDto[]): Promise<void> {\n        taskExecutions.forEach(execution => this.getTaskExecution(execution));\n    }\n\n    private getTaskExecution(execution: TaskExecutionDto): theia.TaskExecution {\n        const executionId = execution.id;\n        let result: theia.TaskExecution | undefined = this.executions.get(executionId);\n        if (result) {\n            return result;\n        }\n\n        result = {\n            task: converter.toTask(execution.task),\n            terminate: () => {\n                this.proxy.$terminateTask(executionId);\n            }\n        };\n        this.executions.set(executionId, result);\n        return result;\n    }\n\n    private addCustomExecution(callback: ExecutionCallback): string {\n        let id = this.customExecutionIds.get(callback);\n        if (!id) {\n            id = this.nextCallbackId();\n            this.customExecutionIds.set(callback, id);\n            this.customExecutionFunctions.set(id, callback);\n        }\n        return id;\n    }\n\n    private nextCallbackId(): string {\n        return this.callbackIdBase + this.callbackId++;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { cloneAndChange } from '@theia/core';\nimport { mixin } from '../common/types';\nimport { TelemetryTrustedValue, TelemetryLoggerOptions } from './types-impl';\n\nexport class TelemetryExtImpl {\n\n    _isTelemetryEnabled: boolean = false; // telemetry not activated by default\n    private readonly onDidChangeTelemetryEnabledEmitter = new Emitter<boolean>();\n    readonly onDidChangeTelemetryEnabled: Event<boolean> = this.onDidChangeTelemetryEnabledEmitter.event;\n\n    get isTelemetryEnabled(): boolean {\n        return this._isTelemetryEnabled;\n    }\n\n    set isTelemetryEnabled(isTelemetryEnabled: boolean) {\n        if (this._isTelemetryEnabled !== isTelemetryEnabled) {\n            this._isTelemetryEnabled = isTelemetryEnabled;\n            this.onDidChangeTelemetryEnabledEmitter.fire(this._isTelemetryEnabled);\n        }\n    }\n\n    createTelemetryLogger(sender: TelemetrySender, options?: TelemetryLoggerOptions | undefined): TelemetryLogger {\n        const logger = new TelemetryLogger(sender, this._isTelemetryEnabled, options);\n        this.onDidChangeTelemetryEnabled(isEnabled => {\n            logger.telemetryEnabled = isEnabled;\n        });\n        return logger;\n    }\n}\n\nexport class TelemetryLogger {\n    private sender: TelemetrySender | undefined;\n    readonly options: TelemetryLoggerOptions | undefined;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    readonly commonProperties: Record<string, any>;\n    telemetryEnabled: boolean;\n\n    private readonly onDidChangeEnableStatesEmitter: Emitter<TelemetryLogger> = new Emitter();\n    readonly onDidChangeEnableStates: Event<TelemetryLogger> = this.onDidChangeEnableStatesEmitter.event;\n    private _isUsageEnabled: boolean;\n    private _isErrorsEnabled: boolean;\n\n    constructor(sender: TelemetrySender, telemetryEnabled: boolean, options?: TelemetryLoggerOptions) {\n        this.sender = sender;\n        this.options = options;\n        this.commonProperties = this.getCommonProperties();\n        this._isErrorsEnabled = true;\n        this._isUsageEnabled = true;\n        this.telemetryEnabled = telemetryEnabled;\n    }\n\n    get isUsageEnabled(): boolean {\n        return this._isUsageEnabled;\n    }\n\n    set isUsageEnabled(isUsageEnabled: boolean) {\n        if (this._isUsageEnabled !== isUsageEnabled) {\n            this._isUsageEnabled = isUsageEnabled;\n            this.onDidChangeEnableStatesEmitter.fire(this);\n        }\n    }\n\n    get isErrorsEnabled(): boolean {\n        return this._isErrorsEnabled;\n    }\n\n    set isErrorsEnabled(isErrorsEnabled: boolean) {\n        if (this._isErrorsEnabled !== isErrorsEnabled) {\n            this._isErrorsEnabled = isErrorsEnabled;\n            this.onDidChangeEnableStatesEmitter.fire(this);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logUsage(eventName: string, data?: Record<string, any | TelemetryTrustedValue<any>>): void {\n        if (!this.telemetryEnabled || !this.isUsageEnabled) {\n            return;\n        }\n        this.logEvent(eventName, data);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logError(eventNameOrException: string | Error, data?: Record<string, any | TelemetryTrustedValue<any>>): void {\n        if (!this.telemetryEnabled || !this.isErrorsEnabled || !this.sender) {\n            // no sender available or error shall not be sent\n            return;\n        }\n        if (typeof eventNameOrException === 'string') {\n            this.logEvent(eventNameOrException, data);\n        } else {\n            this.sender.sendErrorData(eventNameOrException, data);\n        }\n    }\n\n    dispose(): void {\n        if (this.sender?.flush) {\n            let tempSender: TelemetrySender | undefined = this.sender;\n            this.sender = undefined;\n            Promise.resolve(tempSender.flush!()).then(tempSender = undefined);\n        } else {\n            this.sender = undefined;\n        }\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private logEvent(eventName: string, data?: Record<string, any>): void {\n        // No sender means likely disposed of, we should no-op\n        if (!this.sender) {\n            return;\n        }\n        data = mixInCommonPropsAndCleanData(data || {}, this.options?.additionalCommonProperties, this.options?.ignoreBuiltInCommonProperties ? undefined : this.commonProperties);\n        this.sender?.sendEventData(eventName, data);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private getCommonProperties(): Record<string, any> {\n        return [];\n    }\n}\n\ninterface TelemetrySender {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    sendEventData(eventName: string, data?: Record<string, any>): void;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    sendErrorData(error: Error, data?: Record<string, any>): void;\n    flush?(): void | Thenable<void>;\n}\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.76.0/src/vs/workbench/api/common/extHostTelemetry.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction mixInCommonPropsAndCleanData(data: Record<string, any>, additionalProperties?: Record<string, any>, commonProperties?: Record<string, any>): Record<string, any> {\n    let updatedData = data.properties ?? data;\n\n    // We don't clean measurements since they are just numbers\n    updatedData = cleanData(updatedData, []);\n\n    if (additionalProperties) {\n        updatedData = mixin(updatedData, additionalProperties);\n    }\n\n    if (commonProperties) {\n        updatedData = mixin(updatedData, commonProperties);\n    }\n\n    if (data.properties) {\n        data.properties = updatedData;\n    } else {\n        data = updatedData;\n    }\n\n    return data;\n}\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.76.0/src/vs/platform/telemetry/common/telemetryUtils.ts#L321-L442\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Cleans a given stack of possible paths\n * @param stack The stack to sanitize\n * @param cleanupPatterns Cleanup patterns to remove from the stack\n * @returns The cleaned stack\n */\nfunction anonymizeFilePaths(stack: string, cleanupPatterns: RegExp[]): string {\n\n    // Fast check to see if it is a file path to avoid doing unnecessary heavy regex work\n    if (!stack || (!stack.includes('/') && !stack.includes('\\\\'))) {\n        return stack;\n    }\n\n    let updatedStack = stack;\n\n    const cleanUpIndexes: [number, number][] = [];\n    for (const regexp of cleanupPatterns) {\n        while (true) {\n            const result = regexp.exec(stack);\n            if (!result) {\n                break;\n            }\n            cleanUpIndexes.push([result.index, regexp.lastIndex]);\n        }\n    }\n\n    const nodeModulesRegex = /^[\\\\\\/]?(node_modules|node_modules\\.asar)[\\\\\\/]/;\n    const fileRegex = /(file:\\/\\/)?([a-zA-Z]:(\\\\\\\\|\\\\|\\/)|(\\\\\\\\|\\\\|\\/))?([\\w-\\._]+(\\\\\\\\|\\\\|\\/))+[\\w-\\._]*/g;\n    let lastIndex = 0;\n    updatedStack = '';\n\n    while (true) {\n        const result = fileRegex.exec(stack);\n        if (!result) {\n            break;\n        }\n\n        // Check to see if the any cleanupIndexes partially overlap with this match\n        const overlappingRange = cleanUpIndexes.some(([start, end]) => result.index < end && start < fileRegex.lastIndex);\n\n        // anonymize user file paths that do not need to be retained or cleaned up.\n        if (!nodeModulesRegex.test(result[0]) && !overlappingRange) {\n            updatedStack += stack.substring(lastIndex, result.index) + '<REDACTED: user-file-path>';\n            lastIndex = fileRegex.lastIndex;\n        }\n    }\n    if (lastIndex < stack.length) {\n        updatedStack += stack.substring(lastIndex);\n    }\n\n    return updatedStack;\n}\n\n/**\n * Attempts to remove commonly leaked PII\n * @param property The property which will be removed if it contains user data\n * @returns The new value for the property\n */\nfunction removePropertiesWithPossibleUserInfo(property: string): string {\n    // If for some reason it is undefined we skip it (this shouldn't be possible);\n    if (!property) {\n        return property;\n    }\n\n    const value = property.toLowerCase();\n\n    const userDataRegexes = [\n        { label: 'Google API Key', regex: /AIza[0-9A-Za-z-_]{35}/ },\n        { label: 'Slack Token', regex: /xox[pbar]\\-[A-Za-z0-9]/ },\n        { label: 'Generic Secret', regex: /(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/ },\n        { label: 'Email', regex: /@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-]+/ } // Regex which matches @*.site\n    ];\n\n    // Check for common user data in the telemetry events\n    for (const secretRegex of userDataRegexes) {\n        if (secretRegex.regex.test(value)) {\n            return `<REDACTED: ${secretRegex.label}>`;\n        }\n    }\n\n    return property;\n}\n\n/**\n * Does a best possible effort to clean a data object from any possible PII.\n * @param data The data object to clean\n * @param paths Any additional patterns that should be removed from the data set\n * @returns A new object with the PII removed\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function cleanData(data: Record<string, any>, cleanUpPatterns: RegExp[]): Record<string, any> {\n    return cloneAndChange(data, value => {\n\n        // If it's a trusted value it means it's okay to skip cleaning so we don't clean it\n        if (value instanceof TelemetryTrustedValue) {\n            return value.value;\n        }\n\n        // We only know how to clean strings\n        if (typeof value === 'string') {\n            let updatedProperty = value.replace(/%20/g, ' ');\n\n            // First we anonymize any possible file paths\n            updatedProperty = anonymizeFilePaths(updatedProperty, cleanUpPatterns);\n\n            // Then we do a simple regex replace with the defined patterns\n            for (const regexp of cleanUpPatterns) {\n                updatedProperty = updatedProperty.replace(regexp, '');\n            }\n\n            // Lastly, remove commonly leaked PII\n            updatedProperty = removePropertiesWithPossibleUserInfo(updatedProperty);\n\n            return updatedProperty;\n        }\n        return undefined;\n    }, new Set());\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\nimport { Terminal, TerminalOptions, PseudoTerminalOptions, ExtensionTerminalOptions, TerminalState } from '@theia/plugin';\nimport { TerminalServiceExt, TerminalServiceMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport * as theia from '@theia/plugin';\nimport * as Converter from './type-converters';\nimport { Disposable, EnvironmentVariableMutatorType, TerminalExitReason, ThemeIcon } from './types-impl';\nimport { SerializableEnvironmentVariableCollection } from '@theia/terminal/lib/common/base-terminal-protocol';\nimport { ProvidedTerminalLink } from '../common/plugin-api-rpc-model';\nimport { ThemeIcon as MonacoThemeIcon } from '@theia/monaco-editor-core/esm/vs/platform/theme/common/themeService';\n\nexport function getIconUris(iconPath: theia.TerminalOptions['iconPath']): { id: string } | undefined {\n    if (ThemeIcon.is(iconPath)) {\n        return { id: iconPath.id };\n    }\n    return undefined;\n}\n\nexport function getIconClass(options: theia.TerminalOptions | theia.ExtensionTerminalOptions): string | undefined {\n    const iconClass = getIconUris(options.iconPath);\n    if (iconClass) {\n        return MonacoThemeIcon.asClassName(iconClass);\n    }\n    return undefined;\n}\n\n/**\n * Provides high level terminal plugin api to use in the Theia plugins.\n * This service allow(with help proxy) create and use terminal emulator.\n */\nexport class TerminalServiceExtImpl implements TerminalServiceExt {\n\n    private readonly proxy: TerminalServiceMain;\n\n    private readonly _terminals = new Map<string, TerminalExtImpl>();\n\n    private readonly _pseudoTerminals = new Map<string, PseudoTerminal>();\n\n    private static nextProviderId = 0;\n    private readonly terminalLinkProviders = new Map<string, theia.TerminalLinkProvider>();\n    private readonly terminalProfileProviders = new Map<string, theia.TerminalProfileProvider>();\n    private readonly onDidCloseTerminalEmitter = new Emitter<Terminal>();\n    readonly onDidCloseTerminal: theia.Event<Terminal> = this.onDidCloseTerminalEmitter.event;\n\n    private readonly onDidOpenTerminalEmitter = new Emitter<Terminal>();\n    readonly onDidOpenTerminal: theia.Event<Terminal> = this.onDidOpenTerminalEmitter.event;\n\n    private readonly onDidChangeActiveTerminalEmitter = new Emitter<Terminal | undefined>();\n    readonly onDidChangeActiveTerminal: theia.Event<Terminal | undefined> = this.onDidChangeActiveTerminalEmitter.event;\n\n    private readonly onDidChangeTerminalStateEmitter = new Emitter<Terminal>();\n    readonly onDidChangeTerminalState: theia.Event<Terminal> = this.onDidChangeTerminalStateEmitter.event;\n\n    protected environmentVariableCollections: Map<string, EnvironmentVariableCollection> = new Map();\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TERMINAL_MAIN);\n    }\n\n    get terminals(): TerminalExtImpl[] {\n        return [...this._terminals.values()];\n    }\n\n    createTerminal(\n        nameOrOptions: TerminalOptions | PseudoTerminalOptions | ExtensionTerminalOptions | (string | undefined),\n        shellPath?: string, shellArgs?: string[] | string\n    ): Terminal {\n        const id = `plugin-terminal-${UUID.uuid4()}`;\n        let options: TerminalOptions;\n        let pseudoTerminal: theia.Pseudoterminal | undefined = undefined;\n        if (typeof nameOrOptions === 'object') {\n            if ('pty' in nameOrOptions) {\n                pseudoTerminal = nameOrOptions.pty;\n                options = {\n                    name: nameOrOptions.name,\n                };\n                this._pseudoTerminals.set(id, new PseudoTerminal(id, this.proxy, pseudoTerminal));\n            } else {\n                options = nameOrOptions;\n            }\n        } else {\n            options = {\n                name: nameOrOptions,\n                shellPath: shellPath,\n                shellArgs: shellArgs\n            };\n        }\n\n        let parentId;\n\n        if (options.location && typeof options.location === 'object' && 'parentTerminal' in options.location) {\n            const parentTerminal = options.location.parentTerminal;\n            if (parentTerminal instanceof TerminalExtImpl) {\n                for (const [k, v] of this._terminals) {\n                    if (v === parentTerminal) {\n                        parentId = k;\n                        break;\n                    }\n                }\n            }\n        }\n\n        this.proxy.$createTerminal(id, options, parentId, !!pseudoTerminal);\n\n        let creationOptions: theia.TerminalOptions | theia.ExtensionTerminalOptions = options;\n        // make sure to pass ExtensionTerminalOptions as creation options\n        if (typeof nameOrOptions === 'object' && 'pty' in nameOrOptions) {\n            creationOptions = nameOrOptions;\n        }\n        return this.obtainTerminal(id, options.name || 'Terminal', creationOptions);\n    }\n\n    attachPtyToTerminal(terminalId: number, pty: theia.Pseudoterminal): void {\n        this._pseudoTerminals.set(terminalId.toString(), new PseudoTerminal(terminalId, this.proxy, pty, true));\n    }\n\n    protected obtainTerminal(id: string, name: string, options?: theia.TerminalOptions | theia.ExtensionTerminalOptions): TerminalExtImpl {\n        let terminal = this._terminals.get(id);\n        if (!terminal) {\n            terminal = new TerminalExtImpl(this.proxy, options ?? {});\n            this._terminals.set(id, terminal);\n        }\n        terminal.name = name;\n        return terminal;\n    }\n\n    $terminalOnInput(id: string, data: string): void {\n        const terminal = this._pseudoTerminals.get(id);\n        if (!terminal) {\n            return;\n        }\n        terminal.emitOnInput(data);\n    }\n\n    $terminalStateChanged(id: string): void {\n        const terminal = this._terminals.get(id);\n        if (!terminal) {\n            return;\n        }\n        if (!terminal.state.isInteractedWith) {\n            terminal.state = { isInteractedWith: true };\n            this.onDidChangeTerminalStateEmitter.fire(terminal);\n        }\n    }\n\n    $terminalSizeChanged(id: string, clos: number, rows: number): void {\n        const terminal = this._pseudoTerminals.get(id);\n        if (!terminal) {\n            return;\n        }\n        terminal.emitOnResize(clos, rows);\n    }\n\n    $terminalCreated(id: string, name: string): void {\n        const terminal = this.obtainTerminal(id, name);\n        terminal.id.resolve(id);\n        this.onDidOpenTerminalEmitter.fire(terminal);\n    }\n\n    $terminalNameChanged(id: string, name: string): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            terminal.name = name;\n        }\n    }\n\n    $terminalOpened(id: string, processId: number, terminalId: number, cols: number, rows: number): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            // resolve for existing clients\n            terminal.deferredProcessId.resolve(processId);\n            // install new if terminal is reconnected\n            terminal.deferredProcessId = new Deferred<number>();\n            terminal.deferredProcessId.resolve(processId);\n        }\n\n        // Switch the pseudoterminal keyed by terminalId to be keyed by terminal ID\n        const tId = terminalId.toString();\n        if (this._pseudoTerminals.has(tId)) {\n            const pseudo = this._pseudoTerminals.get(tId);\n            if (pseudo) {\n                this._pseudoTerminals.set(id, pseudo);\n            }\n            this._pseudoTerminals.delete(tId);\n        }\n\n        const pseudoTerminal = this._pseudoTerminals.get(id);\n        if (pseudoTerminal) {\n            pseudoTerminal.emitOnOpen(cols, rows);\n        }\n    }\n\n    $terminalClosed(id: string, exitStatus: theia.TerminalExitStatus | undefined): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            terminal.exitStatus = exitStatus ?? { code: undefined, reason: TerminalExitReason.Unknown };\n            this.onDidCloseTerminalEmitter.fire(terminal);\n            this._terminals.delete(id);\n        }\n        const pseudoTerminal = this._pseudoTerminals.get(id);\n        if (pseudoTerminal) {\n            pseudoTerminal.emitOnClose();\n            this._pseudoTerminals.delete(id);\n        }\n    }\n\n    private activeTerminalId: string | undefined;\n    get activeTerminal(): TerminalExtImpl | undefined {\n        return this.activeTerminalId && this._terminals.get(this.activeTerminalId) || undefined;\n    }\n    $currentTerminalChanged(id: string | undefined): void {\n        this.activeTerminalId = id;\n        this.onDidChangeActiveTerminalEmitter.fire(this.activeTerminal);\n    }\n\n    registerTerminalLinkProvider(provider: theia.TerminalLinkProvider): theia.Disposable {\n        const providerId = (TerminalServiceExtImpl.nextProviderId++).toString();\n        this.terminalLinkProviders.set(providerId, provider);\n        this.proxy.$registerTerminalLinkProvider(providerId);\n        return Disposable.create(() => {\n            this.proxy.$unregisterTerminalLinkProvider(providerId);\n            this.terminalLinkProviders.delete(providerId);\n        });\n    }\n\n    registerTerminalProfileProvider(id: string, provider: theia.TerminalProfileProvider): theia.Disposable {\n        this.terminalProfileProviders.set(id, provider);\n        return Disposable.create(() => {\n            this.terminalProfileProviders.delete(id);\n        });\n    }\n\n    /** @stubbed */\n    registerTerminalQuickFixProvider(id: string, provider: theia.TerminalQuickFixProvider): theia.Disposable {\n        return Disposable.NULL;\n    }\n\n    protected isExtensionTerminalOptions(options: theia.TerminalOptions | theia.ExtensionTerminalOptions): options is theia.ExtensionTerminalOptions {\n        return 'pty' in options;\n    }\n\n    async $startProfile(profileId: string, cancellationToken: theia.CancellationToken): Promise<string> {\n        const provider = this.terminalProfileProviders.get(profileId);\n        if (!provider) {\n            throw new Error(`No terminal profile provider with id '${profileId}'`);\n        }\n        const profile = await provider.provideTerminalProfile(cancellationToken);\n        if (!profile) {\n            throw new Error(`Profile with id ${profileId} could not be created`);\n        }\n        const id = `plugin-terminal-${UUID.uuid4()}`;\n        const options = profile.options;\n        if (this.isExtensionTerminalOptions(options)) {\n            this._pseudoTerminals.set(id, new PseudoTerminal(id, this.proxy, options.pty));\n            return this.proxy.$createTerminal(id, { name: options.name }, undefined, true);\n        } else {\n            return this.proxy.$createTerminal(id, profile.options);\n        }\n    }\n\n    async $provideTerminalLinks(line: string, terminalId: string, token: theia.CancellationToken): Promise<ProvidedTerminalLink[]> {\n        const links: ProvidedTerminalLink[] = [];\n        const terminal = this._terminals.get(terminalId);\n        if (terminal) {\n            for (const [providerId, provider] of this.terminalLinkProviders) {\n                const providedLinks = await provider.provideTerminalLinks({ line, terminal }, token);\n                if (providedLinks) {\n                    links.push(...providedLinks.map(link => ({ ...link, providerId })));\n                }\n            }\n        }\n        return links;\n    }\n\n    async $handleTerminalLink(link: ProvidedTerminalLink): Promise<void> {\n        const provider = this.terminalLinkProviders.get(link.providerId);\n        if (!provider) {\n            throw Error('Terminal link provider not found');\n        }\n        await provider.handleTerminalLink(link);\n    }\n\n    /*---------------------------------------------------------------------------------------------\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\n     *--------------------------------------------------------------------------------------------*/\n    // some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.0/src/vs/workbench/api/common/extHostTerminalService.ts\n\n    getEnvironmentVariableCollection(extensionIdentifier: string): theia.EnvironmentVariableCollection {\n        let collection = this.environmentVariableCollections.get(extensionIdentifier);\n        if (!collection) {\n            collection = new EnvironmentVariableCollection();\n            this.setEnvironmentVariableCollection(extensionIdentifier, collection);\n        }\n        return collection;\n    }\n\n    private syncEnvironmentVariableCollection(extensionIdentifier: string, collection: EnvironmentVariableCollection): void {\n        const serialized = [...collection.map.entries()];\n        this.proxy.$setEnvironmentVariableCollection(collection.persistent, {\n            extensionIdentifier,\n            collection: serialized.length === 0 ? undefined : serialized,\n            description: Converter.fromMarkdownOrString(collection.description)\n        });\n    }\n\n    private setEnvironmentVariableCollection(extensionIdentifier: string, collection: EnvironmentVariableCollection): void {\n        this.environmentVariableCollections.set(extensionIdentifier, collection);\n        collection.onDidChangeCollection(() => {\n            // When any collection value changes send this immediately, this is done to ensure\n            // following calls to createTerminal will be created with the new environment. It will\n            // result in more noise by sending multiple updates when called but collections are\n            // expected to be small.\n            this.syncEnvironmentVariableCollection(extensionIdentifier, collection);\n        });\n    }\n\n    $initEnvironmentVariableCollections(collections: [string, SerializableEnvironmentVariableCollection][]): void {\n        collections.forEach(entry => {\n            const extensionIdentifier = entry[0];\n            const collection = new EnvironmentVariableCollection(entry[1]);\n            this.setEnvironmentVariableCollection(extensionIdentifier, collection);\n        });\n    }\n\n}\n\nexport class EnvironmentVariableCollection implements theia.EnvironmentVariableCollection {\n    readonly map: Map<string, theia.EnvironmentVariableMutator> = new Map();\n    private _description?: string | theia.MarkdownString;\n    private _persistent: boolean = true;\n\n    public get description(): string | theia.MarkdownString | undefined { return this._description; }\n    public set description(value: string | theia.MarkdownString | undefined) {\n        this._description = value;\n        this.onDidChangeCollectionEmitter.fire();\n    }\n\n    public get persistent(): boolean { return this._persistent; }\n    public set persistent(value: boolean) {\n        this._persistent = value;\n        this.onDidChangeCollectionEmitter.fire();\n    }\n\n    protected readonly onDidChangeCollectionEmitter: Emitter<void> = new Emitter<void>();\n    onDidChangeCollection: Event<void> = this.onDidChangeCollectionEmitter.event;\n\n    constructor(\n        serialized?: SerializableEnvironmentVariableCollection\n    ) {\n        this.map = new Map(serialized);\n    }\n\n    get size(): number {\n        return this.map.size;\n    }\n\n    replace(variable: string, value: string): void {\n        this._setIfDiffers(variable, { value, type: EnvironmentVariableMutatorType.Replace });\n    }\n\n    append(variable: string, value: string): void {\n        this._setIfDiffers(variable, { value, type: EnvironmentVariableMutatorType.Append });\n    }\n\n    prepend(variable: string, value: string): void {\n        this._setIfDiffers(variable, { value, type: EnvironmentVariableMutatorType.Prepend });\n    }\n\n    private _setIfDiffers(variable: string, mutator: theia.EnvironmentVariableMutator): void {\n        const current = this.map.get(variable);\n        if (!current || current.value !== mutator.value || current.type !== mutator.type) {\n            this.map.set(variable, mutator);\n            this.onDidChangeCollectionEmitter.fire();\n        }\n    }\n\n    get(variable: string): theia.EnvironmentVariableMutator | undefined {\n        return this.map.get(variable);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    forEach(callback: (variable: string, mutator: theia.EnvironmentVariableMutator, collection: theia.EnvironmentVariableCollection) => any, thisArg?: any): void {\n        this.map.forEach((value, key) => callback.call(thisArg, key, value, this));\n    }\n\n    delete(variable: string): void {\n        this.map.delete(variable);\n        this.onDidChangeCollectionEmitter.fire();\n    }\n\n    clear(): void {\n        this.map.clear();\n        this.onDidChangeCollectionEmitter.fire();\n    }\n}\n\nexport class TerminalExtImpl implements Terminal {\n\n    name: string;\n\n    readonly id = new Deferred<string>();\n\n    exitStatus: theia.TerminalExitStatus | undefined;\n\n    deferredProcessId = new Deferred<number>();\n\n    get processId(): Thenable<number> {\n        return this.deferredProcessId.promise;\n    }\n\n    readonly creationOptions: Readonly<TerminalOptions | ExtensionTerminalOptions>;\n\n    state: TerminalState = { isInteractedWith: false };\n\n    constructor(private readonly proxy: TerminalServiceMain, private readonly options: theia.TerminalOptions | theia.ExtensionTerminalOptions) {\n        this.creationOptions = this.options;\n    }\n\n    sendText(text: string, addNewLine: boolean = true): void {\n        this.id.promise.then(id => this.proxy.$sendText(id, text, addNewLine));\n    }\n\n    show(preserveFocus?: boolean): void {\n        this.id.promise.then(id => this.proxy.$show(id, preserveFocus));\n    }\n\n    hide(): void {\n        this.id.promise.then(id => this.proxy.$hide(id));\n    }\n\n    dispose(): void {\n        this.id.promise.then(id => this.proxy.$dispose(id));\n    }\n}\n\nexport class PseudoTerminal {\n    constructor(\n        id: string | number,\n        private readonly proxy: TerminalServiceMain,\n        private readonly pseudoTerminal: theia.Pseudoterminal,\n        waitOnExit?: boolean | string\n    ) {\n\n        pseudoTerminal.onDidWrite(data => {\n            if (typeof id === 'string') {\n                this.proxy.$write(id, data);\n            } else {\n                this.proxy.$writeByTerminalId(id, data);\n            }\n        });\n        if (pseudoTerminal.onDidClose) {\n            pseudoTerminal.onDidClose((e: number | void = undefined) => {\n                if (typeof id === 'string') {\n                    this.proxy.$dispose(id);\n                } else {\n                    this.proxy.$disposeByTerminalId(id, waitOnExit);\n                }\n            });\n        }\n        if (pseudoTerminal.onDidOverrideDimensions) {\n            pseudoTerminal.onDidOverrideDimensions(e => {\n                if (e) {\n                    if (typeof id === 'string') {\n                        this.proxy.$resize(id, e.columns, e.rows);\n                    } else {\n                        this.proxy.$resizeByTerminalId(id, e.columns, e.rows);\n                    }\n                }\n            });\n        }\n        if (pseudoTerminal.onDidChangeName) {\n            pseudoTerminal.onDidChangeName(name => {\n                if (typeof id === 'string') {\n                    this.proxy.$setName(id, name);\n                } else {\n                    this.proxy.$setNameByTerminalId(id, name);\n                }\n            });\n        }\n    }\n\n    emitOnClose(): void {\n        this.pseudoTerminal.close();\n    }\n\n    emitOnInput(data: string): void {\n        if (this.pseudoTerminal.handleInput) {\n            this.pseudoTerminal.handleInput(data);\n        }\n    }\n\n    emitOnOpen(cols: number, rows: number): void {\n        this.pseudoTerminal.open({\n            rows,\n            columns: cols,\n        });\n    }\n\n    emitOnResize(cols: number, rows: number): void {\n        if (this.pseudoTerminal.setDimensions) {\n            this.pseudoTerminal.setDimensions({ columns: cols, rows });\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { TextEditorConfiguration, TextEditorsMain, TextEditorConfigurationUpdate, SingleEditOperation } from '../common/plugin-api-rpc';\nimport { Range as ApiRange } from '../common/plugin-api-rpc-model';\nimport { Selection, Range, TextEditorLineNumbersStyle, SnippetString, Position, TextEditorRevealType, EndOfLine } from './types-impl';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt } from './document-data';\nimport { readonly, illegalArgument } from '../common/errors';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\n\nexport class TextEditorExt implements theia.TextEditor {\n    private _viewColumn: theia.ViewColumn | undefined;\n    private _document: DocumentDataExt;\n    private _options: TextEditorOptionsExt;\n    private disposed = false;\n    constructor(\n        private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        document: DocumentDataExt,\n        private _selections: Selection[],\n        options: TextEditorConfiguration,\n        private _visibleRanges: Range[],\n        viewColumn: theia.ViewColumn | undefined) {\n        this._options = new TextEditorOptionsExt(proxy, id, options);\n        this._viewColumn = viewColumn;\n        this._document = document;\n    }\n\n    get document(): theia.TextDocument {\n        return this._document.document;\n    }\n\n    set document(doc) {\n        throw readonly('Document');\n    }\n\n    acceptViewColumn(val: theia.ViewColumn): void {\n        this._viewColumn = val;\n    }\n\n    dispose(): void {\n        this.disposed = true;\n    }\n\n    get options(): theia.TextEditorOptions {\n        return this._options;\n    }\n\n    set options(val: theia.TextEditorOptions) {\n        if (!this.disposed) {\n            this._options.assign(val);\n        }\n    }\n\n    acceptOptions(options: TextEditorConfiguration): void {\n        ok(!this.disposed);\n        this._options.accept(options);\n    }\n\n    get selection(): Selection {\n        return this._selections && this._selections[0];\n    }\n\n    set selection(val: Selection) {\n        if (!(val instanceof Selection)) {\n            throw illegalArgument('selection');\n        }\n        this._selections = [val];\n        this.trySetSelection();\n    }\n\n    private trySetSelection(): Promise<theia.TextEditor | undefined> {\n        const selection = this._selections.map(Converter.fromSelection);\n        return this.runOnProxy(() => this.proxy.$trySetSelections(this.id, selection));\n    }\n\n    get selections(): Selection[] {\n        return this._selections;\n    }\n\n    set selections(val: Selection[]) {\n        if (!Array.isArray(val) || val.some(s => !(s instanceof Selection))) {\n            throw illegalArgument('selections');\n        }\n\n        this._selections = val;\n        this.trySetSelection();\n    }\n\n    acceptSelections(selections: Selection[]): void {\n        ok(!this.disposed);\n        this._selections = selections;\n    }\n\n    get visibleRanges(): Range[] {\n        return this._visibleRanges;\n    }\n\n    set visibleRanges(val: Range[]) {\n        throw readonly('visibleRanges');\n    }\n\n    acceptVisibleRanges(range: Range[]): void {\n        ok(!this.disposed);\n        this._visibleRanges = range;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        return this._viewColumn;\n    }\n\n    set viewColumn(value) {\n        throw readonly('viewColumn');\n    }\n\n    _acceptViewColumn(value: theia.ViewColumn): void {\n        ok(!this.disposed);\n        this._viewColumn = value;\n    }\n\n    // eslint-disable-next-line max-len\n    edit(callback: (editBuilder: theia.TextEditorEdit) => void, options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#edit not possible on closed editor'));\n        }\n\n        const edit = new TextEditorEdit(this._document.document, options);\n        callback(edit);\n        return this.applyEdit(edit);\n    }\n    // eslint-disable-next-line max-len\n    insertSnippet(snippet: SnippetString, location?: Position | Range | Position[] | Range[], options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#insertSnippet not possible on closed editors'));\n        }\n        let ranges: ApiRange[];\n\n        if (!location || (Array.isArray(location) && location.length === 0)) {\n            ranges = this._selections.map(s => Converter.fromRange(s)!);\n\n        } else if (location instanceof Position) {\n            const { lineNumber, column } = Converter.fromPosition(location);\n            ranges = [{ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column }];\n\n        } else if (location instanceof Range) {\n            ranges = [Converter.fromRange(location)!];\n        } else {\n            ranges = [];\n            for (const posOrRange of location) {\n                if (posOrRange instanceof Range) {\n                    ranges.push(Converter.fromRange(posOrRange)!);\n                } else {\n                    const { lineNumber, column } = Converter.fromPosition(posOrRange);\n                    ranges.push({ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column });\n                }\n            }\n        }\n\n        return this.proxy.$tryInsertSnippet(this.id, snippet.value, ranges, options);\n    }\n    setDecorations(decorationType: theia.TextEditorDecorationType, rangesOrOptions: Range[] | theia.DecorationOptions[]): void {\n        this.runOnProxy(() => {\n            if (Converter.isDecorationOptionsArr(rangesOrOptions)) {\n                return this.proxy.$trySetDecorations(\n                    this.id,\n                    decorationType.key,\n                    Converter.fromRangeOrRangeWithMessage(rangesOrOptions)\n                );\n            } else {\n                const ranges: number[] = new Array<number>(4 * rangesOrOptions.length);\n                const len = rangesOrOptions.length;\n                for (let i = 0; i < len; i++) {\n                    const range = rangesOrOptions[i];\n                    ranges[4 * i] = range.start.line + 1;\n                    ranges[4 * i + 1] = range.start.character + 1;\n                    ranges[4 * i + 2] = range.end.line + 1;\n                    ranges[4 * i + 3] = range.end.character + 1;\n                }\n                return this.proxy.$trySetDecorationsFast(\n                    this.id,\n                    decorationType.key,\n                    ranges\n                );\n            }\n        });\n    }\n\n    revealRange(range: Range, revealType?: theia.TextEditorRevealType): void {\n        this.runOnProxy(() => this.proxy.$tryRevealRange(this.id, Converter.fromRange(range)!, (revealType || TextEditorRevealType.Default)));\n    }\n\n    private applyEdit(edit: TextEditorEdit): Promise<boolean> {\n        const editData = edit.finalize();\n\n        const editRanges = editData.edits.map(e => e.range);\n\n        editRanges.sort((a, b) => {\n            if (a.end.line === b.end.line) {\n                if (a.end.character === b.end.character) {\n                    if (a.start.line === b.start.line) {\n                        return a.start.character - b.start.character;\n                    }\n                    return a.start.line - b.start.line;\n                }\n                return a.end.character - b.end.character;\n            }\n            return a.end.line - b.end.line;\n        });\n\n        const count = editRanges.length - 1;\n        for (let i = 0; i < count; i++) {\n            const rangeEnd = editRanges[i].end;\n            const nextRangeStart = editRanges[i + 1].start;\n\n            if (nextRangeStart.isBefore(rangeEnd)) {\n                return Promise.reject(\n                    new Error('Overlapping ranges are not allowed!')\n                );\n            }\n        }\n\n        // prepare data for serialization\n        const edits: SingleEditOperation[] = editData.edits.map(e =>\n        ({\n            range: Converter.fromRange(e.range)!,\n            text: e.text,\n            forceMoveMarkers: e.forceMoveMarkers\n        }));\n\n        return this.proxy.$tryApplyEdits(this.id, editData.documentVersionId, edits, {\n            setEndOfLine: editData.setEndOfLine,\n            undoStopBefore: editData.undoStopBefore,\n            undoStopAfter: editData.undoStopAfter\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private runOnProxy(callback: () => Promise<any>): Promise<TextEditorExt | undefined> {\n        if (this.disposed) {\n            console.warn('TextEditor is disposed!');\n            return Promise.resolve(undefined);\n        }\n\n        return callback().then(() => this, err => {\n            if (!(err instanceof Error && err.name === 'DISPOSED')) {\n                console.warn(err);\n            }\n            return undefined;\n        });\n    }\n\n    show(column?: theia.ViewColumn): void {\n        this.proxy.$tryShowTextDocument(this.document.uri, {\n            viewColumn: column,\n            preview: true,\n        });\n    }\n\n    hide(): void {\n        this.proxy.$tryHideEditor(this.id);\n    }\n}\n\nexport class TextEditorOptionsExt implements theia.TextEditorOptions {\n    private _tabSize?: number;\n    private _insertSpace: boolean;\n    private _cursorStyle: TextEditorCursorStyle;\n    private _lineNumbers: TextEditorLineNumbersStyle;\n    constructor(private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        source: TextEditorConfiguration) {\n        this.accept(source);\n    }\n\n    accept(source: TextEditorConfiguration): void {\n        this._tabSize = source.tabSize;\n        this._insertSpace = source.insertSpaces;\n        this._cursorStyle = source.cursorStyle;\n        this._lineNumbers = source.lineNumbers;\n    }\n\n    get tabSize(): number | string | undefined {\n        return this._tabSize;\n    }\n\n    set tabSize(val: number | string | undefined) {\n        const tabSize = this.validateTabSize(val);\n        if (!tabSize) {\n            return; // ignore invalid values\n        }\n\n        if (typeof tabSize === 'number') {\n            if (this.tabSize === tabSize) {\n                return;\n            }\n            this.tabSize = tabSize;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, {\n            tabSize\n        }));\n    }\n\n    private validateTabSize(val: number | string | undefined): number | 'auto' | undefined {\n        if (val === 'auto') {\n            return 'auto';\n        }\n\n        if (typeof val === 'number') {\n            const r = Math.floor(val);\n            return r > 0 ? r : undefined;\n        }\n        if (typeof val === 'string') {\n            const r = parseInt(val, undefined);\n            if (isNaN(r)) {\n                return undefined;\n            }\n            return r > 0 ? r : undefined;\n        }\n        return undefined;\n    }\n\n    get insertSpaces(): boolean | string {\n        return this._insertSpace;\n    }\n\n    set insertSpaces(val: boolean | string) {\n        const insertSpaces = this.validateInsertSpaces(val);\n        if (typeof insertSpaces === 'boolean') {\n            if (this._insertSpace === insertSpaces) {\n                return;\n            }\n            this._insertSpace = insertSpaces;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, { insertSpaces }));\n    }\n\n    private validateInsertSpaces(val: boolean | string): boolean | 'auto' {\n        if (val === 'auto') {\n            return 'auto';\n        }\n        return val === 'false' ? false : Boolean(val);\n    }\n\n    get cursorStyle(): TextEditorCursorStyle {\n        return this._cursorStyle;\n    }\n\n    set cursorStyle(val: TextEditorCursorStyle) {\n        if (this._cursorStyle === val) {\n            return;\n        }\n        this._cursorStyle = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { cursorStyle: val }));\n    }\n\n    get lineNumbers(): TextEditorLineNumbersStyle {\n        return this._lineNumbers;\n    }\n    set lineNumbers(val: TextEditorLineNumbersStyle) {\n        if (this._lineNumbers === val) {\n            return;\n        }\n        this._lineNumbers = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { lineNumbers: val }));\n    }\n\n    public assign(newOptions: theia.TextEditorOptions): void {\n        const configurationUpdate: TextEditorConfigurationUpdate = {};\n        let hasUpdate = false;\n\n        if (typeof newOptions.tabSize !== 'undefined') {\n            const tabSize = this.validateTabSize(newOptions.tabSize);\n            if (tabSize === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            } else if (typeof tabSize === 'number' && this._tabSize !== tabSize) {\n                this._tabSize = tabSize;\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            }\n        }\n\n        if (typeof newOptions.insertSpaces !== 'undefined') {\n            const insertSpaces = this.validateInsertSpaces(newOptions.insertSpaces);\n            if (insertSpaces === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            } else if (this.insertSpaces !== insertSpaces) {\n                this.insertSpaces = insertSpaces;\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            }\n        }\n\n        if (typeof newOptions.cursorStyle !== 'undefined') {\n            if (this._cursorStyle !== newOptions.cursorStyle) {\n                this._cursorStyle = newOptions.cursorStyle;\n                hasUpdate = true;\n                configurationUpdate.cursorStyle = newOptions.cursorStyle;\n            }\n        }\n\n        if (typeof newOptions.lineNumbers !== 'undefined') {\n            if (this._lineNumbers !== newOptions.lineNumbers) {\n                this._lineNumbers = newOptions.lineNumbers;\n                hasUpdate = true;\n                configurationUpdate.lineNumbers = newOptions.lineNumbers;\n            }\n        }\n\n        if (hasUpdate) {\n            warnOnError(this.proxy.$trySetOptions(this.id, configurationUpdate));\n        }\n    }\n\n}\n\nexport interface TextEditOperation {\n    range: theia.Range;\n    text?: string;\n    forceMoveMarkers: boolean;\n}\n\nexport interface EditData {\n    documentVersionId: number;\n    edits: TextEditOperation[];\n    setEndOfLine: EndOfLine;\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport class TextEditorEdit {\n    private readonly documentVersionId: number;\n    private collectedEdits: TextEditOperation[];\n    private eol: EndOfLine;\n    private readonly undoStopBefore: boolean;\n    private readonly undoStopAfter: boolean;\n    constructor(private document: theia.TextDocument, options: { undoStopBefore: boolean; undoStopAfter: boolean }) {\n        this.documentVersionId = document.version;\n        this.collectedEdits = [];\n        this.eol = 0;\n        this.undoStopBefore = options.undoStopBefore;\n        this.undoStopAfter = options.undoStopAfter;\n    }\n\n    finalize(): EditData {\n        return {\n            documentVersionId: this.documentVersionId,\n            edits: this.collectedEdits,\n            setEndOfLine: this.eol,\n            undoStopAfter: this.undoStopAfter,\n            undoStopBefore: this.undoStopBefore\n        };\n    }\n\n    replace(location: Position | Range | Selection, val: string): void {\n        let range: Range;\n        if (location instanceof Position) {\n            range = new Range(location, location);\n        } else if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, val, false);\n    }\n\n    insert(location: Position, val: string): void {\n        this.addEdit(new Range(location, location), val, true);\n    }\n\n    delete(location: Range | Selection): void {\n        let range: Range;\n        if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, undefined, true);\n    }\n\n    setEndOfLine(endOfLine: EndOfLine): void {\n        if (endOfLine !== EndOfLine.CRLF && endOfLine !== EndOfLine.LF) {\n            throw illegalArgument('endOfLine');\n        }\n\n        this.eol = endOfLine;\n    }\n\n    private addEdit(range: Range, text: string | undefined, moveMarkers: boolean): void {\n        const validatedRange = this.document.validateRange(range);\n        this.collectedEdits.push({\n            range: validatedRange,\n            forceMoveMarkers: moveMarkers,\n            text: text\n        });\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction warnOnError(promise: Promise<any>): void {\n    promise.then(undefined, err => {\n        console.warn(err);\n    });\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { TextEditorsExt, EditorChangedPropertiesData, TextEditorPositionData, TextEditorsMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorExt } from './text-editor';\nimport * as Converters from './type-converters';\nimport { TextEditorSelectionChangeKind } from './types-impl';\nimport { IdGenerator } from '../common/id-generator';\n\nexport class TextEditorsExtImpl implements TextEditorsExt {\n\n    private readonly _onDidChangeTextEditorSelection = new Emitter<theia.TextEditorSelectionChangeEvent>();\n    private readonly _onDidChangeTextEditorOptions = new Emitter<theia.TextEditorOptionsChangeEvent>();\n    private readonly _onDidChangeTextEditorVisibleRanges = new Emitter<theia.TextEditorVisibleRangesChangeEvent>();\n    private readonly _onDidChangeTextEditorViewColumn = new Emitter<theia.TextEditorViewColumnChangeEvent>();\n    private readonly _onDidChangeActiveTextEditor = new Emitter<theia.TextEditor | undefined>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<theia.TextEditor[]>();\n\n    readonly onDidChangeTextEditorSelection: Event<theia.TextEditorSelectionChangeEvent> = this._onDidChangeTextEditorSelection.event;\n    readonly onDidChangeTextEditorOptions = this._onDidChangeTextEditorOptions.event;\n    readonly onDidChangeTextEditorVisibleRanges = this._onDidChangeTextEditorVisibleRanges.event;\n    readonly onDidChangeTextEditorViewColumn = this._onDidChangeTextEditorViewColumn.event;\n    readonly onDidChangeActiveTextEditor = this._onDidChangeActiveTextEditor.event;\n    readonly onDidChangeVisibleTextEditors = this._onDidChangeVisibleTextEditors.event;\n\n    private proxy: TextEditorsMain;\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN);\n\n        this.editorsAndDocuments.onDidChangeActiveTextEditor(e => this._onDidChangeActiveTextEditor.fire(e));\n        this.editorsAndDocuments.onDidChangeVisibleTextEditors(e => this._onDidChangeVisibleTextEditors.fire(e));\n    }\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void {\n        const textEditor = this.editorsAndDocuments.getEditor(id);\n        if (!textEditor) {\n            return;\n        }\n\n        if (props.options) {\n            textEditor.acceptOptions(props.options);\n        }\n        if (props.selections) {\n            const selections = props.selections.selections.map(Converters.toSelection);\n            textEditor.acceptSelections(selections);\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            textEditor.acceptVisibleRanges(visibleRanges);\n        }\n\n        if (props.options) {\n            this._onDidChangeTextEditorOptions.fire({\n                textEditor,\n                options: props.options\n            });\n        }\n\n        if (props.selections) {\n            const kind = TextEditorSelectionChangeKind.fromValue(props.selections.source);\n            const selections = props.selections.selections.map(Converters.toSelection);\n            this._onDidChangeTextEditorSelection.fire({\n                textEditor,\n                selections,\n                kind\n            });\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            this._onDidChangeTextEditorVisibleRanges.fire({\n                textEditor,\n                visibleRanges\n            });\n        }\n    }\n    $acceptEditorPositionData(data: TextEditorPositionData): void {\n        for (const id in data) {\n            if (data.hasOwnProperty(id)) {\n                const textEditor = this.editorsAndDocuments.getEditor(id);\n                const viewColumn = Converters.toViewColumn(data[id]);\n                if (textEditor && viewColumn) {\n                    if (textEditor.viewColumn !== viewColumn) {\n                        textEditor.acceptViewColumn(viewColumn);\n                        this._onDidChangeTextEditorViewColumn.fire({ textEditor, viewColumn });\n                    }\n                }\n            }\n        }\n    }\n\n    getActiveEditor(): TextEditorExt | undefined {\n        return this.editorsAndDocuments.activeEditor();\n    }\n\n    getVisibleTextEditors(): theia.TextEditor[] {\n        return this.editorsAndDocuments.allEditors();\n    }\n\n    createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n        return new TextEditorDecorationType(this.proxy, options);\n    }\n\n    applyWorkspaceEdit(edit: theia.WorkspaceEdit, metadata?: theia.WorkspaceEditMetadata): Promise<boolean> {\n        const dto = Converters.fromWorkspaceEdit(edit, this.editorsAndDocuments);\n        return this.proxy.$tryApplyWorkspaceEdit(dto, metadata);\n    }\n\n    saveAll(includeUntitled?: boolean): PromiseLike<boolean> {\n        return this.proxy.$saveAll(includeUntitled);\n    }\n\n}\n\nexport class TextEditorDecorationType implements theia.TextEditorDecorationType {\n\n    private static readonly Keys = new IdGenerator('TextEditorDecorationType');\n\n    private proxy: TextEditorsMain;\n    public key: string;\n\n    constructor(proxy: TextEditorsMain, options: theia.DecorationRenderOptions) {\n        this.key = TextEditorDecorationType.Keys.nextId();\n        this.proxy = proxy;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.proxy.$registerTextEditorDecorationType(this.key, Converters.DecorationRenderOptions.from(options));\n    }\n\n    dispose(): void {\n        this.proxy.$removeTextEditorDecorationType(this.key);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { ColorTheme, ColorThemeKind } from './types-impl';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { ThemingExt } from '../common';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { ThemeType } from '@theia/core/lib/common/theme';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/5ddbda0172d80bfbb2529987ba9020848e8771f7/src/vs/workbench/api/common/extHostTheming.ts\n\nexport class ThemingExtImpl implements ThemingExt {\n\n    private actual: ColorTheme;\n    private _onDidChangeActiveColorTheme: Emitter<ColorTheme>;\n\n    constructor(\n        readonly rpc: RPCProtocol\n    ) {\n        this.actual = new ColorTheme(ColorThemeKind.Dark);\n        this._onDidChangeActiveColorTheme = new Emitter<ColorTheme>();\n    }\n\n    get activeColorTheme(): ColorTheme {\n        return this.actual;\n    }\n\n    $onColorThemeChange(type: ThemeType): void {\n        this.actual = new ColorTheme(this.convertKind(type));\n        this._onDidChangeActiveColorTheme.fire(this.actual);\n    }\n\n    protected convertKind(type: ThemeType): ColorThemeKind {\n        let kind: ColorThemeKind;\n        switch (type) {\n            case 'light':\n                kind = ColorThemeKind.Light;\n                break;\n            case 'dark':\n                kind = ColorThemeKind.Dark;\n                break;\n            case 'hc':\n                kind = ColorThemeKind.HighContrast;\n                break;\n            case 'hcLight':\n                kind = ColorThemeKind.HighContrastLight;\n                break;\n        }\n        return kind;\n    }\n\n    get onDidChangeActiveColorTheme(): Event<ColorTheme> {\n        return this._onDidChangeActiveColorTheme.event;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { Plugin, PLUGIN_RPC_CONTEXT, TimelineCommandArg, TimelineExt, TimelineMain } from '../common';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable, URI } from './types-impl';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CommandRegistryImpl } from './command-registry';\nimport type {\n    InternalTimelineOptions,\n    Timeline,\n    TimelineItem,\n    TimelineOptions,\n    TimelineProvider\n} from '@theia/timeline/lib/common/timeline-model';\nimport * as theia from '@theia/plugin';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { UriComponents } from '../common/uri-components';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/theia/blob/afacd2bdfe7060f09df9b9139521718915949757/src/vs/workbench/api/common/extHostTimeline.ts\n\nexport class TimelineExtImpl implements TimelineExt {\n    declare readonly _serviceBrand: undefined;\n\n    private readonly proxy: TimelineMain;\n    private providers = new Map<string, TimelineProvider>();\n\n    private itemsBySourceAndUriMap = new Map<string, Map<string | undefined, Map<string, theia.TimelineItem>>>();\n\n    constructor(readonly rpc: RPCProtocol, private readonly commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TIMELINE_MAIN);\n\n        commands.registerArgumentProcessor({\n            processArgument: arg => {\n                if (!TimelineCommandArg.is(arg)) {\n                    return arg;\n                } else {\n                    return this.itemsBySourceAndUriMap.get(arg.source)?.get(arg.uri?.toString())?.get(arg.timelineHandle);\n                }\n            }\n        });\n    }\n\n    async $getTimeline(id: string, uri: UriComponents, options: theia.TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined> {\n        const provider = this.providers.get(id);\n        return provider?.provideTimeline(URI.revive(uri), options, internalOptions);\n    }\n\n    registerTimelineProvider(plugin: Plugin, scheme: string | string[], provider: theia.TimelineProvider): Disposable {\n        const timelineDisposables = new DisposableCollection();\n\n        const convertTimelineItem = this.convertTimelineItem(provider.id, timelineDisposables).bind(this);\n\n        let disposable: Disposable | undefined;\n        if (provider.onDidChange) {\n            disposable = Disposable.from(provider.onDidChange(e => this.proxy.$fireTimelineChanged({ uri: undefined, reset: true, ...e, id: provider.id }), this));\n        }\n\n        const itemsBySourceAndUriMap = this.itemsBySourceAndUriMap;\n        return this.registerTimelineProviderCore({\n            ...provider,\n            scheme: scheme,\n            onDidChange: undefined,\n            async provideTimeline(uri: URI, options: TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined> {\n                if (internalOptions?.resetCache) {\n                    timelineDisposables.dispose();\n\n                    const items = itemsBySourceAndUriMap.get(provider.id);\n                    if (items) {\n                        items.clear();\n                    }\n                }\n\n                const result = await provider.provideTimeline(uri, options, CancellationToken.None);\n                if (!result) {\n                    return undefined;\n                }\n\n                const convertItem = convertTimelineItem(uri, internalOptions);\n                return {\n                    ...result,\n                    source: provider.id,\n                    items: result.items.map(convertItem)\n                };\n            },\n            dispose(): void {\n                for (const sourceMap of itemsBySourceAndUriMap.values()) {\n                    const source = sourceMap.get(provider.id);\n                    if (source) {\n                        source.clear();\n                    }\n                }\n\n                if (disposable) {\n                    disposable.dispose();\n                }\n                timelineDisposables.dispose();\n            }\n        });\n    }\n\n    private convertTimelineItem(source: string, disposables: DisposableCollection): (uri: URI, options?: InternalTimelineOptions) => (item: theia.TimelineItem) => TimelineItem {\n        return (uri: URI, options?: InternalTimelineOptions) => {\n            let items: Map<string, theia.TimelineItem> | undefined;\n            if (options?.cacheResults) {\n                let itemsByUri = this.itemsBySourceAndUriMap.get(source);\n                if (itemsByUri === undefined) {\n                    itemsByUri = new Map();\n                    this.itemsBySourceAndUriMap.set(source, itemsByUri);\n                }\n\n                const uriKey = getUriKey(uri);\n                items = itemsByUri.get(uriKey);\n                if (items === undefined) {\n                    items = new Map();\n                    itemsByUri.set(uriKey, items);\n                }\n            }\n\n            return (item: theia.TimelineItem): TimelineItem => {\n                const { iconPath, ...props } = item;\n\n                const handle = `${source}|${item.id ?? item.timestamp}`;\n                if (items) {\n                    items.set(handle, item);\n                }\n\n                return {\n                    ...props,\n                    uri: uri.toString(),\n                    id: props.id ?? undefined,\n                    handle: handle,\n                    source: source,\n                    command: item.command ? this.commands.converter.toSafeCommand(item.command, disposables) : undefined,\n                };\n            };\n        };\n    }\n\n    private registerTimelineProviderCore(provider: TimelineProvider): Disposable {\n        const existing = this.providers.get(provider.id);\n        if (existing) {\n            throw new Error(`Timeline Provider ${provider.id} already exists.`);\n        }\n\n        this.proxy.$registerTimelineProvider({\n            id: provider.id,\n            label: provider.label,\n            scheme: provider.scheme\n        });\n        this.providers.set(provider.id, provider);\n\n        return Disposable.create(() => {\n            for (const sourceMap of this.itemsBySourceAndUriMap.values()) {\n                const items = sourceMap.get(provider.id);\n                if (items) {\n                    items.clear();\n                }\n            }\n\n            this.providers.delete(provider.id);\n            this.proxy.$unregisterTimelineProvider(provider.id);\n            provider.dispose();\n        });\n    }\n}\n\nfunction getUriKey(uri: URI | undefined): string | undefined {\n    return uri?.toString();\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport {\n    TreeDataProvider, TreeView, TreeViewExpansionEvent, TreeItem, TreeItemLabel,\n    TreeViewSelectionChangeEvent, TreeViewVisibilityChangeEvent, CancellationToken, DataTransferFile, TreeViewOptions, ViewBadge, TreeCheckboxChangeEvent\n} from '@theia/plugin';\n// TODO: extract `@theia/util` for event, disposable, cancellation and common types\n// don't use @theia/core directly from plugin host\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { basename } from '@theia/core/lib/common/paths';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { DataTransfer, DataTransferItem, Disposable as PluginDisposable, ThemeIcon, TreeItemCheckboxState } from '../types-impl';\nimport { Plugin, PLUGIN_RPC_CONTEXT, TreeViewsExt, TreeViewsMain, TreeViewItem, TreeViewRevealOptions, DataTransferFileDTO } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { CommandRegistryImpl, CommandsConverter } from '../command-registry';\nimport { TreeViewItemReference } from '../../common';\nimport { PluginIconPath } from '../plugin-icon-path';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { UriComponents } from '@theia/core/lib/common/uri';\nimport { isObject } from '@theia/core';\n\nexport class TreeViewsExtImpl implements TreeViewsExt {\n    private proxy: TreeViewsMain;\n\n    private readonly treeViews = new Map<string, TreeViewExtImpl<any>>();\n\n    constructor(rpc: RPCProtocol, readonly commandRegistry: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TREE_VIEWS_MAIN);\n\n        commandRegistry.registerArgumentProcessor({\n            processArgument: arg => {\n                if (TreeViewItemReference.is(arg)) {\n                    return this.toTreeElement(arg);\n                } else if (Array.isArray(arg)) {\n                    return arg.map(param => TreeViewItemReference.is(param) ? this.toTreeElement(param) : param);\n                } else {\n                    return arg;\n                }\n            }\n        });\n    }\n    $checkStateChanged(treeViewId: string, itemIds: { id: string; checked: boolean; }[]): Promise<void> {\n        return this.getTreeView(treeViewId).checkStateChanged(itemIds);\n    }\n    $dragStarted(treeViewId: string, treeItemIds: string[], token: CancellationToken): Promise<UriComponents[] | undefined> {\n        return this.getTreeView(treeViewId).onDragStarted(treeItemIds, token);\n    }\n\n    $dragEnd(treeViewId: string): Promise<void> {\n        return this.getTreeView(treeViewId).dragEnd();\n    }\n\n    $drop(treeViewId: string, treeItemId: string | undefined, dataTransferItems: [string, string | DataTransferFileDTO][], token: CancellationToken): Promise<void> {\n        return this.getTreeView(treeViewId).handleDrop!(treeItemId, dataTransferItems, token);\n    }\n\n    protected toTreeElement(treeViewItemRef: TreeViewItemReference): any {\n        return this.treeViews.get(treeViewItemRef.viewId)?.getElement(treeViewItemRef.itemId);\n    }\n\n    registerTreeDataProvider<T>(plugin: Plugin, treeViewId: string, treeDataProvider: TreeDataProvider<T>): PluginDisposable {\n        const treeView = this.createTreeView(plugin, treeViewId, { treeDataProvider });\n\n        return PluginDisposable.create(() => {\n            this.treeViews.delete(treeViewId);\n            treeView.dispose();\n        });\n    }\n\n    createTreeView<T>(plugin: Plugin, treeViewId: string, options: TreeViewOptions<T>): TreeView<T> {\n        if (!options || !options.treeDataProvider) {\n            throw new Error('Options with treeDataProvider is mandatory');\n        }\n\n        const treeView = new TreeViewExtImpl<T>(plugin, treeViewId, options, this.proxy, this.commandRegistry.converter);\n        this.treeViews.set(treeViewId, treeView);\n\n        return {\n            // tslint:disable:typedef\n            get onDidExpandElement() {\n                return treeView.onDidExpandElement;\n            },\n            get onDidCollapseElement() {\n                return treeView.onDidCollapseElement;\n            },\n            get selection() {\n                return treeView.selectedElements;\n            },\n            get onDidChangeSelection() {\n                return treeView.onDidChangeSelection;\n            },\n            get visible() {\n                return treeView.visible;\n            },\n            get onDidChangeVisibility() {\n                return treeView.onDidChangeVisibility;\n            },\n            get onDidChangeCheckboxState() {\n                return treeView.onDidChangeCheckboxState;\n            },\n            get message(): string {\n                return treeView.message;\n            },\n            set message(message: string) {\n                treeView.message = message;\n            },\n            get title(): string {\n                return treeView.title;\n            },\n            set title(title: string) {\n                treeView.title = title;\n            },\n            get description(): string {\n                return treeView.description;\n            },\n            set description(description: string) {\n                treeView.description = description;\n            },\n            get badge(): ViewBadge | undefined {\n                return treeView.badge;\n            },\n            set badge(badge: ViewBadge | undefined) {\n                treeView.badge = badge;\n            },\n            reveal: (element: T, revealOptions?: Partial<TreeViewRevealOptions>): Thenable<void> =>\n                treeView.reveal(element, revealOptions),\n\n            dispose: () => {\n                this.treeViews.delete(treeViewId);\n                treeView.dispose();\n            }\n        };\n    }\n\n    async $getChildren(treeViewId: string, treeItemId: string): Promise<TreeViewItem[] | undefined> {\n        const treeView = this.getTreeView(treeViewId);\n\n        return treeView.getChildren(treeItemId);\n    }\n\n    async $resolveTreeItem(treeViewId: string, treeItemId: string, token: CancellationToken): Promise<TreeViewItem | undefined> {\n        return this.getTreeView(treeViewId).resolveTreeItem(treeItemId, token);\n    }\n\n    async $hasResolveTreeItem(treeViewId: string): Promise<boolean> {\n        return this.getTreeView(treeViewId).hasResolveTreeItem();\n    }\n\n    async $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any> {\n        const treeView = this.getTreeView(treeViewId);\n\n        if (expanded) {\n            return treeView.onExpanded(treeItemId);\n        } else {\n            return treeView.onCollapsed(treeItemId);\n        }\n    }\n\n    async $setSelection(treeViewId: string, treeItemIds: string[]): Promise<void> {\n        this.getTreeView(treeViewId).setSelection(treeItemIds);\n    }\n\n    async $setVisible(treeViewId: string, isVisible: boolean): Promise<void> {\n        this.getTreeView(treeViewId).setVisible(isVisible);\n    }\n\n    protected getTreeView(treeViewId: string): TreeViewExtImpl<any> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error(`No tree view with id '${treeViewId}' registered.`);\n        }\n        return treeView;\n    }\n\n}\n\ninterface TreeExtNode<T> extends Disposable {\n    id: string\n    /** Collection of disposables. Must be disposed by an instance's `dispose` implementation. */\n    disposables: DisposableCollection;\n    /** The original `TreeItem` provided by the plugin's tree data provider. */\n    pluginTreeItem?: TreeItem;\n    /** The `TreeViewItem` used on the main side to render the tree node. */\n    treeViewItem?: TreeViewItem;\n    value?: T\n    children?: TreeExtNode<T>[]\n}\n\nclass TreeViewExtImpl<T> implements Disposable {\n    private static readonly ID_COMPUTED = 'c';\n    private static readonly ID_ITEM = 'i';\n\n    private readonly onDidExpandElementEmitter = new Emitter<TreeViewExpansionEvent<T>>();\n    readonly onDidExpandElement = this.onDidExpandElementEmitter.event;\n\n    private readonly onDidCollapseElementEmitter = new Emitter<TreeViewExpansionEvent<T>>();\n    readonly onDidCollapseElement = this.onDidCollapseElementEmitter.event;\n\n    private readonly onDidChangeSelectionEmitter = new Emitter<TreeViewSelectionChangeEvent<T>>();\n    readonly onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n\n    private readonly onDidChangeVisibilityEmitter = new Emitter<TreeViewVisibilityChangeEvent>();\n    readonly onDidChangeVisibility = this.onDidChangeVisibilityEmitter.event;\n\n    private readonly onDidChangeCheckboxStateEmitter = new Emitter<TreeCheckboxChangeEvent<T>>();\n    readonly onDidChangeCheckboxState = this.onDidChangeCheckboxStateEmitter.event;\n\n    private readonly nodes = new Map<string, TreeExtNode<T>>();\n    private pendingRefresh = Promise.resolve();\n\n    private localDataTransfer = new DataTransfer();\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => this.clearAll()),\n        this.onDidExpandElementEmitter,\n        this.onDidCollapseElementEmitter,\n        this.onDidChangeSelectionEmitter,\n        this.onDidChangeVisibilityEmitter\n    );\n\n    constructor(\n        private plugin: Plugin,\n        private treeViewId: string,\n        private options: TreeViewOptions<T>,\n        private proxy: TreeViewsMain,\n        readonly commandsConverter: CommandsConverter\n    ) {\n        // make copies of optionally provided MIME types:\n        const dragMimeTypes = options.dragAndDropController?.dragMimeTypes?.slice();\n        const dropMimeTypes = options.dragAndDropController?.dropMimeTypes?.slice();\n        proxy.$registerTreeDataProvider(treeViewId, {\n            manageCheckboxStateManually: options.manageCheckboxStateManually,\n            showCollapseAll: options.showCollapseAll,\n            canSelectMany: options.canSelectMany,\n            dragMimeTypes, dropMimeTypes\n        });\n        this.toDispose.push(Disposable.create(() => this.proxy.$unregisterTreeDataProvider(treeViewId)));\n        options.treeDataProvider.onDidChangeTreeData?.(() => {\n            this.pendingRefresh = proxy.$refresh(treeViewId);\n        });\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async reveal(element: T, options?: Partial<TreeViewRevealOptions>): Promise<void> {\n        await this.pendingRefresh;\n        const select = options?.select !== false; // default to true\n        const focus = !!options?.focus;\n        const expand = typeof options?.expand === 'undefined' ? false : options!.expand;\n\n        const elementParentChain = await this.calculateRevealParentChain(element);\n        if (elementParentChain) {\n            return this.proxy.$reveal(this.treeViewId, elementParentChain, {\n                select, focus, expand, ...options\n            });\n        }\n    }\n\n    private _message: string = '';\n    get message(): string {\n        return this._message;\n    }\n\n    set message(message: string) {\n        this._message = message;\n        this.proxy.$setMessage(this.treeViewId, this._message);\n    }\n\n    private _title: string = '';\n    get title(): string {\n        return this._title;\n    }\n\n    set title(title: string) {\n        this._title = title;\n        this.proxy.$setTitle(this.treeViewId, title);\n    }\n\n    private _description: string = '';\n    get description(): string {\n        return this._description;\n    }\n\n    set description(description: string) {\n        this._description = description;\n        this.proxy.$setDescription(this.treeViewId, this._description);\n    }\n\n    private _badge?: ViewBadge = undefined;\n    get badge(): ViewBadge | undefined {\n        return this._badge;\n    }\n    set badge(badge: ViewBadge | undefined) {\n        this._badge = badge;\n        this.proxy.$setBadge(this.treeViewId, badge ? { value: badge.value, tooltip: badge.tooltip } : undefined);\n    }\n\n    getElement(treeItemId: string): T | undefined {\n        return this.nodes.get(treeItemId)?.value;\n    }\n\n    /**\n     * calculate the chain of node ids from root to element so that the frontend can expand all of them and reveal element.\n     * this is needed as the frontend may not have the full tree nodes.\n     * throughout the parent chain this.getChildren is called in order to fill this.nodes cache.\n     *\n     * returns undefined if wasn't able to calculate the path due to inconsistencies.\n     *\n     * @param element element to reveal\n     */\n    private async calculateRevealParentChain(element: T | undefined): Promise<string[]> {\n        if (!element) {\n            // root\n            return [];\n        }\n        const parent = await this.options.treeDataProvider.getParent?.(element) ?? undefined;\n        const chain = await this.calculateRevealParentChain(parent);\n        const parentId = chain.length ? chain[chain.length - 1] : '';\n        const treeItem = await this.options.treeDataProvider.getTreeItem(element);\n        return chain.concat(this.buildTreeItemId(parentId, treeItem, false));\n    }\n\n    private getTreeItemLabel(treeItem: TreeItem): string | undefined {\n        const treeItemLabel: string | TreeItemLabel | undefined = treeItem.label;\n        return typeof treeItemLabel === 'object' ? treeItemLabel.label : treeItemLabel;\n    }\n\n    private getTreeItemLabelHighlights(treeItem: TreeItem): [number, number][] | undefined {\n        const treeItemLabel: string | TreeItemLabel | undefined = treeItem.label;\n        return typeof treeItemLabel === 'object' ? treeItemLabel.highlights : undefined;\n    }\n\n    private getItemLabel(treeItem: TreeItem): string | undefined {\n        let idLabel = this.getTreeItemLabel(treeItem);\n        // Use resource URI if label is not set\n        if (idLabel === undefined && treeItem.resourceUri) {\n            idLabel = treeItem.resourceUri.path.toString();\n            idLabel = decodeURIComponent(idLabel);\n            if (idLabel.indexOf('/') >= 0) {\n                idLabel = idLabel.substring(idLabel.lastIndexOf('/') + 1);\n            }\n        }\n        return idLabel;\n    }\n\n    // Modeled on https://github.com/microsoft/vscode/blob/main/src/vs/workbench/api/common/extHostTreeViews.ts#L822\n    private buildTreeItemId(parentId: string, item: TreeItem, mustReturnNew: boolean): string {\n        if (item.id) {\n            return `${TreeViewExtImpl.ID_ITEM}-@-${parentId}-@-${item.id}`;\n        }\n\n        const treeItemLabel = this.getItemLabel(item);\n        const prefix: string = `${TreeViewExtImpl.ID_COMPUTED}-@-${parentId || ''}-@-`;\n        let elementId = treeItemLabel ? treeItemLabel : item.resourceUri ? basename(item.resourceUri.fsPath) : '';\n        elementId = elementId.indexOf('/') !== -1 ? elementId.replace('/', '//') : elementId;\n        const childrenNodes = (this.nodes.get(parentId)?.children || []);\n\n        let id: string;\n        let counter = 0;\n        do {\n            id = `${prefix}/${counter}:${elementId}`;\n            if (!mustReturnNew || !this.nodes.has(id) || this.nodes.get(id) === item) {\n                // Return first if asked for or\n                // Return if handle does not exist or\n                // Return if handle is being reused\n                break;\n            }\n            counter++;\n        } while (counter <= childrenNodes.length);\n\n        return id;\n    }\n\n    async getChildren(parentId: string): Promise<TreeViewItem[] | undefined> {\n        let parentNode = this.nodes.get(parentId);\n        const parent = parentNode?.value;\n        if (parentId && !parent) {\n            console.error(`No tree item with id '${parentId}' found.`);\n            return [];\n        }\n        this.clearChildren(parentNode);\n\n        // place root in the cache\n        if (parentId === '' && !parentNode) {\n            const rootNodeDisposables = new DisposableCollection();\n            parentNode = { id: '', disposables: rootNodeDisposables, dispose: () => { rootNodeDisposables.dispose(); } };\n            this.nodes.set(parentId, parentNode);\n        }\n        // ask data provider for children for cached element\n        const result = await this.options.treeDataProvider.getChildren(parent);\n        if (result) {\n            const treeItemPromises = result.map(async value => {\n\n                // Ask data provider for a tree item for the value\n                // Data provider must return theia.TreeItem\n                const treeItem = await this.options.treeDataProvider.getTreeItem(value);\n                // Convert theia.TreeItem to the TreeViewItem\n\n                const label = this.getItemLabel(treeItem) || '';\n                const highlights = this.getTreeItemLabelHighlights(treeItem);\n\n                // Generate the ID\n                // ID is used for caching the element\n                const id = this.buildTreeItemId(parentId, treeItem, true);\n\n                const toDisposeElement = new DisposableCollection();\n                const node: TreeExtNode<T> = {\n                    id,\n                    pluginTreeItem: treeItem,\n                    value,\n                    disposables: toDisposeElement,\n                    dispose: () => toDisposeElement.dispose()\n                };\n                if (parentNode) {\n                    const children = parentNode.children || [];\n                    children.push(node);\n                    parentNode.children = children;\n                }\n                this.nodes.set(id, node);\n\n                let icon;\n                let iconUrl;\n                let themeIcon;\n                const { iconPath } = treeItem;\n                if (typeof iconPath === 'string' && iconPath.indexOf('fa-') !== -1) {\n                    icon = iconPath;\n                } else if (ThemeIcon.is(iconPath)) {\n                    themeIcon = iconPath;\n                } else {\n                    iconUrl = PluginIconPath.toUrl(<PluginIconPath | undefined>iconPath, this.plugin);\n                }\n\n                let checkboxInfo;\n                if (treeItem.checkboxState === undefined) {\n                    checkboxInfo = undefined;\n                } else if (isObject(treeItem.checkboxState)) {\n                    checkboxInfo = {\n                        checked: treeItem.checkboxState.state === TreeItemCheckboxState.Checked,\n                        tooltip: treeItem.checkboxState.tooltip,\n                        accessibilityInformation: treeItem.accessibilityInformation\n                    };\n                } else {\n                    checkboxInfo = {\n                        checked: treeItem.checkboxState === TreeItemCheckboxState.Checked\n                    };\n                }\n\n                const treeViewItem: TreeViewItem = {\n                    id,\n                    label,\n                    highlights,\n                    icon,\n                    iconUrl,\n                    themeIcon,\n                    description: treeItem.description,\n                    resourceUri: treeItem.resourceUri,\n                    tooltip: treeItem.tooltip,\n                    collapsibleState: treeItem.collapsibleState?.valueOf(),\n                    checkboxInfo: checkboxInfo,\n                    contextValue: treeItem.contextValue,\n                    command: this.commandsConverter.toSafeCommand(treeItem.command, toDisposeElement),\n                    accessibilityInformation: treeItem.accessibilityInformation\n                };\n                node.treeViewItem = treeViewItem;\n\n                return treeViewItem;\n            });\n\n            return Promise.all(treeItemPromises);\n        } else {\n            return undefined;\n        }\n    }\n\n    private clearChildren(parentNode?: TreeExtNode<T>): void {\n        if (parentNode) {\n            if (parentNode.children) {\n                for (const child of parentNode.children) {\n                    this.clear(child);\n                }\n            }\n            delete parentNode['children'];\n        } else {\n            this.clearAll();\n        }\n    }\n\n    private clear(node: TreeExtNode<T>): void {\n        if (node.children) {\n            for (const child of node.children) {\n                this.clear(child);\n            }\n        }\n        this.nodes.delete(node.id);\n        node.dispose();\n    }\n\n    private clearAll(): void {\n        this.nodes.forEach(node => node.dispose());\n        this.nodes.clear();\n    }\n\n    async onExpanded(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement = this.getElement(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidExpandElementEmitter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    async onCollapsed(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement = this.getElement(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidCollapseElementEmitter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    async checkStateChanged(items: readonly { id: string; checked: boolean; }[]): Promise<void> {\n        const transformed: [T, TreeItemCheckboxState][] = [];\n        items.forEach(item => {\n            const node = this.nodes.get(item.id);\n            if (node) {\n                if (node.value) {\n                    transformed.push([node.value, item.checked ? TreeItemCheckboxState.Checked : TreeItemCheckboxState.Unchecked]);\n                }\n                if (node.treeViewItem) {\n                    node.treeViewItem.checkboxInfo!.checked = item.checked;\n                }\n            }\n        });\n\n        this.onDidChangeCheckboxStateEmitter.fire({\n            items: transformed\n        });\n    }\n\n    async resolveTreeItem(treeItemId: string, token: CancellationToken): Promise<TreeViewItem | undefined> {\n        if (!this.options.treeDataProvider.resolveTreeItem) {\n            return undefined;\n        }\n\n        const node = this.nodes.get(treeItemId);\n        if (node && node.treeViewItem && node.pluginTreeItem && node.value) {\n            const resolved = await this.options.treeDataProvider.resolveTreeItem(node.pluginTreeItem, node.value, token) ?? node.pluginTreeItem;\n            node.treeViewItem.command = this.commandsConverter.toSafeCommand(resolved.command, node.disposables);\n            node.treeViewItem.tooltip = resolved.tooltip;\n            return node.treeViewItem;\n        }\n\n        return undefined;\n    }\n\n    hasResolveTreeItem(): boolean {\n        return !!this.options.treeDataProvider.resolveTreeItem;\n    }\n\n    private selectedItemIds = new Set<string>();\n    get selectedElements(): T[] {\n        const items: T[] = [];\n        for (const id of this.selectedItemIds) {\n            const item = this.getElement(id);\n            if (item) {\n                items.push(item);\n            }\n        }\n        return items;\n    }\n\n    setSelection(selectedItemIds: string[]): void {\n        const toDelete = new Set<string>(this.selectedItemIds);\n        for (const id of selectedItemIds) {\n            toDelete.delete(id);\n            if (!this.selectedItemIds.has(id)) {\n                this.doSetSelection(selectedItemIds);\n                return;\n            }\n        }\n        if (toDelete.size) {\n            this.doSetSelection(selectedItemIds);\n        }\n    }\n    protected doSetSelection(selectedItemIts: string[]): void {\n        this.selectedItemIds = new Set(selectedItemIts);\n        this.onDidChangeSelectionEmitter.fire(Object.freeze({ selection: this.selectedElements }));\n    }\n\n    private _visible = false;\n    get visible(): boolean {\n        return this._visible;\n    }\n\n    setVisible(visible: boolean): void {\n        if (visible !== this._visible) {\n            this._visible = visible;\n            this.onDidChangeVisibilityEmitter.fire(Object.freeze({ visible: this._visible }));\n        }\n    }\n\n    async onDragStarted(treeItemIds: string[], token: CancellationToken): Promise<UriComponents[] | undefined> {\n        const treeItems: T[] = [];\n        for (const id of treeItemIds) {\n            const item = this.getElement(id);\n            if (item) {\n                treeItems.push(item);\n            }\n        }\n        if (this.options.dragAndDropController?.handleDrag) {\n            this.localDataTransfer.clear();\n            await this.options.dragAndDropController.handleDrag(treeItems, this.localDataTransfer, token);\n            const uriList = await this.localDataTransfer.get('text/uri-list')?.asString();\n            if (uriList) {\n                return uriList.split('\\n').map(str => URI.parse(str));\n            }\n        }\n        return undefined;\n    }\n\n    async dragEnd(): Promise<void> {\n        this.localDataTransfer.clear();\n    }\n\n    async handleDrop(treeItemId: string | undefined, dataTransferItems: [string, string | DataTransferFileDTO][], token: CancellationToken): Promise<void> {\n        const treeItem = treeItemId ? this.getElement(treeItemId) : undefined;\n        const dropTransfer = new DataTransfer();\n        if (this.options.dragAndDropController?.handleDrop) {\n            this.localDataTransfer.forEach((item, type) => {\n                dropTransfer.set(type, item);\n            });\n            for (const [type, item] of dataTransferItems) {\n                // prefer the item the plugin has set in `onDragStarted`;\n                if (!dropTransfer.has(type)) {\n                    if (typeof item === 'string') {\n                        dropTransfer.set(type, new DataTransferItem(item));\n                    } else {\n                        const file: DataTransferFile = {\n                            name: item.name,\n                            data: () => this.proxy.$readDroppedFile(item.contentId).then(buffer => buffer.buffer),\n                            uri: item.uri ? URI.revive(item.uri) : undefined\n                        };\n\n                        const fileItem = new class extends DataTransferItem {\n                            override asFile(): DataTransferFile | undefined {\n                                return file;\n                            }\n                        }(file);\n\n                        dropTransfer.set(type, fileItem);\n                    }\n                }\n            }\n            return this.options.dragAndDropController.handleDrop(treeItem, dropTransfer, token);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport * as lstypes from '@theia/core/shared/vscode-languageserver-protocol';\nimport { InlineValueEvaluatableExpression, InlineValueText, InlineValueVariableLookup, QuickPickItemKind, URI } from './types-impl';\nimport * as rpc from '../common/plugin-api-rpc';\nimport {\n    DecorationOptions, EditorPosition, Plugin, Position, WorkspaceTextEditDto, WorkspaceFileEditDto, Selection, TaskDto, WorkspaceEditDto\n} from '../common/plugin-api-rpc';\nimport * as model from '../common/plugin-api-rpc-model';\nimport { LanguageFilter, LanguageSelector, RelativePattern } from '@theia/editor/lib/common/language-selector';\nimport { MarkdownString as PluginMarkdownStringImpl } from './markdown-string';\nimport * as types from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport { isReadonlyArray } from '../common/arrays';\nimport { MarkdownString as MarkdownStringDTO } from '@theia/core/lib/common/markdown-rendering';\nimport { DisposableCollection, isEmptyObject, isObject } from '@theia/core/lib/common';\nimport * as notebooks from '@theia/notebook/lib/common';\nimport { CommandsConverter } from './command-registry';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { CellData, CellExecutionUpdateType, CellOutput, CellOutputItem, CellRange, isTextStreamMime } from '@theia/notebook/lib/common';\nimport { CellExecuteUpdate, CellExecutionComplete } from '@theia/notebook/lib/browser';\n\nconst SIDE_GROUP = -2;\nconst ACTIVE_GROUP = -1;\n\nexport function toViewColumn(ep?: EditorPosition): theia.ViewColumn | undefined {\n    if (typeof ep !== 'number') {\n        return undefined;\n    }\n\n    if (ep === EditorPosition.ONE) {\n        return <number>types.ViewColumn.One;\n    } else if (ep === EditorPosition.TWO) {\n        return <number>types.ViewColumn.Two;\n    } else if (ep === EditorPosition.THREE) {\n        return <number>types.ViewColumn.Three;\n    } else if (ep === EditorPosition.FOUR) {\n        return <number>types.ViewColumn.Four;\n    } else if (ep === EditorPosition.FIVE) {\n        return <number>types.ViewColumn.Five;\n    } else if (ep === EditorPosition.SIX) {\n        return <number>types.ViewColumn.Six;\n    } else if (ep === EditorPosition.SEVEN) {\n        return <number>types.ViewColumn.Seven;\n    } else if (ep === EditorPosition.EIGHT) {\n        return <number>types.ViewColumn.Eight;\n    } else if (ep === EditorPosition.NINE) {\n        return <number>types.ViewColumn.Nine;\n    }\n\n    return undefined;\n}\n\nexport function fromViewColumn(column?: theia.ViewColumn): number {\n    if (typeof column === 'number' && column >= types.ViewColumn.One) {\n        return column - 1;\n    }\n\n    if (column! === <number>types.ViewColumn.Beside) {\n        return SIDE_GROUP;\n    }\n\n    return ACTIVE_GROUP;\n}\n\nexport function toWebviewPanelShowOptions(options: theia.ViewColumn | theia.WebviewPanelShowOptions): theia.WebviewPanelShowOptions {\n    if (typeof options === 'object') {\n        const showOptions = options as theia.WebviewPanelShowOptions;\n        return {\n            area: showOptions.area ? showOptions.area : types.WebviewPanelTargetArea.Main,\n            viewColumn: showOptions.viewColumn ? fromViewColumn(showOptions.viewColumn) : undefined,\n            preserveFocus: showOptions.preserveFocus ? showOptions.preserveFocus : false\n        };\n    }\n\n    return {\n        area: types.WebviewPanelTargetArea.Main,\n        viewColumn: fromViewColumn(options as theia.ViewColumn),\n        preserveFocus: false\n    };\n}\n\nexport function toSelection(selection: Selection): types.Selection {\n    const { selectionStartLineNumber, selectionStartColumn, positionLineNumber, positionColumn } = selection;\n    const start = new types.Position(selectionStartLineNumber - 1, selectionStartColumn - 1);\n    const end = new types.Position(positionLineNumber - 1, positionColumn - 1);\n    return new types.Selection(start, end);\n}\n\nexport function fromSelection(selection: types.Selection): Selection {\n    const { active, anchor } = selection;\n    return {\n        selectionStartLineNumber: anchor.line + 1,\n        selectionStartColumn: anchor.character + 1,\n        positionLineNumber: active.line + 1,\n        positionColumn: active.character + 1\n    };\n}\n\nexport function toRange(range: model.Range): types.Range {\n    const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n    return new types.Range(startLineNumber - 1, startColumn - 1, endLineNumber - 1, endColumn - 1);\n}\n\nexport function fromRange(range: undefined): undefined;\nexport function fromRange(range: theia.Range): model.Range;\nexport function fromRange(range: theia.Range | undefined): model.Range | undefined;\nexport function fromRange(range: theia.Range | undefined): model.Range | undefined {\n    if (!range) {\n        return undefined;\n    }\n    const { start, end } = range;\n    return {\n        startLineNumber: start.line + 1,\n        startColumn: start.character + 1,\n        endLineNumber: end.line + 1,\n        endColumn: end.character + 1\n    };\n}\n\nexport function fromPosition(position: types.Position | theia.Position): Position {\n    return { lineNumber: position.line + 1, column: position.character + 1 };\n}\n\nexport function toPosition(position: Position): types.Position {\n    return new types.Position(position.lineNumber - 1, position.column - 1);\n}\n\nfunction isDecorationOptions(arg: unknown): arg is theia.DecorationOptions {\n    return isObject<theia.DecorationOptions>(arg) && typeof arg.range !== 'undefined';\n}\n\nexport function isDecorationOptionsArr(something: theia.Range[] | theia.DecorationOptions[]): something is theia.DecorationOptions[] {\n    if (something.length === 0) {\n        return true;\n    }\n    return isDecorationOptions(something[0]) ? true : false;\n}\n\nexport function fromRangeOrRangeWithMessage(ranges: theia.Range[] | theia.DecorationOptions[]): DecorationOptions[] {\n\n    if (isDecorationOptionsArr(ranges)) {\n        return ranges.map(r => {\n            let hoverMessage;\n            if (Array.isArray(r.hoverMessage)) {\n                hoverMessage = fromManyMarkdown(r.hoverMessage);\n            } else if (r.hoverMessage) {\n                hoverMessage = fromMarkdown(r.hoverMessage);\n            } else {\n                hoverMessage = undefined;\n            }\n            return {\n                range: fromRange(r.range)!,\n                hoverMessage: hoverMessage,\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                renderOptions: <any> /* URI vs Uri */r.renderOptions\n            };\n        });\n    } else {\n        return ranges.map(r => ({ range: fromRange(r) }));\n    }\n}\n\nexport function fromManyMarkdown(markup: (theia.MarkdownString | theia.MarkedString)[]): MarkdownStringDTO[] {\n    return markup.map(fromMarkdown);\n}\n\ninterface Codeblock {\n    language: string;\n    value: string;\n}\n\nfunction isCodeblock(arg: unknown): arg is Codeblock {\n    return isObject<Codeblock>(arg)\n        && typeof arg.language === 'string'\n        && typeof arg.value === 'string';\n}\n\nexport function fromMarkdown(markup: theia.MarkdownString | theia.MarkedString): MarkdownStringDTO {\n    if (isCodeblock(markup)) {\n        const { language, value } = markup;\n        return { value: '```' + language + '\\n' + value + '\\n```\\n' };\n    } else if (markup instanceof PluginMarkdownStringImpl) {\n        return markup.toJSON();\n    } else if (MarkdownStringDTO.is(markup)) {\n        return markup;\n    } else if (typeof markup === 'string') {\n        return { value: markup };\n    } else {\n        return { value: '' };\n    }\n}\n\nexport function fromMarkdownOrString(value: string | theia.MarkdownString | undefined): string | MarkdownStringDTO | undefined {\n    if (value === undefined) {\n        return undefined;\n    } else if (typeof value === 'string') {\n        return value;\n    } else {\n        return fromMarkdown(value);\n    }\n}\n\nexport function toMarkdown(value: MarkdownStringDTO): PluginMarkdownStringImpl {\n    const implemented = new PluginMarkdownStringImpl(value.value, value.supportThemeIcons);\n    implemented.isTrusted = value.isTrusted;\n    implemented.supportHtml = value.supportHtml;\n    implemented.baseUri = value.baseUri && URI.revive(implemented.baseUri);\n    return implemented;\n}\n\nexport function fromDocumentSelector(selector: theia.DocumentSelector | undefined): LanguageSelector | undefined {\n    if (!selector) {\n        return undefined;\n    } else if (isReadonlyArray(selector)) {\n        return <LanguageSelector>selector.map(fromDocumentSelector);\n    } else if (typeof selector === 'string') {\n        return selector;\n    } else {\n        return {\n            language: selector.language,\n            scheme: selector.scheme,\n            pattern: fromGlobPattern(selector.pattern!)\n        } as LanguageFilter;\n    }\n\n}\n\nexport function fromGlobPattern(pattern: theia.GlobPattern): string | RelativePattern {\n    if (typeof pattern === 'string') {\n        return pattern;\n    }\n\n    if (isRelativePattern(pattern)) {\n        return new types.RelativePattern(pattern.baseUri, pattern.pattern);\n    }\n\n    return pattern;\n}\n\nfunction isRelativePattern(obj: {}): obj is theia.RelativePattern {\n    const rp = obj as theia.RelativePattern;\n    return rp && typeof rp.baseUri === 'string' && typeof rp.pattern === 'string';\n}\n\nexport function fromCompletionItemKind(kind?: types.CompletionItemKind): model.CompletionItemKind {\n    switch (kind) {\n        case types.CompletionItemKind.Method: return model.CompletionItemKind.Method;\n        case types.CompletionItemKind.Function: return model.CompletionItemKind.Function;\n        case types.CompletionItemKind.Constructor: return model.CompletionItemKind.Constructor;\n        case types.CompletionItemKind.Field: return model.CompletionItemKind.Field;\n        case types.CompletionItemKind.Variable: return model.CompletionItemKind.Variable;\n        case types.CompletionItemKind.Class: return model.CompletionItemKind.Class;\n        case types.CompletionItemKind.Interface: return model.CompletionItemKind.Interface;\n        case types.CompletionItemKind.Struct: return model.CompletionItemKind.Struct;\n        case types.CompletionItemKind.Module: return model.CompletionItemKind.Module;\n        case types.CompletionItemKind.Property: return model.CompletionItemKind.Property;\n        case types.CompletionItemKind.Unit: return model.CompletionItemKind.Unit;\n        case types.CompletionItemKind.Value: return model.CompletionItemKind.Value;\n        case types.CompletionItemKind.Constant: return model.CompletionItemKind.Constant;\n        case types.CompletionItemKind.Enum: return model.CompletionItemKind.Enum;\n        case types.CompletionItemKind.EnumMember: return model.CompletionItemKind.EnumMember;\n        case types.CompletionItemKind.Keyword: return model.CompletionItemKind.Keyword;\n        case types.CompletionItemKind.Snippet: return model.CompletionItemKind.Snippet;\n        case types.CompletionItemKind.Text: return model.CompletionItemKind.Text;\n        case types.CompletionItemKind.Color: return model.CompletionItemKind.Color;\n        case types.CompletionItemKind.File: return model.CompletionItemKind.File;\n        case types.CompletionItemKind.Reference: return model.CompletionItemKind.Reference;\n        case types.CompletionItemKind.Folder: return model.CompletionItemKind.Folder;\n        case types.CompletionItemKind.Event: return model.CompletionItemKind.Event;\n        case types.CompletionItemKind.Operator: return model.CompletionItemKind.Operator;\n        case types.CompletionItemKind.TypeParameter: return model.CompletionItemKind.TypeParameter;\n        case types.CompletionItemKind.User: return model.CompletionItemKind.User;\n        case types.CompletionItemKind.Issue: return model.CompletionItemKind.Issue;\n    }\n    return model.CompletionItemKind.Property;\n}\n\nexport function toCompletionItemKind(kind?: model.CompletionItemKind): types.CompletionItemKind {\n    switch (kind) {\n        case model.CompletionItemKind.Method: return types.CompletionItemKind.Method;\n        case model.CompletionItemKind.Function: return types.CompletionItemKind.Function;\n        case model.CompletionItemKind.Constructor: return types.CompletionItemKind.Constructor;\n        case model.CompletionItemKind.Field: return types.CompletionItemKind.Field;\n        case model.CompletionItemKind.Variable: return types.CompletionItemKind.Variable;\n        case model.CompletionItemKind.Class: return types.CompletionItemKind.Class;\n        case model.CompletionItemKind.Interface: return types.CompletionItemKind.Interface;\n        case model.CompletionItemKind.Struct: return types.CompletionItemKind.Struct;\n        case model.CompletionItemKind.Module: return types.CompletionItemKind.Module;\n        case model.CompletionItemKind.Property: return types.CompletionItemKind.Property;\n        case model.CompletionItemKind.Unit: return types.CompletionItemKind.Unit;\n        case model.CompletionItemKind.Value: return types.CompletionItemKind.Value;\n        case model.CompletionItemKind.Constant: return types.CompletionItemKind.Constant;\n        case model.CompletionItemKind.Enum: return types.CompletionItemKind.Enum;\n        case model.CompletionItemKind.EnumMember: return types.CompletionItemKind.EnumMember;\n        case model.CompletionItemKind.Keyword: return types.CompletionItemKind.Keyword;\n        case model.CompletionItemKind.Snippet: return types.CompletionItemKind.Snippet;\n        case model.CompletionItemKind.Text: return types.CompletionItemKind.Text;\n        case model.CompletionItemKind.Color: return types.CompletionItemKind.Color;\n        case model.CompletionItemKind.File: return types.CompletionItemKind.File;\n        case model.CompletionItemKind.Reference: return types.CompletionItemKind.Reference;\n        case model.CompletionItemKind.Folder: return types.CompletionItemKind.Folder;\n        case model.CompletionItemKind.Event: return types.CompletionItemKind.Event;\n        case model.CompletionItemKind.Operator: return types.CompletionItemKind.Operator;\n        case model.CompletionItemKind.TypeParameter: return types.CompletionItemKind.TypeParameter;\n        case model.CompletionItemKind.User: return types.CompletionItemKind.User;\n        case model.CompletionItemKind.Issue: return types.CompletionItemKind.Issue;\n    }\n    return types.CompletionItemKind.Property;\n}\n\nexport function fromTextEdit(edit: theia.TextEdit): model.TextEdit {\n    return {\n        text: edit.newText,\n        range: fromRange(edit.range)\n    };\n}\n\nfunction fromSnippetTextEdit(edit: theia.SnippetTextEdit): model.TextEdit & { insertAsSnippet?: boolean } {\n    return {\n        text: edit.snippet.value,\n        range: fromRange(edit.range),\n        insertAsSnippet: true\n    };\n}\n\nexport function convertDiagnosticToMarkerData(diagnostic: theia.Diagnostic): model.MarkerData {\n    return {\n        code: convertCode(diagnostic.code),\n        severity: convertSeverity(diagnostic.severity),\n        message: diagnostic.message,\n        source: diagnostic.source,\n        startLineNumber: diagnostic.range.start.line + 1,\n        startColumn: diagnostic.range.start.character + 1,\n        endLineNumber: diagnostic.range.end.line + 1,\n        endColumn: diagnostic.range.end.character + 1,\n        relatedInformation: convertRelatedInformation(diagnostic.relatedInformation),\n        tags: convertTags(diagnostic.tags)\n    };\n}\n\nexport function convertCode(code: string | number | { value: string | number; target: theia.Uri } | undefined): string | undefined {\n    if (typeof code === 'number') {\n        return String(code);\n    }\n    if (typeof code === 'string' || typeof code === 'undefined') {\n        return code;\n    } else {\n        return String(code.value);\n    };\n}\n\nfunction convertSeverity(severity: types.DiagnosticSeverity): types.MarkerSeverity {\n    switch (severity) {\n        case types.DiagnosticSeverity.Error: return types.MarkerSeverity.Error;\n        case types.DiagnosticSeverity.Warning: return types.MarkerSeverity.Warning;\n        case types.DiagnosticSeverity.Information: return types.MarkerSeverity.Info;\n        case types.DiagnosticSeverity.Hint: return types.MarkerSeverity.Hint;\n    }\n}\n\nfunction convertRelatedInformation(diagnosticsRelatedInformation: theia.DiagnosticRelatedInformation[] | undefined): model.RelatedInformation[] | undefined {\n    if (!diagnosticsRelatedInformation) {\n        return undefined;\n    }\n\n    const relatedInformation: model.RelatedInformation[] = [];\n    for (const item of diagnosticsRelatedInformation) {\n        relatedInformation.push({\n            resource: item.location.uri.toString(),\n            message: item.message,\n            startLineNumber: item.location.range.start.line + 1,\n            startColumn: item.location.range.start.character + 1,\n            endLineNumber: item.location.range.end.line + 1,\n            endColumn: item.location.range.end.character + 1\n        });\n    }\n    return relatedInformation;\n}\n\nfunction convertTags(tags: types.DiagnosticTag[] | undefined): types.MarkerTag[] | undefined {\n    if (!tags) {\n        return undefined;\n    }\n\n    const markerTags: types.MarkerTag[] = [];\n    for (const tag of tags) {\n        switch (tag) {\n            case types.DiagnosticTag.Unnecessary:\n                markerTags.push(types.MarkerTag.Unnecessary);\n                break;\n            case types.DiagnosticTag.Deprecated:\n                markerTags.push(types.MarkerTag.Deprecated);\n                break;\n        }\n    }\n    return markerTags;\n}\n\nexport function fromHover(hover: theia.Hover): model.Hover {\n    return <model.Hover>{\n        range: fromRange(hover.range),\n        contents: fromManyMarkdown(hover.contents)\n    };\n}\n\nexport function fromEvaluatableExpression(evaluatableExpression: theia.EvaluatableExpression): model.EvaluatableExpression {\n    return <model.EvaluatableExpression>{\n        range: fromRange(evaluatableExpression.range),\n        expression: evaluatableExpression.expression\n    };\n}\n\nexport function fromInlineValue(inlineValue: theia.InlineValue): model.InlineValue {\n    if (inlineValue instanceof InlineValueText) {\n        return <model.InlineValueText>{\n            type: 'text',\n            range: fromRange(inlineValue.range),\n            text: inlineValue.text\n        };\n    } else if (inlineValue instanceof InlineValueVariableLookup) {\n        return <model.InlineValueVariableLookup>{\n            type: 'variable',\n            range: fromRange(inlineValue.range),\n            variableName: inlineValue.variableName,\n            caseSensitiveLookup: inlineValue.caseSensitiveLookup\n        };\n    } else if (inlineValue instanceof InlineValueEvaluatableExpression) {\n        return <model.InlineValueEvaluatableExpression>{\n            type: 'expression',\n            range: fromRange(inlineValue.range),\n            expression: inlineValue.expression\n        };\n    } else {\n        throw new Error('Unknown InlineValue type');\n    }\n}\n\nexport function toInlineValueContext(inlineValueContext: model.InlineValueContext): theia.InlineValueContext {\n    const ivLocation = inlineValueContext.stoppedLocation;\n    return <theia.InlineValueContext>{\n        frameId: inlineValueContext.frameId,\n        stoppedLocation: new types.Range(ivLocation.startLineNumber, ivLocation.startColumn, ivLocation.endLineNumber, ivLocation.endColumn)\n    };\n}\n\nexport function fromLocation(location: theia.Location): model.Location {\n    return <model.Location>{\n        uri: location.uri,\n        range: fromRange(location.range)\n    };\n}\n\nexport function fromTextDocumentShowOptions(options: theia.TextDocumentShowOptions): model.TextDocumentShowOptions {\n    if (options.selection) {\n        return {\n            ...options,\n            selection: fromRange(options.selection),\n        };\n    }\n    return options as model.TextDocumentShowOptions;\n}\n\nexport function fromDefinitionLink(definitionLink: theia.DefinitionLink): model.LocationLink {\n    return <model.LocationLink>{\n        uri: definitionLink.targetUri,\n        range: fromRange(definitionLink.targetRange),\n        originSelectionRange: definitionLink.originSelectionRange ? fromRange(definitionLink.originSelectionRange) : undefined,\n        targetSelectionRange: definitionLink.targetSelectionRange ? fromRange(definitionLink.targetSelectionRange) : undefined\n    };\n}\n\nexport namespace DocumentLink {\n\n    export function from(link: theia.DocumentLink): model.DocumentLink {\n        return {\n            range: fromRange(link.range),\n            url: link.target,\n            tooltip: link.tooltip\n        };\n    }\n\n    export function to(link: model.DocumentLink): theia.DocumentLink {\n        let target: URI | undefined = undefined;\n        if (link.url) {\n            try {\n                target = typeof link.url === 'string' ? URI.parse(link.url, true) : URI.revive(link.url);\n            } catch (err) {\n                // ignore\n            }\n        }\n        return new types.DocumentLink(toRange(link.range), target);\n    }\n}\n\nexport function fromDocumentHighlightKind(kind?: theia.DocumentHighlightKind): model.DocumentHighlightKind | undefined {\n    switch (kind) {\n        case types.DocumentHighlightKind.Text: return model.DocumentHighlightKind.Text;\n        case types.DocumentHighlightKind.Read: return model.DocumentHighlightKind.Read;\n        case types.DocumentHighlightKind.Write: return model.DocumentHighlightKind.Write;\n    }\n    return model.DocumentHighlightKind.Text;\n}\n\nexport function fromDocumentHighlight(documentHighlight: theia.DocumentHighlight): model.DocumentHighlight {\n    return <model.DocumentHighlight>{\n        range: fromRange(documentHighlight.range),\n        kind: fromDocumentHighlightKind(documentHighlight.kind)\n    };\n}\n\nexport namespace ParameterInformation {\n    export function from(info: types.ParameterInformation): model.ParameterInformation {\n        return {\n            label: info.label,\n            documentation: info.documentation ? fromMarkdown(info.documentation) : undefined\n        };\n    }\n    export function to(info: model.ParameterInformation): types.ParameterInformation {\n        return {\n            label: info.label,\n            documentation: MarkdownStringDTO.is(info.documentation) ? toMarkdown(info.documentation) : info.documentation\n        };\n    }\n}\n\nexport namespace SignatureInformation {\n\n    export function from(info: types.SignatureInformation): model.SignatureInformation {\n        return {\n            label: info.label,\n            documentation: info.documentation ? fromMarkdown(info.documentation) : undefined,\n            parameters: info.parameters && info.parameters.map(ParameterInformation.from),\n            activeParameter: info.activeParameter\n        };\n    }\n\n    export function to(info: model.SignatureInformation): types.SignatureInformation {\n        return {\n            label: info.label,\n            documentation: MarkdownStringDTO.is(info.documentation) ? toMarkdown(info.documentation) : info.documentation,\n            parameters: info.parameters && info.parameters.map(ParameterInformation.to),\n            activeParameter: info.activeParameter\n        };\n    }\n}\n\nexport namespace SignatureHelp {\n\n    export function from(id: number, help: types.SignatureHelp): model.SignatureHelp {\n        return {\n            id,\n            activeSignature: help.activeSignature,\n            activeParameter: help.activeParameter,\n            signatures: help.signatures && help.signatures.map(SignatureInformation.from)\n        };\n    }\n\n    export function to(help: model.SignatureHelp): types.SignatureHelp {\n        return {\n            activeSignature: help.activeSignature,\n            activeParameter: help.activeParameter,\n            signatures: help.signatures && help.signatures.map(SignatureInformation.to)\n        };\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function fromWorkspaceEdit(value: theia.WorkspaceEdit, documents?: any): WorkspaceEditDto {\n    const result: WorkspaceEditDto = {\n        edits: []\n    };\n    for (const entry of (value as types.WorkspaceEdit)._allEntries()) {\n        if (entry?._type === types.FileEditType.Text) {\n            // text edits\n            const doc = documents ? documents.getDocument(entry.uri.toString()) : undefined;\n            const workspaceTextEditDto: WorkspaceTextEditDto = {\n                resource: entry.uri,\n                modelVersionId: doc?.version,\n                textEdit: (entry.edit instanceof types.TextEdit) ? fromTextEdit(entry.edit) : fromSnippetTextEdit(entry.edit),\n                metadata: entry.metadata\n            };\n            result.edits.push(workspaceTextEditDto);\n        } else if (entry?._type === types.FileEditType.File) {\n            // resource edits\n            const workspaceFileEditDto: WorkspaceFileEditDto = {\n                oldResource: entry.from,\n                newResource: entry.to,\n                options: entry.options,\n                metadata: entry.metadata\n            };\n            result.edits.push(workspaceFileEditDto);\n        } else if (entry?._type === types.FileEditType.Cell) {\n            // cell edit\n            if (entry.edit) {\n                result.edits.push({\n                    metadata: entry.metadata,\n                    resource: entry.uri,\n                    cellEdit: entry.edit,\n                });\n            }\n        } else if (entry?._type === types.FileEditType.CellReplace) {\n            // cell replace\n            result.edits.push({\n                metadata: entry.metadata,\n                resource: entry.uri,\n                cellEdit: {\n                    editType: notebooks.CellEditType.Replace,\n                    index: entry.index,\n                    count: entry.count,\n                    cells: entry.cells.map(NotebookCellData.from)\n                }\n            });\n        }\n    }\n    return result;\n}\n\nexport namespace SymbolKind {\n    const fromMapping: { [kind: number]: model.SymbolKind } = Object.create(null);\n    fromMapping[model.SymbolKind.File] = model.SymbolKind.File;\n    fromMapping[model.SymbolKind.Module] = model.SymbolKind.Module;\n    fromMapping[model.SymbolKind.Namespace] = model.SymbolKind.Namespace;\n    fromMapping[model.SymbolKind.Package] = model.SymbolKind.Package;\n    fromMapping[model.SymbolKind.Class] = model.SymbolKind.Class;\n    fromMapping[model.SymbolKind.Method] = model.SymbolKind.Method;\n    fromMapping[model.SymbolKind.Property] = model.SymbolKind.Property;\n    fromMapping[model.SymbolKind.Field] = model.SymbolKind.Field;\n    fromMapping[model.SymbolKind.Constructor] = model.SymbolKind.Constructor;\n    fromMapping[model.SymbolKind.Enum] = model.SymbolKind.Enum;\n    fromMapping[model.SymbolKind.Interface] = model.SymbolKind.Interface;\n    fromMapping[model.SymbolKind.Function] = model.SymbolKind.Function;\n    fromMapping[model.SymbolKind.Variable] = model.SymbolKind.Variable;\n    fromMapping[model.SymbolKind.Constant] = model.SymbolKind.Constant;\n    fromMapping[model.SymbolKind.String] = model.SymbolKind.String;\n    fromMapping[model.SymbolKind.Number] = model.SymbolKind.Number;\n    fromMapping[model.SymbolKind.Boolean] = model.SymbolKind.Boolean;\n    fromMapping[model.SymbolKind.Array] = model.SymbolKind.Array;\n    fromMapping[model.SymbolKind.Object] = model.SymbolKind.Object;\n    fromMapping[model.SymbolKind.Key] = model.SymbolKind.Key;\n    fromMapping[model.SymbolKind.Null] = model.SymbolKind.Null;\n    fromMapping[model.SymbolKind.EnumMember] = model.SymbolKind.EnumMember;\n    fromMapping[model.SymbolKind.Struct] = model.SymbolKind.Struct;\n    fromMapping[model.SymbolKind.Event] = model.SymbolKind.Event;\n    fromMapping[model.SymbolKind.Operator] = model.SymbolKind.Operator;\n    fromMapping[model.SymbolKind.TypeParameter] = model.SymbolKind.TypeParameter;\n\n    export function fromSymbolKind(kind: theia.SymbolKind): model.SymbolKind {\n        return fromMapping[kind] || model.SymbolKind.Property;\n    }\n\n    export function toSymbolKind(kind: model.SymbolKind): theia.SymbolKind {\n        for (const k in fromMapping) {\n            if (fromMapping[k] === kind) {\n                return Number(k);\n            }\n        }\n        return model.SymbolKind.Property;\n    }\n}\n\nexport function toCodeActionTriggerKind(triggerKind: model.CodeActionTriggerKind): types.CodeActionTriggerKind {\n    switch (triggerKind) {\n        case model.CodeActionTriggerKind.Invoke:\n            return types.CodeActionTriggerKind.Invoke;\n\n        case model.CodeActionTriggerKind.Automatic:\n            return types.CodeActionTriggerKind.Automatic;\n    }\n}\n\nexport function fromDocumentSymbol(info: theia.DocumentSymbol): model.DocumentSymbol {\n    const result: model.DocumentSymbol = {\n        name: info.name,\n        detail: info.detail,\n        range: fromRange(info.range)!,\n        tags: info.tags ? info.tags.map(fromSymbolTag) : [],\n        selectionRange: fromRange(info.selectionRange)!,\n        kind: SymbolKind.fromSymbolKind(info.kind)\n    };\n    if (info.children) {\n        result.children = info.children.map(fromDocumentSymbol);\n    }\n    return result;\n}\n\nexport function toDocumentSymbol(symbol: model.DocumentSymbol): theia.DocumentSymbol {\n    return {\n        name: symbol.name,\n        detail: symbol.detail,\n        range: toRange(symbol.range)!,\n        tags: symbol.tags && symbol.tags.length > 0 ? symbol.tags.map(toSymbolTag) : [],\n        selectionRange: toRange(symbol.selectionRange)!,\n        children: symbol.children ? symbol.children.map(toDocumentSymbol) : [],\n        kind: SymbolKind.toSymbolKind(symbol.kind)\n    };\n}\n\nexport function fromSymbolTag(kind: types.SymbolTag): model.SymbolTag {\n    switch (kind) {\n        case types.SymbolTag.Deprecated: return model.SymbolTag.Deprecated;\n    }\n}\n\nexport function toSymbolTag(kind: model.SymbolTag): types.SymbolTag {\n    switch (kind) {\n        case model.SymbolTag.Deprecated: return types.SymbolTag.Deprecated;\n    }\n}\n\nexport function isModelLocation(arg: unknown): arg is model.Location {\n    return isObject<model.Location>(arg) &&\n        isModelRange(arg.range) &&\n        isUriComponents(arg.uri);\n}\n\nexport function isModelRange(arg: unknown): arg is model.Range {\n    return isObject<model.Range>(arg) &&\n        typeof arg.startLineNumber === 'number' &&\n        typeof arg.startColumn === 'number' &&\n        typeof arg.endLineNumber === 'number' &&\n        typeof arg.endColumn === 'number';\n}\n\nexport function isUriComponents(arg: unknown): arg is UriComponents {\n    return isObject<UriComponents>(arg) &&\n        typeof arg.scheme === 'string' &&\n        typeof arg.path === 'string' &&\n        typeof arg.query === 'string' &&\n        typeof arg.fragment === 'string';\n}\n\nexport function isModelCallHierarchyItem(arg: unknown): arg is model.CallHierarchyItem {\n    return isObject<model.CallHierarchyItem>(arg)\n        && isModelRange(arg.range)\n        && isModelRange(arg.selectionRange)\n        && isUriComponents(arg.uri)\n        && !!arg.name;\n}\n\nexport function isModelCallHierarchyIncomingCall(arg: unknown): arg is model.CallHierarchyIncomingCall {\n    return isObject<model.CallHierarchyIncomingCall>(arg) &&\n        'from' in arg &&\n        'fromRanges' in arg &&\n        isModelCallHierarchyItem(arg.from);\n}\n\nexport function isModelCallHierarchyOutgoingCall(arg: unknown): arg is model.CallHierarchyOutgoingCall {\n    return isObject<model.CallHierarchyOutgoingCall>(arg) &&\n        'to' in arg &&\n        'fromRanges' in arg &&\n        isModelCallHierarchyItem(arg.to);\n}\n\nexport function toLocation(value: model.Location): types.Location {\n    return new types.Location(URI.revive(value.uri), toRange(value.range));\n}\n\nexport function fromHierarchyItem(item: types.CallHierarchyItem | types.TypeHierarchyItem): model.HierarchyItem {\n    return {\n        kind: SymbolKind.fromSymbolKind(item.kind),\n        name: item.name,\n        detail: item.detail,\n        uri: item.uri,\n        range: fromRange(item.range),\n        selectionRange: fromRange(item.selectionRange),\n        tags: item.tags,\n        _itemId: item._itemId,\n        _sessionId: item._sessionId,\n    };\n}\n\nexport function fromCallHierarchyItem(item: types.CallHierarchyItem): model.CallHierarchyItem {\n    return <model.CallHierarchyItem>fromHierarchyItem(item);\n}\n\nexport function toCallHierarchyItem(value: model.CallHierarchyItem): types.CallHierarchyItem {\n    const item = new types.CallHierarchyItem(\n        SymbolKind.toSymbolKind(value.kind),\n        value.name,\n        value.detail ? value.detail : '',\n        URI.revive(value.uri),\n        toRange(value.range),\n        toRange(value.selectionRange),\n    );\n    item.tags = value.tags;\n    item._itemId = value._itemId;\n    item._sessionId = value._sessionId;\n\n    return item;\n}\n\nexport function toCallHierarchyIncomingCall(value: model.CallHierarchyIncomingCall): types.CallHierarchyIncomingCall {\n    return new types.CallHierarchyIncomingCall(\n        toCallHierarchyItem(value.from),\n        value.fromRanges && value.fromRanges.map(toRange));\n}\n\nexport function toCallHierarchyOutgoingCall(value: model.CallHierarchyOutgoingCall): types.CallHierarchyOutgoingCall {\n    return new types.CallHierarchyOutgoingCall(\n        toCallHierarchyItem(value.to),\n        value.fromRanges && value.fromRanges.map(toRange));\n}\n\nexport function isModelTypeHierarchyItem(arg: unknown): arg is model.TypeHierarchyItem {\n    return isObject<model.TypeHierarchyItem>(arg)\n        && isModelRange(arg.range)\n        && isModelRange(arg.selectionRange)\n        && isUriComponents(arg.uri)\n        && !!arg.name;\n}\n\nexport function fromTypeHierarchyItem(item: types.TypeHierarchyItem): model.TypeHierarchyItem {\n    return <model.TypeHierarchyItem>fromHierarchyItem(item);\n}\n\nexport function toTypeHierarchyItem(value: model.TypeHierarchyItem): types.TypeHierarchyItem {\n    const item = new types.TypeHierarchyItem(\n        SymbolKind.toSymbolKind(value.kind),\n        value.name,\n        value.detail ? value.detail : '',\n        URI.revive(value.uri),\n        toRange(value.selectionRange),\n        toRange(value.range),\n    );\n    item.tags = value.tags;\n    item._itemId = value._itemId;\n    item._sessionId = value._sessionId;\n\n    return item;\n}\n\nexport function toWorkspaceFolder(folder: model.WorkspaceFolder): theia.WorkspaceFolder {\n    return {\n        uri: URI.revive(folder.uri),\n        name: folder.name,\n        index: folder.index\n    };\n}\n\nexport function fromTask(task: theia.Task): TaskDto | undefined {\n    if (!task) {\n        return undefined;\n    }\n\n    const taskDto = {} as TaskDto;\n    taskDto.label = task.name;\n    taskDto.source = task.source;\n\n    taskDto.runOptions = { reevaluateOnRerun: task.runOptions.reevaluateOnRerun };\n\n    if ((task as types.Task).hasProblemMatchers) {\n        taskDto.problemMatcher = task.problemMatchers;\n    }\n    if ('detail' in task) {\n        taskDto.detail = task.detail;\n    }\n    if (typeof task.scope === 'number') {\n        taskDto.scope = task.scope;\n    } else if (task.scope !== undefined) {\n        taskDto.scope = task.scope.uri.toString();\n    } else {\n        taskDto.scope = types.TaskScope.Workspace;\n    }\n\n    if (task.presentationOptions) {\n        taskDto.presentation = task.presentationOptions;\n    }\n\n    if (task.group) {\n        taskDto.group = {\n            kind: <rpc.TaskGroupKind>task.group.id,\n            isDefault: !!task.group.isDefault\n        };\n    }\n\n    const taskDefinition = task.definition;\n    if (!taskDefinition) {\n        return taskDto;\n    }\n\n    taskDto.type = taskDefinition.type;\n    const { type, ...properties } = taskDefinition;\n    for (const key in properties) {\n        if (properties.hasOwnProperty(key)) {\n            taskDto[key] = properties[key];\n        }\n    }\n\n    const execution = task.execution;\n    if (!execution) {\n        return taskDto;\n    }\n\n    if (types.ShellExecution.is(execution)) {\n        return fromShellExecution(execution, taskDto);\n    }\n\n    if (types.ProcessExecution.is(execution)) {\n        return fromProcessExecution(execution, taskDto);\n    }\n\n    if (types.CustomExecution.is(execution)) {\n        return fromCustomExecution(execution, taskDto);\n    }\n\n    return taskDto;\n}\n\nexport function toTask(taskDto: TaskDto): theia.Task {\n    if (!taskDto) {\n        throw new Error('Task should be provided for converting');\n    }\n\n    const { type, taskType, label, source, scope, problemMatcher, detail, command, args, options, group, presentation, runOptions, ...properties } = taskDto;\n    const result = {} as theia.Task;\n    result.name = label;\n    result.source = source;\n    result.runOptions = runOptions ?? {};\n    if (detail) {\n        result.detail = detail;\n    }\n    if (typeof scope === 'string') {\n        const uri = URI.parse(scope);\n        result.scope = {\n            uri,\n            name: uri.toString(),\n            index: 0\n        };\n    } else {\n        result.scope = scope;\n    }\n\n    const taskDefinition: theia.TaskDefinition = {\n        type: type\n    };\n\n    result.definition = taskDefinition;\n\n    if (taskType === 'process') {\n        result.execution = getProcessExecution(taskDto);\n    }\n\n    const execution = { command, args, options };\n    if (taskType === 'shell' || types.ShellExecution.is(execution)) {\n        result.execution = getShellExecution(taskDto);\n    }\n\n    if (taskType === 'customExecution' || types.CustomExecution.is(execution)) {\n        result.execution = getCustomExecution(taskDto);\n        // if taskType is customExecution, we need to put all the information into taskDefinition,\n        // because some parameters may be in taskDefinition.\n        taskDefinition.label = label;\n        taskDefinition.command = command;\n        taskDefinition.args = args;\n        taskDefinition.options = options;\n    }\n\n    if (group) {\n        result.group = new types.TaskGroup(\n            group.kind,\n            group.kind,\n            group.isDefault\n        );\n    }\n\n    if (presentation) {\n        result.presentationOptions = presentation;\n    }\n\n    if (!properties) {\n        return result;\n    }\n\n    for (const key in properties) {\n        if (properties.hasOwnProperty(key)) {\n            taskDefinition[key] = properties[key];\n        }\n    }\n\n    return result;\n}\n\nexport function fromProcessExecution(execution: theia.ProcessExecution, taskDto: TaskDto): TaskDto {\n    taskDto.taskType = 'process';\n    taskDto.command = execution.process;\n    taskDto.args = execution.args;\n\n    const options = execution.options;\n    if (options) {\n        taskDto.options = options;\n    }\n    return taskDto;\n}\n\nexport function fromShellExecution(execution: theia.ShellExecution, taskDto: TaskDto): TaskDto {\n    taskDto.taskType = 'shell';\n    const options = execution.options;\n    if (options) {\n        taskDto.options = getShellExecutionOptions(options);\n    }\n\n    const commandLine = execution.commandLine;\n    if (commandLine) {\n        taskDto.command = commandLine;\n        return taskDto;\n    }\n\n    if (execution.command) {\n        taskDto.command = getCommand(execution.command);\n        taskDto.args = getShellArgs(execution.args);\n        return taskDto;\n    } else {\n        throw new Error('Command is undefined');\n    }\n}\n\nexport function fromCustomExecution(execution: types.CustomExecution, taskDto: TaskDto): TaskDto {\n    taskDto.taskType = 'customExecution';\n    const callback = execution.callback;\n    if (callback) {\n        taskDto.callback = callback;\n        return taskDto;\n    } else {\n        throw new Error('Converting CustomExecution callback is not implemented');\n    }\n}\n\nexport function getProcessExecution(taskDto: TaskDto): theia.ProcessExecution {\n    return new types.ProcessExecution(\n        taskDto.command,\n        taskDto.args || [],\n        taskDto.options || {});\n}\n\nexport function getShellExecution(taskDto: TaskDto): theia.ShellExecution {\n    if (taskDto.command && Array.isArray(taskDto.args) && taskDto.args.length !== 0) {\n        return new types.ShellExecution(\n            taskDto.command,\n            taskDto.args,\n            taskDto.options || {});\n    }\n    return new types.ShellExecution(\n        taskDto.command || taskDto.commandLine,\n        taskDto.options || {});\n}\n\nexport function getCustomExecution(taskDto: TaskDto): theia.CustomExecution {\n    return new types.CustomExecution(taskDto.callback);\n}\n\nexport function getShellArgs(args: undefined | (string | theia.ShellQuotedString)[]): string[] {\n    if (!args || args.length === 0) {\n        return [];\n    }\n\n    const element = args[0];\n    if (typeof element === 'string') {\n        return args as string[];\n    }\n\n    const result: string[] = [];\n    const shellQuotedArgs = args as theia.ShellQuotedString[];\n\n    shellQuotedArgs.forEach(arg => {\n        result.push(arg.value);\n    });\n\n    return result;\n}\n\nfunction getCommand(command: string | theia.ShellQuotedString): string {\n    return typeof command === 'string' ? command : command.value;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function getShellExecutionOptions(options: theia.ShellExecutionOptions): { [key: string]: any } {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const result = {} as { [key: string]: any };\n\n    const env = options.env;\n    if (env) {\n        result['env'] = env;\n    }\n\n    const executable = options.executable;\n    if (executable) {\n        result['executable'] = executable;\n    }\n\n    const shellQuoting = options.shellQuoting;\n    if (shellQuoting) {\n        result['shellQuoting'] = shellQuoting;\n    }\n\n    const shellArgs = options.shellArgs;\n    if (shellArgs) {\n        result['shellArgs'] = shellArgs;\n    }\n\n    const cwd = options.cwd;\n    if (cwd) {\n        Object.assign(result, { cwd });\n    }\n\n    return result;\n}\n\nexport function fromSymbolInformation(symbolInformation: theia.SymbolInformation): lstypes.SymbolInformation | undefined {\n    if (!symbolInformation) {\n        return undefined;\n    }\n\n    if (symbolInformation.location && symbolInformation.location.range) {\n        const p1 = lstypes.Position.create(symbolInformation.location.range.start.line, symbolInformation.location.range.start.character);\n        const p2 = lstypes.Position.create(symbolInformation.location.range.end.line, symbolInformation.location.range.end.character);\n        return lstypes.SymbolInformation.create(symbolInformation.name, symbolInformation.kind++ as lstypes.SymbolKind, lstypes.Range.create(p1, p2),\n            symbolInformation.location.uri.toString(), symbolInformation.containerName);\n    }\n\n    return {\n        name: symbolInformation.name,\n        containerName: symbolInformation.containerName,\n        kind: symbolInformation.kind++ as lstypes.SymbolKind,\n        location: {\n            uri: symbolInformation.location.uri.toString(),\n            range: symbolInformation.location.range,\n        }\n    };\n}\n\nexport function toSymbolInformation(symbolInformation: lstypes.SymbolInformation): theia.SymbolInformation | undefined {\n    if (!symbolInformation) {\n        return undefined;\n    }\n\n    return <theia.SymbolInformation>{\n        name: symbolInformation.name,\n        containerName: symbolInformation.containerName,\n        kind: symbolInformation.kind,\n        location: {\n            uri: URI.parse(symbolInformation.location.uri),\n            range: symbolInformation.location.range\n        }\n    };\n}\n\nexport function fromSelectionRange(selectionRange: theia.SelectionRange): model.SelectionRange {\n    return { range: fromRange(selectionRange.range) };\n}\n\nexport function fromFoldingRange(foldingRange: theia.FoldingRange): model.FoldingRange {\n    const range: model.FoldingRange = {\n        start: foldingRange.start + 1,\n        end: foldingRange.end + 1\n    };\n    if (foldingRange.kind) {\n        range.kind = fromFoldingRangeKind(foldingRange.kind);\n    }\n    return range;\n}\n\nexport function fromFoldingRangeKind(kind: theia.FoldingRangeKind | undefined): model.FoldingRangeKind | undefined {\n    if (kind) {\n        switch (kind) {\n            case types.FoldingRangeKind.Comment:\n                return model.FoldingRangeKind.Comment;\n            case types.FoldingRangeKind.Imports:\n                return model.FoldingRangeKind.Imports;\n            case types.FoldingRangeKind.Region:\n                return model.FoldingRangeKind.Region;\n        }\n    }\n    return undefined;\n}\n\nexport function fromColor(color: types.Color): [number, number, number, number] {\n    return [color.red, color.green, color.blue, color.alpha];\n}\n\nexport function toColor(color: [number, number, number, number]): types.Color {\n    return new types.Color(color[0], color[1], color[2], color[3]);\n}\n\nexport function fromColorPresentation(colorPresentation: theia.ColorPresentation): model.ColorPresentation {\n    return {\n        label: colorPresentation.label,\n        textEdit: colorPresentation.textEdit ? fromTextEdit(colorPresentation.textEdit) : undefined,\n        additionalTextEdits: colorPresentation.additionalTextEdits ? colorPresentation.additionalTextEdits.map(value => fromTextEdit(value)) : undefined\n    };\n}\n\nexport function convertToTransferQuickPickItems(items: rpc.Item[]): rpc.TransferQuickPickItems[] {\n    return items.map<rpc.TransferQuickPickItems>((item, index) => {\n        if (typeof item === 'string') {\n            return { type: 'item', label: item, handle: index };\n        } else if (item.kind === QuickPickItemKind.Separator) {\n            return { type: 'separator', label: item.label, handle: index };\n        } else {\n            const { label, description, detail, picked, alwaysShow, buttons } = item;\n            return {\n                type: 'item',\n                label,\n                description,\n                detail,\n                picked,\n                alwaysShow,\n                buttons,\n                handle: index,\n            };\n        }\n    });\n}\n\nexport namespace DecorationRenderOptions {\n    export function from(options: theia.DecorationRenderOptions): rpc.DecorationRenderOptions {\n        return {\n            isWholeLine: options.isWholeLine,\n            rangeBehavior: options.rangeBehavior ? DecorationRangeBehavior.from(options.rangeBehavior) : undefined,\n            overviewRulerLane: options.overviewRulerLane,\n            light: options.light ? ThemableDecorationRenderOptions.from(options.light) : undefined,\n            dark: options.dark ? ThemableDecorationRenderOptions.from(options.dark) : undefined,\n\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            outline: options.outline,\n            outlineColor: <string | types.ThemeColor>options.outlineColor,\n            outlineStyle: options.outlineStyle,\n            outlineWidth: options.outlineWidth,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            borderRadius: options.borderRadius,\n            borderSpacing: options.borderSpacing,\n            borderStyle: options.borderStyle,\n            borderWidth: options.borderWidth,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            cursor: options.cursor,\n            color: <string | types.ThemeColor>options.color,\n            opacity: options.opacity,\n            letterSpacing: options.letterSpacing,\n            gutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n            gutterIconSize: options.gutterIconSize,\n            overviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n            before: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n            after: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n        };\n    }\n}\n\nexport namespace DecorationRangeBehavior {\n    export function from(value: types.DecorationRangeBehavior): rpc.TrackedRangeStickiness {\n        if (typeof value === 'undefined') {\n            return value;\n        }\n        switch (value) {\n            case types.DecorationRangeBehavior.OpenOpen:\n                return rpc.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges;\n            case types.DecorationRangeBehavior.ClosedClosed:\n                return rpc.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges;\n            case types.DecorationRangeBehavior.OpenClosed:\n                return rpc.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore;\n            case types.DecorationRangeBehavior.ClosedOpen:\n                return rpc.TrackedRangeStickiness.GrowsOnlyWhenTypingAfter;\n        }\n    }\n}\n\nexport namespace ThemableDecorationRenderOptions {\n    export function from(options: theia.ThemableDecorationRenderOptions): rpc.ThemeDecorationRenderOptions {\n        if (typeof options === 'undefined') {\n            return options;\n        }\n        return {\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            outline: options.outline,\n            outlineColor: <string | types.ThemeColor>options.outlineColor,\n            outlineStyle: options.outlineStyle,\n            outlineWidth: options.outlineWidth,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            borderRadius: options.borderRadius,\n            borderSpacing: options.borderSpacing,\n            borderStyle: options.borderStyle,\n            borderWidth: options.borderWidth,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            cursor: options.cursor,\n            color: <string | types.ThemeColor>options.color,\n            opacity: options.opacity,\n            letterSpacing: options.letterSpacing,\n            gutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n            gutterIconSize: options.gutterIconSize,\n            overviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n            before: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n            after: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n        };\n    }\n}\n\nexport namespace ThemableDecorationAttachmentRenderOptions {\n    export function from(options: theia.ThemableDecorationAttachmentRenderOptions): rpc.ContentDecorationRenderOptions {\n        if (typeof options === 'undefined') {\n            return options;\n        }\n        return {\n            contentText: options.contentText,\n            contentIconPath: options.contentIconPath ? pathOrURIToURI(options.contentIconPath) : undefined,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            color: <string | types.ThemeColor>options.color,\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            margin: options.margin,\n            width: options.width,\n            height: options.height,\n        };\n    }\n}\n\nexport namespace ViewColumn {\n    export function from(column?: theia.ViewColumn): rpc.EditorGroupColumn {\n        if (typeof column === 'number' && column >= types.ViewColumn.One) {\n            return column - 1; // adjust zero index (ViewColumn.ONE => 0)\n        }\n\n        if (column === types.ViewColumn.Beside) {\n            return SIDE_GROUP;\n        }\n\n        return ACTIVE_GROUP; // default is always the active group\n    }\n\n    export function to(position: rpc.EditorGroupColumn): theia.ViewColumn {\n        if (typeof position === 'number' && position >= 0) {\n            return position + 1; // adjust to index (ViewColumn.ONE => 1)\n        }\n\n        throw new Error('invalid \\'EditorGroupColumn\\'');\n    }\n}\n\nexport function pathOrURIToURI(value: string | URI): URI {\n    if (typeof value === 'undefined') {\n        return value;\n    }\n    if (typeof value === 'string') {\n        return URI.file(value);\n    } else {\n        return value;\n    }\n}\n\nexport function pluginToPluginInfo(plugin: Plugin): rpc.PluginInfo {\n    return {\n        id: plugin.model.id,\n        name: plugin.model.name,\n        displayName: plugin.model.displayName\n    };\n}\n\nexport namespace InlayHintKind {\n    export function from(kind: theia.InlayHintKind): model.InlayHintKind {\n        return kind;\n    }\n    export function to(kind: model.InlayHintKind): theia.InlayHintKind {\n        return kind;\n    }\n}\n\nexport namespace DataTransferItem {\n    export function to(mime: string, item: model.DataTransferItemDTO, resolveFileData: (itemId: string) => Promise<Uint8Array>): theia.DataTransferItem {\n        const file = item.fileData;\n        if (file) {\n            return new class extends types.DataTransferItem {\n                override asFile(): theia.DataTransferFile {\n                    return {\n                        name: file.name,\n                        uri: URI.revive(file.uri),\n                        data: () => resolveFileData(item.id),\n                    };\n                }\n            }('');\n        }\n\n        if (mime === 'text/uri-list' && item.uriListData) {\n            return new types.DataTransferItem(reviveUriList(item.uriListData));\n        }\n\n        return new types.DataTransferItem(item.asString);\n    }\n\n    function reviveUriList(parts: ReadonlyArray<string | UriComponents>): string {\n        return parts.map(part => typeof part === 'string' ? part : URI.revive(part).toString()).join('\\r\\n');\n    }\n}\n\nexport namespace DataTransfer {\n    export function toDataTransfer(value: model.DataTransferDTO, resolveFileData: (itemId: string) => Promise<Uint8Array>): theia.DataTransfer {\n        const dataTransfer = new types.DataTransfer();\n        for (const [mimeType, item] of value.items) {\n            dataTransfer.set(mimeType, DataTransferItem.to(mimeType, item, resolveFileData));\n        }\n        return dataTransfer;\n    }\n}\n\nexport namespace NotebookDocumentContentOptions {\n    export function from(options: theia.NotebookDocumentContentOptions | undefined): notebooks.TransientOptions {\n        return {\n            transientOutputs: options?.transientOutputs ?? false,\n            transientCellMetadata: options?.transientCellMetadata ?? {},\n            transientDocumentMetadata: options?.transientDocumentMetadata ?? {},\n        };\n    }\n}\n\nexport namespace NotebookStatusBarItem {\n    export function from(item: theia.NotebookCellStatusBarItem, commandsConverter: CommandsConverter, disposables: DisposableCollection): notebooks.NotebookCellStatusBarItem {\n        const command = typeof item.command === 'string' ? { title: '', command: item.command } : item.command;\n        return {\n            alignment: item.alignment === types.NotebookCellStatusBarAlignment.Left ? notebooks.CellStatusbarAlignment.Left : notebooks.CellStatusbarAlignment.Right,\n            command: commandsConverter.toSafeCommand(command, disposables),\n            text: item.text,\n            tooltip: item.tooltip,\n            priority: item.priority\n        };\n    }\n}\n\nexport namespace NotebookData {\n\n    export function from(data: theia.NotebookData): rpc.NotebookDataDto {\n        const res: rpc.NotebookDataDto = {\n            metadata: data.metadata ?? Object.create(null),\n            cells: [],\n        };\n        for (const cell of data.cells) {\n            // types.NotebookCellData.validate(cell);\n            res.cells.push(NotebookCellData.from(cell));\n        }\n        return res;\n    }\n\n    export function to(data: rpc.NotebookDataDto): theia.NotebookData {\n        const res = new types.NotebookData(\n            data.cells.map(NotebookCellData.to),\n        );\n        if (!isEmptyObject(data.metadata)) {\n            res.metadata = data.metadata;\n        }\n        return res;\n    }\n}\n\nexport namespace NotebookCellData {\n\n    export function from(data: theia.NotebookCellData): rpc.NotebookCellDataDto {\n        return {\n            cellKind: NotebookCellKind.from(data.kind),\n            language: data.languageId,\n            source: data.value,\n            // metadata: data.metadata,\n            // internalMetadata: NotebookCellExecutionSummary.from(data.executionSummary ?? {}),\n            outputs: data.outputs ? data.outputs.map(NotebookCellOutputConverter.from) : []\n        };\n    }\n\n    export function to(data: rpc.NotebookCellDataDto): theia.NotebookCellData {\n        return new types.NotebookCellData(\n            NotebookCellKind.to(data.cellKind),\n            data.source,\n            data.language,\n            data.outputs ? data.outputs.map(NotebookCellOutput.to) : undefined,\n            data.metadata,\n            data.internalMetadata ? NotebookCellExecutionSummary.to(data.internalMetadata) : undefined\n        );\n    }\n}\n\nexport namespace NotebookCellKind {\n    export function from(data: theia.NotebookCellKind): notebooks.CellKind {\n        switch (data) {\n            case types.NotebookCellKind.Markup:\n                return notebooks.CellKind.Markup;\n            case types.NotebookCellKind.Code:\n            default:\n                return notebooks.CellKind.Code;\n        }\n    }\n\n    export function to(data: notebooks.CellKind): theia.NotebookCellKind {\n        switch (data) {\n            case notebooks.CellKind.Markup:\n                return types.NotebookCellKind.Markup;\n            case notebooks.CellKind.Code:\n            default:\n                return types.NotebookCellKind.Code;\n        }\n    }\n}\n\nexport namespace NotebookCellOutput {\n    export function from(output: theia.NotebookCellOutput & { outputId: string }): rpc.NotebookOutputDto {\n        return {\n            outputId: output.outputId,\n            items: output.items.map(NotebookCellOutputItem.from),\n            metadata: output.metadata\n        };\n    }\n\n    export function to(output: rpc.NotebookOutputDto): theia.NotebookCellOutput {\n        const items = output.items.map(NotebookCellOutputItem.to);\n        return new types.NotebookCellOutput(items, output.outputId, output.metadata);\n    }\n}\n\nexport namespace NotebookCellOutputItem {\n    export function from(item: types.NotebookCellOutputItem): rpc.NotebookOutputItemDto {\n        return {\n            mime: item.mime,\n            valueBytes: BinaryBuffer.wrap(item.data),\n        };\n    }\n\n    export function to(item: rpc.NotebookOutputItemDto): types.NotebookCellOutputItem {\n        return new types.NotebookCellOutputItem(item.valueBytes.buffer, item.mime);\n    }\n}\n\nexport namespace NotebookCellOutputConverter {\n    export function from(output: types.NotebookCellOutput): rpc.NotebookOutputDto {\n        return {\n            outputId: output.outputId,\n            items: output.items.map(NotebookCellOutputItem.from),\n            metadata: output.metadata\n        };\n    }\n\n    export function to(output: rpc.NotebookOutputDto): types.NotebookCellOutput {\n        const items = output.items.map(NotebookCellOutputItem.to);\n        return new types.NotebookCellOutput(items, output.outputId, output.metadata);\n    }\n\n    export function ensureUniqueMimeTypes(items: types.NotebookCellOutputItem[], warn: boolean = false): types.NotebookCellOutputItem[] {\n        const seen = new Set<string>();\n        const removeIdx = new Set<number>();\n        for (let i = 0; i < items.length; i++) {\n            const item = items[i];\n            // We can have multiple text stream mime types in the same output.\n            if (!seen.has(item.mime) || isTextStreamMime(item.mime)) {\n                seen.add(item.mime);\n                continue;\n            }\n            // duplicated mime types... first has won\n            removeIdx.add(i);\n            if (warn) {\n                console.warn(`DUPLICATED mime type '${item.mime}' will be dropped`);\n            }\n        }\n        if (removeIdx.size === 0) {\n            return items;\n        }\n        return items.filter((_, index) => !removeIdx.has(index));\n    }\n}\n\nexport namespace NotebookCellExecutionSummary {\n    export function to(data: notebooks.NotebookCellInternalMetadata): theia.NotebookCellExecutionSummary {\n        return {\n            timing: typeof data.runStartTime === 'number' && typeof data.runEndTime === 'number' ? { startTime: data.runStartTime, endTime: data.runEndTime } : undefined,\n            executionOrder: data.executionOrder,\n            success: data.lastRunSuccess\n        };\n    }\n\n    export function from(data: theia.NotebookCellExecutionSummary): Partial<notebooks.NotebookCellInternalMetadata> {\n        return {\n            lastRunSuccess: data.success,\n            runStartTime: data.timing?.startTime,\n            runEndTime: data.timing?.endTime,\n            executionOrder: data.executionOrder\n        };\n    }\n}\n\nexport namespace NotebookRange {\n\n    export function from(range: theia.NotebookRange): CellRange {\n        return { start: range.start, end: range.end };\n    }\n\n    export function to(range: CellRange): types.NotebookRange {\n        return new types.NotebookRange(range.start, range.end);\n    }\n}\n\nexport namespace NotebookKernelSourceAction {\n    export function from(item: theia.NotebookKernelSourceAction, commandsConverter: CommandsConverter, disposables: DisposableCollection): rpc.NotebookKernelSourceActionDto {\n        const command = typeof item.command === 'string' ? { title: '', command: item.command } : item.command;\n\n        return {\n            command: commandsConverter.toSafeCommand(command, disposables),\n            label: item.label,\n            description: item.description,\n            detail: item.detail,\n            documentation: item.documentation\n        };\n    }\n}\n\nexport namespace NotebookDto {\n\n    export function toNotebookOutputItemDto(item: CellOutputItem): rpc.NotebookOutputItemDto {\n        return {\n            mime: item.mime,\n            valueBytes: item.data\n        };\n    }\n\n    export function toNotebookOutputDto(output: CellOutput): rpc.NotebookOutputDto {\n        return {\n            outputId: output.outputId,\n            metadata: output.metadata,\n            items: output.outputs.map(toNotebookOutputItemDto)\n        };\n    }\n\n    export function toNotebookCellDataDto(cell: CellData): rpc.NotebookCellDataDto {\n        return {\n            cellKind: cell.cellKind,\n            language: cell.language,\n            source: cell.source,\n            internalMetadata: cell.internalMetadata,\n            metadata: cell.metadata,\n            outputs: cell.outputs.map(toNotebookOutputDto)\n        };\n    }\n\n    // export function toNotebookDataDto(data: NotebookData): rpc.NotebookDataDto {\n    //     return {\n    //         metadata: data.metadata,\n    //         cells: data.cells.map(toNotebookCellDataDto)\n    //     };\n    // }\n\n    export function fromNotebookOutputItemDto(item: rpc.NotebookOutputItemDto): CellOutputItem {\n        return {\n            mime: item.mime,\n            data: item.valueBytes\n        };\n    }\n\n    export function fromNotebookOutputDto(output: rpc.NotebookOutputDto): CellOutput {\n        return {\n            outputId: output.outputId,\n            metadata: output.metadata,\n            outputs: output.items.map(fromNotebookOutputItemDto)\n        };\n    }\n\n    export function fromNotebookCellDataDto(cell: rpc.NotebookCellDataDto): CellData {\n        return {\n            cellKind: cell.cellKind,\n            language: cell.language,\n            source: cell.source,\n            outputs: cell.outputs.map(fromNotebookOutputDto),\n            metadata: cell.metadata,\n            internalMetadata: cell.internalMetadata\n        };\n    }\n\n    // export function fromNotebookDataDto(data: rpc.NotebookDataDto): NotebookData {\n    //     return {\n    //         metadata: data.metadata,\n    //         cells: data.cells.map(fromNotebookCellDataDto)\n    //     };\n    // }\n\n    // export function toNotebookCellDto(cell: Cell): rpc.NotebookCellDto {\n    //     return {\n    //         handle: cell.handle,\n    //         uri: cell.uri,\n    //         source: cell.textBuffer.getLinesContent(),\n    //         eol: cell.textBuffer.getEOL(),\n    //         language: cell.language,\n    //         cellKind: cell.cellKind,\n    //         outputs: cell.outputs.map(toNotebookOutputDto),\n    //         metadata: cell.metadata,\n    //         internalMetadata: cell.internalMetadata,\n    //     };\n    // }\n\n    export function fromCellExecuteUpdateDto(data: rpc.CellExecuteUpdateDto): CellExecuteUpdate {\n        if (data.editType === CellExecutionUpdateType.Output) {\n            return {\n                editType: data.editType,\n                cellHandle: data.cellHandle,\n                append: data.append,\n                outputs: data.outputs.map(fromNotebookOutputDto)\n            };\n        } else if (data.editType === CellExecutionUpdateType.OutputItems) {\n            return {\n                editType: data.editType,\n                append: data.append,\n                items: data.items.map(fromNotebookOutputItemDto)\n            };\n        } else {\n            return data;\n        }\n    }\n\n    export function fromCellExecuteCompleteDto(data: rpc.CellExecutionCompleteDto): CellExecutionComplete {\n        return data;\n    }\n\n    // export function fromCellEditOperationDto(edit: rpc.CellEditOperationDto): CellEditOperation {\n    //     if (edit.editType === CellEditType.Replace) {\n    //         return {\n    //             editType: edit.editType,\n    //             index: edit.index,\n    //             count: edit.count,\n    //             cells: edit.cells.map(fromNotebookCellDataDto)\n    //         };\n    //     } else {\n    //         return edit;\n    //     }\n    // }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 SAP SE or an SAP affiliate company and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n// some of the code is copied and modified from https://github.com/microsoft/vscode/blob/e1f0f8f51390dea5df9096718fb6b647ed5a9534/src/vs/workbench/api/common/extHostWebviewView.ts\n\nimport { Disposable } from './types-impl';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, WebviewViewsMain, WebviewViewsExt, Plugin } from '../common/plugin-api-rpc';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { WebviewImpl, WebviewsExtImpl } from './webviews';\nimport { WebviewViewProvider } from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\n\nexport class WebviewViewsExtImpl implements WebviewViewsExt {\n\n    private readonly proxy: WebviewViewsMain;\n\n    protected readonly viewProviders = new Map<string, {\n        readonly provider: WebviewViewProvider;\n        readonly plugin: Plugin;\n    }>();\n    protected readonly webviewViews = new Map<string, WebviewViewExtImpl>();\n\n    constructor(rpc: RPCProtocol,\n        private readonly webviewsExt: WebviewsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WEBVIEW_VIEWS_MAIN);\n    }\n\n    registerWebviewViewProvider(\n        viewType: string,\n        provider: WebviewViewProvider,\n        plugin: Plugin,\n        webviewOptions?: {\n            retainContextWhenHidden?: boolean\n        }\n    ): Disposable {\n        if (this.viewProviders.has(viewType)) {\n            throw new Error(`View provider for '${viewType}' already registered`);\n        }\n\n        this.viewProviders.set(viewType, { provider: provider, plugin: plugin });\n\n        this.proxy.$registerWebviewViewProvider(viewType, {\n            retainContextWhenHidden: webviewOptions?.retainContextWhenHidden,\n            serializeBuffersForPostMessage: false,\n        });\n\n        return new Disposable(() => {\n            this.viewProviders.delete(viewType);\n            this.proxy.$unregisterWebviewViewProvider(viewType);\n        });\n    }\n\n    async $resolveWebviewView(handle: string,\n        viewType: string,\n        title: string | undefined,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        state: any,\n        cancellation: CancellationToken\n    ): Promise<void> {\n        const entry = this.viewProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No view provider found for '${viewType}'`);\n        }\n\n        const { provider, plugin } = entry;\n\n        const webviewNoPanel = this.webviewsExt.createNewWebview({}, plugin, handle);\n        const revivedView = new WebviewViewExtImpl(handle, this.proxy, viewType, title, webviewNoPanel, true);\n        this.webviewViews.set(handle, revivedView);\n        await provider.resolveWebviewView(revivedView, { state }, cancellation);\n    }\n\n    async $onDidChangeWebviewViewVisibility(\n        handle: string,\n        visible: boolean\n    ): Promise<void> {\n        const webviewView = this.getWebviewView(handle);\n        webviewView.setVisible(visible);\n        webviewView.onDidChangeVisibilityEmitter.fire();\n    }\n\n    async $disposeWebviewView(handle: string): Promise<void> {\n        const webviewView = this.getWebviewView(handle);\n        this.webviewViews.delete(handle);\n        webviewView.dispose();\n\n        this.webviewsExt.deleteWebview(handle);\n    }\n\n    protected getWebviewView(handle: string): WebviewViewExtImpl {\n        const entry = this.webviewViews.get(handle);\n        if (!entry) {\n            throw new Error('No webview found');\n        }\n\n        return entry;\n    }\n}\n\nexport class WebviewViewExtImpl implements theia.WebviewView {\n\n    readonly onDidChangeVisibilityEmitter = new Emitter<void>();\n    readonly onDidChangeVisibility = this.onDidChangeVisibilityEmitter.event;\n\n    readonly onDidDisposeEmitter = new Emitter<void>();\n    readonly onDidDispose = this.onDidDisposeEmitter.event;\n\n    readonly handle: string;\n    readonly proxy: WebviewViewsMain;\n\n    readonly _viewType: string;\n    readonly _webview: WebviewImpl;\n\n    _isDisposed = false;\n    _isVisible: boolean;\n    _title: string | undefined;\n    _description: string | undefined;\n    _badge: theia.ViewBadge | undefined;\n\n    constructor(\n        handle: string,\n        proxy: WebviewViewsMain,\n        viewType: string,\n        title: string | undefined,\n        webview: WebviewImpl,\n        isVisible: boolean\n    ) {\n        this._viewType = viewType;\n        this._title = title;\n        this.handle = handle;\n        this.proxy = proxy;\n        this._webview = webview;\n        this._isVisible = isVisible;\n    }\n    onDispose: Event<void>;\n\n    dispose(): void {\n        if (this._isDisposed) {\n            return;\n        }\n\n        this._isDisposed = true;\n        this.onDidDisposeEmitter.fire();\n    }\n\n    get title(): string | undefined {\n        this.assertNotDisposed();\n        return this._title;\n    }\n\n    set title(value: string | undefined) {\n        this.assertNotDisposed();\n        if (this._title !== value) {\n            this._title = value;\n            this.proxy.$setWebviewViewTitle(this.handle, value);\n        }\n    }\n\n    get description(): string | undefined {\n        this.assertNotDisposed();\n        return this._description;\n    }\n\n    set description(value: string | undefined) {\n        this.assertNotDisposed();\n        if (this._description !== value) {\n            this._description = value;\n            this.proxy.$setWebviewViewDescription(this.handle, value);\n        }\n    }\n\n    get badge(): theia.ViewBadge | undefined {\n        this.assertNotDisposed();\n        return this._badge;\n    }\n\n    set badge(badge: theia.ViewBadge | undefined) {\n        this.assertNotDisposed();\n        if (this._badge !== badge) {\n            this._badge = badge;\n            this.proxy.$setBadge(this.handle, badge ? { value: badge.value, tooltip: badge.tooltip } : undefined);\n        }\n    }\n\n    get visible(): boolean { return this._isVisible; }\n    get webview(): WebviewImpl { return this._webview; }\n    get viewType(): string { return this._viewType; }\n\n    setVisible(visible: boolean): void {\n        if (visible === this._isVisible || this._isDisposed) {\n            return;\n        }\n\n        this._isVisible = visible;\n        this.onDidChangeVisibilityEmitter.fire();\n    }\n\n    show(preserveFocus?: boolean): void {\n        this.assertNotDisposed();\n        this.proxy.$show(this.handle, !!preserveFocus);\n    }\n\n    protected assertNotDisposed(): void {\n        if (this._isDisposed) {\n            throw new Error('Webview is disposed');\n        }\n    }\n}\n\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { v4 } from 'uuid';\nimport { Plugin, WebviewsExt, WebviewPanelViewState, WebviewsMain, PLUGIN_RPC_CONTEXT, WebviewInitData, /* WebviewsMain, PLUGIN_RPC_CONTEXT  */ } from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { fromViewColumn, toViewColumn, toWebviewPanelShowOptions } from './type-converters';\nimport { Disposable, WebviewPanelTargetArea, URI } from './types-impl';\nimport { WorkspaceExtImpl } from './workspace';\nimport { PluginIconPath } from './plugin-icon-path';\n\nexport class WebviewsExtImpl implements WebviewsExt {\n    private readonly proxy: WebviewsMain;\n    private readonly webviewPanels = new Map<string, WebviewPanelImpl>();\n    private readonly webviews = new Map<string, WebviewImpl>();\n    private readonly serializers = new Map<string, {\n        serializer: theia.WebviewPanelSerializer,\n        plugin: Plugin\n    }>();\n    private initData: WebviewInitData | undefined;\n\n    readonly onDidDisposeEmitter = new Emitter<void>();\n    readonly onDidDispose: Event<void> = this.onDidDisposeEmitter.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly workspace: WorkspaceExtImpl,\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WEBVIEWS_MAIN);\n    }\n\n    init(initData: WebviewInitData): void {\n        this.initData = initData;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $onMessage(handle: string, message: any): void {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            panel.webview.onMessageEmitter.fire(message);\n        } else {\n            const webview = this.getWebview(handle);\n            if (webview) {\n                webview.onMessageEmitter.fire(message);\n            }\n        }\n    }\n    $onDidChangeWebviewPanelViewState(handle: string, newState: WebviewPanelViewState): void {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            const viewColumn = toViewColumn(newState.position);\n            if (panel.active !== newState.active || panel.visible !== newState.visible || panel.viewColumn !== viewColumn) {\n                panel.setActive(newState.active);\n                panel.setVisible(newState.visible);\n                panel.setViewColumn(viewColumn!);\n                panel.onDidChangeViewStateEmitter.fire({ webviewPanel: panel });\n            }\n        }\n    }\n    $onDidDisposeWebviewPanel(handle: string): PromiseLike<void> {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            panel.dispose();\n            this.webviewPanels.delete(handle);\n        }\n        return Promise.resolve();\n    }\n    $deserializeWebviewPanel(viewId: string,\n        viewType: string,\n        title: string,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        state: any,\n        viewState: WebviewPanelViewState,\n        options: theia.WebviewOptions & theia.WebviewPanelOptions): PromiseLike<void> {\n        if (!this.initData) {\n            return Promise.reject(new Error('Webviews are not initialized'));\n        }\n        const entry = this.serializers.get(viewType);\n        if (!entry) {\n            return Promise.reject(new Error(`No serializer found for '${viewType}'`));\n        }\n        const { serializer, plugin } = entry;\n\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        const revivedPanel = new WebviewPanelImpl(viewId, this.proxy, viewType, title, toViewColumn(viewState.position)!, options, webview);\n        revivedPanel.setActive(viewState.active);\n        revivedPanel.setVisible(viewState.visible);\n        this.webviewPanels.set(viewId, revivedPanel);\n        return serializer.deserializeWebviewPanel(revivedPanel, state);\n    }\n\n    createWebview(\n        viewType: string,\n        title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin\n    ): theia.WebviewPanel {\n        const viewId = v4();\n        const webviewShowOptions = toWebviewPanelShowOptions(showOptions);\n        const webviewOptions = WebviewImpl.toWebviewOptions(options, this.workspace, plugin);\n        this.proxy.$createWebviewPanel(viewId, viewType, title, webviewShowOptions, webviewOptions);\n        const panel = this.createWebviewPanel(viewType, title, showOptions, options, plugin, viewId);\n        return panel;\n    }\n\n    createWebviewPanel(\n        viewType: string,\n        title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin,\n        viewId: string\n    ): WebviewPanelImpl {\n        if (!this.initData) {\n            throw new Error('Webviews are not initialized');\n        }\n        const webviewShowOptions = toWebviewPanelShowOptions(showOptions);\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        const panel = new WebviewPanelImpl(viewId, this.proxy, viewType, title, webviewShowOptions, options, webview);\n        this.webviewPanels.set(viewId, panel);\n        return panel;\n    }\n\n    createNewWebview(\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin,\n        viewId: string\n    ): WebviewImpl {\n        if (!this.initData) {\n            throw new Error('Webviews are not initialized');\n        }\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        this.webviews.set(viewId, webview);\n        return webview;\n    }\n\n    registerWebviewPanelSerializer(\n        viewType: string,\n        serializer: theia.WebviewPanelSerializer,\n        plugin: Plugin\n    ): theia.Disposable {\n        if (this.serializers.has(viewType)) {\n            throw new Error(`Serializer for '${viewType}' already registered`);\n        }\n\n        this.serializers.set(viewType, { serializer, plugin });\n        this.proxy.$registerSerializer(viewType);\n\n        return new Disposable(() => {\n            this.serializers.delete(viewType);\n            this.proxy.$unregisterSerializer(viewType);\n        });\n    }\n\n    getWebviewPanel(viewId: string): WebviewPanelImpl | undefined {\n        if (this.webviewPanels.has(viewId)) {\n            return this.webviewPanels.get(viewId);\n        }\n        return undefined;\n    }\n\n    public deleteWebview(handle: string): void {\n        this.webviews.delete(handle);\n    }\n\n    public getWebview(handle: string): WebviewImpl | undefined {\n        return this.webviews.get(handle);\n    }\n}\n\nexport class WebviewImpl implements theia.Webview {\n    private isDisposed = false;\n    private _html: string;\n    private _options: theia.WebviewOptions;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public readonly onMessageEmitter = new Emitter<any>();\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public readonly onDidReceiveMessage: Event<any> = this.onMessageEmitter.event;\n\n    constructor(\n        private readonly viewId: string,\n        private readonly proxy: WebviewsMain,\n        options: theia.WebviewOptions,\n        private readonly initData: WebviewInitData,\n        private readonly workspace: WorkspaceExtImpl,\n        readonly plugin: Plugin\n    ) {\n        this._options = options;\n    }\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this.onMessageEmitter.dispose();\n    }\n\n    asWebviewUri(resource: theia.Uri): theia.Uri {\n        const uri = this.initData.webviewResourceRoot\n            .replace('{{scheme}}', resource.scheme)\n            .replace('{{authority}}', resource.authority)\n            .replace('{{path}}', resource.path.replace(/^\\//, ''))\n            .replace('{{uuid}}', this.viewId);\n        return URI.parse(uri);\n    }\n\n    get cspSource(): string {\n        return this.initData.webviewCspSource.replace('{{uuid}}', this.viewId);\n    }\n\n    get html(): string {\n        this.checkIsDisposed();\n        return this._html;\n    }\n\n    set html(value: string) {\n        this.checkIsDisposed();\n        if (this._html !== value) {\n            this._html = value;\n            this.proxy.$setHtml(this.viewId, this._html);\n        }\n    }\n\n    get options(): theia.WebviewOptions {\n        this.checkIsDisposed();\n        return this._options;\n    }\n\n    set options(newOptions: theia.WebviewOptions) {\n        this.checkIsDisposed();\n        this.proxy.$setOptions(this.viewId, WebviewImpl.toWebviewOptions(newOptions, this.workspace, this.plugin));\n        this._options = newOptions;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    postMessage(message: any): PromiseLike<boolean> {\n        this.checkIsDisposed();\n        return this.proxy.$postMessage(this.viewId, message);\n    }\n\n    private checkIsDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('This Webview is disposed!');\n        }\n    }\n\n    static toWebviewOptions(options: theia.WebviewOptions, workspace: WorkspaceExtImpl, plugin: Plugin): theia.WebviewOptions {\n        return {\n            ...options,\n            localResourceRoots: options.localResourceRoots || [\n                ...(workspace.workspaceFolders || []).map(x => x.uri),\n                URI.file(plugin.pluginFolder)\n            ]\n        };\n    }\n}\n\nexport class WebviewPanelImpl implements theia.WebviewPanel {\n\n    private isDisposed = false;\n    private _active = true;\n    private _visible = true;\n    private _showOptions: theia.WebviewPanelShowOptions;\n    private _iconPath: theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined;\n\n    readonly onDisposeEmitter = new Emitter<void>();\n    public readonly onDidDispose: Event<void> = this.onDisposeEmitter.event;\n\n    readonly onDidChangeViewStateEmitter = new Emitter<theia.WebviewPanelOnDidChangeViewStateEvent>();\n    public readonly onDidChangeViewState: Event<theia.WebviewPanelOnDidChangeViewStateEvent> = this.onDidChangeViewStateEmitter.event;\n\n    constructor(private readonly viewId: string,\n        private readonly proxy: WebviewsMain,\n        private readonly _viewType: string,\n        private _title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        private readonly _options: theia.WebviewPanelOptions,\n        private readonly _webview: WebviewImpl\n    ) {\n        this._showOptions = typeof showOptions === 'object' ? showOptions : { viewColumn: showOptions as theia.ViewColumn };\n    }\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n\n        this.isDisposed = true;\n        this.onDisposeEmitter.fire(undefined);\n\n        this.proxy.$disposeWebview(this.viewId);\n        this._webview.dispose();\n\n        this.onDisposeEmitter.dispose();\n        this.onDidChangeViewStateEmitter.dispose();\n    }\n\n    get viewType(): string {\n        this.checkIsDisposed();\n        return this._viewType;\n    }\n\n    get title(): string {\n        this.checkIsDisposed();\n        return this._title;\n    }\n\n    set title(newTitle: string) {\n        this.checkIsDisposed();\n        if (this._title !== newTitle) {\n            this._title = newTitle;\n            this.proxy.$setTitle(this.viewId, newTitle);\n        }\n    }\n\n    get iconPath(): theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined {\n        return this._iconPath;\n    }\n\n    set iconPath(iconPath: theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined) {\n        this.checkIsDisposed();\n        if (this._iconPath !== iconPath) {\n            this._iconPath = iconPath;\n            this.proxy.$setIconPath(this.viewId, PluginIconPath.toUrl(iconPath, this._webview.plugin));\n        }\n    }\n\n    get webview(): WebviewImpl {\n        this.checkIsDisposed();\n        return this._webview;\n    }\n\n    get options(): theia.WebviewPanelOptions {\n        this.checkIsDisposed();\n        return this._options;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        this.checkIsDisposed();\n        return this._showOptions.viewColumn;\n    }\n\n    setViewColumn(value: theia.ViewColumn | undefined): void {\n        this.checkIsDisposed();\n        this._showOptions.viewColumn = value;\n    }\n\n    get showOptions(): theia.WebviewPanelShowOptions {\n        this.checkIsDisposed();\n        return this._showOptions;\n    }\n\n    setShowOptions(value: theia.WebviewPanelShowOptions): void {\n        this.checkIsDisposed();\n        this._showOptions = value;\n    }\n\n    get active(): boolean {\n        this.checkIsDisposed();\n        return this._active;\n    }\n\n    setActive(value: boolean): void {\n        this.checkIsDisposed();\n        this._active = value;\n    }\n\n    get visible(): boolean {\n        this.checkIsDisposed();\n        return this._visible;\n    }\n\n    setVisible(value: boolean): void {\n        this.checkIsDisposed();\n        this._visible = value;\n    }\n\n    reveal(arg0?: theia.ViewColumn | WebviewPanelTargetArea, arg1?: theia.ViewColumn | boolean, arg2?: boolean): void {\n        let area: WebviewPanelTargetArea | undefined = undefined;\n        let viewColumn: theia.ViewColumn | undefined = undefined;\n        let preserveFocus: boolean | undefined = undefined;\n        if (typeof arg0 === 'number') {\n            viewColumn = arg0;\n        } else {\n            area = arg0;\n        }\n        if (typeof arg1 === 'number') {\n            viewColumn = arg1;\n        } else {\n            preserveFocus = arg1;\n        }\n        if (typeof arg2 === 'boolean') {\n            preserveFocus = arg2;\n        }\n        this.checkIsDisposed();\n        this.proxy.$reveal(this.viewId, {\n            area,\n            viewColumn: viewColumn ? fromViewColumn(viewColumn) : undefined,\n            preserveFocus\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    postMessage(message: any): PromiseLike<boolean> {\n        this.checkIsDisposed();\n        return this.proxy.$postMessage(this.viewId, message);\n    }\n\n    private checkIsDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('This WebviewPanel is disposed!');\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from './types-impl';\nimport { WindowState } from '@theia/plugin';\nimport { WindowStateExt, WindowMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Schemes } from '../common/uri-components';\n\nexport class WindowStateExtImpl implements WindowStateExt {\n\n    private windowStateCached: WindowState;\n\n    private windowStateChangedEmitter = new Emitter<WindowState>();\n    public readonly onDidChangeWindowState: Event<WindowState> = this.windowStateChangedEmitter.event;\n\n    private readonly proxy: WindowMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WINDOW_MAIN);\n        this.windowStateCached = { focused: true }; // supposed tab is active on start\n    }\n\n    getWindowState(): WindowState {\n        return this.windowStateCached;\n    }\n\n    $onWindowStateChanged(focused: boolean): void {\n        const state = { focused: focused };\n        if (state === this.windowStateCached) {\n            return;\n        }\n\n        this.windowStateCached = state;\n        this.windowStateChangedEmitter.fire(state);\n    }\n\n    openUri(uri: URI): Promise<boolean> {\n        return this.proxy.$openUri(uri);\n    }\n\n    async asExternalUri(target: URI): Promise<URI> {\n        if (!target.scheme.trim().length) {\n            throw new Error('Invalid scheme - cannot be empty');\n        }\n        if (Schemes.http !== target.scheme && Schemes.https !== target.scheme) {\n            throw new Error(`Invalid scheme '${target.scheme}'`);\n        }\n\n        const uri = await this.proxy.$asExternalUri(target);\n        return URI.revive(uri);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Word inside a model.\n */\nexport interface WordAtPosition {\n    /**\n     * The word.\n     */\n    readonly word: string;\n    /**\n     * The column where the word starts.\n     */\n    readonly startColumn: number;\n    /**\n     * The column where the word ends.\n     */\n    readonly endColumn: number;\n}\n\nexport const USUAL_WORD_SEPARATORS = '`~!@#$%^&*()-=+[{]}\\\\|;:\\'\",.<>/?';\n\n/**\n * Create a word definition regular expression based on default word separators.\n * Optionally provide allowed separators that should be included in words.\n *\n * The default would look like this:\n * /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g\n */\nfunction createWordRegExp(allowInWords: string = ''): RegExp {\n    let source = '(-?\\\\d*\\\\.\\\\d\\\\w*)|([^';\n    for (let i = 0; i < USUAL_WORD_SEPARATORS.length; i++) {\n        if (allowInWords.indexOf(USUAL_WORD_SEPARATORS[i]) >= 0) {\n            continue;\n        }\n        source += '\\\\' + USUAL_WORD_SEPARATORS[i];\n    }\n    source += '\\\\s]+)';\n    return new RegExp(source, 'g');\n}\n\n// catches numbers (including floating numbers) in the first group, and alphanum in the second\nexport const DEFAULT_WORD_REGEXP = createWordRegExp();\n\nexport function ensureValidWordDefinition(wordDefinition?: RegExp): RegExp {\n    let result: RegExp = DEFAULT_WORD_REGEXP;\n\n    if (wordDefinition && (wordDefinition instanceof RegExp)) {\n        if (!wordDefinition.global) {\n            let flags = 'g';\n            if (wordDefinition.ignoreCase) {\n                flags += 'i';\n            }\n            if (wordDefinition.multiline) {\n                flags += 'm';\n            }\n            result = new RegExp(wordDefinition.source, flags);\n        } else {\n            result = wordDefinition;\n        }\n    }\n\n    result.lastIndex = 0;\n\n    return result;\n}\n\nfunction getWordAtPosFast(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // find whitespace enclosed text around column and match from there\n\n    const pos = column - 1 - textOffset;\n    const start = text.lastIndexOf(' ', pos - 1) + 1;\n    let end = text.indexOf(' ', pos);\n    if (end === -1) {\n        end = text.length;\n    }\n\n    wordDefinition.lastIndex = start;\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n        if (match.index! <= pos && wordDefinition.lastIndex >= pos) {\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nfunction getWordAtPosSlow(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // matches all words starting at the beginning\n    // of the input until it finds a match that encloses\n    // the desired column. slow but correct\n\n    const pos = column - 1 - textOffset;\n    wordDefinition.lastIndex = 0;\n\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n\n        if (match.index! > pos) {\n            // |nW -> matched only after the pos\n            return undefined;\n\n        } else if (wordDefinition.lastIndex >= pos) {\n            // W|W -> match encloses pos\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nexport function getWordAtText(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n\n    // if `words` can contain whitespace character we have to use the slow variant\n    // otherwise we use the fast variant of finding a word\n    wordDefinition.lastIndex = 0;\n    const match = wordDefinition.exec(text);\n    if (!match) {\n        return undefined;\n    }\n    // todo@joh the `match` could already be the (first) word\n    const ret = match[0].indexOf(' ') >= 0\n        // did match a word which contains a space character -> use slow word find\n        ? getWordAtPosSlow(column, wordDefinition, text, textOffset)\n        // sane word definition -> use fast word find\n        : getWordAtPosFast(column, wordDefinition, text, textOffset);\n\n    // both (getWordAtPosFast and getWordAtPosSlow) leave the wordDefinition-RegExp\n    // in an undefined state and to not confuse other users of the wordDefinition\n    // we reset the lastIndex\n    wordDefinition.lastIndex = 0;\n\n    return ret;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/Microsoft/vscode/blob/master/src/vs/workbench/services/workspace/node/workspaceEditingService.ts\n\nimport * as paths from 'path';\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport {\n    WorkspaceExt,\n    WorkspaceFolderPickOptionsMain,\n    WorkspaceMain,\n    PLUGIN_RPC_CONTEXT as Ext,\n    MainMessageType,\n} from '../common/plugin-api-rpc';\nimport { Path } from '@theia/core/lib/common/path';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { WorkspaceRootsChangeEvent, SearchInWorkspaceResult, Range } from '../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { Disposable, URI } from './types-impl';\nimport { normalize } from '@theia/core/lib/common/paths';\nimport { relative } from '../common/paths-util';\nimport { Schemes } from '../common/uri-components';\nimport { toWorkspaceFolder } from './type-converters';\nimport { MessageRegistryExt } from './message-registry';\nimport * as Converter from './type-converters';\nimport { FileStat } from '@theia/filesystem/lib/common/files';\nimport { isUndefinedOrNull, isUndefined } from '../common/types';\n\nexport class WorkspaceExtImpl implements WorkspaceExt {\n\n    private proxy: WorkspaceMain;\n\n    private workspaceFoldersChangedEmitter = new Emitter<theia.WorkspaceFoldersChangeEvent>();\n    public readonly onDidChangeWorkspaceFolders: Event<theia.WorkspaceFoldersChangeEvent> = this.workspaceFoldersChangedEmitter.event;\n\n    private folders: theia.WorkspaceFolder[] | undefined;\n    private workspaceFileUri: theia.Uri | undefined;\n    private documentContentProviders = new Map<string, theia.TextDocumentContentProvider>();\n    private searchInWorkspaceEmitter: Emitter<{ result?: theia.TextSearchResult, searchId: number }> = new Emitter<{ result?: theia.TextSearchResult, searchId: number }>();\n    protected workspaceSearchSequence: number = 0;\n\n    private _trusted?: boolean = undefined;\n    private didGrantWorkspaceTrustEmitter = new Emitter<void>();\n    public readonly onDidGrantWorkspaceTrust: Event<void> = this.didGrantWorkspaceTrustEmitter.event;\n\n    private canonicalUriProviders = new Map<string, theia.CanonicalUriProvider>();\n\n    constructor(rpc: RPCProtocol,\n        private editorsAndDocuments: EditorsAndDocumentsExtImpl,\n        private messageService: MessageRegistryExt) {\n        this.proxy = rpc.getProxy(Ext.WORKSPACE_MAIN);\n    }\n\n    get rootPath(): string | undefined {\n        const folder = this.folders && this.folders[0];\n        return folder && folder.uri.fsPath;\n    }\n\n    get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n        if (this.folders && this.folders.length === 0) {\n            return undefined;\n        }\n        return this.folders;\n    }\n\n    get workspaceFile(): theia.Uri | undefined {\n        return this.workspaceFileUri;\n    }\n\n    get name(): string | undefined {\n        if (this.workspaceFolders && this.workspaceFolders.length > 0) {\n            return new Path(this.workspaceFolders[0].uri.path).base;\n        }\n\n        return undefined;\n    }\n\n    resolveProxy(url: string): Promise<string | undefined> {\n        return this.proxy.$resolveProxy(url);\n    }\n\n    $onWorkspaceFoldersChanged(event: WorkspaceRootsChangeEvent): void {\n        const newRoots = event.roots || [];\n        const newFolders = newRoots.map((root, index) => this.toWorkspaceFolder(root, index));\n        const delta = this.deltaFolders(this.folders, newFolders);\n\n        this.folders = newFolders;\n\n        this.refreshWorkspaceFile();\n\n        this.workspaceFoldersChangedEmitter.fire(delta);\n    }\n\n    $onWorkspaceLocationChanged(stat: FileStat | undefined): void {\n        this.updateWorkSpace(stat);\n    }\n\n    $onTextSearchResult(searchRequestId: number, done: boolean, result?: SearchInWorkspaceResult): void {\n        if (result) {\n            result.matches.map(next => {\n                const range: Range = {\n                    endColumn: next.character + next.length,\n                    endLineNumber: next.line + 1,\n                    startColumn: next.character,\n                    startLineNumber: next.line + 1\n                };\n                const tRange = <theia.Range>Converter.toRange(range);\n                const searchResult: theia.TextSearchMatch = {\n                    uri: URI.parse(result.fileUri),\n                    preview: {\n                        text: typeof next.lineText === 'string' ? next.lineText : next.lineText.text,\n                        matches: tRange\n                    },\n                    ranges: tRange\n                };\n                return searchResult;\n            }).forEach(next => this.searchInWorkspaceEmitter.fire({ result: next, searchId: searchRequestId }));\n        } else if (done) {\n            this.searchInWorkspaceEmitter.fire({ searchId: searchRequestId });\n        }\n    }\n\n    private deltaFolders(currentFolders: theia.WorkspaceFolder[] = [], newFolders: theia.WorkspaceFolder[] = []): {\n        added: theia.WorkspaceFolder[]\n        removed: theia.WorkspaceFolder[]\n    } {\n        const added = this.foldersDiff(newFolders, currentFolders);\n        const removed = this.foldersDiff(currentFolders, newFolders);\n        return { added, removed };\n    }\n\n    private foldersDiff(folder1: theia.WorkspaceFolder[] = [], folder2: theia.WorkspaceFolder[] = []): theia.WorkspaceFolder[] {\n        const map = new Map();\n        folder1.forEach(folder => map.set(folder.uri.toString(), folder));\n        folder2.forEach(folder => map.delete(folder.uri.toString()));\n\n        return folder1.filter(folder => map.has(folder.uri.toString()));\n    }\n\n    private toWorkspaceFolder(root: string, index: number): theia.WorkspaceFolder {\n        const uri = URI.parse(root);\n        const path = new Path(uri.path);\n        return {\n            uri: uri,\n            name: path.base,\n            index: index\n        };\n    }\n\n    pickWorkspaceFolder(options?: theia.WorkspaceFolderPickOptions): PromiseLike<theia.WorkspaceFolder | undefined> {\n        return new Promise((resolve, reject) => {\n            const optionsMain: WorkspaceFolderPickOptionsMain = {\n                placeHolder: options && options.placeHolder ? options.placeHolder : undefined,\n                ignoreFocusOut: options && options.ignoreFocusOut\n            };\n\n            this.proxy.$pickWorkspaceFolder(optionsMain).then(value => {\n                resolve(value);\n            });\n        });\n    }\n\n    findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | null, maxResults?: number,\n        token: CancellationToken = CancellationToken.None): PromiseLike<URI[]> {\n        let includePattern: string;\n        let includeFolderUri: string | undefined;\n        if (include) {\n            if (typeof include === 'string') {\n                includePattern = include;\n            } else {\n                includePattern = include.pattern;\n                includeFolderUri = include.baseUri.toString();\n            }\n        } else {\n            includePattern = '';\n        }\n\n        let excludePatternOrDisregardExcludes: string | false;\n        if (exclude === undefined) {\n            excludePatternOrDisregardExcludes = ''; // default excludes\n        } else if (exclude) {\n            if (typeof exclude === 'string') {\n                excludePatternOrDisregardExcludes = exclude;\n            } else {\n                excludePatternOrDisregardExcludes = exclude.pattern;\n            }\n        } else {\n            excludePatternOrDisregardExcludes = false; // no excludes\n        }\n\n        if (token && token.isCancellationRequested) {\n            return Promise.resolve([]);\n        }\n\n        return this.proxy.$startFileSearch(includePattern, includeFolderUri, excludePatternOrDisregardExcludes, maxResults, token)\n            .then(data => Array.isArray(data) ? data.map(uri => URI.revive(uri)) : []);\n    }\n\n    findTextInFiles(query: theia.TextSearchQuery, optionsOrCallback: theia.FindTextInFilesOptions | ((result: theia.TextSearchResult) => void),\n        callbackOrToken?: CancellationToken | ((result: theia.TextSearchResult) => void), token?: CancellationToken): Promise<theia.TextSearchComplete> {\n        let options: theia.FindTextInFilesOptions;\n        let callback: (result: theia.TextSearchResult) => void;\n\n        if (typeof optionsOrCallback === 'object') {\n            options = optionsOrCallback;\n            callback = callbackOrToken as (result: theia.TextSearchResult) => void;\n        } else {\n            options = {};\n            callback = optionsOrCallback;\n            token = callbackOrToken as CancellationToken;\n        }\n        const nextSearchID = this.workspaceSearchSequence + 1;\n        this.workspaceSearchSequence = nextSearchID;\n        const disposable = this.searchInWorkspaceEmitter.event(searchResult => {\n            if (searchResult.searchId === nextSearchID) {\n                if (searchResult.result) {\n                    callback(searchResult.result);\n                } else {\n                    disposable.dispose();\n                }\n            }\n        });\n        if (token) {\n            token.onCancellationRequested(() => {\n                disposable.dispose();\n            });\n        }\n        return this.proxy.$findTextInFiles(query, options || {}, nextSearchID, token);\n    }\n\n    registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n        // `file` and `untitled` schemas are reserved by `workspace.openTextDocument` API:\n        // `file`-scheme for opening a file\n        // `untitled`-scheme for opening a new file that should be saved\n        if (scheme === Schemes.file || scheme === Schemes.untitled) {\n            throw new Error(`Text Content Document Provider for scheme '${scheme}' is already registered`);\n        } else if (this.documentContentProviders.has(scheme)) {\n            // TODO: we should be able to handle multiple registrations, but for now we should ensure that it doesn't crash plugin activation.\n            console.warn(`Repeat registration of TextContentDocumentProvider for scheme '${scheme}'. This registration will be ignored.`);\n            return { dispose: () => { } };\n        }\n\n        this.documentContentProviders.set(scheme, provider);\n        this.proxy.$registerTextDocumentContentProvider(scheme);\n\n        let onDidChangeSubscription: theia.Disposable;\n        if (typeof provider.onDidChange === 'function') {\n            onDidChangeSubscription = provider.onDidChange(async uri => {\n                if (uri.scheme === scheme && this.editorsAndDocuments.getDocument(uri.toString())) {\n                    const content = await this.$provideTextDocumentContent(uri.toString());\n                    if (content) {\n                        this.proxy.$onTextDocumentContentChange(uri.toString(), content);\n                    }\n                }\n            });\n        }\n\n        const instance = this;\n        return {\n            dispose(): void {\n                if (instance.documentContentProviders.delete(scheme)) {\n                    instance.proxy.$unregisterTextDocumentContentProvider(scheme);\n                }\n\n                if (onDidChangeSubscription) {\n                    onDidChangeSubscription.dispose();\n                }\n            }\n        };\n    }\n\n    async $provideTextDocumentContent(documentURI: string): Promise<string | undefined | null> {\n        const uri = URI.parse(documentURI);\n        const provider = this.documentContentProviders.get(uri.scheme);\n        if (provider) {\n            return provider.provideTextDocumentContent(uri, CancellationToken.None);\n        }\n\n        return undefined;\n    }\n\n    getWorkspaceFolder(uri: theia.Uri, resolveParent?: boolean): theia.WorkspaceFolder | undefined {\n        if (!this.folders || !this.folders.length) {\n            return undefined;\n        }\n\n        function dirname(resource: URI): URI {\n            if (resource.scheme === 'file') {\n                return URI.file(paths.dirname(resource.fsPath));\n            }\n            return resource.with({\n                path: paths.dirname(resource.path)\n            });\n        }\n\n        if (resolveParent && this.hasFolder(uri)) {\n            uri = dirname(uri);\n        }\n\n        const resourcePath = uri.toString();\n\n        let workspaceFolder: theia.WorkspaceFolder | undefined;\n        for (let i = 0; i < this.folders.length; i++) {\n            const folder = this.folders[i];\n            const folderPath = folder.uri.toString();\n\n            if (resourcePath === folderPath) {\n                return toWorkspaceFolder(folder);\n            }\n\n            if (resourcePath.startsWith(folderPath)\n                && resourcePath[folderPath.length] === '/'\n                && (!workspaceFolder || folderPath.length > workspaceFolder.uri.toString().length)) {\n                workspaceFolder = folder;\n            }\n        }\n        return workspaceFolder;\n    }\n\n    private hasFolder(uri: URI): boolean {\n        if (!this.folders) {\n            return false;\n        }\n        return this.folders.some(folder => folder.uri.toString() === uri.toString());\n    }\n\n    getRelativePath(pathOrUri: string | theia.Uri, includeWorkspace?: boolean): string | undefined {\n        let path: string | undefined;\n        if (typeof pathOrUri === 'string') {\n            path = pathOrUri;\n        } else if (typeof pathOrUri !== 'undefined') {\n            path = pathOrUri.fsPath;\n        }\n\n        if (!path) {\n            return path;\n        }\n\n        const folder = this.getWorkspaceFolder(\n            typeof pathOrUri === 'string' ? URI.file(pathOrUri) : pathOrUri,\n            true\n        ) as theia.WorkspaceFolder;\n\n        if (!folder) {\n            return path;\n        }\n\n        if (typeof includeWorkspace === 'undefined') {\n            includeWorkspace = this.folders!.length > 1;\n        }\n\n        let result = relative(folder.uri.fsPath, path);\n        if (includeWorkspace) {\n            result = `${folder.name}/${result}`;\n        }\n        return normalize(result, true);\n    }\n\n    updateWorkspaceFolders(start: number, deleteCount: number, ...workspaceFoldersToAdd: { uri: theia.Uri, name?: string }[]): boolean {\n        const rootsToAdd = new Set<string>();\n        if (Array.isArray(workspaceFoldersToAdd)) {\n            workspaceFoldersToAdd.forEach(folderToAdd => {\n                const uri = URI.isUri(folderToAdd.uri) && folderToAdd.uri.toString();\n                if (uri && !rootsToAdd.has(uri)) {\n                    rootsToAdd.add(uri);\n                }\n            });\n        }\n\n        if ([start, deleteCount].some(i => typeof i !== 'number' || i < 0)) {\n            return false; // validate numbers\n        }\n\n        if (deleteCount === 0 && rootsToAdd.size === 0) {\n            return false; // nothing to delete or add\n        }\n\n        const currentWorkspaceFolders = this.workspaceFolders || [];\n        if (start + deleteCount > currentWorkspaceFolders.length) {\n            return false; // cannot delete more than we have\n        }\n\n        // Simulate the updateWorkspaceFolders method on our data to do more validation\n        const newWorkspaceFolders = currentWorkspaceFolders.slice(0);\n        newWorkspaceFolders.splice(start, deleteCount, ...[...rootsToAdd].map(uri => ({ uri: URI.parse(uri), name: undefined!, index: undefined! })));\n\n        for (let i = 0; i < newWorkspaceFolders.length; i++) {\n            const folder = newWorkspaceFolders[i];\n            if (newWorkspaceFolders.some((otherFolder, index) => index !== i && folder.uri.toString() === otherFolder.uri.toString())) {\n                return false; // cannot add the same folder multiple times\n            }\n        }\n\n        const { added, removed } = this.deltaFolders(currentWorkspaceFolders, newWorkspaceFolders);\n        if (added.length === 0 && removed.length === 0) {\n            return false; // nothing actually changed\n        }\n\n        // Trigger on main side\n        this.proxy.$updateWorkspaceFolders(start, deleteCount, ...rootsToAdd).then(undefined, error =>\n            this.messageService.showMessage(MainMessageType.Error, `Failed to update workspace folders: ${error}`)\n        );\n\n        return true;\n    }\n\n    private async refreshWorkspaceFile(): Promise<void> {\n        const workspace = await this.proxy.$getWorkspace();\n        this.updateWorkSpace(workspace);\n    }\n\n    private updateWorkSpace(workspace: FileStat | undefined): void {\n        // A workspace directory implies an undefined workspace file\n        if (workspace && !workspace.isDirectory) {\n            this.workspaceFileUri = URI.parse(workspace.resource.toString());\n        }\n    }\n\n    get trusted(): boolean {\n        if (this._trusted === undefined) {\n            this.requestWorkspaceTrust();\n        }\n        return !!this._trusted;\n    }\n\n    requestWorkspaceTrust(options?: theia.WorkspaceTrustRequestOptions): Promise<boolean | undefined> {\n        return this.proxy.$requestWorkspaceTrust(options);\n    }\n\n    $onWorkspaceTrustChanged(trust: boolean | undefined): void {\n        if (!this._trusted && trust) {\n            this._trusted = trust;\n            this.didGrantWorkspaceTrustEmitter.fire();\n        }\n    }\n\n    registerCanonicalUriProvider(scheme: string, provider: theia.CanonicalUriProvider): theia.Disposable {\n        if (this.canonicalUriProviders.has(scheme)) {\n            throw new Error(`Canonical URI provider for scheme: '${scheme}' already exists locally`);\n        }\n\n        this.canonicalUriProviders.set(scheme, provider);\n        this.proxy.$registerCanonicalUriProvider(scheme).catch(e => {\n            console.error(`Canonical URI provider for scheme: '${scheme}' already exists globally`);\n            this.canonicalUriProviders.delete(scheme);\n        });\n        const result = Disposable.create(() => { this.proxy.$unregisterCanonicalUriProvider(scheme); });\n        return result;\n    }\n\n    $disposeCanonicalUriProvider(scheme: string): void {\n        if (!this.canonicalUriProviders.delete(scheme)) {\n            console.warn(`No canonical uri provider registered for '${scheme}'`);\n        }\n    }\n\n    async getCanonicalUri(uri: theia.Uri, options: theia.CanonicalUriRequestOptions, token: theia.CancellationToken): Promise<theia.Uri | undefined> {\n        const canonicalUri = await this.proxy.$getCanonicalUri(uri.toString(), options.targetScheme, token);\n        return isUndefined(canonicalUri) ? undefined : URI.parse(canonicalUri);\n    }\n\n    async $provideCanonicalUri(uri: string, targetScheme: string, token: CancellationToken): Promise<string | undefined> {\n        const parsed = URI.parse(uri);\n        const provider = this.canonicalUriProviders.get(parsed.scheme);\n        if (!provider) {\n            console.warn(`No canonical uri provider registered for '${parsed.scheme}'`);\n            return undefined;\n        }\n        const result = await provider.provideCanonicalUri(parsed, { targetScheme: targetScheme }, token);\n        return isUndefinedOrNull(result) ? undefined : result.toString();\n    }\n\n    /** @stubbed */\n    $registerEditSessionIdentityProvider(scheme: string, provider: theia.EditSessionIdentityProvider): theia.Disposable {\n        return Disposable.NULL;\n    }\n}\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = \"../../packages/core/lib/node sync recursive\";\nmodule.exports = webpackEmptyContext;","module.exports = require(\"assert\");","module.exports = require(\"async_hooks\");","module.exports = require(\"buffer\");","module.exports = require(\"child_process\");","module.exports = require(\"constants\");","module.exports = require(\"crypto\");","module.exports = require(\"dns\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"module\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"pnpapi\");","module.exports = require(\"punycode\");","module.exports = require(\"querystring\");","module.exports = require(\"readline\");","module.exports = require(\"stream\");","module.exports = require(\"string_decoder\");","module.exports = require(\"tls\");","module.exports = require(\"tty\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"worker_threads\");","module.exports = require(\"zlib\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendors-node_modules_fuzzy_lib_fuzzy_js-node_modules_inversify_es_inversify_js-node_modules_i-374ef0\",\"vendors-node_modules_phosphor_coreutils_lib_index_js-packages_core_node_modules_iconv-lite_li-d06203\",\"vendors-node_modules_yargs_index_js\",\"vendors-node_modules_fs-extra_lib_index_js\",\"vendors-node_modules_reflect-metadata_Reflect_js\",\"vendors-node_modules_deepmerge_dist_cjs_js-node_modules_express_index_js-node_modules_http-pr-e1c984\",\"vendors-node_modules_theia_monaco-editor-core_esm_vs_base_common_severity_js-node_modules_the-0d5078\",\"packages_core_lib_common_index_js\",\"packages_plugin-ext_lib_common_plugin-api-rpc_js\",\"packages_core_lib_node_messaging_ipc-channel_js-packages_core_lib_node_messaging_ipc-protocol_js\",\"dev-packages_application-package_lib_api_js-packages_plugin-ext_lib_common_index_js\",\"node_modules_express_lib_sync_recursive-node_modules_require-main-filename_sync_recursive-pac-c83c5f\"], () => (__webpack_require__(\"../../packages/plugin-ext/lib/hosted/node/plugin-host.js\")))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"loaded\", otherwise not loaded yet\nvar installedChunks = {\n\t\"plugin-host\": 1\n};\n\n__webpack_require__.O.require = (chunkId) => (installedChunks[chunkId]);\n\nvar installChunk = (chunk) => {\n\tvar moreModules = chunk.modules, chunkIds = chunk.ids, runtime = chunk.runtime;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tfor(var i = 0; i < chunkIds.length; i++)\n\t\tinstalledChunks[chunkIds[i]] = 1;\n\t__webpack_require__.O();\n};\n\n// require() chunk loading for javascript\n__webpack_require__.f.require = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\tinstallChunk(require(\"./\" + __webpack_require__.u(chunkId)));\n\t\t} else installedChunks[chunkId] = 1;\n\t}\n};\n\n// no external install chunk\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\t__webpack_require__.e(\"vendors-node_modules_fuzzy_lib_fuzzy_js-node_modules_inversify_es_inversify_js-node_modules_i-374ef0\");\n\t__webpack_require__.e(\"vendors-node_modules_phosphor_coreutils_lib_index_js-packages_core_node_modules_iconv-lite_li-d06203\");\n\t__webpack_require__.e(\"vendors-node_modules_yargs_index_js\");\n\t__webpack_require__.e(\"vendors-node_modules_fs-extra_lib_index_js\");\n\t__webpack_require__.e(\"vendors-node_modules_reflect-metadata_Reflect_js\");\n\t__webpack_require__.e(\"vendors-node_modules_deepmerge_dist_cjs_js-node_modules_express_index_js-node_modules_http-pr-e1c984\");\n\t__webpack_require__.e(\"vendors-node_modules_theia_monaco-editor-core_esm_vs_base_common_severity_js-node_modules_the-0d5078\");\n\t__webpack_require__.e(\"packages_core_lib_common_index_js\");\n\t__webpack_require__.e(\"packages_plugin-ext_lib_common_plugin-api-rpc_js\");\n\t__webpack_require__.e(\"packages_core_lib_node_messaging_ipc-channel_js-packages_core_lib_node_messaging_ipc-protocol_js\");\n\t__webpack_require__.e(\"dev-packages_application-package_lib_api_js-packages_plugin-ext_lib_common_index_js\");\n\t__webpack_require__.e(\"node_modules_express_lib_sync_recursive-node_modules_require-main-filename_sync_recursive-pac-c83c5f\");\n\treturn next();\n};","","// module cache are used so entry inlining is disabled\n// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n",""],"names":[],"sourceRoot":""}