{"version":3,"file":"node_modules_p-queue_index_js-packages_plugin-ext-vscode_lib_browser_plugin-vscode-frontend-m-23145a.js","mappings":";;;;;;;;;AAAa;;AAEb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH,mBAAmB;;AAEnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,uFAAuF,iBAAiB,MAAM,wBAAwB;AACtI;;AAEA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uCAAuC;AACvC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,gDAAgD;;;;;;;;;;;;AC9LjD,gFAAgF;AAChF,yCAAyC;AACzC,EAAE;AACF,2EAA2E;AAC3E,mEAAmE;AACnE,wCAAwC;AACxC,EAAE;AACF,4EAA4E;AAC5E,8EAA8E;AAC9E,6EAA6E;AAC7E,yDAAyD;AACzD,uDAAuD;AACvD,EAAE;AACF,gFAAgF;AAChF,gFAAgF;;;;;;;;;AAEhF,6HAA0D;AAC1D,oKAAiF;AAEjF,0JAAsE;AACtE,6MAA4G;A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","sources":["webpack:///../../node_modules/p-queue/index.js?","webpack:///../../packages/plugin-ext-vscode/src/browser/plugin-vscode-contribution.ts?","webpack:///../../packages/plugin-ext-vscode/src/browser/plugin-vscode-frontend-module.ts?","webpack:///../../packages/plugin-ext-vscode/src/common/plugin-vscode-environment.ts?","webpack:///../../packages/plugin-ext-vscode/src/common/plugin-vscode-uri.ts?"],"sourcesContent":["'use strict';\n\n// Port of lower_bound from http://en.cppreference.com/w/cpp/algorithm/lower_bound\n// Used to compute insertion index to keep queue sorted after insertion\nfunction lowerBound(array, value, comp) {\n\tlet first = 0;\n\tlet count = array.length;\n\n\twhile (count > 0) {\n\t\tconst step = (count / 2) | 0;\n\t\tlet it = first + step;\n\n\t\tif (comp(array[it], value) <= 0) {\n\t\t\tfirst = ++it;\n\t\t\tcount -= step + 1;\n\t\t} else {\n\t\t\tcount = step;\n\t\t}\n\t}\n\n\treturn first;\n}\n\nclass PriorityQueue {\n\tconstructor() {\n\t\tthis._queue = [];\n\t}\n\n\tenqueue(run, opts) {\n\t\topts = Object.assign({\n\t\t\tpriority: 0\n\t\t}, opts);\n\n\t\tconst element = {priority: opts.priority, run};\n\n\t\tif (this.size && this._queue[this.size - 1].priority >= opts.priority) {\n\t\t\tthis._queue.push(element);\n\t\t\treturn;\n\t\t}\n\n\t\tconst index = lowerBound(this._queue, element, (a, b) => b.priority - a.priority);\n\t\tthis._queue.splice(index, 0, element);\n\t}\n\n\tdequeue() {\n\t\treturn this._queue.shift().run;\n\t}\n\n\tget size() {\n\t\treturn this._queue.length;\n\t}\n}\n\nclass PQueue {\n\tconstructor(opts) {\n\t\topts = Object.assign({\n\t\t\tconcurrency: Infinity,\n\t\t\tautoStart: true,\n\t\t\tqueueClass: PriorityQueue\n\t\t}, opts);\n\n\t\tif (!(typeof opts.concurrency === 'number' && opts.concurrency >= 1)) {\n\t\t\tthrow new TypeError(`Expected \\`concurrency\\` to be a number from 1 and up, got \\`${opts.concurrency}\\` (${typeof opts.concurrency})`);\n\t\t}\n\n\t\tthis.queue = new opts.queueClass(); // eslint-disable-line new-cap\n\t\tthis._queueClass = opts.queueClass;\n\t\tthis._pendingCount = 0;\n\t\tthis._concurrency = opts.concurrency;\n\t\tthis._isPaused = opts.autoStart === false;\n\t\tthis._resolveEmpty = () => {};\n\t\tthis._resolveIdle = () => {};\n\t}\n\n\t_next() {\n\t\tthis._pendingCount--;\n\n\t\tif (this.queue.size > 0) {\n\t\t\tif (!this._isPaused) {\n\t\t\t\tthis.queue.dequeue()();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._resolveEmpty();\n\t\t\tthis._resolveEmpty = () => {};\n\n\t\t\tif (this._pendingCount === 0) {\n\t\t\t\tthis._resolveIdle();\n\t\t\t\tthis._resolveIdle = () => {};\n\t\t\t}\n\t\t}\n\t}\n\n\tadd(fn, opts) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst run = () => {\n\t\t\t\tthis._pendingCount++;\n\n\t\t\t\ttry {\n\t\t\t\t\tPromise.resolve(fn()).then(\n\t\t\t\t\t\tval => {\n\t\t\t\t\t\t\tresolve(val);\n\t\t\t\t\t\t\tthis._next();\n\t\t\t\t\t\t},\n\t\t\t\t\t\terr => {\n\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\tthis._next();\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t} catch (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t\tthis._next();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (!this._isPaused && this._pendingCount < this._concurrency) {\n\t\t\t\trun();\n\t\t\t} else {\n\t\t\t\tthis.queue.enqueue(run, opts);\n\t\t\t}\n\t\t});\n\t}\n\n\taddAll(fns, opts) {\n\t\treturn Promise.all(fns.map(fn => this.add(fn, opts)));\n\t}\n\n\tstart() {\n\t\tif (!this._isPaused) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isPaused = false;\n\t\twhile (this.queue.size > 0 && this._pendingCount < this._concurrency) {\n\t\t\tthis.queue.dequeue()();\n\t\t}\n\t}\n\n\tpause() {\n\t\tthis._isPaused = true;\n\t}\n\n\tclear() {\n\t\tthis.queue = new this._queueClass(); // eslint-disable-line new-cap\n\t}\n\n\tonEmpty() {\n\t\t// Instantly resolve if the queue is empty\n\t\tif (this.queue.size === 0) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise(resolve => {\n\t\t\tconst existingResolve = this._resolveEmpty;\n\t\t\tthis._resolveEmpty = () => {\n\t\t\t\texistingResolve();\n\t\t\t\tresolve();\n\t\t\t};\n\t\t});\n\t}\n\n\tonIdle() {\n\t\t// Instantly resolve if none pending\n\t\tif (this._pendingCount === 0) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn new Promise(resolve => {\n\t\t\tconst existingResolve = this._resolveIdle;\n\t\t\tthis._resolveIdle = () => {\n\t\t\t\texistingResolve();\n\t\t\t\tresolve();\n\t\t\t};\n\t\t});\n\t}\n\n\tget size() {\n\t\treturn this.queue.size;\n\t}\n\n\tget pending() {\n\t\treturn this._pendingCount;\n\t}\n\n\tget isPaused() {\n\t\treturn this._isPaused;\n\t}\n}\n\nmodule.exports = PQueue;\n\n;(globalThis['theia'] = globalThis['theia'] || {})['p-queue'] = this;\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from '@theia/core/shared/inversify';\nimport { UserStorageUri } from '@theia/userstorage/lib/browser/user-storage-uri';\nimport { FileServiceContribution, FileService } from '@theia/filesystem/lib/browser/file-service';\nimport { Schemes } from '@theia/plugin-ext/lib/common/uri-components';\nimport { DelegatingFileSystemProvider } from '@theia/filesystem/lib/common/delegating-file-system-provider';\n\n@injectable()\nexport class PluginVSCodeContribution implements FileServiceContribution {\n\n    registerFileSystemProviders(service: FileService): void {\n        this.mapSchemas(service, Schemes.vscodeRemote, 'file');\n        this.mapSchemas(service, Schemes.userData, UserStorageUri.scheme);\n    }\n\n    protected mapSchemas(service: FileService, from: string, to: string): void {\n        service.onWillActivateFileSystemProvider(event => {\n            if (event.scheme === from) {\n                event.waitUntil((async () => {\n                    const provider = await service.activateProvider(to);\n                    service.registerProvider(from, new DelegatingFileSystemProvider(provider, {\n                        uriConverter: {\n                            to: resource => resource.withScheme(to),\n                            from: resource => resource.withScheme(from)\n                        }\n                    }));\n                })());\n            }\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { ContainerModule } from '@theia/core/shared/inversify';\nimport { CommandContribution } from '@theia/core';\nimport { PluginVscodeCommandsContribution } from './plugin-vscode-commands-contribution';\nimport { PluginVSCodeEnvironment } from '../common/plugin-vscode-environment';\nimport { PluginVSCodeContribution } from './plugin-vscode-contribution';\nimport { FileServiceContribution } from '@theia/filesystem/lib/browser/file-service';\n\nexport default new ContainerModule(bind => {\n    bind(PluginVSCodeEnvironment).toSelf().inSingletonScope();\n    bind(PluginVscodeCommandsContribution).toSelf().inSingletonScope();\n    bind(CommandContribution).toService(PluginVscodeCommandsContribution);\n    bind(PluginVSCodeContribution).toSelf().inSingletonScope();\n    bind(FileServiceContribution).toService(PluginVSCodeContribution);\n});\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from '@theia/core/shared/inversify';\nimport { EnvVariablesServer } from '@theia/core/lib/common/env-variables';\nimport URI from '@theia/core/lib/common/uri';\n\n@injectable()\nexport class PluginVSCodeEnvironment {\n\n    @inject(EnvVariablesServer)\n    protected readonly environments: EnvVariablesServer;\n\n    protected _extensionsDirUri: URI | undefined;\n    async getExtensionsDirUri(): Promise<URI> {\n        if (!this._extensionsDirUri) {\n            const configDir = new URI(await this.environments.getConfigDirUri());\n            this._extensionsDirUri = configDir.resolve('extensions');\n        }\n        return this._extensionsDirUri;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport URI from '@theia/core/lib/common/uri';\n\n/**\n * Static methods for identifying a plugin as the target of the VSCode deployment system.\n * In practice, this means that it will be resolved and deployed by the Open-VSX system.\n */\nexport namespace VSCodeExtensionUri {\n    export const VSCODE_PREFIX = 'vscode:extension/';\n    /**\n     * Should be used to prefix a plugin's ID to ensure that it is identified as a VSX Extension.\n     * @returns `vscode:extension/${id}`\n     */\n    export function toVsxExtensionUriString(id: string): string {\n        return `${VSCODE_PREFIX}${id}`;\n    }\n    export function toUri(name: string, namespace: string): URI;\n    export function toUri(id: string): URI;\n    export function toUri(idOrName: string, namespace?: string): URI {\n        if (typeof namespace === 'string') {\n            return new URI(toVsxExtensionUriString(`${namespace}.${idOrName}`));\n        } else {\n            return new URI(toVsxExtensionUriString(idOrName));\n        }\n    }\n    export function toId(uri: URI): string | undefined {\n        if (uri.scheme === 'vscode' && uri.path.dir.toString() === 'extension') {\n            return uri.path.base;\n        }\n        return undefined;\n    }\n}\n"],"names":[],"sourceRoot":""}