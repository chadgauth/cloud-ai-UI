{"version":3,"file":"packages_plugin-ext_lib_hosted_browser_worker_worker-main_js.js","mappings":"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OAAO,6BAAiB,EAAC,MAAM,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;IACrE,CAAC;IAED,eAAe;IACf,oCAAoC,CAAC,MAAc,EAAE,QAA2C;QAC5F,OAAO,uBAAU,CAAC,IAAI,CAAC;IAC3B,CAAC;CACJ;AAhcD,4CAgcC;;;;;;;;;;;;;AC9eD;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;;;;WCrCA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC3BA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;;;;WCRA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WClBA;;WAEA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,aAAa;WACb;WACA;WACA;WACA;;WAEA;WACA;WACA;;WAEA;;WAEA;;;;;WCpCA;WACA;WACA;WACA;;;;;UEHA;UACA","sources":["webpack:///../../dev-packages/application-package/src/environment.ts?","webpack:///../../packages/core/src/browser/endpoint.ts?","webpack:///../../packages/core/src/common/application-error.ts?","webpack:///../../packages/core/src/common/array-utils.ts?","webpack:///../../packages/core/src/common/buffer.ts?","webpack:///../../packages/core/src/common/cancellation.ts?","webpack:///../../packages/core/src/common/command.ts?","webpack:///../../packages/core/src/common/contribution-filter/contribution-filter-registry.ts?","webpack:///../../packages/core/src/common/contribution-filter/contribution-filter.ts?","webpack:///../../packages/core/src/common/contribution-filter/filter.ts?","webpack:///../../packages/core/src/common/contribution-filter/index.ts?","webpack:///../../packages/core/src/common/contribution-provider.ts?","webpack:///../../packages/core/src/common/disposable.ts?","webpack:///../../packages/core/src/common/event.ts?","webpack:///../../packages/core/src/common/i18n/localization.ts?","webpack:///../../packages/core/src/common/index.ts?","webpack:///../../packages/core/src/common/logger-protocol.ts?","webpack:///../../packages/core/src/common/logger-watcher.ts?","webpack:///../../packages/core/src/common/logger.ts?","webpack:///../../packages/core/src/common/lsp-types.ts?","webpack:///../../packages/core/src/common/menu/action-menu-node.ts?","webpack:///../../packages/core/src/common/menu/composite-menu-node.ts?","webpack:///../../packages/core/src/common/menu/index.ts?","webpack:///../../packages/core/src/common/menu/menu-adapter.ts?","webpack:///../../packages/core/src/common/menu/menu-model-registry.ts?","webpack:///../../packages/core/src/common/menu/menu-types.ts?","webpack:///../../packages/core/src/common/message-rpc/channel.ts?","webpack:///../../packages/core/src/common/message-rpc/index.ts?","webpack:///../../packages/core/src/common/message-rpc/msg-pack-extension-manager.ts?","webpack:///../../packages/core/src/common/message-rpc/rpc-message-encoder.ts?","webpack:///../../packages/core/src/common/message-rpc/rpc-protocol.ts?","webpack:///../../packages/core/src/common/message-rpc/uint8-array-message-buffer.ts?","webpack:///../../packages/core/src/common/message-service-protocol.ts?","webpack:///../../packages/core/src/common/message-service.ts?","webpack:///../../packages/core/src/common/messaging/connection-error-handler.ts?","webpack:///../../packages/core/src/common/messaging/handler.ts?","webpack:///../../packages/core/src/common/messaging/index.ts?","webpack:///../../packages/core/src/common/messaging/proxy-factory.ts?","webpack:///../../packages/core/src/common/nls.ts?","webpack:///../../packages/core/src/common/numbers.ts?","webpack:///../../packages/core/src/common/objects.ts?","webpack:///../../packages/core/src/common/os.ts?","webpack:///../../packages/core/src/common/path.ts?","webpack:///../../packages/core/src/common/performance/index.ts?","webpack:///../../packages/core/src/common/performance/measurement-protocol.ts?","webpack:///../../packages/core/src/common/performance/measurement.ts?","webpack:///../../packages/core/src/common/performance/stopwatch.ts?","webpack:///../../packages/core/src/common/prioritizeable.ts?","webpack:///../../packages/core/src/common/progress-service-protocol.ts?","webpack:///../../packages/core/src/common/progress-service.ts?","webpack:///../../packages/core/src/common/promise-util.ts?","webpack:///../../packages/core/src/common/quick-pick-service.ts?","webpack:///../../packages/core/src/common/reference.ts?","webpack:///../../packages/core/src/common/resource.ts?","webpack:///../../packages/core/src/common/selection-service.ts?","webpack:///../../packages/core/src/common/selection.ts?","webpack:///../../packages/core/src/common/severity.ts?","webpack:///../../packages/core/src/common/stream.ts?","webpack:///../../packages/core/src/common/strings.ts?","webpack:///../../packages/core/src/common/telemetry.ts?","webpack:///../../packages/core/src/common/types.ts?","webpack:///../../packages/core/src/common/uri.ts?","webpack:///../../packages/core/src/common/view-column.ts?","webpack:///../../packages/core/shared/@phosphor/coreutils/index.js?","webpack:///../../packages/core/shared/inversify/index.js?","webpack:///../../packages/core/shared/vscode-languageserver-protocol/index.js?","webpack:///../../packages/core/shared/vscode-uri/index.js?","webpack:///../../packages/debug/src/common/debug-adapter-session.ts?","webpack:///../../packages/debug/src/common/debug-uri-utils.ts?","webpack:///../../packages/debug/src/common/inline-debug-adapter.ts?","webpack:///../../packages/debug/src/node/stream-debug-adapter.ts?","webpack:///../../packages/plugin-ext/src/common/assert.ts?","webpack:///../../packages/plugin-ext/src/common/cache.ts?","webpack:///../../packages/plugin-ext/src/common/character-classifier.ts?","webpack:///../../packages/plugin-ext/src/common/id-generator.ts?","webpack:///../../packages/plugin-ext/src/common/link-computer.ts?","webpack:///../../packages/plugin-ext/src/common/object-identifier.ts?","webpack:///../../packages/plugin-ext/src/common/objects.ts?","webpack:///../../packages/plugin-ext/src/common/reference-map.ts?","webpack:///../../packages/plugin-ext/src/common/semantic-tokens-dto.ts?","webpack:///../../packages/plugin-ext/src/common/uint.ts?","webpack:///../../packages/plugin-ext/src/hosted/browser/worker/debug-stub.ts?","webpack:///../../packages/plugin-ext/src/hosted/browser/worker/plugin-manifest-loader.ts?","webpack:///../../packages/plugin-ext/src/hosted/browser/worker/worker-env-ext.ts?","webpack:///../../packages/plugin-ext/src/hosted/browser/worker/worker-main.ts?","webpack:///../../packages/plugin-ext/src/plugin/authentication-ext.ts?","webpack:///../../packages/plugin-ext/src/plugin/clipboard-ext.ts?","webpack:///../../packages/plugin-ext/src/plugin/command-registry.ts?","webpack:///../../packages/plugin-ext/src/plugin/comments.ts?","webpack:///../../packages/plugin-ext/src/plugin/custom-editors.ts?","webpack:///../../packages/plugin-ext/src/plugin/debug/debug-ext.ts?","webpack:///../../packages/plugin-ext/src/plugin/debug/plugin-debug-adapter-creator.ts?","webpack:///../../packages/plugin-ext/src/plugin/debug/plugin-debug-adapter-session.ts?","webpack:///../../packages/plugin-ext/src/plugin/debug/plugin-debug-adapter-tracker.ts?","webpack:///../../packages/plugin-ext/src/plugin/decorations.ts?","webpack:///../../packages/plugin-ext/src/plugin/dialogs.ts?","webpack:///../../packages/plugin-ext/src/plugin/document-data.ts?","webpack:///../../packages/plugin-ext/src/plugin/documents.ts?","webpack:///../../packages/plugin-ext/src/plugin/editors-and-documents.ts?","webpack:///../../packages/plugin-ext/src/plugin/env.ts?","webpack:///../../packages/plugin-ext/src/plugin/file-system-event-service-ext-impl.ts?","webpack:///../../packages/plugin-ext/src/plugin/file-system-ext-impl.ts?","webpack:///../../packages/plugin-ext/src/plugin/known-commands.ts?","webpack:///../../packages/plugin-ext/src/plugin/label-service.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages-utils.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/call-hierarchy.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/code-action.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/color.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/completion.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/declaration.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/definition.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/diagnostics.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/document-drop-edit.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/document-formatting.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/document-highlight.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/evaluatable-expression.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/folding.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/hover.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/implementation.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/inlay-hints.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/inline-completion.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/inline-values.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/lens.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/link-provider.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/linked-editing-range.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/on-type-formatting.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/outline.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/range-formatting.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/reference.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/rename.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/selection-range.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/semantic-highlighting.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/signature.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/type-definition.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/type-hierarchy.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/util.ts?","webpack:///../../packages/plugin-ext/src/plugin/languages/workspace-symbol.ts?","webpack:///../../packages/plugin-ext/src/plugin/localization-ext.ts?","webpack:///../../packages/plugin-ext/src/plugin/message-registry.ts?","webpack:///../../packages/plugin-ext/src/plugin/node/debug/plugin-node-debug-adapter-creator.ts?","webpack:///../../packages/plugin-ext/src/plugin/notebook/notebook-document.ts?","webpack:///../../packages/plugin-ext/src/plugin/notebook/notebook-documents.ts?","webpack:///../../packages/plugin-ext/src/plugin/notebook/notebook-editor.ts?","webpack:///../../packages/plugin-ext/src/plugin/notebook/notebook-editors.ts?","webpack:///../../packages/plugin-ext/src/plugin/notebook/notebook-kernels.ts?","webpack:///../../packages/plugin-ext/src/plugin/notebook/notebook-renderers.ts?","webpack:///../../packages/plugin-ext/src/plugin/notebook/notebooks.ts?","webpack:///../../packages/plugin-ext/src/plugin/notification.ts?","webpack:///../../packages/plugin-ext/src/plugin/output-channel-registry.ts?","webpack:///../../packages/plugin-ext/src/plugin/output-channel/log-output-channel.ts?","webpack:///../../packages/plugin-ext/src/plugin/output-channel/output-channel-item.ts?","webpack:///../../packages/plugin-ext/src/plugin/path.ts?","webpack:///../../packages/plugin-ext/src/plugin/plugin-context.ts?","webpack:///../../packages/plugin-ext/src/plugin/plugin-icon-path.ts?","webpack:///../../packages/plugin-ext/src/plugin/plugin-manager.ts?","webpack:///../../packages/plugin-ext/src/plugin/plugin-storage.ts?","webpack:///../../packages/plugin-ext/src/plugin/preference-registry.ts?","webpack:///../../packages/plugin-ext/src/plugin/prefix-sum-computer.ts?","webpack:///../../packages/plugin-ext/src/plugin/scm.ts?","webpack:///../../packages/plugin-ext/src/plugin/secrets-ext.ts?","webpack:///../../packages/plugin-ext/src/plugin/status-bar-message-registry.ts?","webpack:///../../packages/plugin-ext/src/plugin/status-bar/status-bar-item.ts?","webpack:///../../packages/plugin-ext/src/plugin/stubs/tests-api.ts?","webpack:///../../packages/plugin-ext/src/plugin/tabs.ts?","webpack:///../../packages/plugin-ext/src/plugin/tasks/task-provider.ts?","webpack:///../../packages/plugin-ext/src/plugin/tasks/tasks.ts?","webpack:///../../packages/plugin-ext/src/plugin/telemetry-ext.ts?","webpack:///../../packages/plugin-ext/src/plugin/text-editor.ts?","webpack:///../../packages/plugin-ext/src/plugin/text-editors.ts?","webpack:///../../packages/plugin-ext/src/plugin/theming.ts?","webpack:///../../packages/plugin-ext/src/plugin/timeline.ts?","webpack:///../../packages/plugin-ext/src/plugin/tree/tree-views.ts?","webpack:///../../packages/plugin-ext/src/plugin/webview-views.ts?","webpack:///../../packages/plugin-ext/src/plugin/webviews.ts?","webpack:///../../packages/plugin-ext/src/plugin/window-state.ts?","webpack:///../../packages/plugin-ext/src/plugin/word-helper.ts?","webpack:///../../packages/plugin-ext/src/plugin/workspace.ts?","webpack:///ignored|/Users/chadgauthier/cloud-ai-UI/node_modules/@phosphor/coreutils/lib|crypto?","webpack:///ignored|/Users/chadgauthier/cloud-ai-UI/packages/core/node_modules/iconv-lite/lib|stream?","webpack:///ignored|/Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/lib/plugin/languages|os?","webpack:///ignored|/Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/lib/plugin/node/debug|child_process?","webpack:///ignored|/Users/chadgauthier/cloud-ai-UI/packages/plugin-ext/lib/plugin/node/debug|net?","webpack:///webpack/bootstrap?","webpack:///webpack/runtime/chunk loaded?","webpack:///webpack/runtime/define property getters?","webpack:///webpack/runtime/ensure chunk?","webpack:///webpack/runtime/get javascript chunk filename?","webpack:///webpack/runtime/global?","webpack:///webpack/runtime/hasOwnProperty shorthand?","webpack:///webpack/runtime/make namespace object?","webpack:///webpack/runtime/node module decorator?","webpack:///webpack/runtime/publicPath?","webpack:///webpack/runtime/importScripts chunk loading?","webpack:///webpack/runtime/startup chunk dependencies?","webpack:///webpack/before-startup?","webpack:///webpack/startup?","webpack:///webpack/after-startup?"],"sourcesContent":["// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nconst isElectron: () => boolean = require('is-electron');\n\n/**\n * The electron specific environment.\n */\nclass ElectronEnv {\n\n    /**\n     * Environment variable that can be accessed on the `process` to check if running in electron or not.\n     */\n    readonly THEIA_ELECTRON_VERSION = 'THEIA_ELECTRON_VERSION';\n\n    /**\n     * `true` if running in electron. Otherwise, `false`.\n     *\n     * Can be called from both the `main` and the render process. Also works for forked cluster workers.\n     */\n    is(): boolean {\n        return isElectron();\n    }\n\n    /**\n     * `true` if running in Electron in development mode. Otherwise, `false`.\n     *\n     * Cannot be used from the browser. From the browser, it is always `false`.\n     */\n    isDevMode(): boolean {\n        return this.is()\n            && typeof process !== 'undefined'\n            // `defaultApp` does not exist on the Node.js API, but on electron (`electron.d.ts`).\n            && ((process as any).defaultApp || /node_modules[/\\\\]electron[/\\\\]/.test(process.execPath)); // eslint-disable-line @typescript-eslint/no-explicit-any\n    }\n\n    /**\n     * Creates and return with a new environment object which always contains the `ELECTRON_RUN_AS_NODE: 1` property pair.\n     * This should be used to `spawn` and `fork` a new Node.js process from the Node.js shipped with Electron. Otherwise, a new Electron\n     * process will be spawned which [has side-effects](https://github.com/eclipse-theia/theia/issues/5385).\n     *\n     * If called from the backend and the `env` argument is not defined, it falls back to `process.env` such as Node.js behaves\n     * with the [`SpawnOptions`](https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options).\n     * If `env` is defined, it will be shallow-copied.\n     *\n     * Calling this function from the frontend does not make any sense, hence throw an error.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    runAsNodeEnv(env?: any): any & { ELECTRON_RUN_AS_NODE: 1 } {\n        if (typeof process === 'undefined') {\n            throw new Error(\"'process' cannot be undefined.\");\n        }\n        return {\n            ...(env === undefined ? process.env : env),\n            ELECTRON_RUN_AS_NODE: 1\n        };\n    }\n\n}\n\nconst electron = new ElectronEnv();\nconst environment: Readonly<{ electron: ElectronEnv }> = { electron };\nexport { environment };\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport URI from '../common/uri';\n\n/**\n * An endpoint provides URLs for http and ws, based on configuration and defaults.\n */\nexport class Endpoint {\n    static readonly PROTO_HTTPS: string = 'https:';\n    static readonly PROTO_HTTP: string = 'http:';\n    static readonly PROTO_WS: string = 'ws:';\n    static readonly PROTO_WSS: string = 'wss:';\n    static readonly PROTO_FILE: string = 'file:';\n\n    constructor(\n        protected readonly options: Endpoint.Options = {},\n        protected readonly location: Endpoint.Location = self.location\n    ) { }\n\n    getWebSocketUrl(): URI {\n        return new URI(`${this.wsScheme}//${this.host}${this.pathname}${this.path}`);\n    }\n\n    getRestUrl(): URI {\n        return new URI(`${this.httpScheme}//${this.host}${this.pathname}${this.path}`);\n    }\n\n    protected get pathname(): string {\n        if (this.location.protocol === Endpoint.PROTO_FILE) {\n            return '';\n        }\n        if (this.location.pathname === '/') {\n            return '';\n        }\n        if (this.location.pathname.endsWith('/')) {\n            return this.location.pathname.substring(0, this.location.pathname.length - 1);\n        }\n        return this.location.pathname;\n    }\n\n    get host(): string {\n        if (this.options.host) {\n            return this.options.host;\n        }\n        if (this.location.host) {\n            return this.location.host;\n        }\n        return 'localhost:' + this.port;\n    }\n\n    get origin(): string {\n        return `${this.httpScheme}//${this.host}`;\n    }\n\n    protected get port(): string {\n        return this.getSearchParam('port', '3000');\n    }\n\n    protected getSearchParam(name: string, defaultValue: string): string {\n        const search = this.location.search;\n        if (!search) {\n            return defaultValue;\n        }\n        return search.substring(1).split('&')\n            .filter(value => value.startsWith(name + '='))\n            .map(value => {\n                const encoded = value.substring(name.length + 1);\n                return decodeURIComponent(encoded);\n            })[0] || defaultValue;\n    }\n\n    protected get wsScheme(): string {\n        if (this.options.wsScheme) {\n            return this.options.wsScheme;\n        }\n        return this.httpScheme === Endpoint.PROTO_HTTPS ? Endpoint.PROTO_WSS : Endpoint.PROTO_WS;\n    }\n\n    /**\n     * The HTTP/HTTPS scheme of the endpoint, or the user defined one.\n     * See: `Endpoint.Options.httpScheme`.\n     */\n    get httpScheme(): string {\n        if (this.options.httpScheme) {\n            return this.options.httpScheme;\n        }\n        if (this.location.protocol === Endpoint.PROTO_HTTP ||\n            this.location.protocol === Endpoint.PROTO_HTTPS) {\n            return this.location.protocol;\n        }\n        return Endpoint.PROTO_HTTP;\n    }\n\n    protected get path(): string {\n        if (this.options.path) {\n            if (this.options.path.startsWith('/')) {\n                return this.options.path;\n            } else {\n                return '/' + this.options.path;\n            }\n        }\n        return '';\n    }\n}\n\nexport namespace Endpoint {\n    export class Options {\n        host?: string;\n        wsScheme?: string;\n        httpScheme?: string;\n        path?: string;\n    }\n\n    // Necessary for running tests with dependency on TS lib on node\n    // FIXME figure out how to mock with ts-node\n    export class Location {\n        host: string;\n        pathname: string;\n        search: string;\n        protocol: string;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport interface ApplicationError<C extends number, D> extends Error {\n    readonly code: C\n    readonly data: D\n    toJson(): ApplicationError.Literal<D>\n}\nexport namespace ApplicationError {\n    export interface Literal<D> {\n        message: string\n        data: D\n        stack?: string\n    }\n    export interface Constructor<C extends number, D> {\n        (...args: any[]): ApplicationError<C, D>;\n        code: C;\n        is(arg: object | undefined): arg is ApplicationError<C, D>\n    }\n    const codes = new Set<number>();\n    export function declare<C extends number, D>(code: C, factory: (...args: any[]) => Literal<D>): Constructor<C, D> {\n        if (codes.has(code)) {\n            throw new Error(`An application error for '${code}' code is already declared`);\n        }\n        codes.add(code);\n        const constructorOpt = Object.assign((...args: any[]) => new Impl(code, factory(...args), constructorOpt), {\n            code,\n            is(arg: object | undefined): arg is ApplicationError<C, D> {\n                return arg instanceof Impl && arg.code === code;\n            }\n        });\n        return constructorOpt;\n    }\n    export function is<C extends number, D>(arg: object | undefined): arg is ApplicationError<C, D> {\n        return arg instanceof Impl;\n    }\n    export function fromJson<C extends number, D>(code: C, raw: Literal<D>): ApplicationError<C, D> {\n        return new Impl(code, raw);\n    }\n    class Impl<C extends number, D> extends Error implements ApplicationError<C, D>  {\n        readonly data: D;\n        constructor(\n            readonly code: C,\n            raw: ApplicationError.Literal<D>,\n            constructorOpt?: Function\n        ) {\n            super(raw.message);\n            this.data = raw.data;\n            Object.setPrototypeOf(this, Impl.prototype);\n            if (raw.stack) {\n                this.stack = raw.stack;\n            } else if (Error.captureStackTrace && constructorOpt) {\n                Error.captureStackTrace(this, constructorOpt);\n            }\n        }\n        toJson(): ApplicationError.Literal<D> {\n            const { message, data, stack } = this;\n            return { message, data, stack };\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport namespace ArrayUtils {\n    export interface Head<T> extends Array<T> {\n        head(): T;\n    }\n\n    export interface Tail<T> extends Array<T> {\n        tail(): T;\n    }\n\n    export interface Children<T> extends Array<T> {\n        children(): Tail<T>\n    }\n\n    export const TailImpl = {\n        tail<T>(this: Array<T>): T {\n            return this[this.length - 1];\n        },\n    };\n\n    export const HeadAndChildrenImpl = {\n        head<T>(this: Array<T>): T {\n            return this[0];\n        },\n\n        children<T>(this: Array<T>): Tail<T> {\n            return Object.assign(this.slice(1), TailImpl);\n        }\n    };\n\n    export interface HeadAndTail<T> extends Head<T>, Tail<T>, Children<T> { }\n\n    export function asTail<T>(array: Array<T>): Tail<T> {\n        return Object.assign(array, TailImpl);\n    }\n\n    export function asHeadAndTail<T>(array: Array<T>): HeadAndTail<T> {\n        return Object.assign(array, HeadAndChildrenImpl, TailImpl);\n    }\n\n    export enum Sort {\n        LeftBeforeRight = -1,\n        RightBeforeLeft = 1,\n        Equal = 0,\n    }\n\n    // Copied from https://github.com/microsoft/vscode/blob/9c29becfad5f68270b9b23efeafb147722c5feba/src/vs/base/common/arrays.ts\n    /**\n     * Performs a binary search algorithm over a sorted collection. Useful for cases\n     * when we need to perform a binary search over something that isn't actually an\n     * array, and converting data to an array would defeat the use of binary search\n     * in the first place.\n     *\n     * @param length The collection length.\n     * @param compareToKey A function that takes an index of an element in the\n     *   collection and returns zero if the value at this index is equal to the\n     *   search key, a negative number if the value precedes the search key in the\n     *   sorting order, or a positive number if the search key precedes the value.\n     * @return A non-negative index of an element, if found. If not found, the\n     *   result is -(n+1) (or ~n, using bitwise notation), where n is the index\n     *   where the key should be inserted to maintain the sorting order.\n     */\n    export function binarySearch2(length: number, compareToKey: (index: number) => number): number {\n        let low = 0;\n        let high = length - 1;\n\n        while (low <= high) {\n            const mid = ((low + high) / 2) | 0;\n            const comp = compareToKey(mid);\n            if (comp < 0) {\n                low = mid + 1;\n            } else if (comp > 0) {\n                high = mid - 1;\n            } else {\n                return mid;\n            }\n        }\n        return -(low + 1);\n    }\n\n    export function partition<T>(array: T[], filter: (e: T, idx: number, arr: T[]) => boolean | undefined): [T[], T[]] {\n        const pass: T[] = [];\n        const fail: T[] = [];\n        array.forEach((e, idx, arr) => (filter(e, idx, arr) ? pass : fail).push(e));\n        return [pass, fail];\n    }\n\n    /**\n     * @returns New array with all falsy values removed. The original array IS NOT modified.\n     */\n    export function coalesce<T>(array: ReadonlyArray<T | undefined | null>): T[] {\n        return <T[]>array.filter(e => !!e);\n    }\n\n    /**\n     * groups array elements through a comparator function\n     * @param data array of elements to group\n     * @param compare comparator function: return of 0 means should group, anything above means not group\n     * @returns array of arrays with grouped elements\n     */\n    export function groupBy<T>(data: ReadonlyArray<T>, compare: (a: T, b: T) => number): T[][] {\n        const result: T[][] = [];\n        let currentGroup: T[] | undefined = undefined;\n        for (const element of data.slice(0).sort(compare)) {\n            if (!currentGroup || compare(currentGroup[0], element) !== 0) {\n                currentGroup = [element];\n                result.push(currentGroup);\n            } else {\n                currentGroup.push(element);\n            }\n        }\n        return result;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/buffer.ts\n\n/* eslint-disable no-null/no-null */\n\nimport { Buffer as SaferBuffer } from 'safer-buffer';\nimport * as iconv from 'iconv-lite';\nimport * as streams from './stream';\n\nconst hasBuffer = (typeof Buffer !== 'undefined');\nconst hasTextEncoder = (typeof TextEncoder !== 'undefined');\nconst hasTextDecoder = (typeof TextDecoder !== 'undefined');\n\nlet textEncoder: TextEncoder | null;\nlet textDecoder: TextDecoder | null;\n\nexport class BinaryBuffer {\n\n    static alloc(byteLength: number): BinaryBuffer {\n        if (hasBuffer) {\n            return new BinaryBuffer(Buffer.allocUnsafe(byteLength));\n        } else {\n            return new BinaryBuffer(new Uint8Array(byteLength));\n        }\n    }\n\n    static wrap(actual: Uint8Array): BinaryBuffer {\n        if (hasBuffer && !(Buffer.isBuffer(actual))) {\n            // https://nodejs.org/dist/latest-v10.x/docs/api/buffer.html#buffer_class_method_buffer_from_arraybuffer_byteoffset_length\n            // Create a zero-copy Buffer wrapper around the ArrayBuffer pointed to by the Uint8Array\n            actual = Buffer.from(actual.buffer, actual.byteOffset, actual.byteLength);\n        }\n        return new BinaryBuffer(actual);\n    }\n\n    static fromString(source: string): BinaryBuffer {\n        if (hasBuffer) {\n            return new BinaryBuffer(Buffer.from(source));\n        } else if (hasTextEncoder) {\n            if (!textEncoder) {\n                textEncoder = new TextEncoder();\n            }\n            return new BinaryBuffer(textEncoder.encode(source));\n        } else {\n            return new BinaryBuffer(iconv.encode(source, 'utf8'));\n        }\n    }\n\n    static concat(buffers: BinaryBuffer[], totalLength?: number): BinaryBuffer {\n        if (typeof totalLength === 'undefined') {\n            totalLength = 0;\n            for (let i = 0, len = buffers.length; i < len; i++) {\n                totalLength += buffers[i].byteLength;\n            }\n        }\n\n        const ret = BinaryBuffer.alloc(totalLength);\n        let offset = 0;\n        for (let i = 0, len = buffers.length; i < len; i++) {\n            const element = buffers[i];\n            ret.set(element, offset);\n            offset += element.byteLength;\n        }\n\n        return ret;\n    }\n\n    readonly buffer: Uint8Array;\n    readonly byteLength: number;\n\n    private constructor(buffer: Uint8Array) {\n        this.buffer = buffer;\n        this.byteLength = this.buffer.byteLength;\n    }\n\n    toString(): string {\n        if (hasBuffer) {\n            return this.buffer.toString();\n        } else if (hasTextDecoder) {\n            if (!textDecoder) {\n                textDecoder = new TextDecoder();\n            }\n            return textDecoder.decode(this.buffer);\n        } else {\n            return iconv.decode(SaferBuffer.from(this.buffer), 'utf8');\n        }\n    }\n\n    slice(start?: number, end?: number): BinaryBuffer {\n        // IMPORTANT: use subarray instead of slice because TypedArray#slice\n        // creates shallow copy and NodeBuffer#slice doesn't. The use of subarray\n        // ensures the same, performant, behaviour.\n        return new BinaryBuffer(this.buffer.subarray(start, end));\n    }\n\n    set(array: BinaryBuffer, offset?: number): void;\n    set(array: Uint8Array, offset?: number): void;\n    set(array: BinaryBuffer | Uint8Array, offset?: number): void {\n        if (array instanceof BinaryBuffer) {\n            this.buffer.set(array.buffer, offset);\n        } else {\n            this.buffer.set(array, offset);\n        }\n    }\n\n    readUInt32BE(offset: number): number {\n        return (\n            this.buffer[offset] * 2 ** 24\n            + this.buffer[offset + 1] * 2 ** 16\n            + this.buffer[offset + 2] * 2 ** 8\n            + this.buffer[offset + 3]\n        );\n    }\n\n    writeUInt32BE(value: number, offset: number): void {\n        this.buffer[offset + 3] = value;\n        value = value >>> 8;\n        this.buffer[offset + 2] = value;\n        value = value >>> 8;\n        this.buffer[offset + 1] = value;\n        value = value >>> 8;\n        this.buffer[offset] = value;\n    }\n\n    readUInt32LE(offset: number): number {\n        return (\n            ((this.buffer[offset + 0] << 0) >>> 0) |\n            ((this.buffer[offset + 1] << 8) >>> 0) |\n            ((this.buffer[offset + 2] << 16) >>> 0) |\n            ((this.buffer[offset + 3] << 24) >>> 0)\n        );\n    }\n\n    writeUInt32LE(value: number, offset: number): void {\n        this.buffer[offset + 0] = (value & 0b11111111);\n        value = value >>> 8;\n        this.buffer[offset + 1] = (value & 0b11111111);\n        value = value >>> 8;\n        this.buffer[offset + 2] = (value & 0b11111111);\n        value = value >>> 8;\n        this.buffer[offset + 3] = (value & 0b11111111);\n    }\n\n    readUInt8(offset: number): number {\n        return this.buffer[offset];\n    }\n\n    writeUInt8(value: number, offset: number): void {\n        this.buffer[offset] = value;\n    }\n\n}\n\nexport interface BinaryBufferReadable extends streams.Readable<BinaryBuffer> { }\nexport namespace BinaryBufferReadable {\n    export function toBuffer(readable: BinaryBufferReadable): BinaryBuffer {\n        return streams.consumeReadable<BinaryBuffer>(readable, chunks => BinaryBuffer.concat(chunks));\n    }\n    export function fromBuffer(buffer: BinaryBuffer): BinaryBufferReadable {\n        return streams.toReadable<BinaryBuffer>(buffer);\n    }\n    export function fromReadable(readable: streams.Readable<string>): BinaryBufferReadable {\n        return {\n            read(): BinaryBuffer | null {\n                const value = readable.read();\n\n                if (typeof value === 'string') {\n                    return BinaryBuffer.fromString(value);\n                }\n\n                return null;\n            }\n        };\n    }\n}\n\nexport interface BinaryBufferReadableStream extends streams.ReadableStream<BinaryBuffer> { }\nexport namespace BinaryBufferReadableStream {\n    export function toBuffer(stream: BinaryBufferReadableStream): Promise<BinaryBuffer> {\n        return streams.consumeStream<BinaryBuffer>(stream, chunks => BinaryBuffer.concat(chunks));\n    }\n    export function fromBuffer(buffer: BinaryBuffer): BinaryBufferReadableStream {\n        return streams.toStream<BinaryBuffer>(buffer, chunks => BinaryBuffer.concat(chunks));\n    }\n}\n\nexport interface BinaryBufferReadableBufferedStream extends streams.ReadableBufferedStream<BinaryBuffer> { }\nexport namespace BinaryBufferReadableBufferedStream {\n    export async function toBuffer(bufferedStream: streams.ReadableBufferedStream<BinaryBuffer>): Promise<BinaryBuffer> {\n        if (bufferedStream.ended) {\n            return BinaryBuffer.concat(bufferedStream.buffer);\n        }\n\n        return BinaryBuffer.concat([\n\n            // Include already read chunks...\n            ...bufferedStream.buffer,\n\n            // ...and all additional chunks\n            await BinaryBufferReadableStream.toBuffer(bufferedStream.stream)\n        ]);\n    }\n}\n\nexport interface BinaryBufferWriteableStream extends streams.WriteableStream<BinaryBuffer> { }\nexport namespace BinaryBufferWriteableStream {\n    export function create(options?: streams.WriteableStreamOptions): BinaryBufferWriteableStream {\n        return streams.newWriteableStream<BinaryBuffer>(chunks => BinaryBuffer.concat(chunks), options);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation and others. All rights reserved.\n *  Licensed under the MIT License. See https://github.com/Microsoft/vscode/blob/master/LICENSE.txt for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event, Emitter } from './event';\nimport { isBoolean, isObject } from './types';\n\nexport interface CancellationToken {\n    readonly isCancellationRequested: boolean;\n    /*\n     * An event emitted when cancellation is requested\n     * @event\n     */\n    readonly onCancellationRequested: Event<void>;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst shortcutEvent: Event<void> = Object.freeze(Object.assign(function (callback: any, context?: any): any {\n    const handle = setTimeout(callback.bind(context), 0);\n    return { dispose(): void { clearTimeout(handle); } };\n}, {\n    get maxListeners(): number { return 0; },\n    set maxListeners(maxListeners: number) { }\n}));\n\nexport namespace CancellationToken {\n\n    export const None: CancellationToken = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: Event.None\n    });\n\n    export const Cancelled: CancellationToken = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: shortcutEvent\n    });\n\n    export function is(value: unknown): value is CancellationToken {\n        return isObject<CancellationToken>(value) && (value === CancellationToken.None\n            || value === CancellationToken.Cancelled\n            || (isBoolean(value.isCancellationRequested) && !!value.onCancellationRequested));\n    }\n}\n\nexport class CancellationError extends Error {\n    constructor() {\n        super('Canceled');\n        this.name = this.message;\n    }\n}\n\nclass MutableToken implements CancellationToken {\n\n    private _isCancelled: boolean = false;\n    private _emitter: Emitter<void> | undefined;\n\n    public cancel(): void {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this._emitter = undefined;\n            }\n        }\n    }\n\n    get isCancellationRequested(): boolean {\n        return this._isCancelled;\n    }\n\n    get onCancellationRequested(): Event<void> {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new Emitter<void>();\n        }\n        return this._emitter.event;\n    }\n}\n\nexport class CancellationTokenSource {\n\n    private _token: CancellationToken;\n\n    get token(): CancellationToken {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n\n    cancel(): void {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        } else if (this._token !== CancellationToken.Cancelled) {\n            (<MutableToken>this._token).cancel();\n        }\n    }\n\n    dispose(): void {\n        this.cancel();\n    }\n}\n\nconst cancelledMessage = 'Cancelled';\n\nexport function cancelled(): Error {\n    return new Error(cancelledMessage);\n}\n\nexport function isCancelled(err: Error | undefined): boolean {\n    return !!err && err.message === cancelledMessage;\n}\n\nexport function checkCancelled(token?: CancellationToken): void {\n    if (!!token && token.isCancellationRequested) {\n        throw cancelled();\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject, named } from 'inversify';\nimport { Event, Emitter, WaitUntilEvent } from './event';\nimport { Disposable, DisposableCollection } from './disposable';\nimport { ContributionProvider } from './contribution-provider';\nimport { nls } from './nls';\nimport debounce = require('p-debounce');\nimport { isObject } from './types';\n\n/**\n * A command is a unique identifier of a function\n * which can be executed by a user via a keyboard shortcut,\n * a menu action or directly.\n */\nexport interface Command {\n    /**\n     * A unique identifier of this command.\n     */\n    id: string;\n    /**\n     * A label of this command.\n     */\n    label?: string;\n    originalLabel?: string;\n    /**\n     * An icon class of this command.\n     */\n    iconClass?: string;\n    /**\n     * A category of this command.\n     */\n    category?: string;\n    originalCategory?: string;\n}\n\nexport namespace Command {\n    /* Determine whether object is a Command */\n    export function is(arg: unknown): arg is Command {\n        return isObject(arg) && 'id' in arg;\n    }\n\n    /** Utility function to easily translate commands */\n    export function toLocalizedCommand(command: Command, nlsLabelKey: string = command.id, nlsCategoryKey?: string): Command {\n        return {\n            ...command,\n            label: command.label && nls.localize(nlsLabelKey, command.label),\n            originalLabel: command.label,\n            category: nlsCategoryKey && command.category && nls.localize(nlsCategoryKey, command.category) || command.category,\n            originalCategory: command.category,\n        };\n    }\n\n    export function toDefaultLocalizedCommand(command: Command): Command {\n        return {\n            ...command,\n            label: command.label && nls.localizeByDefault(command.label),\n            originalLabel: command.label,\n            category: command.category && nls.localizeByDefault(command.category),\n            originalCategory: command.category,\n        };\n    }\n\n    /** Comparator function for when sorting commands */\n    export function compareCommands(a: Command, b: Command): number {\n        if (a.label && b.label) {\n            const aCommand = (a.category ? `${a.category}: ${a.label}` : a.label).toLowerCase();\n            const bCommand = (b.category ? `${b.category}: ${b.label}` : b.label).toLowerCase();\n            return (aCommand).localeCompare(bCommand);\n        } else {\n            return 0;\n        }\n    }\n\n    /**\n     * Determine if two commands are equal.\n     *\n     * @param a the first command for comparison.\n     * @param b the second command for comparison.\n     */\n    export function equals(a: Command, b: Command): boolean {\n        return (\n            a.id === b.id &&\n            a.label === b.label &&\n            a.iconClass === b.iconClass &&\n            a.category === b.category\n        );\n    }\n}\n\n/**\n * A command handler is an implementation of a command.\n *\n * A command can have multiple handlers\n * but they should be active in different contexts,\n * otherwise first active will be executed.\n */\nexport interface CommandHandler {\n    /**\n     * Execute this handler.\n     *\n     * Don't call it directly, use `CommandService.executeCommand` instead.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    execute(...args: any[]): any;\n    /**\n     * Test whether this handler is enabled (active).\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isEnabled?(...args: any[]): boolean;\n    onDidChangeEnabled?: Event<void>;\n    /**\n     * Test whether menu items for this handler should be visible.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isVisible?(...args: any[]): boolean;\n    /**\n     * Test whether menu items for this handler should be toggled.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isToggled?(...args: any[]): boolean;\n}\n\nexport const CommandContribution = Symbol('CommandContribution');\n/**\n * The command contribution should be implemented to register custom commands and handler.\n */\nexport interface CommandContribution {\n    /**\n     * Register commands and handlers.\n     */\n    registerCommands(commands: CommandRegistry): void;\n}\n\nexport interface CommandEvent {\n    commandId: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    args: any[]\n}\n\nexport interface WillExecuteCommandEvent extends WaitUntilEvent, CommandEvent {\n}\n\nexport const commandServicePath = '/services/commands';\nexport const CommandService = Symbol('CommandService');\n/**\n * The command service should be used to execute commands.\n */\nexport interface CommandService {\n    /**\n     * Execute the active handler for the given command and arguments.\n     *\n     * Reject if a command cannot be executed.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    executeCommand<T>(command: string, ...args: any[]): Promise<T | undefined>;\n    /**\n     * An event is emitted when a command is about to be executed.\n     *\n     * It can be used to install or activate a command handler.\n     */\n    readonly onWillExecuteCommand: Event<WillExecuteCommandEvent>;\n    /**\n     * An event is emitted when a command was executed.\n     */\n    readonly onDidExecuteCommand: Event<CommandEvent>;\n}\n\n/**\n * The command registry manages commands and handlers.\n */\n@injectable()\nexport class CommandRegistry implements CommandService {\n\n    protected readonly _commands: { [id: string]: Command } = {};\n    protected readonly _handlers: { [id: string]: CommandHandler[] } = {};\n\n    protected readonly toUnregisterCommands = new Map<string, Disposable>();\n\n    // List of recently used commands.\n    protected _recent: string[] = [];\n\n    protected readonly onWillExecuteCommandEmitter = new Emitter<WillExecuteCommandEvent>();\n    readonly onWillExecuteCommand = this.onWillExecuteCommandEmitter.event;\n\n    protected readonly onDidExecuteCommandEmitter = new Emitter<CommandEvent>();\n    readonly onDidExecuteCommand = this.onDidExecuteCommandEmitter.event;\n\n    protected readonly onCommandsChangedEmitter = new Emitter<void>();\n    readonly onCommandsChanged = this.onCommandsChangedEmitter.event;\n\n    constructor(\n        @inject(ContributionProvider) @named(CommandContribution)\n        protected readonly contributionProvider: ContributionProvider<CommandContribution>\n    ) { }\n\n    onStart(): void {\n        const contributions = this.contributionProvider.getContributions();\n        for (const contrib of contributions) {\n            contrib.registerCommands(this);\n        }\n    }\n\n    *getAllCommands(): IterableIterator<Readonly<Command & { handlers: CommandHandler[] }>> {\n        for (const command of Object.values(this._commands)) {\n            yield { ...command, handlers: this._handlers[command.id] ?? [] };\n        }\n    }\n\n    /**\n     * Register the given command and handler if present.\n     *\n     * Throw if a command is already registered for the given command identifier.\n     */\n    registerCommand(command: Command, handler?: CommandHandler): Disposable {\n        if (this._commands[command.id]) {\n            console.warn(`A command ${command.id} is already registered.`);\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection(this.doRegisterCommand(command));\n        if (handler) {\n            toDispose.push(this.registerHandler(command.id, handler));\n        }\n        this.toUnregisterCommands.set(command.id, toDispose);\n        toDispose.push(Disposable.create(() => this.toUnregisterCommands.delete(command.id)));\n        return toDispose;\n    }\n\n    protected doRegisterCommand(command: Command): Disposable {\n        this._commands[command.id] = command;\n        return {\n            dispose: () => {\n                delete this._commands[command.id];\n            }\n        };\n    }\n\n    /**\n     * Unregister command from the registry\n     *\n     * @param command\n     */\n    unregisterCommand(command: Command): void;\n    /**\n     * Unregister command from the registry\n     *\n     * @param id\n     */\n    unregisterCommand(id: string): void;\n    unregisterCommand(commandOrId: Command | string): void {\n        const id = Command.is(commandOrId) ? commandOrId.id : commandOrId;\n        const toUnregister = this.toUnregisterCommands.get(id);\n        if (toUnregister) {\n            toUnregister.dispose();\n        }\n    }\n\n    /**\n     * Register the given handler for the given command identifier.\n     *\n     * If there is already a handler for the given command\n     * then the given handler is registered as more specific, and\n     * has higher priority during enablement, visibility and toggle state evaluations.\n     */\n    registerHandler(commandId: string, handler: CommandHandler): Disposable {\n        let handlers = this._handlers[commandId];\n        if (!handlers) {\n            this._handlers[commandId] = handlers = [];\n        }\n        handlers.unshift(handler);\n        this.fireDidChange();\n        return {\n            dispose: () => {\n                const idx = handlers.indexOf(handler);\n                if (idx >= 0) {\n                    handlers.splice(idx, 1);\n                    this.fireDidChange();\n                }\n            }\n        };\n    }\n\n    protected fireDidChange = debounce(() => this.doFireDidChange(), 0);\n\n    protected doFireDidChange(): void {\n        this.onCommandsChangedEmitter.fire();\n    }\n\n    /**\n     * Test whether there is an active handler for the given command.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isEnabled(command: string, ...args: any[]): boolean {\n        return typeof this.getActiveHandler(command, ...args) !== 'undefined';\n    }\n\n    /**\n     * Test whether there is a visible handler for the given command.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isVisible(command: string, ...args: any[]): boolean {\n        return typeof this.getVisibleHandler(command, ...args) !== 'undefined';\n    }\n\n    /**\n     * Test whether there is a toggled handler for the given command.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isToggled(command: string, ...args: any[]): boolean {\n        return typeof this.getToggledHandler(command, ...args) !== 'undefined';\n    }\n\n    /**\n     * Execute the active handler for the given command and arguments.\n     *\n     * Reject if a command cannot be executed.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async executeCommand<T>(commandId: string, ...args: any[]): Promise<T | undefined> {\n        const handler = this.getActiveHandler(commandId, ...args);\n        if (handler) {\n            await this.fireWillExecuteCommand(commandId, args);\n            const result = await handler.execute(...args);\n            this.onDidExecuteCommandEmitter.fire({ commandId, args });\n            return result;\n        }\n        throw Object.assign(new Error(`The command '${commandId}' cannot be executed. There are no active handlers available for the command.`), { code: 'NO_ACTIVE_HANDLER' });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected async fireWillExecuteCommand(commandId: string, args: any[] = []): Promise<void> {\n        await WaitUntilEvent.fire(this.onWillExecuteCommandEmitter, { commandId, args }, 30000);\n    }\n\n    /**\n     * Get a visible handler for the given command or `undefined`.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getVisibleHandler(commandId: string, ...args: any[]): CommandHandler | undefined {\n        const handlers = this._handlers[commandId];\n        if (handlers) {\n            for (const handler of handlers) {\n                try {\n                    if (!handler.isVisible || handler.isVisible(...args)) {\n                        return handler;\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Get an active handler for the given command or `undefined`.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getActiveHandler(commandId: string, ...args: any[]): CommandHandler | undefined {\n        const handlers = this._handlers[commandId];\n        if (handlers) {\n            for (const handler of handlers) {\n                try {\n                    if (!handler.isEnabled || handler.isEnabled(...args)) {\n                        return handler;\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Get a toggled handler for the given command or `undefined`.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getToggledHandler(commandId: string, ...args: any[]): CommandHandler | undefined {\n        const handlers = this._handlers[commandId];\n        if (handlers) {\n            for (const handler of handlers) {\n                try {\n                    if (handler.isToggled && handler.isToggled(...args)) {\n                        return handler;\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Returns with all handlers for the given command. If the command does not have any handlers,\n     * or the command is not registered, returns an empty array.\n     */\n    getAllHandlers(commandId: string): CommandHandler[] {\n        const handlers = this._handlers[commandId];\n        return handlers ? handlers.slice() : [];\n    }\n\n    /**\n     * Get all registered commands.\n     */\n    get commands(): Command[] {\n        return Object.values(this._commands);\n    }\n\n    /**\n     * Get a command for the given command identifier.\n     */\n    getCommand(id: string): Command | undefined {\n        return this._commands[id];\n    }\n\n    /**\n     * Get all registered commands identifiers.\n     */\n    get commandIds(): string[] {\n        return Object.keys(this._commands);\n    }\n\n    /**\n     * Get the list of recently used commands.\n     */\n    get recent(): Command[] {\n        const commands: Command[] = [];\n        for (const recentId of this._recent) {\n            const command = this.getCommand(recentId);\n            if (command) {\n                commands.push(command);\n            }\n        }\n        return commands;\n    }\n\n    /**\n     * Set the list of recently used commands.\n     * @param commands the list of recently used commands.\n     */\n    set recent(commands: Command[]) {\n        this._recent = Array.from(new Set(commands.map(e => e.id)));\n    }\n\n    /**\n     * Adds a command to recently used list.\n     * Prioritizes commands that were recently executed to be most recent.\n     *\n     * @param recent a recent command, or array of recent commands.\n     */\n    addRecentCommand(recent: Command | Command[]): void {\n        for (const recentCommand of Array.isArray(recent) ? recent : [recent]) {\n            // Determine if the command currently exists in the recently used list.\n            const index = this._recent.findIndex(commandId => commandId === recentCommand.id);\n            // If the command exists, remove it from the array so it can later be placed at the top.\n            if (index >= 0) { this._recent.splice(index, 1); }\n            // Add the recent command to the beginning of the array (most recent).\n            this._recent.unshift(recentCommand.id);\n        }\n    }\n\n    /**\n     * Clear the list of recently used commands.\n     */\n    clearCommandHistory(): void {\n        this.recent = [];\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2021 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, multiInject, optional } from 'inversify';\nimport { ContributionFilterRegistry, ContributionType, FilterContribution } from './contribution-filter';\nimport { Filter } from './filter';\n\n/**\n * Registry of contribution filters.\n *\n * Implement/bind to the `FilterContribution` interface/symbol to register your contribution filters.\n */\n@injectable()\nexport class ContributionFilterRegistryImpl implements ContributionFilterRegistry {\n\n    protected initialized = false;\n    protected genericFilters: Filter<Object>[] = [];\n    protected typeToFilters = new Map<ContributionType, Filter<Object>[]>();\n\n    constructor(\n        @multiInject(FilterContribution) @optional() contributions: FilterContribution[] = []\n    ) {\n        for (const contribution of contributions) {\n            contribution.registerContributionFilters(this);\n        }\n        this.initialized = true;\n    }\n\n    addFilters(types: '*' | ContributionType[], filters: Filter<Object>[]): void {\n        if (this.initialized) {\n            throw new Error('cannot add filters after initialization is done.');\n        } else if (types === '*') {\n            this.genericFilters.push(...filters);\n        } else {\n            for (const type of types) {\n                this.getOrCreate(type).push(...filters);\n            }\n        }\n    }\n\n    applyFilters<T extends Object>(toFilter: T[], type: ContributionType): T[] {\n        const filters = this.getFilters(type);\n        if (filters.length === 0) {\n            return toFilter;\n        }\n        return toFilter.filter(\n            object => filters.every(filter => filter(object))\n        );\n    }\n\n    protected getOrCreate(type: ContributionType): Filter<Object>[] {\n        let value = this.typeToFilters.get(type);\n        if (value === undefined) {\n            this.typeToFilters.set(type, value = []);\n        }\n        return value;\n    }\n\n    protected getFilters(type: ContributionType): Filter<Object>[] {\n        return [\n            ...this.typeToFilters.get(type) || [],\n            ...this.genericFilters\n        ];\n    }\n}\n\n","// *****************************************************************************\n// Copyright (C) 2021 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { interfaces } from 'inversify';\nimport { Filter } from './filter';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type ContributionType = interfaces.ServiceIdentifier<any>;\n\nexport const ContributionFilterRegistry = Symbol('ContributionFilterRegistry');\nexport interface ContributionFilterRegistry {\n\n    /**\n     * Add filters to be applied for every type of contribution.\n     */\n    addFilters(types: '*', filters: Filter<Object>[]): void;\n\n    /**\n     * Given a list of contribution types, register filters to apply.\n     * @param types types for which to register the filters.\n     */\n    addFilters(types: ContributionType[], filters: Filter<Object>[]): void;\n\n    /**\n     * Applies the filters for the given contribution type. Generic filters will be applied on any given type.\n     * @param toFilter the elements to filter\n     * @param type the contribution type for which potentially filters were registered\n     * @returns the filtered elements\n     */\n    applyFilters<T extends Object>(toFilter: T[], type: ContributionType): T[]\n}\n\nexport const FilterContribution = Symbol('FilterContribution');\n/**\n * Register filters to remove contributions.\n */\nexport interface FilterContribution {\n    /**\n     * Use the registry to register your contribution filters.\n     */\n    registerContributionFilters(registry: ContributionFilterRegistry): void;\n}\n","// *****************************************************************************\n// Copyright (C) 2021 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport const Filter = Symbol('Filter');\n\n/**\n * @param toTest Object that should be tested\n * @returns `true` if the object passes the test, `false` otherwise.\n */\nexport type Filter<T extends Object> = (toTest: T) => boolean;\n","// *****************************************************************************\n// Copyright (C) 2021 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './contribution-filter';\nexport * from './contribution-filter-registry';\nexport * from './filter';\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { interfaces } from 'inversify';\nimport { ContributionFilterRegistry } from './contribution-filter';\n\nexport const ContributionProvider = Symbol('ContributionProvider');\n\nexport interface ContributionProvider<T extends object> {\n\n    /**\n     * @param recursive `true` if the contributions should be collected from the parent containers as well. Otherwise, `false`. It is `false` by default.\n     */\n    getContributions(recursive?: boolean): T[]\n}\n\nclass ContainerBasedContributionProvider<T extends object> implements ContributionProvider<T> {\n\n    protected services: T[] | undefined;\n\n    constructor(\n        protected readonly serviceIdentifier: interfaces.ServiceIdentifier<T>,\n        protected readonly container: interfaces.Container\n    ) { }\n\n    getContributions(recursive?: boolean): T[] {\n        if (this.services === undefined) {\n            const currentServices: T[] = [];\n            let filterRegistry: ContributionFilterRegistry | undefined;\n            let currentContainer: interfaces.Container | null = this.container;\n            // eslint-disable-next-line no-null/no-null\n            while (currentContainer !== null) {\n                if (currentContainer.isBound(this.serviceIdentifier)) {\n                    try {\n                        currentServices.push(...currentContainer.getAll(this.serviceIdentifier));\n                    } catch (error) {\n                        console.error(error);\n                    }\n                }\n                if (filterRegistry === undefined && currentContainer.isBound(ContributionFilterRegistry)) {\n                    filterRegistry = currentContainer.get(ContributionFilterRegistry);\n                }\n                // eslint-disable-next-line no-null/no-null\n                currentContainer = recursive === true ? currentContainer.parent : null;\n            }\n\n            this.services = filterRegistry ? filterRegistry.applyFilters(currentServices, this.serviceIdentifier) : currentServices;\n\n        }\n        return this.services;\n    }\n}\n\nexport type Bindable = interfaces.Bind | interfaces.Container;\nexport namespace Bindable {\n    export function isContainer(arg: Bindable): arg is interfaces.Container {\n        return typeof arg !== 'function'\n            // https://github.com/eclipse-theia/theia/issues/3204#issue-371029654\n            // In InversifyJS `4.14.0` containers no longer have a property `guid`.\n            && ('guid' in arg || 'parent' in arg);\n    }\n}\n\nexport function bindContributionProvider(bindable: Bindable, id: symbol): void {\n    const bindingToSyntax = (Bindable.isContainer(bindable) ? bindable.bind(ContributionProvider) : bindable(ContributionProvider));\n    bindingToSyntax\n        .toDynamicValue(ctx => new ContainerBasedContributionProvider(id, ctx.container))\n        .inSingletonScope().whenTargetNamed(id);\n}\n\n/**\n * Helper function to bind a service to a list of contributions easily.\n * @param bindable a Container or the bind function directly.\n * @param service an already bound service to refer the contributions to.\n * @param contributions array of contribution identifiers to bind the service to.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function bindContribution(bindable: Bindable, service: interfaces.ServiceIdentifier<any>, contributions: interfaces.ServiceIdentifier<any>[]): void {\n    const bind: interfaces.Bind = Bindable.isContainer(bindable) ? bindable.bind.bind(bindable) : bindable;\n    for (const contribution of contributions) {\n        bind(contribution).toService(service);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Event, Emitter } from './event';\nimport { isFunction, isObject } from './types';\n\nexport interface Disposable {\n    /**\n     * Dispose this object.\n     */\n    dispose(): void;\n}\n\nexport namespace Disposable {\n    export function is(arg: unknown): arg is Disposable {\n        return isObject<Disposable>(arg) && isFunction(arg.dispose);\n    }\n    export function create(func: () => void): Disposable {\n        return { dispose: func };\n    }\n    /** Always provides a reference to a new disposable. */\n    export declare const NULL: Disposable;\n}\n\n/**\n * Ensures that every reference to {@link Disposable.NULL} returns a new object,\n * as sharing a disposable between multiple {@link DisposableCollection} can have unexpected side effects\n */\nObject.defineProperty(Disposable, 'NULL', {\n    configurable: false,\n    enumerable: true,\n    get(): Disposable {\n        return { dispose: () => { } };\n    }\n});\n\nexport class DisposableCollection implements Disposable {\n\n    protected readonly disposables: Disposable[] = [];\n    protected readonly onDisposeEmitter = new Emitter<void>();\n\n    constructor(...toDispose: Disposable[]) {\n        toDispose.forEach(d => this.push(d));\n    }\n\n    /**\n     * This event is fired only once\n     * on first dispose of not empty collection.\n     */\n    get onDispose(): Event<void> {\n        return this.onDisposeEmitter.event;\n    }\n\n    protected checkDisposed(): void {\n        if (this.disposed && !this.disposingElements) {\n            this.onDisposeEmitter.fire(undefined);\n            this.onDisposeEmitter.dispose();\n        }\n    }\n\n    get disposed(): boolean {\n        return this.disposables.length === 0;\n    }\n\n    private disposingElements = false;\n    dispose(): void {\n        if (this.disposed || this.disposingElements) {\n            return;\n        }\n        this.disposingElements = true;\n        while (!this.disposed) {\n            try {\n                this.disposables.pop()!.dispose();\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        this.disposingElements = false;\n        this.checkDisposed();\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        const originalDispose = disposable.dispose.bind(disposable);\n        const toRemove = Disposable.create(() => {\n            const index = disposables.indexOf(disposable);\n            if (index !== -1) {\n                disposables.splice(index, 1);\n            }\n            this.checkDisposed();\n        });\n        disposable.dispose = () => {\n            toRemove.dispose();\n            disposable.dispose = originalDispose;\n            originalDispose();\n        };\n        return toRemove;\n    }\n\n    pushAll(disposables: Disposable[]): Disposable[] {\n        return disposables.map(disposable =>\n            this.push(disposable)\n        );\n    }\n\n}\n\nexport type DisposableGroup = { push(disposable: Disposable): void } | { add(disposable: Disposable): void };\nexport namespace DisposableGroup {\n    export function canPush(candidate?: DisposableGroup): candidate is { push(disposable: Disposable): void } {\n        return Boolean(candidate && (candidate as { push(): void }).push);\n    }\n    export function canAdd(candidate?: DisposableGroup): candidate is { add(disposable: Disposable): void } {\n        return Boolean(candidate && (candidate as { add(): void }).add);\n    }\n}\n\nexport function disposableTimeout(...args: Parameters<typeof setTimeout>): Disposable {\n    const handle = setTimeout(...args);\n    return { dispose: () => clearTimeout(handle) };\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Disposable, DisposableGroup, DisposableCollection } from './disposable';\nimport { MaybePromise } from './types';\n\n/**\n * Represents a typed event.\n */\nexport interface Event<T> {\n\n    /**\n     *\n     * @param listener The listener function will be call when the event happens.\n     * @param thisArgs The 'this' which will be used when calling the event listener.\n     * @param disposables An array to which a {{IDisposable}} will be added.\n     * @return a disposable to remove the listener again.\n     */\n    (listener: (e: T) => any, thisArgs?: any, disposables?: DisposableGroup): Disposable;\n}\n\nexport namespace Event {\n    const _disposable = { dispose(): void { } };\n    export function getMaxListeners(event: Event<unknown>): number {\n        const { maxListeners } = event as any;\n        return typeof maxListeners === 'number' ? maxListeners : 0;\n    }\n    export function setMaxListeners<N extends number>(event: Event<unknown>, maxListeners: N): N {\n        if (typeof (event as any).maxListeners === 'number') {\n            return (event as any).maxListeners = maxListeners;\n        }\n        return maxListeners;\n    }\n    export function addMaxListeners(event: Event<unknown>, add: number): number {\n        if (typeof (event as any).maxListeners === 'number') {\n            return (event as any).maxListeners += add;\n        }\n        return add;\n    }\n    export const None: Event<any> = Object.assign(function (): { dispose(): void } { return _disposable; }, {\n        get maxListeners(): number { return 0; },\n        set maxListeners(maxListeners: number) { }\n    });\n\n    /**\n     * Given an event and a `map` function, returns another event which maps each element\n     * through the mapping function.\n     */\n    export function map<I, O>(event: Event<I>, mapFunc: (i: I) => O): Event<O> {\n        return Object.assign((listener: (e: O) => any, thisArgs?: any, disposables?: Disposable[]) => event(i => listener.call(thisArgs, mapFunc(i)), undefined, disposables), {\n            get maxListeners(): number { return 0; },\n            set maxListeners(maxListeners: number) { }\n        });\n    }\n\n    /**\n     * Given a collection of events, returns a single event which emits whenever any of the provided events emit.\n     */\n    export function any<T>(...events: Event<T>[]): Event<T>;\n    export function any(...events: Event<any>[]): Event<void>;\n    export function any<T>(...events: Event<T>[]): Event<T> {\n        return (listener, thisArgs = undefined, disposables?: Disposable[]) =>\n            new DisposableCollection(...events.map(event => event(e => listener.call(thisArgs, e), undefined, disposables)));\n    }\n}\n\ntype Callback = (...args: any[]) => any;\nclass CallbackList implements Iterable<Callback> {\n\n    private _callbacks: Function[] | undefined;\n    private _contexts: any[] | undefined;\n\n    get length(): number {\n        return this._callbacks && this._callbacks.length || 0;\n    }\n\n    public add(callback: Function, context: any = undefined, bucket?: Disposable[]): void {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts!.push(context);\n\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n\n    public remove(callback: Function, context: any = undefined): void {\n        if (!this._callbacks) {\n            return;\n        }\n\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0; i < this._callbacks.length; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts![i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts!.splice(i, 1);\n                    return;\n                } else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n\n    // tslint:disable-next-line:typedef\n    public [Symbol.iterator]() {\n        if (!this._callbacks) {\n            return [][Symbol.iterator]();\n        }\n        const callbacks = this._callbacks.slice(0);\n        const contexts = this._contexts!.slice(0);\n\n        return callbacks.map((callback, i) =>\n            (...args: any[]) => callback.apply(contexts[i], args)\n        )[Symbol.iterator]();\n    }\n\n    public invoke(...args: any[]): any[] {\n        const ret: any[] = [];\n        for (const callback of this) {\n            try {\n                ret.push(callback(...args));\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        return ret;\n    }\n\n    public isEmpty(): boolean {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n\n    public dispose(): void {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\n\nexport interface EmitterOptions {\n    onFirstListenerAdd?: Function;\n    onLastListenerRemove?: Function;\n}\n\nexport class Emitter<T = any> {\n\n    private static LEAK_WARNING_THRESHHOLD = 175;\n\n    private static _noop = function (): void { };\n\n    private _event: Event<T>;\n    protected _callbacks: CallbackList | undefined;\n    private _disposed = false;\n\n    private _leakingStacks: Map<string, number> | undefined;\n    private _leakWarnCountdown = 0;\n\n    constructor(\n        private _options?: EmitterOptions\n    ) { }\n\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event(): Event<T> {\n        if (!this._event) {\n            this._event = Object.assign((listener: (e: T) => any, thisArgs?: any, disposables?: DisposableGroup) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const removeMaxListenersCheck = this.checkMaxListeners(Event.getMaxListeners(this._event));\n\n                const result: Disposable = {\n                    dispose: () => {\n                        if (removeMaxListenersCheck) {\n                            removeMaxListenersCheck();\n                        }\n                        result.dispose = Emitter._noop;\n                        if (!this._disposed) {\n                            this._callbacks!.remove(listener, thisArgs);\n                            result.dispose = Emitter._noop;\n                            if (this._options && this._options.onLastListenerRemove && this._callbacks!.isEmpty()) {\n                                this._options.onLastListenerRemove(this);\n                            }\n                        }\n                    }\n                };\n                if (DisposableGroup.canPush(disposables)) {\n                    disposables.push(result);\n                } else if (DisposableGroup.canAdd(disposables)) {\n                    disposables.add(result);\n                }\n\n                return result;\n            }, {\n                maxListeners: Emitter.LEAK_WARNING_THRESHHOLD\n            });\n        }\n        return this._event;\n    }\n\n    protected checkMaxListeners(maxListeners: number): (() => void) | undefined {\n        if (maxListeners === 0 || !this._callbacks) {\n            return undefined;\n        }\n        const listenerCount = this._callbacks.length;\n        if (listenerCount <= maxListeners) {\n            return undefined;\n        }\n\n        const popStack = this.pushLeakingStack();\n\n        this._leakWarnCountdown -= 1;\n        if (this._leakWarnCountdown <= 0) {\n            // only warn on first exceed and then every time the limit\n            // is exceeded by 50% again\n            this._leakWarnCountdown = maxListeners * 0.5;\n\n            let topStack: string;\n            let topCount = 0;\n            this._leakingStacks!.forEach((stackCount, stack) => {\n                if (!topStack || topCount < stackCount) {\n                    topStack = stack;\n                    topCount = stackCount;\n                }\n            });\n\n            // eslint-disable-next-line max-len\n            console.warn(`Possible Emitter memory leak detected. ${listenerCount} listeners added. Use event.maxListeners to increase the limit (${maxListeners}). MOST frequent listener (${topCount}):`);\n            console.warn(topStack!);\n        }\n\n        return popStack;\n    }\n\n    protected pushLeakingStack(): () => void {\n        if (!this._leakingStacks) {\n            this._leakingStacks = new Map();\n        }\n        const stack = new Error().stack!.split('\\n').slice(3).join('\\n');\n        const count = (this._leakingStacks.get(stack) || 0);\n        this._leakingStacks.set(stack, count + 1);\n        return () => this.popLeakingStack(stack);\n    }\n\n    protected popLeakingStack(stack: string): void {\n        if (!this._leakingStacks) {\n            return;\n        }\n        const count = (this._leakingStacks.get(stack) || 0);\n        this._leakingStacks.set(stack, count - 1);\n    }\n\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event: T): any {\n        if (this._callbacks) {\n            return this._callbacks.invoke(event);\n        }\n    }\n\n    /**\n     * Process each listener one by one.\n     * Return `false` to stop iterating over the listeners, `true` to continue.\n     */\n    async sequence(processor: (listener: (e: T) => any) => MaybePromise<boolean>): Promise<void> {\n        if (this._callbacks) {\n            for (const listener of this._callbacks) {\n                if (!await processor(listener)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    dispose(): void {\n        if (this._leakingStacks) {\n            this._leakingStacks.clear();\n            this._leakingStacks = undefined;\n        }\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n        this._disposed = true;\n    }\n}\n\nexport type WaitUntilData<T> = Omit<T, 'waitUntil' | 'token'>;\n\nexport interface WaitUntilEvent {\n    /**\n     * A cancellation token.\n     */\n    token: CancellationToken;\n    /**\n     * Allows to pause the event loop until the provided thenable resolved.\n     *\n     * *Note:* It can only be called during event dispatch and not in an asynchronous manner\n     *\n     * @param thenable A thenable that delays execution.\n     */\n    waitUntil(thenable: Promise<any>): void;\n}\nexport namespace WaitUntilEvent {\n    /**\n     * Fire all listeners in the same tick.\n     *\n     * Use `AsyncEmitter.fire` to fire listeners async one after another.\n     */\n    export async function fire<T extends WaitUntilEvent>(\n        emitter: Emitter<T>,\n        event: WaitUntilData<T>,\n        timeout?: number,\n        token = CancellationToken.None\n    ): Promise<void> {\n        const waitables: Promise<void>[] = [];\n        const asyncEvent = Object.assign(event, {\n            token,\n            waitUntil: (thenable: Promise<any>) => {\n                if (Object.isFrozen(waitables)) {\n                    throw new Error('waitUntil cannot be called asynchronously.');\n                }\n                waitables.push(thenable);\n            }\n        }) as T;\n        try {\n            emitter.fire(asyncEvent);\n            // Asynchronous calls to `waitUntil` should fail.\n            Object.freeze(waitables);\n        } finally {\n            delete (asyncEvent as any)['waitUntil'];\n        }\n        if (!waitables.length) {\n            return;\n        }\n        if (timeout !== undefined) {\n            await Promise.race([Promise.all(waitables), new Promise(resolve => setTimeout(resolve, timeout))]);\n        } else {\n            await Promise.all(waitables);\n        }\n    }\n}\n\nimport { CancellationToken } from './cancellation';\n\nexport class AsyncEmitter<T extends WaitUntilEvent> extends Emitter<T> {\n\n    protected deliveryQueue: Promise<void> | undefined;\n\n    /**\n     * Fire listeners async one after another.\n     */\n    override fire(event: WaitUntilData<T>, token: CancellationToken = CancellationToken.None,\n        promiseJoin?: (p: Promise<any>, listener: Function) => Promise<any>): Promise<void> {\n        const callbacks = this._callbacks;\n        if (!callbacks) {\n            return Promise.resolve();\n        }\n        const listeners = [...callbacks];\n        if (this.deliveryQueue) {\n            return this.deliveryQueue = this.deliveryQueue.then(() => this.deliver(listeners, event, token, promiseJoin));\n        }\n        return this.deliveryQueue = this.deliver(listeners, event, token, promiseJoin);\n    }\n\n    protected async deliver(listeners: Callback[], event: WaitUntilData<T>, token: CancellationToken,\n        promiseJoin?: (p: Promise<any>, listener: Function) => Promise<any>): Promise<void> {\n        for (const listener of listeners) {\n            if (token.isCancellationRequested) {\n                return;\n            }\n            const waitables: Promise<void>[] = [];\n            const asyncEvent = Object.assign(event, {\n                token,\n                waitUntil: (thenable: Promise<any>) => {\n                    if (Object.isFrozen(waitables)) {\n                        throw new Error('waitUntil cannot be called asynchronously.');\n                    }\n                    if (promiseJoin) {\n                        thenable = promiseJoin(thenable, listener);\n                    }\n                    waitables.push(thenable);\n                }\n            }) as T;\n            try {\n                listener(event);\n                // Asynchronous calls to `waitUntil` should fail.\n                Object.freeze(waitables);\n            } catch (e) {\n                console.error(e);\n            } finally {\n                delete (asyncEvent as any)['waitUntil'];\n            }\n            if (!waitables.length) {\n                return;\n            }\n            try {\n                await Promise.all(waitables);\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2021 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport const localizationPath = '/services/i18n';\n\nexport const AsyncLocalizationProvider = Symbol('AsyncLocalizationProvider');\nexport interface AsyncLocalizationProvider {\n    getCurrentLanguage(): Promise<string>\n    setCurrentLanguage(languageId: string): Promise<void>\n    getAvailableLanguages(): Promise<LanguageInfo[]>\n    loadLocalization(languageId: string): Promise<Localization>\n}\n\nexport interface Localization extends LanguageInfo {\n    translations: { [key: string]: string };\n}\n\nexport interface LanguageInfo {\n    languageId: string;\n    languageName?: string;\n    languagePack?: boolean;\n    localizedLanguageName?: string;\n}\n\nexport type FormatType = string | number | boolean | undefined;\n\nexport namespace Localization {\n\n    const formatRegexp = /{([^}]+)}/g;\n\n    export function format(message: string, args: FormatType[]): string;\n    export function format(message: string, args: Record<string | number, FormatType>): string;\n    export function format(message: string, args: Record<string | number, FormatType> | FormatType[]): string {\n        return message.replace(formatRegexp, (match, group) => (args[group] ?? match) as string);\n    }\n\n    export function localize(localization: Localization | undefined, key: string, defaultValue: string, ...args: FormatType[]): string {\n        let value = defaultValue;\n        if (localization) {\n            const translation = localization.translations[key];\n            if (translation) {\n                value = normalize(translation);\n            }\n        }\n        return format(value, args);\n    }\n\n    /**\n     * This function normalizes values from VSCode's localizations, which often contain additional mnemonics (`&&`).\n     * The normalization removes the mnemonics from the input string.\n     *\n     * @param value Localization value coming from VSCode\n     * @returns A normalized localized value\n     */\n    export function normalize(value: string): string {\n        return value.replace(/&&/g, '');\n    }\n\n    export function transformKey(key: string): string {\n        let nlsKey = key;\n        const keySlashIndex = key.lastIndexOf('/');\n        if (keySlashIndex >= 0) {\n            nlsKey = key.substring(keySlashIndex + 1);\n        }\n        return nlsKey;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport { environment } from '@theia/application-package/lib/environment';\nexport * from './application-error';\nexport * from './cancellation';\nexport * from './command';\nexport * from './contribution-filter';\nexport * from './contribution-provider';\nexport * from './disposable';\nexport * from './event';\nexport * from './logger';\nexport * from './lsp-types';\nexport * from './menu';\nexport * from './message-rpc';\nexport * from './message-service';\nexport * from './message-service-protocol';\nexport * from './messaging';\nexport * from './nls';\nexport * from './numbers';\nexport * from './objects';\nexport * from './os';\nexport * from './path';\nexport * from './performance';\nexport * from './progress-service';\nexport * from './progress-service-protocol';\nexport * from './quick-pick-service';\nexport * from './reference';\nexport * from './resource';\nexport * from './selection';\nexport * from './selection-service';\nexport * from './strings';\nexport * from './telemetry';\nexport * from './types';\nexport { default as URI } from './uri';\nexport * from './view-column';\n","// *****************************************************************************\n// Copyright (C) 2017 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from 'inversify';\nimport { RpcServer } from './messaging/proxy-factory';\n\nexport const ILoggerServer = Symbol('ILoggerServer');\n\nexport const loggerPath = '/services/logger';\n\nexport interface ILoggerServer extends RpcServer<ILoggerClient> {\n    setLogLevel(name: string, logLevel: number): Promise<void>;\n    getLogLevel(name: string): Promise<number>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    log(name: string, logLevel: number, message: any, params: any[]): Promise<void>;\n    child(name: string): Promise<void>;\n}\n\nexport const ILoggerClient = Symbol('ILoggerClient');\n\nexport interface ILogLevelChangedEvent {\n    loggerName: string;\n    newLogLevel: number;\n}\n\nexport interface ILoggerClient {\n    onLogLevelChanged(event: ILogLevelChangedEvent): void;\n}\n\n@injectable()\nexport class DispatchingLoggerClient implements ILoggerClient {\n\n    readonly clients = new Set<ILoggerClient>();\n\n    onLogLevelChanged(event: ILogLevelChangedEvent): void {\n        this.clients.forEach(client => client.onLogLevelChanged(event));\n    }\n\n}\n\nexport const rootLoggerName = 'root';\n\nexport enum LogLevel {\n    FATAL = 60,\n    ERROR = 50,\n    WARN = 40,\n    INFO = 30,\n    DEBUG = 20,\n    TRACE = 10\n}\nexport namespace LogLevel {\n    export const strings = new Map<LogLevel, string>([\n        [LogLevel.FATAL, 'fatal'],\n        [LogLevel.ERROR, 'error'],\n        [LogLevel.WARN, 'warn'],\n        [LogLevel.INFO, 'info'],\n        [LogLevel.DEBUG, 'debug'],\n        [LogLevel.TRACE, 'trace']\n    ]);\n\n    export function toString(level: LogLevel): string | undefined {\n        return strings.get(level);\n    }\n\n    export function fromString(levelStr: string): LogLevel | undefined {\n        for (const pair of strings) {\n            if (pair[1] === levelStr) {\n                return pair[0];\n            }\n        }\n\n        return undefined;\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport namespace ConsoleLogger {\n    type Console = (message?: any, ...optionalParams: any[]) => void;\n    const originalConsoleLog = console.log;\n    const consoles = new Map<LogLevel, Console>([\n        [LogLevel.FATAL, console.error],\n        [LogLevel.ERROR, console.error],\n        [LogLevel.WARN, console.warn],\n        [LogLevel.INFO, console.info],\n        [LogLevel.DEBUG, console.debug],\n        [LogLevel.TRACE, console.trace]\n    ]);\n    export function reset(): void {\n        console.error = consoles.get(LogLevel.ERROR)!;\n        console.warn = consoles.get(LogLevel.WARN)!;\n        console.info = consoles.get(LogLevel.INFO)!;\n        console.debug = consoles.get(LogLevel.DEBUG)!;\n        console.trace = consoles.get(LogLevel.TRACE)!;\n        console.log = originalConsoleLog;\n    }\n    export function log(name: string, logLevel: number, message: string, params: any[]): void {\n        const console = consoles.get(logLevel) || originalConsoleLog;\n        const severity = (LogLevel.strings.get(logLevel) || 'unknown').toUpperCase();\n        const now = new Date();\n        console(`${now.toISOString()} ${name} ${severity} ${message}`, ...params);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from 'inversify';\nimport { Emitter, Event } from './event';\nimport { ILoggerClient, ILogLevelChangedEvent } from './logger-protocol';\n\n@injectable()\nexport class LoggerWatcher {\n\n    getLoggerClient(): ILoggerClient {\n        const emitter = this.onLogLevelChangedEmitter;\n        return {\n            onLogLevelChanged(event: ILogLevelChangedEvent): void {\n                emitter.fire(event);\n            }\n        };\n    }\n\n    private onLogLevelChangedEmitter = new Emitter<ILogLevelChangedEvent>();\n\n    get onLogLevelChanged(): Event<ILogLevelChangedEvent> {\n        return this.onLogLevelChangedEmitter.event;\n    }\n\n    // FIXME: get rid of it, backend services should as well set a client on the server\n    fireLogLevelChanged(event: ILogLevelChangedEvent): void {\n        this.onLogLevelChangedEmitter.fire(event);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable, postConstruct } from 'inversify';\nimport { LoggerWatcher } from './logger-watcher';\nimport { ILoggerServer, LogLevel, ConsoleLogger, rootLoggerName } from './logger-protocol';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport {\n    LogLevel, rootLoggerName\n};\n\n/* This is to be initialized from container composition root. It can be used outside of the inversify context.  */\nexport let logger: ILogger;\n\n/**\n * Counterpart of the `#setRootLogger(ILogger)`. Restores the `console.xxx` bindings to the original one.\n * Invoking has no side-effect if `setRootLogger` was not called before. Multiple function invocation has\n * no side-effect either.\n */\nexport function unsetRootLogger(): void {\n    if (logger !== undefined) {\n        ConsoleLogger.reset();\n        (<any>logger) = undefined;\n    }\n}\n\nexport function setRootLogger(aLogger: ILogger): void {\n    logger = aLogger;\n    const log = (logLevel: number, message?: any, ...optionalParams: any[]) =>\n        logger.log(logLevel, message, ...optionalParams);\n\n    console.error = log.bind(undefined, LogLevel.ERROR);\n    console.warn = log.bind(undefined, LogLevel.WARN);\n    console.info = log.bind(undefined, LogLevel.INFO);\n    console.debug = log.bind(undefined, LogLevel.DEBUG);\n    console.trace = log.bind(undefined, LogLevel.TRACE);\n    console.log = log.bind(undefined, LogLevel.INFO);\n}\n\nexport type Log = (message: any, ...params: any[]) => void;\nexport type Loggable = (log: Log) => void;\n\nexport const LoggerFactory = Symbol('LoggerFactory');\nexport type LoggerFactory = (name: string) => ILogger;\n\nexport const LoggerName = Symbol('LoggerName');\n\nexport const ILogger = Symbol('ILogger');\n\nexport interface ILogger {\n    /**\n     * Set the log level.\n     *\n     * @param loglevel - The loglevel to set. see Logger.LogLevel for\n     * possible options.\n     */\n    setLogLevel(logLevel: number): Promise<void>\n    /**\n     * Get the log level.\n     *\n     * @returns a Promise to the log level.\n     */\n    getLogLevel(): Promise<number>;\n\n    /**\n     * Test whether the given log level is enabled.\n     */\n    isEnabled(logLevel: number): Promise<boolean>;\n    /**\n     * Resolve if the given log is enabled.\n     */\n    ifEnabled(logLevel: number): Promise<void>;\n    /**\n     * Log a loggable with the given level if it is enabled.\n     */\n    log(logLevel: number, loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the given level if it is enabled.\n     *\n     * @param logLevel - The loglevel to use.\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    log(logLevel: number, message: any, ...params: any[]): void;\n\n    /**\n     * Test whether the trace level is enabled.\n     */\n    isTrace(): Promise<boolean>;\n    /**\n     * Resolve if the trace level is enabled.\n     */\n    ifTrace(): Promise<void>;\n    /**\n     * Log a loggable with the trace level if it is enabled.\n     */\n    trace(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the trace level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    trace(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the debug level is enabled.\n     */\n    isDebug(): Promise<boolean>;\n    /**\n     * Resolve if the debug level is enabled.\n     */\n    ifDebug(): Promise<void>;\n    /**\n     * Log a loggable with the debug level if it is enabled.\n     */\n    debug(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the debug level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    debug(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the info level is enabled.\n     */\n    isInfo(): Promise<boolean>;\n    /**\n     * Resolve if the info level is enabled.\n     */\n    ifInfo(): Promise<void>;\n    /**\n     * Log a loggable with the info level if it is enabled.\n     */\n    info(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the info level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    info(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the warn level is enabled.\n     */\n    isWarn(): Promise<boolean>;\n    /**\n     * Resolve if the warn level is enabled.\n     */\n    ifWarn(): Promise<void>;\n    /**\n     * Log a loggable with the warn level if it is enabled.\n     */\n    warn(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the warn level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    warn(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the error level is enabled.\n     */\n    isError(): Promise<boolean>;\n    /**\n     * Resolve if the error level is enabled.\n     */\n    ifError(): Promise<void>;\n    /**\n     * Log a loggable with the error level if it is enabled.\n     */\n    error(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the error level.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    error(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the fatal level is enabled.\n     */\n    isFatal(): Promise<boolean>;\n    /**\n     * Resolve if the fatal level is enabled.\n     */\n    ifFatal(): Promise<void>;\n    /**\n     * Log a loggable with the fatal level if it is enabled.\n     */\n    fatal(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the fatal level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    fatal(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Create a child logger from this logger.\n     *\n     * @param name - The name of the child logger.\n     */\n    child(name: string): ILogger;\n}\n\n@injectable()\nexport class Logger implements ILogger {\n\n    /* Log level for the logger.  */\n    protected _logLevel: Promise<number>;\n\n    /* A promise resolved when the logger has been created by the backend.  */\n    protected created: Promise<void>;\n\n    @inject(ILoggerServer) protected readonly server: ILoggerServer;\n    @inject(LoggerWatcher) protected readonly loggerWatcher: LoggerWatcher;\n    @inject(LoggerFactory) protected readonly factory: LoggerFactory;\n    @inject(LoggerName) protected name: string;\n\n    @postConstruct()\n    protected init(): void {\n        if (this.name !== rootLoggerName) {\n            /* Creating a child logger.  */\n            this.created = this.server.child(this.name);\n        } else {\n            /* Creating the root logger (it already exists at startup).  */\n            this.created = Promise.resolve();\n        }\n\n        /* Fetch the log level so it's cached in the frontend.  */\n        this._logLevel = this.created.then(_ => this.server.getLogLevel(this.name));\n\n        /* Update the log level if it changes in the backend. */\n        this.loggerWatcher.onLogLevelChanged(event => {\n            this.created.then(() => {\n                if (event.loggerName === this.name) {\n                    this._logLevel = Promise.resolve(event.newLogLevel);\n                }\n            });\n        });\n    }\n\n    setLogLevel(logLevel: number): Promise<void> {\n        return new Promise<void>(resolve => {\n            this.created.then(() => {\n                this._logLevel.then(oldLevel => {\n                    this.server.setLogLevel(this.name, logLevel).then(() => {\n                        this._logLevel = Promise.resolve(logLevel);\n                        resolve();\n                    });\n                });\n            });\n        });\n    }\n    getLogLevel(): Promise<number> {\n        return this._logLevel;\n    }\n\n    isEnabled(logLevel: number): Promise<boolean> {\n        return this._logLevel.then(level =>\n            logLevel >= level\n        );\n    }\n    ifEnabled(logLevel: number): Promise<void> {\n        return new Promise<void>(resolve =>\n            this.isEnabled(logLevel).then(enabled => {\n                if (enabled) {\n                    resolve();\n                }\n            })\n        );\n    }\n    log(logLevel: number, arg2: any | Loggable, ...params: any[]): Promise<void> {\n        return this.getLog(logLevel).then(log => {\n            if (typeof arg2 === 'function') {\n                const loggable = arg2;\n                loggable(log);\n            } else if (arg2) {\n                log(arg2, ...params);\n            }\n        });\n    }\n    protected getLog(logLevel: number): Promise<Log> {\n        return this.ifEnabled(logLevel).then(() =>\n            this.created.then(() =>\n                (message: any, ...params: any[]) =>\n                    this.server.log(this.name, logLevel, this.format(message), params.map(p => this.format(p)))\n            )\n        );\n    }\n    protected format(value: any): any {\n        if (value instanceof Error) {\n            return value.stack || value.toString();\n        }\n        return value;\n    }\n\n    isTrace(): Promise<boolean> {\n        return this.isEnabled(LogLevel.TRACE);\n    }\n    ifTrace(): Promise<void> {\n        return this.ifEnabled(LogLevel.TRACE);\n    }\n    trace(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.TRACE, arg, ...params);\n    }\n\n    isDebug(): Promise<boolean> {\n        return this.isEnabled(LogLevel.DEBUG);\n    }\n    ifDebug(): Promise<void> {\n        return this.ifEnabled(LogLevel.DEBUG);\n    }\n    debug(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.DEBUG, arg, ...params);\n    }\n\n    isInfo(): Promise<boolean> {\n        return this.isEnabled(LogLevel.INFO);\n    }\n    ifInfo(): Promise<void> {\n        return this.ifEnabled(LogLevel.INFO);\n    }\n    info(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.INFO, arg, ...params);\n    }\n\n    isWarn(): Promise<boolean> {\n        return this.isEnabled(LogLevel.WARN);\n    }\n    ifWarn(): Promise<void> {\n        return this.ifEnabled(LogLevel.WARN);\n    }\n    warn(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.WARN, arg, ...params);\n    }\n\n    isError(): Promise<boolean> {\n        return this.isEnabled(LogLevel.ERROR);\n    }\n    ifError(): Promise<void> {\n        return this.ifEnabled(LogLevel.ERROR);\n    }\n    error(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.ERROR, arg, ...params);\n    }\n\n    isFatal(): Promise<boolean> {\n        return this.isEnabled(LogLevel.FATAL);\n    }\n    ifFatal(): Promise<void> {\n        return this.ifEnabled(LogLevel.FATAL);\n    }\n    fatal(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.FATAL, arg, ...params);\n    }\n\n    child(name: string): ILogger {\n        return this.factory(name);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Range } from 'vscode-languageserver-protocol';\nimport { isNumber, isObject, isString, isUndefined } from './types';\n\nexport interface TextDocumentContentChangeDelta {\n    readonly range: Range;\n    readonly rangeLength?: number;\n    readonly text: string;\n}\nexport namespace TextDocumentContentChangeDelta {\n\n    export function is(arg: unknown): arg is TextDocumentContentChangeDelta {\n        return isObject<TextDocumentContentChangeDelta>(arg)\n            && isString(arg.text)\n            && (isNumber(arg.rangeLength) || isUndefined(arg.rangeLength))\n            && Range.is(arg.range);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { CommandRegistry } from '../command';\nimport { AlternativeHandlerMenuNode, CommandMenuNode, MenuAction, MenuNode } from './menu-types';\n\n/**\n * Node representing an action in the menu tree structure.\n * It's based on {@link MenuAction} for which it tries to determine the\n * best label, icon and sortString with the given data.\n */\nexport class ActionMenuNode implements MenuNode, CommandMenuNode, Partial<AlternativeHandlerMenuNode> {\n\n    readonly altNode: ActionMenuNode | undefined;\n\n    constructor(\n        protected readonly action: MenuAction,\n        protected readonly commands: CommandRegistry,\n    ) {\n        if (action.alt) {\n            this.altNode = new ActionMenuNode({ commandId: action.alt }, commands);\n        }\n    }\n\n    get command(): string { return this.action.commandId; };\n\n    get when(): string | undefined { return this.action.when; }\n\n    get id(): string { return this.action.commandId; }\n\n    get label(): string {\n        if (this.action.label) {\n            return this.action.label;\n        }\n        const cmd = this.commands.getCommand(this.action.commandId);\n        if (!cmd) {\n            console.debug(`No label for action menu node: No command \"${this.action.commandId}\" exists.`);\n            return '';\n        }\n        return cmd.label || cmd.id;\n    }\n\n    get icon(): string | undefined {\n        if (this.action.icon) {\n            return this.action.icon;\n        }\n        const command = this.commands.getCommand(this.action.commandId);\n        return command && command.iconClass;\n    }\n\n    get sortString(): string { return this.action.order || this.label; }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Disposable } from '../disposable';\nimport { CompoundMenuNode, CompoundMenuNodeRole, MenuNode, MutableCompoundMenuNode, SubMenuOptions } from './menu-types';\n\n/**\n * Node representing a (sub)menu in the menu tree structure.\n */\nexport class CompositeMenuNode implements MutableCompoundMenuNode {\n    protected readonly _children: MenuNode[] = [];\n    public iconClass?: string;\n    public order?: string;\n    protected _when?: string;\n    protected _role?: CompoundMenuNodeRole;\n\n    constructor(\n        public readonly id: string,\n        public label?: string,\n        options?: SubMenuOptions,\n        readonly parent?: MenuNode & CompoundMenuNode,\n    ) {\n        this.updateOptions(options);\n    }\n\n    get when(): string | undefined { return this._when; }\n    get icon(): string | undefined { return this.iconClass; }\n    get children(): ReadonlyArray<MenuNode> { return this._children; }\n    get role(): CompoundMenuNodeRole { return this._role ?? (this.label ? CompoundMenuNodeRole.Submenu : CompoundMenuNodeRole.Group); }\n\n    addNode(node: MenuNode): Disposable {\n        this._children.push(node);\n        this._children.sort(CompoundMenuNode.sortChildren);\n        return {\n            dispose: () => {\n                const idx = this._children.indexOf(node);\n                if (idx >= 0) {\n                    this._children.splice(idx, 1);\n                }\n            }\n        };\n    }\n\n    removeNode(id: string): void {\n        const idx = this._children.findIndex(n => n.id === id);\n        if (idx >= 0) {\n            this._children.splice(idx, 1);\n        }\n    }\n\n    updateOptions(options?: SubMenuOptions): void {\n        if (options) {\n            this.iconClass ??= options.icon ?? options.iconClass;\n            this.label ??= options.label;\n            this.order ??= options.order;\n            this._role ??= options.role;\n            this._when ??= options.when;\n        }\n    }\n\n    get sortString(): string {\n        return this.order || this.id;\n    }\n\n    get isSubmenu(): boolean {\n        return Boolean(this.label);\n    }\n\n    /** @deprecated @since 1.28 use CompoundMenuNode.isNavigationGroup instead */\n    static isNavigationGroup = CompoundMenuNode.isNavigationGroup;\n}\n\nexport class CompositeMenuNodeWrapper implements MutableCompoundMenuNode {\n    constructor(protected readonly wrapped: Readonly<MutableCompoundMenuNode>, readonly parent: CompoundMenuNode, protected readonly options?: SubMenuOptions) { }\n\n    get id(): string { return this.wrapped.id; }\n\n    get label(): string | undefined { return this.wrapped.label; }\n\n    get sortString(): string { return this.options?.order || this.wrapped.sortString; }\n\n    get isSubmenu(): boolean { return Boolean(this.label); }\n\n    get role(): CompoundMenuNodeRole { return this.options?.role ?? this.wrapped.role; }\n\n    get icon(): string | undefined { return this.iconClass; }\n\n    get iconClass(): string | undefined { return this.options?.iconClass ?? this.wrapped.icon; }\n\n    get order(): string | undefined { return this.sortString; }\n\n    get when(): string | undefined { return this.options?.when ?? this.wrapped.when; }\n\n    get children(): ReadonlyArray<MenuNode> { return this.wrapped.children; }\n\n    addNode(node: MenuNode): Disposable { return this.wrapped.addNode(node); }\n\n    removeNode(id: string): void { return this.wrapped.removeNode(id); }\n\n    updateOptions(options: SubMenuOptions): void { return this.wrapped.updateOptions(options); }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './action-menu-node';\nexport * from './composite-menu-node';\nexport * from './menu-adapter';\nexport * from './menu-model-registry';\nexport * from './menu-types';\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { inject, injectable } from 'inversify';\nimport { CommandRegistry } from '../command';\nimport { Disposable } from '../disposable';\nimport { MenuPath } from './menu-types';\n\nexport type MenuCommandArguments = [menuPath: MenuPath, command: string, ...commandArgs: unknown[]];\n\nexport const MenuCommandExecutor = Symbol('MenuCommandExecutor');\nexport interface MenuCommandExecutor {\n    isVisible(...args: MenuCommandArguments): boolean;\n    isEnabled(...args: MenuCommandArguments): boolean;\n    isToggled(...args: MenuCommandArguments): boolean;\n    executeCommand(...args: MenuCommandArguments): Promise<unknown>;\n};\n\nexport const MenuCommandAdapter = Symbol('MenuCommandAdapter');\nexport interface MenuCommandAdapter extends MenuCommandExecutor {\n    /** Return values less than or equal to 0 are treated as rejections. */\n    canHandle(...args: MenuCommandArguments): number;\n}\n\nexport const MenuCommandAdapterRegistry = Symbol('MenuCommandAdapterRegistry');\nexport interface MenuCommandAdapterRegistry {\n    registerAdapter(adapter: MenuCommandAdapter): Disposable;\n    getAdapterFor(...args: MenuCommandArguments): MenuCommandAdapter | undefined;\n}\n\n@injectable()\nexport class MenuCommandExecutorImpl implements MenuCommandExecutor {\n    @inject(MenuCommandAdapterRegistry) protected readonly adapterRegistry: MenuCommandAdapterRegistry;\n    @inject(CommandRegistry) protected readonly commandRegistry: CommandRegistry;\n\n    executeCommand(menuPath: MenuPath, command: string, ...commandArgs: unknown[]): Promise<unknown> {\n        return this.delegate(menuPath, command, commandArgs, 'executeCommand');\n    }\n\n    isVisible(menuPath: MenuPath, command: string, ...commandArgs: unknown[]): boolean {\n        return this.delegate(menuPath, command, commandArgs, 'isVisible');\n    }\n\n    isEnabled(menuPath: MenuPath, command: string, ...commandArgs: unknown[]): boolean {\n        return this.delegate(menuPath, command, commandArgs, 'isEnabled');\n    }\n\n    isToggled(menuPath: MenuPath, command: string, ...commandArgs: unknown[]): boolean {\n        return this.delegate(menuPath, command, commandArgs, 'isToggled');\n    }\n\n    protected delegate<T extends keyof MenuCommandExecutor>(menuPath: MenuPath, command: string, commandArgs: unknown[], method: T): ReturnType<MenuCommandExecutor[T]> {\n        const adapter = this.adapterRegistry.getAdapterFor(menuPath, command, commandArgs);\n        return (adapter\n            ? adapter[method](menuPath, command, ...commandArgs)\n            : this.commandRegistry[method](command, ...commandArgs)) as ReturnType<MenuCommandExecutor[T]>;\n    }\n}\n\n@injectable()\nexport class MenuCommandAdapterRegistryImpl implements MenuCommandAdapterRegistry {\n    protected readonly adapters = new Array<MenuCommandAdapter>();\n\n    registerAdapter(adapter: MenuCommandAdapter): Disposable {\n        if (!this.adapters.includes(adapter)) {\n            this.adapters.push(adapter);\n            return Disposable.create(() => {\n                const index = this.adapters.indexOf(adapter);\n                if (index !== -1) {\n                    this.adapters.splice(index, 1);\n                }\n            });\n        }\n        return Disposable.NULL;\n    }\n\n    getAdapterFor(menuPath: MenuPath, command: string, ...commandArgs: unknown[]): MenuCommandAdapter | undefined {\n        let bestAdapter: MenuCommandAdapter | undefined = undefined;\n        let bestScore = 0;\n        let currentScore = 0;\n        for (const adapter of this.adapters) {\n            // Greater than or equal: favor later registrations over earlier.\n            if ((currentScore = adapter.canHandle(menuPath, command, ...commandArgs)) >= bestScore) {\n                bestScore = currentScore;\n                bestAdapter = adapter;\n            }\n        }\n        return bestAdapter;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject, named } from 'inversify';\nimport { Disposable } from '../disposable';\nimport { CommandRegistry, Command } from '../command';\nimport { ContributionProvider } from '../contribution-provider';\nimport { CompositeMenuNode, CompositeMenuNodeWrapper } from './composite-menu-node';\nimport { CompoundMenuNode, MenuAction, MenuNode, MenuPath, MutableCompoundMenuNode, SubMenuOptions } from './menu-types';\nimport { ActionMenuNode } from './action-menu-node';\n\nexport const MenuContribution = Symbol('MenuContribution');\n\n/**\n * Representation of a menu contribution.\n *\n * Note that there are also convenience classes which combine multiple contributions into one.\n * For example to register a view together with a menu and keybinding you could use\n * {@link AbstractViewContribution} instead.\n *\n * ### Example usage\n *\n * ```ts\n * import { MenuContribution, MenuModelRegistry, MAIN_MENU_BAR } from '@theia/core';\n *\n * @injectable()\n * export class NewMenuContribution implements MenuContribution {\n *    registerMenus(menus: MenuModelRegistry): void {\n *         const menuPath = [...MAIN_MENU_BAR, '99_mymenu'];\n *         menus.registerSubmenu(menuPath, 'My Menu');\n *\n *         menus.registerMenuAction(menuPath, {\n *            commandId: MyCommand.id,\n *            label: 'My Action'\n *         });\n *     }\n * }\n * ```\n */\nexport interface MenuContribution {\n    /**\n     * Registers menus.\n     * @param menus the menu model registry.\n     */\n    registerMenus(menus: MenuModelRegistry): void;\n}\n\n/**\n * The MenuModelRegistry allows to register and unregister menus, submenus and actions\n * via strings and {@link MenuAction}s without the need to access the underlying UI\n * representation.\n */\n@injectable()\nexport class MenuModelRegistry {\n    protected readonly root = new CompositeMenuNode('');\n    protected readonly independentSubmenus = new Map<string, MutableCompoundMenuNode>();\n\n    constructor(\n        @inject(ContributionProvider) @named(MenuContribution)\n        protected readonly contributions: ContributionProvider<MenuContribution>,\n        @inject(CommandRegistry) protected readonly commands: CommandRegistry\n    ) { }\n\n    onStart(): void {\n        for (const contrib of this.contributions.getContributions()) {\n            contrib.registerMenus(this);\n        }\n    }\n\n    /**\n     * Adds the given menu action to the menu denoted by the given path.\n     *\n     * @returns a disposable which, when called, will remove the menu action again.\n     */\n    registerMenuAction(menuPath: MenuPath, item: MenuAction): Disposable {\n        const menuNode = new ActionMenuNode(item, this.commands);\n        return this.registerMenuNode(menuPath, menuNode);\n    }\n\n    /**\n     * Adds the given menu node to the menu denoted by the given path.\n     *\n     * @returns a disposable which, when called, will remove the menu node again.\n     */\n    registerMenuNode(menuPath: MenuPath | string, menuNode: MenuNode, group?: string): Disposable {\n        const parent = this.getMenuNode(menuPath, group);\n        return parent.addNode(menuNode);\n    }\n\n    getMenuNode(menuPath: MenuPath | string, group?: string): MutableCompoundMenuNode {\n        if (typeof menuPath === 'string') {\n            const target = this.independentSubmenus.get(menuPath);\n            if (!target) { throw new Error(`Could not find submenu with id ${menuPath}`); }\n            if (group) {\n                return this.findSubMenu(target, group);\n            }\n            return target;\n        } else {\n            return this.findGroup(group ? menuPath.concat(group) : menuPath);\n        }\n    }\n\n    /**\n     * Register a new menu at the given path with the given label.\n     * (If the menu already exists without a label, iconClass or order this method can be used to set them.)\n     *\n     * @param menuPath the path for which a new submenu shall be registered.\n     * @param label the label to be used for the new submenu.\n     * @param options optionally allows to set an icon class and specify the order of the new menu.\n     *\n     * @returns if the menu was successfully created a disposable will be returned which,\n     * when called, will remove the menu again. If the menu already existed a no-op disposable\n     * will be returned.\n     *\n     * Note that if the menu already existed and was registered with a different label an error\n     * will be thrown.\n     */\n    registerSubmenu(menuPath: MenuPath, label: string, options?: SubMenuOptions): Disposable {\n        if (menuPath.length === 0) {\n            throw new Error('The sub menu path cannot be empty.');\n        }\n        const index = menuPath.length - 1;\n        const menuId = menuPath[index];\n        const groupPath = index === 0 ? [] : menuPath.slice(0, index);\n        const parent = this.findGroup(groupPath, options);\n        let groupNode = this.findSubMenu(parent, menuId, options);\n        if (!groupNode) {\n            groupNode = new CompositeMenuNode(menuId, label, options, parent);\n            return parent.addNode(groupNode);\n        } else {\n            groupNode.updateOptions({ ...options, label });\n            return Disposable.NULL;\n        }\n    }\n\n    registerIndependentSubmenu(id: string, label: string, options?: SubMenuOptions): Disposable {\n        if (this.independentSubmenus.has(id)) {\n            console.debug(`Independent submenu with path ${id} registered, but given ID already exists.`);\n        }\n        this.independentSubmenus.set(id, new CompositeMenuNode(id, label, options));\n        return { dispose: () => this.independentSubmenus.delete(id) };\n    }\n\n    linkSubmenu(parentPath: MenuPath | string, childId: string | MenuPath, options?: SubMenuOptions, group?: string): Disposable {\n        const child = this.getMenuNode(childId);\n        const parent = this.getMenuNode(parentPath, group);\n        const wrapper = new CompositeMenuNodeWrapper(child, parent, options);\n        return parent.addNode(wrapper);\n    }\n\n    /**\n     * Unregister all menu nodes with the same id as the given menu action.\n     *\n     * @param item the item whose id will be used.\n     * @param menuPath if specified only nodes within the path will be unregistered.\n     */\n    unregisterMenuAction(item: MenuAction, menuPath?: MenuPath): void;\n    /**\n     * Unregister all menu nodes with the same id as the given command.\n     *\n     * @param command the command whose id will be used.\n     * @param menuPath if specified only nodes within the path will be unregistered.\n     */\n    unregisterMenuAction(command: Command, menuPath?: MenuPath): void;\n    /**\n     * Unregister all menu nodes with the given id.\n     *\n     * @param id the id which shall be removed.\n     * @param menuPath if specified only nodes within the path will be unregistered.\n     */\n    unregisterMenuAction(id: string, menuPath?: MenuPath): void;\n    unregisterMenuAction(itemOrCommandOrId: MenuAction | Command | string, menuPath?: MenuPath): void {\n        const id = MenuAction.is(itemOrCommandOrId) ? itemOrCommandOrId.commandId\n            : Command.is(itemOrCommandOrId) ? itemOrCommandOrId.id\n                : itemOrCommandOrId;\n\n        if (menuPath) {\n            const parent = this.findGroup(menuPath);\n            parent.removeNode(id);\n            return;\n        }\n\n        this.unregisterMenuNode(id);\n    }\n\n    /**\n     * Recurse all menus, removing any menus matching the `id`.\n     *\n     * @param id technical identifier of the `MenuNode`.\n     */\n    unregisterMenuNode(id: string): void {\n        const recurse = (root: MutableCompoundMenuNode) => {\n            root.children.forEach(node => {\n                if (CompoundMenuNode.isMutable(node)) {\n                    node.removeNode(id);\n                    recurse(node);\n                }\n            });\n        };\n        recurse(this.root);\n    }\n\n    /**\n     * Finds a submenu as a descendant of the `root` node.\n     * See {@link MenuModelRegistry.findSubMenu findSubMenu}.\n     */\n    protected findGroup(menuPath: MenuPath, options?: SubMenuOptions): MutableCompoundMenuNode {\n        let currentMenu: MutableCompoundMenuNode = this.root;\n        for (const segment of menuPath) {\n            currentMenu = this.findSubMenu(currentMenu, segment, options);\n        }\n        return currentMenu;\n    }\n\n    /**\n     * Finds or creates a submenu as an immediate child of `current`.\n     * @throws if a node with the given `menuId` exists but is not a {@link MutableCompoundMenuNode}.\n     */\n    protected findSubMenu(current: MutableCompoundMenuNode, menuId: string, options?: SubMenuOptions): MutableCompoundMenuNode {\n        const sub = current.children.find(e => e.id === menuId);\n        if (CompoundMenuNode.isMutable(sub)) {\n            return sub;\n        }\n        if (sub) {\n            throw new Error(`'${menuId}' is not a menu group.`);\n        }\n        const newSub = new CompositeMenuNode(menuId, undefined, options, current);\n        current.addNode(newSub);\n        return newSub;\n    }\n\n    /**\n     * Returns the menu at the given path.\n     *\n     * @param menuPath the path specifying the menu to return. If not given the empty path will be used.\n     *\n     * @returns the root menu when `menuPath` is empty. If `menuPath` is not empty the specified menu is\n     * returned if it exists, otherwise an error is thrown.\n     */\n    getMenu(menuPath: MenuPath = []): MutableCompoundMenuNode {\n        return this.findGroup(menuPath);\n    }\n\n    /**\n     * Checks the given menu model whether it will show a menu with a single submenu.\n     *\n     * @param fullMenuModel the menu model to analyze\n     * @param menuPath the menu's path\n     * @returns if the menu will show a single submenu this returns a menu that will show the child elements of the submenu,\n     * otherwise the given `fullMenuModel` is return\n     */\n    removeSingleRootNode(fullMenuModel: MutableCompoundMenuNode, menuPath: MenuPath): CompoundMenuNode {\n        // check whether all children are compound menus and that there is only one child that has further children\n        if (!this.allChildrenCompound(fullMenuModel.children)) {\n            return fullMenuModel;\n        }\n        let nonEmptyNode = undefined;\n        for (const child of fullMenuModel.children) {\n            if (!this.isEmpty(child.children || [])) {\n                if (nonEmptyNode === undefined) {\n                    nonEmptyNode = child;\n                } else {\n                    return fullMenuModel;\n                }\n            }\n        }\n\n        if (CompoundMenuNode.is(nonEmptyNode) && nonEmptyNode.children.length === 1 && CompoundMenuNode.is(nonEmptyNode.children[0])) {\n            nonEmptyNode = nonEmptyNode.children[0];\n        }\n\n        return CompoundMenuNode.is(nonEmptyNode) ? nonEmptyNode : fullMenuModel;\n    }\n\n    protected allChildrenCompound(children: ReadonlyArray<MenuNode>): boolean {\n        return children.every(CompoundMenuNode.is);\n    }\n\n    protected isEmpty(children: ReadonlyArray<MenuNode>): boolean {\n        if (children.length === 0) {\n            return true;\n        }\n        if (!this.allChildrenCompound(children)) {\n            return false;\n        }\n        for (const child of children) {\n            if (!this.isEmpty(child.children || [])) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    /**\n     * Returns the {@link MenuPath path} at which a given menu node can be accessed from this registry, if it can be determined.\n     * Returns `undefined` if the `parent` of any node in the chain is unknown.\n     */\n    getPath(node: MenuNode): MenuPath | undefined {\n        const identifiers = [];\n        const visited: MenuNode[] = [];\n        let next: MenuNode | undefined = node;\n\n        while (next && !visited.includes(next)) {\n            if (next === this.root) {\n                return identifiers.reverse();\n            }\n            visited.push(next);\n            identifiers.push(next.id);\n            next = next.parent;\n        }\n        return undefined;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Disposable } from '../disposable';\nimport { isObject } from '../types';\n\nexport type MenuPath = string[];\nexport const MAIN_MENU_BAR: MenuPath = ['menubar'];\nexport const SETTINGS_MENU: MenuPath = ['settings_menu'];\nexport const ACCOUNTS_MENU: MenuPath = ['accounts_menu'];\nexport const ACCOUNTS_SUBMENU = [...ACCOUNTS_MENU, '1_accounts_submenu'];\n\n/**\n * @internal For most use cases, refer to {@link MenuAction} or {@link MenuNode}\n */\nexport interface MenuNodeMetadata {\n    /**\n     * technical identifier.\n     */\n    readonly id: string;\n    /**\n     * Menu nodes are sorted in ascending order based on their `sortString`.\n     */\n    readonly sortString: string;\n    /**\n     * Condition under which the menu node should be rendered.\n     * See https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts\n     */\n    readonly when?: string;\n    /**\n     * A reference to the parent node - useful for determining the menu path by which the node can be accessed.\n     */\n    readonly parent?: MenuNode;\n}\n\n/**\n * Metadata for the visual presentation of a node.\n * @internal For most uses cases, refer to {@link MenuNode}, {@link CommandMenuNode}, or {@link CompoundMenuNode}\n */\nexport interface MenuNodeRenderingData {\n    /**\n     * Optional label. Will be rendered as text of the menu item.\n     */\n    readonly label?: string;\n    /**\n     * Icon classes for the menu node. If present, these will produce an icon to the left of the label in browser-style menus.\n     */\n    readonly icon?: string;\n}\n\n/** @internal For most use cases refer to {@link MenuNode}, {@link CommandMenuNode}, or {@link CompoundMenuNode} */\nexport interface MenuNodeBase extends MenuNodeMetadata, MenuNodeRenderingData { }\n\n/**\n * A menu entry representing an action, e.g. \"New File\".\n */\nexport interface MenuAction extends MenuNodeRenderingData, Pick<MenuNodeMetadata, 'when'> {\n    /**\n     * The command to execute.\n     */\n    commandId: string;\n    /**\n     * In addition to the mandatory command property, an alternative command can be defined.\n     * It will be shown and invoked when pressing Alt while opening a menu.\n     */\n    alt?: string;\n    /**\n     * Menu entries are sorted in ascending order based on their `order` strings. If omitted the determined\n     * label will be used instead.\n     */\n    order?: string;\n}\n\nexport namespace MenuAction {\n    /* Determine whether object is a MenuAction */\n    export function is(arg: unknown): arg is MenuAction {\n        return isObject(arg) && 'commandId' in arg;\n    }\n}\n\n/**\n * Additional options when creating a new submenu.\n */\nexport interface SubMenuOptions extends Pick<MenuAction, 'order'>, Pick<MenuNodeMetadata, 'when'>, Partial<Pick<CompoundMenuNode, 'role' | 'label' | 'icon'>> {\n    /**\n     * The class to use for the submenu icon.\n     * @deprecated use `icon` instead;\n     */\n    iconClass?: string;\n}\n\nexport const enum CompoundMenuNodeRole {\n    /** Indicates that the node should be rendered as submenu that opens a new menu on hover */\n    Submenu,\n    /** Indicates that the node's children should be rendered as group separated from other items by a separator */\n    Group,\n    /** Indicates that the node's children should be treated as though they were direct children of the node's parent */\n    Flat,\n}\n\nexport interface CompoundMenuNode extends MenuNodeBase {\n    /**\n     * Items that are grouped under this menu.\n     */\n    readonly children: ReadonlyArray<MenuNode>\n    /**\n     * @deprecated @since 1.28 use `role` instead.\n     * Whether the item should be rendered as a submenu.\n     */\n    readonly isSubmenu: boolean;\n    /**\n     * How the node and its children should be rendered. See {@link CompoundMenuNodeRole}.\n     */\n    readonly role: CompoundMenuNodeRole;\n}\n\nexport interface MutableCompoundMenuNode extends CompoundMenuNode {\n    /**\n     * Inserts the given node at the position indicated by `sortString`.\n     *\n     * @returns a disposable which, when called, will remove the given node again.\n     */\n    addNode(node: MenuNode): Disposable;\n    /**\n     * Removes the first node with the given id.\n     *\n     * @param id node id.\n     */\n    removeNode(id: string): void;\n\n    /**\n     * Fills any `undefined` fields with the values from the {@link options}.\n     */\n    updateOptions(options: SubMenuOptions): void;\n}\n\nexport namespace CompoundMenuNode {\n    export function is(node?: MenuNode): node is CompoundMenuNode { return !!node && Array.isArray(node.children); }\n    export function getRole(node: MenuNode): CompoundMenuNodeRole | undefined {\n        if (!is(node)) { return undefined; }\n        return node.role ?? (node.label ? CompoundMenuNodeRole.Submenu : CompoundMenuNodeRole.Group);\n    }\n    export function sortChildren(m1: MenuNode, m2: MenuNode): number {\n        // The navigation group is special as it will always be sorted to the top/beginning of a menu.\n        if (isNavigationGroup(m1)) {\n            return -1;\n        }\n        if (isNavigationGroup(m2)) {\n            return 1;\n        }\n        return m1.sortString.localeCompare(m2.sortString);\n    }\n\n    /** Collapses the children of any subemenus with role {@link CompoundMenuNodeRole Flat} and sorts */\n    export function getFlatChildren(children: ReadonlyArray<MenuNode>): MenuNode[] {\n        const childrenToMerge: ReadonlyArray<MenuNode>[] = [];\n        return children.filter(child => {\n            if (getRole(child) === CompoundMenuNodeRole.Flat) {\n                childrenToMerge.push((child as CompoundMenuNode).children);\n                return false;\n            }\n            return true;\n        }).concat(...childrenToMerge).sort(sortChildren);\n    }\n\n    /**\n     * Indicates whether the given node is the special `navigation` menu.\n     *\n     * @param node the menu node to check.\n     * @returns `true` when the given node is a {@link CompoundMenuNode} with id `navigation`,\n     * `false` otherwise.\n     */\n    export function isNavigationGroup(node: MenuNode): node is CompoundMenuNode {\n        return is(node) && node.id === 'navigation';\n    }\n\n    export function isMutable(node?: MenuNode): node is MutableCompoundMenuNode {\n        const candidate = node as MutableCompoundMenuNode;\n        return is(candidate) && typeof candidate.addNode === 'function' && typeof candidate.removeNode === 'function';\n    }\n}\n\nexport interface CommandMenuNode extends MenuNodeBase {\n    command: string;\n}\n\nexport namespace CommandMenuNode {\n    export function is(candidate?: MenuNode): candidate is CommandMenuNode { return Boolean(candidate?.command); }\n    export function hasAltHandler(candidate?: MenuNode): candidate is AlternativeHandlerMenuNode {\n        const asAltNode = candidate as AlternativeHandlerMenuNode;\n        return is(asAltNode) && is(asAltNode?.altNode);\n    }\n}\n\nexport interface AlternativeHandlerMenuNode extends CommandMenuNode {\n    altNode: CommandMenuNode;\n}\n\n/**\n * Base interface of the nodes used in the menu tree structure.\n */\nexport type MenuNode = MenuNodeMetadata\n    & MenuNodeRenderingData\n    & Partial<CompoundMenuNode>\n    & Partial<CommandMenuNode>\n    & Partial<AlternativeHandlerMenuNode>;\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Disposable, DisposableCollection } from '../disposable';\nimport { Emitter, Event } from '../event';\nimport { ReadBuffer, WriteBuffer } from './message-buffer';\n\n/**\n * A channel is a bidirectional communications channel with lifecycle and\n * error signalling. Note that creation of channels is specific to particular\n * implementations and thus not part of the protocol.\n */\nexport interface Channel {\n\n    /**\n     * The remote side has closed the channel\n     */\n    onClose: Event<ChannelCloseEvent>;\n\n    /**\n     * An error has occurred while writing to or reading from the channel\n     */\n    onError: Event<unknown>;\n\n    /**\n     * A message has arrived and can be read  by listeners using a {@link MessageProvider}.\n     */\n    onMessage: Event<MessageProvider>;\n\n    /**\n     * Obtain a {@link WriteBuffer} to write a message to the channel.\n     */\n    getWriteBuffer(): WriteBuffer;\n\n    /**\n     * Close this channel. No {@link onClose} event should be sent\n     */\n    close(): void;\n}\n\n/**\n * The event that is emitted when a channel is closed from the remote side.\n */\nexport interface ChannelCloseEvent {\n    reason: string,\n    code?: number\n};\n\n/**\n * The `MessageProvider` is emitted when a channel receives a new message.\n * Listeners can invoke the provider to obtain a new {@link ReadBuffer} for the received message.\n * This ensures that each listener has its own isolated {@link ReadBuffer} instance.\n *\n */\nexport type MessageProvider = () => ReadBuffer;\n\n/**\n *  Reusable abstract {@link Channel} implementation that sets up\n *  the basic channel event listeners and offers a generic close method.\n */\nexport abstract class AbstractChannel implements Channel {\n\n    onCloseEmitter: Emitter<ChannelCloseEvent> = new Emitter();\n    get onClose(): Event<ChannelCloseEvent> {\n        return this.onCloseEmitter.event;\n    };\n\n    onErrorEmitter: Emitter<unknown> = new Emitter();\n    get onError(): Event<unknown> {\n        return this.onErrorEmitter.event;\n    };\n\n    onMessageEmitter: Emitter<MessageProvider> = new Emitter();\n    get onMessage(): Event<MessageProvider> {\n        return this.onMessageEmitter.event;\n    };\n\n    protected toDispose: DisposableCollection = new DisposableCollection();\n\n    constructor() {\n        this.toDispose.pushAll([this.onCloseEmitter, this.onErrorEmitter, this.onMessageEmitter]);\n    }\n\n    close(): void {\n        this.toDispose.dispose();\n    }\n\n    abstract getWriteBuffer(): WriteBuffer;\n}\n\n/**\n * A very basic {@link AbstractChannel} implementation which takes a function\n * for retrieving the {@link WriteBuffer} as constructor argument.\n */\nexport class BasicChannel extends AbstractChannel {\n\n    constructor(protected writeBufferProvider: () => WriteBuffer) {\n        super();\n    }\n\n    getWriteBuffer(): WriteBuffer {\n        return this.writeBufferProvider();\n    }\n}\n\n/**\n * Helper class to implement the single channels on a {@link ChannelMultiplexer}. Simply forwards write requests to\n * the given write buffer source i.e. the main channel of the {@link ChannelMultiplexer}.\n */\nexport class ForwardingChannel extends AbstractChannel {\n\n    constructor(readonly id: string, protected readonly closeHandler: () => void, protected readonly writeBufferSource: () => WriteBuffer) {\n        super();\n    }\n\n    getWriteBuffer(): WriteBuffer {\n        return this.writeBufferSource();\n    }\n\n    override close(): void {\n        super.close();\n        this.closeHandler();\n    }\n}\n\n/**\n * The different message types used in the messaging protocol of the {@link ChannelMultiplexer}\n */\nexport enum MessageTypes {\n    Open = 1,\n    Close = 2,\n    AckOpen = 3,\n    Data = 4\n}\n\n/**\n * The write buffers in this implementation immediately write to the underlying\n * channel, so we rely on writers to the multiplexed channels to always commit their\n * messages and always in one go.\n */\nexport class ChannelMultiplexer implements Disposable {\n    protected pendingOpen: Map<string, (channel: ForwardingChannel) => void> = new Map();\n    protected openChannels: Map<string, ForwardingChannel> = new Map();\n\n    protected readonly onOpenChannelEmitter = new Emitter<{ id: string, channel: Channel }>();\n    get onDidOpenChannel(): Event<{ id: string, channel: Channel }> {\n        return this.onOpenChannelEmitter.event;\n    }\n\n    protected toDispose = new DisposableCollection();\n\n    constructor(protected readonly underlyingChannel: Channel) {\n        this.toDispose.pushAll([\n            this.underlyingChannel.onMessage(buffer => this.handleMessage(buffer())),\n            this.underlyingChannel.onClose(event => this.onUnderlyingChannelClose(event)),\n            this.underlyingChannel.onError(error => this.handleError(error)),\n            this.onOpenChannelEmitter\n        ]);\n    }\n\n    protected handleError(error: unknown): void {\n        this.openChannels.forEach(channel => {\n            channel.onErrorEmitter.fire(error);\n        });\n    }\n\n    onUnderlyingChannelClose(event?: ChannelCloseEvent): void {\n        if (!this.toDispose.disposed) {\n            this.toDispose.push(Disposable.create(() => {\n                this.pendingOpen.clear();\n                this.openChannels.forEach(channel => {\n                    channel.onCloseEmitter.fire(event ?? { reason: 'Multiplexer main channel has been closed from the remote side!' });\n                });\n\n                this.openChannels.clear();\n            }));\n            this.dispose();\n        }\n\n    }\n\n    protected handleMessage(buffer: ReadBuffer): void {\n        const type = buffer.readUint8();\n        const id = buffer.readString();\n        switch (type) {\n            case MessageTypes.AckOpen: {\n                return this.handleAckOpen(id);\n            }\n            case MessageTypes.Open: {\n                return this.handleOpen(id);\n            }\n            case MessageTypes.Close: {\n                return this.handleClose(id);\n            }\n            case MessageTypes.Data: {\n                return this.handleData(id, buffer);\n            }\n        }\n    }\n\n    protected handleAckOpen(id: string): void {\n        // edge case: both side try to open a channel at the same time.\n        const resolve = this.pendingOpen.get(id);\n        if (resolve) {\n            const channel = this.createChannel(id);\n            this.pendingOpen.delete(id);\n            this.openChannels.set(id, channel);\n            resolve(channel);\n            this.onOpenChannelEmitter.fire({ id, channel });\n        }\n    }\n\n    protected handleOpen(id: string): void {\n        if (!this.openChannels.has(id)) {\n            const channel = this.createChannel(id);\n            this.openChannels.set(id, channel);\n            const resolve = this.pendingOpen.get(id);\n            if (resolve) {\n                // edge case: both side try to open a channel at the same time.\n                resolve(channel);\n            }\n            this.underlyingChannel.getWriteBuffer().writeUint8(MessageTypes.AckOpen).writeString(id).commit();\n            this.onOpenChannelEmitter.fire({ id, channel });\n        }\n    }\n\n    protected handleClose(id: string): void {\n        const channel = this.openChannels.get(id);\n        if (channel) {\n            channel.onCloseEmitter.fire({ reason: 'Channel has been closed from the remote side' });\n            this.openChannels.delete(id);\n        }\n    }\n\n    protected handleData(id: string, data: ReadBuffer): void {\n        const channel = this.openChannels.get(id);\n        if (channel) {\n            channel.onMessageEmitter.fire(() => data.sliceAtReadPosition());\n        }\n    }\n\n    protected createChannel(id: string): ForwardingChannel {\n        return new ForwardingChannel(id, () => this.closeChannel(id), () => this.prepareWriteBuffer(id));\n    }\n\n    // Prepare the write buffer for the channel with the give, id. The channel id has to be encoded\n    // and written to the buffer before the actual message.\n    protected prepareWriteBuffer(id: string): WriteBuffer {\n        const underlying = this.underlyingChannel.getWriteBuffer();\n        underlying.writeUint8(MessageTypes.Data);\n        underlying.writeString(id);\n        return underlying;\n    }\n\n    protected closeChannel(id: string): void {\n        this.underlyingChannel.getWriteBuffer()\n            .writeUint8(MessageTypes.Close)\n            .writeString(id)\n            .commit();\n\n        this.openChannels.delete(id);\n    }\n\n    open(id: string): Promise<Channel> {\n        if (this.openChannels.has(id)) {\n            throw new Error(`Another channel with the id '${id}' is already open.`);\n        }\n        const result = new Promise<Channel>((resolve, reject) => {\n            this.pendingOpen.set(id, resolve);\n        });\n        this.underlyingChannel.getWriteBuffer().writeUint8(MessageTypes.Open).writeString(id).commit();\n        return result;\n    }\n\n    getOpenChannel(id: string): Channel | undefined {\n        return this.openChannels.get(id);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n}\n\n","// *****************************************************************************\n// Copyright (C) 2022 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nexport { AbstractChannel, Channel, ChannelCloseEvent, MessageProvider } from './channel';\nexport { ReadBuffer, WriteBuffer } from './message-buffer';\nexport { RequestHandler, RpcProtocol, RpcProtocolOptions } from './rpc-protocol';\n\nimport { registerMsgPackExtensions } from './rpc-message-encoder';\n\nregisterMsgPackExtensions();\n","// *****************************************************************************\n// Copyright (C) 2022 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { addExtension } from 'msgpackr';\n\n/**\n * Handles the global registration of custom MsgPackR extensions\n * required for the default RPC communication. MsgPackR extensions\n * are installed globally on both ends of the communication channel.\n * (frontend-backend, pluginExt-pluginMain).\n * Is implemented as singleton as it is  also used in plugin child processes which have no access to inversify.\n */\nexport class MsgPackExtensionManager {\n    private static readonly INSTANCE = new MsgPackExtensionManager();\n    public static getInstance(): MsgPackExtensionManager {\n        return this.INSTANCE;\n    }\n\n    private extensions = new Map<number, MsgPackExtension>();\n\n    private constructor() {\n    }\n\n    registerExtensions(...extensions: MsgPackExtension[]): void {\n        extensions.forEach(extension => {\n            if (extension.tag < 1 || extension.tag > 100) {\n                // MsgPackR reserves the tag range 1-100 for custom extensions.\n                throw new Error(`MsgPack extension tag should be a number from 1-100 but was '${extension.tag}'`);\n            }\n            if (this.extensions.has(extension.tag)) {\n                throw new Error(`Another MsgPack extension with the tag '${extension.tag}' is already registered`);\n            }\n            this.extensions.set(extension.tag, extension);\n            addExtension({\n                Class: extension.class,\n                type: extension.tag,\n                write: extension.serialize,\n                read: extension.deserialize\n            });\n        });\n    }\n\n    getExtension(tag: number): MsgPackExtension | undefined {\n        return this.extensions.get(tag);\n    }\n}\n\nexport interface MsgPackExtension {\n    class: Function,\n    tag: number,\n    serialize(instance: unknown): unknown,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    deserialize(serialized: any): unknown\n}\n\nexport type Constructor<T> = new (...params: unknown[]) => T;\n\n","// *****************************************************************************\n// Copyright (C) 2022 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Packr as MsgPack } from 'msgpackr';\nimport { ReadBuffer, WriteBuffer } from './message-buffer';\nimport { MsgPackExtensionManager } from './msg-pack-extension-manager';\n\n/**\n * This code lets you encode rpc protocol messages (request/reply/notification/error/cancel)\n * into a channel write buffer and decode the same messages from a read buffer.\n * Custom encoders/decoders can be registered to specially handling certain types of values\n * to be encoded. Clients are responsible for ensuring that the set of tags for encoders\n * is distinct and the same at both ends of a channel.\n */\n\nexport type RpcMessage = RequestMessage | ReplyMessage | ReplyErrMessage | CancelMessage | NotificationMessage;\n\nexport const enum RpcMessageType {\n    Request = 1,\n    Notification = 2,\n    Reply = 3,\n    ReplyErr = 4,\n    Cancel = 5,\n}\n\nexport interface CancelMessage {\n    type: RpcMessageType.Cancel;\n    id: number;\n}\n\nexport interface RequestMessage {\n    type: RpcMessageType.Request;\n    id: number;\n    method: string;\n    args: any[];\n}\n\nexport interface NotificationMessage {\n    type: RpcMessageType.Notification;\n    id?: number;\n    method: string;\n    args: any[];\n}\n\nexport interface ReplyMessage {\n    type: RpcMessageType.Reply;\n    id: number;\n    res: any;\n}\n\nexport interface ReplyErrMessage {\n    type: RpcMessageType.ReplyErr;\n    id: number;\n    err: any;\n}\n\nexport interface SerializedError {\n    readonly $isError: true;\n    readonly name: string;\n    readonly message: string;\n    readonly stack: string;\n}\n\n/**\n * A special error that can be returned in case a request\n * has failed. Provides additional information i.e. an error code\n * and additional error data.\n */\nexport class ResponseError extends Error {\n    constructor(readonly code: number, message: string, readonly data: any) {\n        super(message);\n    }\n}\n\n/**\n * Custom error thrown by the {@link RpcMessageEncoder} if an error occurred during the encoding and the\n * object could not be written to the given {@link WriteBuffer}\n */\nexport class EncodingError extends Error {\n    constructor(msg: string, public cause?: Error) {\n        super(msg);\n    }\n}\n\n/**\n * A `RpcMessageDecoder` parses a a binary message received via {@link ReadBuffer} into a {@link RpcMessage}\n */\nexport interface RpcMessageDecoder {\n    parse(buffer: ReadBuffer): RpcMessage;\n}\n\n/**\n * A `RpcMessageEncoder` writes {@link RpcMessage} objects to a {@link WriteBuffer}. Note that it is\n * up to clients to commit the message. This allows for multiple messages being\n * encoded before sending.\n */\nexport interface RpcMessageEncoder {\n    cancel(buf: WriteBuffer, requestId: number): void;\n\n    notification(buf: WriteBuffer, method: string, args: any[], id?: number): void\n\n    request(buf: WriteBuffer, requestId: number, method: string, args: any[]): void\n\n    replyOK(buf: WriteBuffer, requestId: number, res: any): void\n\n    replyErr(buf: WriteBuffer, requestId: number, err: any): void\n\n}\n\nexport const defaultMsgPack = new MsgPack({ moreTypes: true, encodeUndefinedAsNil: false, bundleStrings: false });\n\nexport class MsgPackMessageEncoder implements RpcMessageEncoder {\n\n    constructor(protected readonly msgPack: MsgPack = defaultMsgPack) { }\n\n    cancel(buf: WriteBuffer, requestId: number): void {\n        this.encode<CancelMessage>(buf, { type: RpcMessageType.Cancel, id: requestId });\n    }\n    notification(buf: WriteBuffer, method: string, args: any[], id?: number): void {\n        this.encode<NotificationMessage>(buf, { type: RpcMessageType.Notification, method, args, id });\n    }\n    request(buf: WriteBuffer, requestId: number, method: string, args: any[]): void {\n        this.encode<RequestMessage>(buf, { type: RpcMessageType.Request, id: requestId, method, args });\n    }\n    replyOK(buf: WriteBuffer, requestId: number, res: any): void {\n        this.encode<ReplyMessage>(buf, { type: RpcMessageType.Reply, id: requestId, res });\n    }\n    replyErr(buf: WriteBuffer, requestId: number, err: any): void {\n        this.encode<ReplyErrMessage>(buf, { type: RpcMessageType.ReplyErr, id: requestId, err });\n    }\n\n    encode<T = unknown>(buf: WriteBuffer, value: T): void {\n        try {\n            buf.writeBytes(this.msgPack.encode(value));\n        } catch (err) {\n            if (err instanceof Error) {\n                throw new EncodingError(`Error during encoding: '${err.message}'`, err);\n            }\n            throw err;\n        }\n    }\n}\n\nexport class MsgPackMessageDecoder implements RpcMessageDecoder {\n    constructor(protected readonly msgPack: MsgPack = defaultMsgPack) { }\n\n    decode<T = any>(buf: ReadBuffer): T {\n        const bytes = buf.readBytes();\n        return this.msgPack.decode(bytes);\n    }\n\n    parse(buffer: ReadBuffer): RpcMessage {\n        return this.decode(buffer);\n    }\n}\n\nexport function registerMsgPackExtensions(): void {\n    // Register custom msgPack extension for Errors.\n    MsgPackExtensionManager.getInstance().registerExtensions({\n        class: Error,\n        tag: 1,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        serialize: (error: any) => {\n            const { code, data, message, name } = error;\n            const stack = error.stacktrace ?? error.stack;\n            const isResponseError = error instanceof ResponseError;\n            return { code, data, message, name, stack, isResponseError };\n        },\n        deserialize: data => {\n            const error = data.isResponseError ? new ResponseError(data.code, data.message, data.data) : new Error(data.message);\n            error.name = data.name;\n            error.stack = data.stack;\n            return error;\n        }\n    });\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { CancellationToken, CancellationTokenSource } from '../cancellation';\nimport { Disposable, DisposableCollection } from '../disposable';\nimport { Emitter, Event } from '../event';\nimport { Deferred } from '../promise-util';\nimport { Channel } from './channel';\nimport { MsgPackMessageDecoder, MsgPackMessageEncoder, RpcMessage, RpcMessageDecoder, RpcMessageEncoder, RpcMessageType } from './rpc-message-encoder';\n\n/**\n * Handles request messages received by the {@link RPCProtocol}.\n */\nexport type RequestHandler = (method: string, args: any[]) => Promise<any>;\n\n/**\n * Initialization options for a {@link RpcProtocol}.\n */\nexport interface RpcProtocolOptions {\n    /**\n     * The message encoder that should be used. If `undefined` the default {@link RpcMessageEncoder} will be used.\n     */\n    encoder?: RpcMessageEncoder,\n    /**\n     * The message decoder that should be used. If `undefined` the default {@link RpcMessageDecoder} will be used.\n     */\n    decoder?: RpcMessageDecoder,\n    /**\n     * The runtime mode determines whether the RPC protocol is bi-directional (default) or acts as a client or server only.\n     */\n    mode?: 'default' | 'clientOnly' | 'serverOnly'\n}\n\n/**\n * Establish a RPC protocol on top of a given channel. By default the rpc protocol is bi-directional, meaning it is possible to send\n * requests and notifications to the remote side (i.e. acts as client) as well as receiving requests and notifications from the remote side (i.e. acts as a server).\n * Clients can get a promise for a remote request result that will be either resolved or\n * rejected depending on the success of the request. Keeps track of outstanding requests and matches replies to the appropriate request\n * Currently, there is no timeout handling for long running requests implemented.\n * The bi-directional mode can be reconfigured using the {@link RpcProtocolOptions} to construct an RPC protocol instance that acts only as client or server instead.\n */\nexport class RpcProtocol {\n    static readonly CANCELLATION_TOKEN_KEY = 'add.cancellation.token';\n\n    protected readonly pendingRequests: Map<number, Deferred<any>> = new Map();\n\n    protected nextMessageId: number = 0;\n\n    protected readonly encoder: RpcMessageEncoder;\n    protected readonly decoder: RpcMessageDecoder;\n    protected readonly mode: 'default' | 'clientOnly' | 'serverOnly';\n\n    protected readonly onNotificationEmitter: Emitter<{ method: string; args: any[]; }> = new Emitter();\n    protected readonly cancellationTokenSources = new Map<number, CancellationTokenSource>();\n\n    get onNotification(): Event<{ method: string; args: any[]; }> {\n        return this.onNotificationEmitter.event;\n    }\n\n    protected toDispose = new DisposableCollection();\n\n    constructor(public readonly channel: Channel, public readonly requestHandler: RequestHandler | undefined, options: RpcProtocolOptions = {}) {\n        this.encoder = options.encoder ?? new MsgPackMessageEncoder();\n        this.decoder = options.decoder ?? new MsgPackMessageDecoder();\n        this.toDispose.push(this.onNotificationEmitter);\n        channel.onClose(event => {\n            this.pendingRequests.forEach(pending => pending.reject(new Error(event.reason)));\n            this.pendingRequests.clear();\n            this.toDispose.dispose();\n        });\n        this.toDispose.push(channel.onMessage(readBuffer => this.handleMessage(this.decoder.parse(readBuffer()))));\n        this.mode = options.mode ?? 'default';\n\n        if (this.mode !== 'clientOnly' && requestHandler === undefined) {\n            console.error('RPCProtocol was initialized without a request handler but was not set to clientOnly mode.');\n        }\n    }\n\n    handleMessage(message: RpcMessage): void {\n        if (this.mode !== 'clientOnly') {\n            switch (message.type) {\n                case RpcMessageType.Cancel: {\n                    this.handleCancel(message.id);\n                    return;\n                }\n                case RpcMessageType.Request: {\n                    this.handleRequest(message.id, message.method, message.args);\n                    return;\n                }\n                case RpcMessageType.Notification: {\n                    this.handleNotify(message.method, message.args, message.id);\n                    return;\n                }\n            }\n        }\n        if (this.mode !== 'serverOnly') {\n            switch (message.type) {\n                case RpcMessageType.Reply: {\n                    this.handleReply(message.id, message.res);\n                    return;\n                }\n                case RpcMessageType.ReplyErr: {\n                    this.handleReplyErr(message.id, message.err);\n                    return;\n                }\n            }\n        }\n        // If the message was not handled until here, it is incompatible with the mode.\n        console.warn(`Received message incompatible with this RPCProtocol's mode '${this.mode}'. Type: ${message.type}. ID: ${message.id}.`);\n    }\n\n    protected handleReply(id: number, value: any): void {\n        const replyHandler = this.pendingRequests.get(id);\n        if (replyHandler) {\n            this.pendingRequests.delete(id);\n            replyHandler.resolve(value);\n        } else {\n            throw new Error(`No reply handler for reply with id: ${id}`);\n        }\n    }\n\n    protected handleReplyErr(id: number, error: any): void {\n        try {\n            const replyHandler = this.pendingRequests.get(id);\n            if (replyHandler) {\n                this.pendingRequests.delete(id);\n                replyHandler.reject(error);\n            } else {\n                throw new Error(`No reply handler for error reply with id: ${id}`);\n            }\n        } catch (err) {\n            throw err;\n        }\n    }\n\n    sendRequest<T>(method: string, args: any[]): Promise<T> {\n        // The last element of the request args might be a cancellation token. As these tokens are not serializable we have to remove it from the\n        // args array and the `CANCELLATION_TOKEN_KEY` string instead.\n        const cancellationToken: CancellationToken | undefined = args.length && CancellationToken.is(args[args.length - 1]) ? args.pop() : undefined;\n\n        const id = this.nextMessageId++;\n        const reply = new Deferred<T>();\n\n        if (cancellationToken) {\n            args.push(RpcProtocol.CANCELLATION_TOKEN_KEY);\n        }\n\n        this.pendingRequests.set(id, reply);\n\n        const output = this.channel.getWriteBuffer();\n        this.encoder.request(output, id, method, args);\n        output.commit();\n\n        if (cancellationToken?.isCancellationRequested) {\n            this.sendCancel(id);\n        } else {\n            cancellationToken?.onCancellationRequested(() => this.sendCancel(id));\n        }\n\n        return reply.promise;\n    }\n\n    sendNotification(method: string, args: any[]): void {\n        // If the notification supports a CancellationToken, it needs to be treated like a request\n        // because cancellation does not work with the simplified \"fire and forget\" approach of simple notifications.\n        if (args.length && CancellationToken.is(args[args.length - 1])) {\n            this.sendRequest(method, args);\n            return;\n        }\n\n        const output = this.channel.getWriteBuffer();\n        this.encoder.notification(output, method, args, this.nextMessageId++);\n        output.commit();\n    }\n\n    sendCancel(requestId: number): void {\n        const output = this.channel.getWriteBuffer();\n        this.encoder.cancel(output, requestId);\n        output.commit();\n    }\n\n    protected handleCancel(id: number): void {\n        const cancellationTokenSource = this.cancellationTokenSources.get(id);\n        if (cancellationTokenSource) {\n            cancellationTokenSource.cancel();\n        }\n    }\n\n    protected async handleRequest(id: number, method: string, args: any[]): Promise<void> {\n        const output = this.channel.getWriteBuffer();\n\n        // Check if the last argument of the received args is the key for indicating that a cancellation token should be used\n        // If so remove the key from the args and create a new cancellation token.\n        const addToken = args.length && args[args.length - 1] === RpcProtocol.CANCELLATION_TOKEN_KEY ? args.pop() : false;\n        if (addToken) {\n            const tokenSource = new CancellationTokenSource();\n            this.cancellationTokenSources.set(id, tokenSource);\n            args.push(tokenSource.token);\n        }\n\n        try {\n            const result = await this.requestHandler!(method, args);\n            this.cancellationTokenSources.delete(id);\n            this.encoder.replyOK(output, id, result);\n            output.commit();\n        } catch (err) {\n            // In case of an error the output buffer might already contains parts of an message.\n            // => Dispose the current buffer and retrieve a new, clean one for writing the response error.\n            if (Disposable.is(output)) {\n                output.dispose();\n            }\n            const errorOutput = this.channel.getWriteBuffer();\n            this.cancellationTokenSources.delete(id);\n            this.encoder.replyErr(errorOutput, id, err);\n            errorOutput.commit();\n        }\n    }\n\n    protected async handleNotify(method: string, args: any[], id?: number): Promise<void> {\n        if (this.toDispose.disposed) {\n            return;\n        }\n        this.onNotificationEmitter.fire({ method, args });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { Disposable } from '../disposable';\nimport { Emitter, Event } from '../event';\nimport { ReadBuffer, WriteBuffer } from './message-buffer';\n\n/**\n * The default {@link WriteBuffer} implementation. Uses a {@link Uint8Array} for buffering.\n * The {@link Uint8ArrayWriteBuffer.onCommit} hook can be used to rect to on-commit events.\n * After the {@link Uint8ArrayWriteBuffer.commit} method has been called the buffer is disposed\n * and can no longer be used for writing data. If the writer buffer is no longer needed but the message\n * has not been committed yet it has to be disposed manually.\n */\nexport class Uint8ArrayWriteBuffer implements WriteBuffer, Disposable {\n\n    private encoder = new TextEncoder();\n    private msg: DataView;\n    private isDisposed = false;\n    private offset: number;\n\n    constructor(private buffer: Uint8Array = new Uint8Array(1024), writePosition: number = 0) {\n        this.offset = buffer.byteOffset + writePosition;\n        this.msg = new DataView(buffer.buffer);\n    }\n\n    ensureCapacity(value: number): this {\n        let newLength = this.buffer.byteLength;\n        while (newLength < this.offset + value) {\n            newLength *= 2;\n        }\n        if (newLength !== this.buffer.byteLength) {\n            const newBuffer = new Uint8Array(newLength);\n            newBuffer.set(this.buffer);\n            this.buffer = newBuffer;\n            this.msg = new DataView(this.buffer.buffer);\n        }\n        return this;\n    }\n\n    writeLength(length: number): this {\n        if (length < 0 || (length % 1) !== 0) {\n            throw new Error(`Could not write the given length value. '${length}' is not an integer >= 0`);\n        }\n        if (length < 127) {\n            this.writeUint8(length);\n        } else {\n            this.writeUint8(128 + (length & 127));\n            this.writeLength(length >> 7);\n        }\n        return this;\n    }\n\n    writeNumber(value: number): this {\n        this.ensureCapacity(8);\n        this.msg.setFloat64(this.offset, value);\n        this.offset += 8;\n        return this;\n    }\n\n    writeUint8(value: number): this {\n        this.ensureCapacity(1);\n        this.buffer[this.offset++] = value;\n        return this;\n    }\n\n    writeUint16(value: number): this {\n        this.ensureCapacity(2);\n        this.msg.setUint16(this.offset, value);\n        this.offset += 2;\n        return this;\n    }\n\n    writeUint32(value: number): this {\n        this.ensureCapacity(4);\n        this.msg.setUint32(this.offset, value);\n        this.offset += 4;\n        return this;\n    }\n\n    writeString(value: string): this {\n        this.ensureCapacity(4 * value.length);\n        const result = this.encoder.encodeInto(value, this.buffer.subarray(this.offset + 4));\n        this.msg.setUint32(this.offset, result.written!);\n        this.offset += 4 + result.written!;\n        return this;\n    }\n\n    writeBytes(value: Uint8Array): this {\n        this.writeLength(value.byteLength);\n        this.ensureCapacity(value.length);\n        this.buffer.set(value, this.offset);\n        this.offset += value.length;\n        return this;\n    }\n\n    private onCommitEmitter = new Emitter<Uint8Array>();\n    get onCommit(): Event<Uint8Array> {\n        return this.onCommitEmitter.event;\n    }\n\n    commit(): void {\n        if (this.isDisposed) {\n            throw new Error(\"Could not invoke 'commit'. The WriteBuffer is already disposed.\");\n        }\n        this.onCommitEmitter.fire(this.getCurrentContents());\n        this.dispose();\n    }\n\n    getCurrentContents(): Uint8Array {\n        return this.buffer.slice(this.buffer.byteOffset, this.offset);\n    }\n\n    dispose(): void {\n        if (!this.isDisposed) {\n            this.onCommitEmitter.dispose();\n            this.isDisposed = true;\n        }\n    }\n\n}\n/**\n * The default {@link ReadBuffer} implementation. Uses a {@link Uint8Array} for buffering.\n * Is for single message read. A message can only be read once.\n */\nexport class Uint8ArrayReadBuffer implements ReadBuffer {\n    private offset: number = 0;\n    private msg: DataView;\n    private decoder = new TextDecoder();\n\n    constructor(private readonly buffer: Uint8Array, readPosition = 0) {\n        this.offset = buffer.byteOffset + readPosition;\n        this.msg = new DataView(buffer.buffer);\n    }\n\n    readUint8(): number {\n        return this.msg.getUint8(this.offset++);\n    }\n\n    readUint16(): number {\n        const result = this.msg.getUint16(this.offset);\n        this.offset += 2;\n        return result;\n    }\n\n    readUint32(): number {\n        const result = this.msg.getUint32(this.offset);\n        this.offset += 4;\n        return result;\n    }\n\n    readLength(): number {\n        let shift = 0;\n        let byte = this.readUint8();\n        let value = (byte & 127) << shift;\n        while (byte > 127) {\n            shift += 7;\n            byte = this.readUint8();\n            value = value + ((byte & 127) << shift);\n        }\n        return value;\n    }\n\n    readNumber(): number {\n        const result = this.msg.getFloat64(this.offset);\n        this.offset += 8;\n        return result;\n    }\n\n    readString(): string {\n        const len = this.readUint32();\n        const sliceOffset = this.offset - this.buffer.byteOffset;\n        const result = this.decodeString(this.buffer.slice(sliceOffset, sliceOffset + len));\n        this.offset += len;\n        return result;\n    }\n\n    private decodeString(buf: Uint8Array): string {\n        return this.decoder.decode(buf);\n    }\n\n    readBytes(): Uint8Array {\n        const length = this.readLength();\n        const sliceOffset = this.offset - this.buffer.byteOffset;\n        const result = this.buffer.slice(sliceOffset, sliceOffset + length);\n        this.offset += length;\n        return result;\n    }\n\n    sliceAtReadPosition(): ReadBuffer {\n        const sliceOffset = this.offset - this.buffer.byteOffset;\n        return new Uint8ArrayReadBuffer(this.buffer, sliceOffset);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable } from 'inversify';\nimport { CancellationToken } from './cancellation';\nimport { nls } from './nls';\n\nexport const messageServicePath = '/services/messageService';\n\nexport enum MessageType {\n    Error = 1,\n    Warning = 2,\n    Info = 3,\n    Log = 4,\n    Progress = 5\n}\n\nexport interface Message {\n    /**\n     * Type of the message, i.e. error, warning, info, etc.\n     */\n    readonly type?: MessageType;\n    /**\n     * Message text.\n     */\n    readonly text: string;\n    /**\n     * Actions offered to the user in the context of the message.\n     */\n    readonly actions?: string[];\n    /**\n     * Additional options.\n     */\n    readonly options?: MessageOptions;\n    readonly source?: string;\n}\n\nexport interface ProgressMessage extends Message {\n    readonly type?: MessageType.Progress;\n    readonly options?: ProgressMessageOptions;\n}\nexport namespace ProgressMessage {\n    export const Cancel = nls.localizeByDefault('Cancel');\n    export function isCancelable(message: ProgressMessage): boolean {\n        return !!message.options?.cancelable;\n    }\n}\n\nexport interface MessageOptions {\n    /**\n     * Timeout in milliseconds.\n     * `0` and negative values are treated as no timeout.\n     */\n    readonly timeout?: number;\n}\n\nexport interface ProgressMessageOptions extends MessageOptions {\n    /**\n     * Default: `false`\n     */\n    readonly cancelable?: boolean;\n    /**\n     * Known values: `notification` | `window` | `scm`\n     */\n    readonly location?: string;\n}\n\nexport interface Progress {\n    /**\n     * Unique progress id.\n     */\n    readonly id: string;\n    /**\n     * Update the current progress.\n     *\n     * @param update the data to update.\n     */\n    readonly report: (update: ProgressUpdate) => void;\n    /**\n     * Cancel or complete the current progress.\n     */\n    readonly cancel: () => void;\n    /**\n     * Result of the progress.\n     *\n     * @returns a promise which resolves to either 'Cancel', an alternative action or `undefined`.\n     */\n    readonly result: Promise<string | undefined>;\n}\n\nexport interface ProgressUpdate {\n    /**\n     * Updated message for the progress.\n     */\n    readonly message?: string;\n    /**\n     * Updated ratio between steps done so far and total number of steps.\n     */\n    readonly work?: { done: number, total: number };\n}\n\n@injectable()\nexport class MessageClient {\n\n    /**\n     * Show a message of the given type and possible actions to the user.\n     * Resolve to a chosen action.\n     * Never reject.\n     *\n     * To be implemented by an extension, e.g. by the messages extension.\n     */\n    showMessage(message: Message): Promise<string | undefined> {\n        console.info(message.text);\n        return Promise.resolve(undefined);\n    }\n\n    /**\n     * Show a progress message with possible actions to user.\n     *\n     * To be implemented by an extension, e.g. by the messages extension.\n     */\n    showProgress(progressId: string, message: ProgressMessage, cancellationToken: CancellationToken): Promise<string | undefined> {\n        console.info(message.text);\n        return Promise.resolve(undefined);\n    }\n\n    /**\n     * Update a previously created progress message.\n     *\n     * To be implemented by an extension, e.g. by the messages extension.\n     */\n    reportProgress(progressId: string, update: ProgressUpdate, message: ProgressMessage, cancellationToken: CancellationToken): Promise<void> {\n        return Promise.resolve(undefined);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from 'inversify';\nimport {\n    MessageClient,\n    MessageType,\n    MessageOptions,\n    Progress,\n    ProgressUpdate,\n    ProgressMessage\n} from './message-service-protocol';\nimport { CancellationTokenSource } from './cancellation';\n\n/**\n * Service to log and categorize messages, show progress information and offer actions.\n *\n * The messages are processed by this service and forwarded to an injected {@link MessageClient}.\n * For example \"@theia/messages\" provides such a client, rendering messages as notifications\n * in the frontend.\n *\n * ### Example usage\n *\n * ```typescript\n *   @inject(MessageService)\n *   protected readonly messageService: MessageService;\n *\n *   messageService.warn(\"Typings not available\");\n *\n *   messageService.error(\"Could not restore state\", [\"Rollback\", \"Ignore\"])\n *   .then(action => action === \"Rollback\" && rollback());\n * ```\n */\n@injectable()\nexport class MessageService {\n\n    constructor(\n        @inject(MessageClient) protected readonly client: MessageClient\n    ) { }\n\n    /**\n     * Logs the message and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    log<T extends string>(message: string, ...actions: T[]): Promise<T | undefined>;\n    /**\n     * Logs the message and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param options additional options. Can be omitted\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    log<T extends string>(message: string, options?: MessageOptions, ...actions: T[]): Promise<T | undefined>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    log(message: string, ...args: any[]): Promise<string | undefined> {\n        return this.processMessage(MessageType.Log, message, args);\n    }\n\n    /**\n     * Logs the message as \"info\" and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    info<T extends string>(message: string, ...actions: T[]): Promise<T | undefined>;\n    /**\n     * Logs the message as \"info\" and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param options additional options. Can be omitted\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    info<T extends string>(message: string, options?: MessageOptions, ...actions: T[]): Promise<T | undefined>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    info(message: string, ...args: any[]): Promise<string | undefined> {\n        return this.processMessage(MessageType.Info, message, args);\n    }\n\n    /**\n     * Logs the message as \"warning\" and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    warn<T extends string>(message: string, ...actions: T[]): Promise<T | undefined>;\n    /**\n     * Logs the message as \"warning\" and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param options additional options. Can be omitted\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    warn<T extends string>(message: string, options?: MessageOptions, ...actions: T[]): Promise<T | undefined>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    warn(message: string, ...args: any[]): Promise<string | undefined> {\n        return this.processMessage(MessageType.Warning, message, args);\n    }\n\n    /**\n     * Logs the message as \"error\" and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    error<T extends string>(message: string, ...actions: T[]): Promise<T | undefined>;\n    /**\n     * Logs the message as \"error\" and, if given, offers actions to act on it.\n     * @param message the message to log.\n     * @param options additional options. Can be omitted\n     * @param actions the actions to offer. Can be omitted.\n     *\n     * @returns the selected action if there is any, `undefined` when there was no action or none was selected.\n     */\n    error<T extends string>(message: string, options?: MessageOptions, ...actions: T[]): Promise<T | undefined>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error(message: string, ...args: any[]): Promise<string | undefined> {\n        return this.processMessage(MessageType.Error, message, args);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected processMessage(type: MessageType, text: string, args?: any[]): Promise<string | undefined> {\n        if (!!args && args.length > 0) {\n            const first = args[0];\n            const actions = Array.from(new Set<string>(args.filter(a => typeof a === 'string')));\n            const options = (typeof first === 'object' && !Array.isArray(first))\n                ? <MessageOptions>first\n                : undefined;\n            return this.client.showMessage({ type, options, text, actions });\n        }\n        return this.client.showMessage({ type, text });\n    }\n\n    /**\n     * Shows the given message as a progress.\n     *\n     * @param message the message to show for the progress.\n     * @param onDidCancel an optional callback which will be invoked if the progress indicator was canceled.\n     *\n     * @returns a promise resolving to a {@link Progress} object with which the progress can be updated.\n     *\n     * ### Example usage\n     *\n     * ```typescript\n     *   @inject(MessageService)\n     *   protected readonly messageService: MessageService;\n     *\n     *   // this will show \"Progress\" as a cancelable message\n     *   this.messageService.showProgress({text: 'Progress'});\n     *\n     *   // this will show \"Rolling back\" with \"Cancel\" and an additional \"Skip\" action\n     *   this.messageService.showProgress({\n     *     text: `Rolling back`,\n     *     actions: [\"Skip\"],\n     *   },\n     *   () => console.log(\"canceled\"))\n     *   .then((progress) => {\n     *     // register if interested in the result (only necessary for custom actions)\n     *     progress.result.then((result) => {\n     *       // will be 'Cancel', 'Skip' or `undefined`\n     *       console.log(\"result is\", result);\n     *     });\n     *     progress.report({message: \"Cleaning references\", work: {done: 10, total: 100}});\n     *     progress.report({message: \"Restoring previous state\", work: {done: 80, total: 100}});\n     *     progress.report({message: \"Complete\", work: {done: 100, total: 100}});\n     *     // we are done so we can cancel the progress message, note that this will also invoke `onDidCancel`\n     *     progress.cancel();\n     *   });\n     * ```\n     */\n    async showProgress(message: ProgressMessage, onDidCancel?: () => void): Promise<Progress> {\n        const id = this.newProgressId();\n        const cancellationSource = new CancellationTokenSource();\n        const report = (update: ProgressUpdate) => {\n            this.client.reportProgress(id, update, message, cancellationSource.token);\n        };\n        const type = message.type ?? MessageType.Progress;\n        const actions = new Set<string>(message.actions);\n        if (ProgressMessage.isCancelable(message)) {\n            actions.delete(ProgressMessage.Cancel);\n            actions.add(ProgressMessage.Cancel);\n        }\n        const clientMessage = { ...message, type, actions: Array.from(actions) };\n        const result = this.client.showProgress(id, clientMessage, cancellationSource.token);\n        if (ProgressMessage.isCancelable(message) && typeof onDidCancel === 'function') {\n            result.then(value => {\n                if (value === ProgressMessage.Cancel) {\n                    onDidCancel();\n                }\n            });\n        }\n        return {\n            id,\n            cancel: () => cancellationSource.cancel(),\n            result,\n            report\n        };\n    }\n\n    private progressIdPrefix = Math.random().toString(36).substring(5);\n    private counter = 0;\n    protected newProgressId(): string {\n        return `${this.progressIdPrefix}-${++this.counter}`;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { ILogger } from '../../common';\n\nexport interface ResolvedConnectionErrorHandlerOptions {\n    readonly serverName: string\n    readonly logger: ILogger\n    /**\n     * The maximum amount of errors allowed before stopping the server.\n     */\n    readonly maxErrors: number\n    /**\n     * The minimum amount of restarts allowed in the restart interval.\n     */\n    readonly maxRestarts: number\n    /**\n     * In minutes.\n     */\n    readonly restartInterval: number\n}\n\nexport type ConnectionErrorHandlerOptions = Partial<ResolvedConnectionErrorHandlerOptions> & {\n    readonly serverName: string\n    readonly logger: ILogger\n};\n\nexport class ConnectionErrorHandler {\n\n    protected readonly options: ResolvedConnectionErrorHandlerOptions;\n    constructor(options: ConnectionErrorHandlerOptions) {\n        this.options = {\n            maxErrors: 3,\n            maxRestarts: 5,\n            restartInterval: 3,\n            ...options\n        };\n    }\n\n    shouldStop(error: Error, count?: number): boolean {\n        return !count || count > this.options.maxErrors;\n    }\n\n    protected readonly restarts: number[] = [];\n    shouldRestart(): boolean {\n        this.restarts.push(Date.now());\n        if (this.restarts.length <= this.options.maxRestarts) {\n            return true;\n        }\n        const diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\n        if (diff <= this.options.restartInterval * 60 * 1000) {\n            // eslint-disable-next-line max-len\n            this.options.logger.error(`The ${this.options.serverName} server crashed ${this.options.maxRestarts} times in the last ${this.options.restartInterval} minutes. The server will not be restarted.`);\n            return false;\n        }\n        this.restarts.shift();\n        return true;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Channel } from '../message-rpc/channel';\n\nexport const ConnectionHandler = Symbol('ConnectionHandler');\n\nexport interface ConnectionHandler {\n    readonly path: string;\n    onConnection(connection: Channel): void;\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './handler';\nexport * from './proxy-factory';\nexport * from './connection-error-handler';\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { ResponseError } from '../message-rpc/rpc-message-encoder';\nimport { ApplicationError } from '../application-error';\nimport { Disposable } from '../disposable';\nimport { Emitter, Event } from '../event';\nimport { Channel } from '../message-rpc/channel';\nimport { RequestHandler, RpcProtocol } from '../message-rpc/rpc-protocol';\nimport { ConnectionHandler } from './handler';\nimport { Deferred } from '../promise-util';\nimport { decorate, injectable, unmanaged } from '../../../shared/inversify';\n\nexport type RpcServer<Client> = Disposable & {\n    /**\n     * If this server is a proxy to a remote server then\n     * a client is used as a local object\n     * to handle RPC messages from the remote server.\n     */\n    setClient(client: Client | undefined): void;\n    getClient?(): Client | undefined;\n};\n\nexport interface RpcConnectionEventEmitter {\n    readonly onDidOpenConnection: Event<void>;\n    readonly onDidCloseConnection: Event<void>;\n}\nexport type RpcProxy<T> = T & RpcConnectionEventEmitter;\n\nexport class RpcConnectionHandler<T extends object> implements ConnectionHandler {\n    constructor(\n        readonly path: string,\n        readonly targetFactory: (proxy: RpcProxy<T>) => any,\n        readonly factoryConstructor: new () => RpcProxyFactory<T> = RpcProxyFactory\n    ) { }\n\n    onConnection(connection: Channel): void {\n        const factory = new this.factoryConstructor();\n        const proxy = factory.createProxy();\n        factory.target = this.targetFactory(proxy);\n        factory.listen(connection);\n    }\n}\n/**\n * Factory for creating a new {@link RpcProtocol} for a given chanel and {@link RequestHandler}.\n */\nexport type RpcProtocolFactory = (channel: Channel, requestHandler: RequestHandler) => RpcProtocol;\n\nconst defaultRpcProtocolFactory: RpcProtocolFactory = (channel, requestHandler) => new RpcProtocol(channel, requestHandler);\n\n/**\n * Factory for RPC proxy objects.\n *\n * A RPC proxy exposes the programmatic interface of an object through\n * Theia's RPC protocol. This allows remote programs to call methods of this objects by\n * sending RPC requests. This takes place over a bi-directional stream,\n * where both ends can expose an object and both can call methods on each other'\n * exposed object.\n *\n * For example, assuming we have an object of the following type on one end:\n *\n *     class Foo {\n *         bar(baz: number): number { return baz + 1 }\n *     }\n *\n * which we want to expose through a RPC interface.  We would do:\n *\n *     let target = new Foo()\n *     let factory = new RpcProxyFactory<Foo>('/foo', target)\n *     factory.onConnection(connection)\n *\n * The party at the other end of the `connection`, in order to remotely call\n * methods on this object would do:\n *\n *     let factory = new RpcProxyFactory<Foo>('/foo')\n *     factory.onConnection(connection)\n *     let proxy = factory.createProxy();\n *     let result = proxy.bar(42)\n *     // result is equal to 43\n *\n * One the wire, it would look like this:\n *\n *     --> { \"type\":\"1\", \"id\": 1, \"method\": \"bar\", \"args\": [42]}\n *     <-- { \"type\":\"3\", \"id\": 1, \"res\": 43}\n *\n * Note that in the code of the caller, we didn't pass a target object to\n * RpcProxyFactory, because we don't want/need to expose an object.\n * If we had passed a target object, the other side could've called methods on\n * it.\n *\n * @param <T> - The type of the object to expose to RPC.\n */\n\nexport class RpcProxyFactory<T extends object> implements ProxyHandler<T> {\n\n    protected readonly onDidOpenConnectionEmitter = new Emitter<void>();\n    protected readonly onDidCloseConnectionEmitter = new Emitter<void>();\n\n    protected rpcDeferred: Deferred<RpcProtocol>;\n\n    /**\n     * Build a new RpcProxyFactory.\n     *\n     * @param target - The object to expose to RPC methods calls.  If this\n     *   is omitted, the proxy won't be able to handle requests, only send them.\n     */\n    constructor(public target?: any, protected rpcProtocolFactory = defaultRpcProtocolFactory) {\n        this.waitForConnection();\n    }\n\n    protected waitForConnection(): void {\n        this.rpcDeferred = new Deferred<RpcProtocol>();\n        this.rpcDeferred.promise.then(protocol => {\n            protocol.channel.onClose(() => {\n                this.onDidCloseConnectionEmitter.fire(undefined);\n                // Wait for connection in case the backend reconnects\n                this.waitForConnection();\n            });\n            this.onDidOpenConnectionEmitter.fire(undefined);\n        });\n    }\n\n    /**\n     * Connect a {@link Channel} to the factory by creating an {@link RpcProtocol} on top of it.\n     *\n     * This protocol will be used to send/receive RPC requests and\n     * responses.\n     */\n    listen(channel: Channel): void {\n        const protocol = this.rpcProtocolFactory(channel, (meth, args) => this.onRequest(meth, ...args));\n        protocol.onNotification(event => this.onNotification(event.method, ...event.args));\n\n        this.rpcDeferred.resolve(protocol);\n    }\n\n    /**\n     * Process an incoming RPC method call.\n     *\n     * onRequest is called when the RPC connection received a method call\n     * request.  It calls the corresponding method on [[target]].\n     *\n     * The return value is a Promise object that is resolved with the return\n     * value of the method call, if it is successful.  The promise is rejected\n     * if the called method does not exist or if it throws.\n     *\n     * @returns A promise of the method call completion.\n     */\n    protected async onRequest(method: string, ...args: any[]): Promise<any> {\n        try {\n            if (this.target) {\n                return await this.target[method](...args);\n            } else {\n                throw new Error(`no target was set to handle ${method}`);\n            }\n        } catch (error) {\n            const e = this.serializeError(error);\n            if (e instanceof ResponseError) {\n                throw e;\n            }\n            const reason = e.message || '';\n            const stack = e.stack || '';\n            console.error(`Request ${method} failed with error: ${reason}`, stack);\n            throw e;\n        }\n    }\n\n    /**\n     * Process an incoming RPC notification.\n     *\n     * Same as [[onRequest]], but called on incoming notifications rather than\n     * methods calls.\n     */\n    protected onNotification(method: string, ...args: any[]): void {\n        if (this.target) {\n            this.target[method](...args);\n        }\n    }\n\n    /**\n     * Create a Proxy exposing the interface of an object of type T.  This Proxy\n     * can be used to do RPC method calls on the remote target object as\n     * if it was local.\n     *\n     * If `T` implements `RpcServer` then a client is used as a target object for a remote target object.\n     */\n    createProxy(): RpcProxy<T> {\n        const result = new Proxy<T>(this as any, this);\n        return result as any;\n    }\n\n    /**\n     * Get a callable object that executes a RPC method call.\n     *\n     * Getting a property on the Proxy object returns a callable that, when\n     * called, executes a RPC call.  The name of the property defines the\n     * method to be called.  The callable takes a variable number of arguments,\n     * which are passed in the RPC method call.\n     *\n     * For example, if you have a Proxy object:\n     *\n     *     let fooProxyFactory = RpcProxyFactory<Foo>('/foo')\n     *     let fooProxy = fooProxyFactory.createProxy()\n     *\n     * accessing `fooProxy.bar` will return a callable that, when called,\n     * executes a RPC method call to method `bar`.  Therefore, doing\n     * `fooProxy.bar()` will call the `bar` method on the remote Foo object.\n     *\n     * @param target - unused.\n     * @param p - The property accessed on the Proxy object.\n     * @param receiver - unused.\n     * @returns A callable that executes the RPC call.\n     */\n    get(target: T, p: PropertyKey, receiver: any): any {\n        if (p === 'setClient') {\n            return (client: any) => {\n                this.target = client;\n            };\n        }\n        if (p === 'getClient') {\n            return () => this.target;\n        }\n        if (p === 'onDidOpenConnection') {\n            return this.onDidOpenConnectionEmitter.event;\n        }\n        if (p === 'onDidCloseConnection') {\n            return this.onDidCloseConnectionEmitter.event;\n        }\n        if (p === 'then') {\n            // Prevent inversify from identifying this proxy as a promise object.\n            return undefined;\n        }\n        const isNotify = this.isNotification(p);\n        return (...args: any[]) => {\n            const method = p.toString();\n            const capturedError = new Error(`Request '${method}' failed`);\n            return this.rpcDeferred.promise.then(connection =>\n                new Promise<void>((resolve, reject) => {\n                    try {\n                        if (isNotify) {\n                            connection.sendNotification(method, args);\n                            resolve(undefined);\n                        } else {\n                            const resultPromise = connection.sendRequest(method, args) as Promise<any>;\n                            resultPromise\n                                .catch((err: any) => reject(this.deserializeError(capturedError, err)))\n                                .then((result: any) => resolve(result));\n                        }\n                    } catch (err) {\n                        reject(err);\n                    }\n                })\n            );\n        };\n    }\n\n    /**\n     * Return whether the given property represents a notification.\n     *\n     * A property leads to a notification rather than a method call if its name\n     * begins with `notify` or `on`.\n     *\n     * @param p - The property being called on the proxy.\n     * @return Whether `p` represents a notification.\n     */\n    protected isNotification(p: PropertyKey): boolean {\n        return p.toString().startsWith('notify') || p.toString().startsWith('on');\n    }\n\n    protected serializeError(e: any): any {\n        if (ApplicationError.is(e)) {\n            return new ResponseError(e.code, '',\n                Object.assign({ kind: 'application' }, e.toJson())\n            );\n        }\n        return e;\n    }\n    protected deserializeError(capturedError: Error, e: any): any {\n        if (e instanceof ResponseError) {\n            const capturedStack = capturedError.stack || '';\n            if (e.data && e.data.kind === 'application') {\n                const { stack, data, message } = e.data;\n                return ApplicationError.fromJson(e.code, {\n                    message: message || capturedError.message,\n                    data,\n                    stack: `${capturedStack}\\nCaused by: ${stack}`\n                });\n            }\n            e.stack = capturedStack;\n        }\n        return e;\n    }\n\n}\n\n/**\n * @deprecated since 1.39.0 use `RpcConnectionEventEmitter` instead\n */\nexport type JsonRpcConnectionEventEmitter = RpcConnectionEventEmitter;\n\n/**\n * @deprecated since 1.39.0 use `RpcServer` instead\n */\nexport type JsonRpcServer<Client> = RpcServer<Client>;\n\n/**\n * @deprecated since 1.39.0 use `RpcProxy` instead\n */\nexport type JsonRpcProxy<T> = RpcProxy<T>;\n\n/**\n * @deprecated since 1.39.0 use `RpcConnectionHandler` instead\n */\nexport class JsonRpcConnectionHandler<T extends object> extends RpcConnectionHandler<T> {\n\n}\n\n/**\n * @deprecated since 1.39.0 use `RpcProxyFactory` instead\n */\nexport class JsonRpcProxyFactory<T extends object> extends RpcProxyFactory<T> {\n\n}\n\n// eslint-disable-next-line deprecation/deprecation\ndecorate(injectable(), JsonRpcProxyFactory);\n// eslint-disable-next-line deprecation/deprecation\ndecorate(unmanaged(), JsonRpcProxyFactory, 0);\n\n","// *****************************************************************************\n// Copyright (C) 2021 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { FormatType, Localization } from './i18n/localization';\n\nexport namespace nls {\n\n    export let localization: Localization | undefined;\n\n    export const defaultLocale = 'en';\n\n    export const localeId = 'localeId';\n\n    export const locale = typeof window === 'object' && window && window.localStorage.getItem(localeId) || undefined;\n\n    let keyProvider: LocalizationKeyProvider | undefined;\n\n    /**\n     * Automatically localizes a text if that text also exists in the vscode repository.\n     */\n    export function localizeByDefault(defaultValue: string, ...args: FormatType[]): string {\n        if (localization) {\n            const key = getDefaultKey(defaultValue);\n            if (key) {\n                return localize(key, defaultValue, ...args);\n            } else {\n                console.warn(`Could not find translation key for default value: \"${defaultValue}\"`);\n            }\n        }\n        return Localization.format(defaultValue, args);\n    }\n\n    export function getDefaultKey(defaultValue: string): string {\n        if (!keyProvider) {\n            keyProvider = new LocalizationKeyProvider();\n        }\n        const key = keyProvider.get(defaultValue);\n        if (key) {\n            return key;\n        }\n        return '';\n    }\n\n    export function localize(key: string, defaultValue: string, ...args: FormatType[]): string {\n        return Localization.localize(localization, key, defaultValue, ...args);\n    }\n\n    export function isSelectedLocale(id: string): boolean {\n        if (locale === undefined && id === defaultLocale) {\n            return true;\n        }\n        return locale === id;\n    }\n\n    export function setLocale(id: string): void {\n        window.localStorage.setItem(localeId, id);\n    }\n}\n\ninterface NlsKeys {\n    [key: string]: (string | NlsInfo)[]\n}\n\ninterface NlsInfo {\n    key: string\n    comment: string[]\n}\n\nclass LocalizationKeyProvider {\n\n    private data = this.buildData();\n\n    get(defaultValue: string): string | undefined {\n        const normalized = Localization.normalize(defaultValue);\n        return this.data.get(normalized) || this.data.get(normalized.toUpperCase());\n    }\n\n    /**\n     * Transforms the data coming from the `nls.metadata.json` file into a map.\n     * The original data contains arrays of keys and messages.\n     * The result is a map that matches each message to the key that belongs to it.\n     *\n     * This allows us to skip the key in the localization process and map the original english default values to their translations in different languages.\n     */\n    private buildData(): Map<string, string> {\n        const bundles = require('../../src/common/i18n/nls.metadata.json');\n        const keys: NlsKeys = bundles.keys;\n        const messages: Record<string, string[]> = bundles.messages;\n        const data = new Map<string, string>();\n        const keysAndMessages = this.buildKeyMessageTuples(keys, messages);\n        for (const { key, message } of keysAndMessages) {\n            data.set(message, key);\n        }\n        // Second pass adds each message again in upper case, if the message doesn't already exist in upper case\n        // The second pass is needed to not accidentally override any translations which actually use the upper case message\n        for (const { key, message } of keysAndMessages) {\n            const upperMessage = message.toUpperCase();\n            if (!data.has(upperMessage)) {\n                data.set(upperMessage, key);\n            }\n        }\n        return data;\n    }\n\n    private buildKeyMessageTuples(keys: NlsKeys, messages: Record<string, string[]>): { key: string, message: string }[] {\n        const list: { key: string, message: string }[] = [];\n        for (const [fileKey, messageBundle] of Object.entries(messages)) {\n            const keyBundle = keys[fileKey];\n            for (let i = 0; i < messageBundle.length; i++) {\n                const message = Localization.normalize(messageBundle[i]);\n                const key = keyBundle[i];\n                const localizationKey = this.buildKey(typeof key === 'string' ? key : key.key, fileKey);\n                list.push({\n                    key: localizationKey,\n                    message\n                });\n            }\n        }\n        return list;\n    }\n\n    private buildKey(key: string, filepath: string): string {\n        return `vscode/${Localization.transformKey(filepath)}/${key}`;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/**\n * The maximum safe integer (`2^32-1`) is used as a placeholder for large numbers which are not allowed to be floats.\n * For example as line/column arguments for monaco-ranges.\n */\nexport const MAX_SAFE_INTEGER = 2147483647;\n","// *****************************************************************************\n// Copyright (C) 2018 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { isObject, isUndefined } from './types';\n\nexport function deepClone<T>(obj: T): T {\n    if (!isObject(obj)) {\n        return obj;\n    }\n    if (obj instanceof RegExp) {\n        return obj;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const result: any = Array.isArray(obj) ? [] : {};\n    Object.keys(obj).forEach((key: string) => {\n        const prop = obj[key];\n        if (isObject(prop)) {\n            result[key] = deepClone(prop);\n        } else {\n            result[key] = prop;\n        }\n    });\n    return result;\n}\n\nexport function deepFreeze<T>(obj: T): T {\n    if (!isObject(obj)) {\n        return obj;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const stack: any[] = [obj];\n    while (stack.length > 0) {\n        const objectToFreeze = stack.shift();\n        Object.freeze(objectToFreeze);\n        for (const key in objectToFreeze) {\n            if (_hasOwnProperty.call(objectToFreeze, key)) {\n                const prop = objectToFreeze[key];\n                if (isObject(prop) && !Object.isFrozen(prop)) {\n                    stack.push(prop);\n                }\n            }\n        }\n    }\n    return obj;\n}\n\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function notEmpty<T>(arg: T | undefined | null): arg is T {\n    // eslint-disable-next-line no-null/no-null\n    return arg !== undefined && arg !== null;\n}\n\n/**\n * `true` if the argument is an empty object. Otherwise, `false`.\n */\nexport function isEmpty(arg: Object): boolean {\n    return Object.keys(arg).length === 0 && arg.constructor === Object;\n}\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.76.0/src/vs/base/common/objects.ts#L45-L83\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function cloneAndChange(obj: any, changer: (orig: any) => any, seen: Set<any>): any {\n    // impossible to clone an undefined or null object\n    // eslint-disable-next-line no-null/no-null\n    if (isUndefined(obj) || obj === null) {\n        return obj;\n    }\n\n    const changed = changer(obj);\n    if (!isUndefined(changed)) {\n        return changed;\n    }\n\n    if (Array.isArray(obj)) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const r1: any[] = [];\n        for (const e of obj) {\n            r1.push(cloneAndChange(e, changer, seen));\n        }\n        return r1;\n    }\n\n    if (isObject(obj)) {\n        if (seen.has(obj)) {\n            throw new Error('Cannot clone recursive data-structure');\n        }\n        seen.add(obj);\n        const r2 = {};\n        for (const i2 in obj) {\n            if (_hasOwnProperty.call(obj, i2)) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                (r2 as any)[i2] = cloneAndChange(obj[i2], changer, seen);\n            }\n        }\n        seen.delete(obj);\n        return r2;\n    }\n\n    return obj;\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nfunction is(userAgent: string, platform: string): boolean {\n    if (typeof navigator !== 'undefined') {\n        if (navigator.userAgent && navigator.userAgent.indexOf(userAgent) >= 0) {\n            return true;\n        }\n    }\n    if (typeof process !== 'undefined') {\n        return (process.platform === platform);\n    }\n    return false;\n}\n\nexport const isWindows = is('Windows', 'win32');\nexport const isOSX = is('Mac', 'darwin');\n\nexport const EOL = isWindows ? '\\r\\n' : '\\n';\n\nexport type CMD = [string, string[]];\nexport function cmd(command: string, ...args: string[]): CMD {\n    return [\n        isWindows ? 'cmd' : command,\n        isWindows ? ['/c', command, ...args] : args\n    ];\n}\n\nexport namespace OS {\n\n    /**\n     * Enumeration of the supported operating systems.\n     */\n    export enum Type {\n        Windows = 'Windows',\n        Linux = 'Linux',\n        OSX = 'OSX'\n    }\n\n    /**\n     * Returns with the type of the operating system. If it is neither [Windows](isWindows) nor [OS X](isOSX), then\n     * it always return with the `Linux` OS type.\n     */\n    export function type(): OS.Type {\n        if (isWindows) {\n            return Type.Windows;\n        }\n        if (isOSX) {\n            return Type.OSX;\n        }\n        return Type.Linux;\n    }\n\n    export const backend = {\n        type,\n        isWindows,\n        isOSX,\n        EOL\n    };\n\n}\n\nexport const OSBackendProviderPath = '/os';\n\nexport const OSBackendProvider = Symbol('OSBackendProvider');\n\nexport interface OSBackendProvider {\n    getBackendOS(): Promise<OS.Type>;\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/**\n * On POSIX:\n * \n *           dir             base    \n *                \n *  root                 name  ext \n * \"  /     home/user/dir / file  .txt \"\n * \n *\n * On Windows:\n * \n *            dir            base    \n *                \n *  root                 name  ext \n * \"  /c: / home/user/dir / file  .txt \"\n * \n */\n\nimport { OS } from './os';\n\nexport class Path {\n    static separator: '/' = '/';\n\n    static isDrive(segment: string): boolean {\n        return segment.endsWith(':');\n    }\n\n    /**\n     * vscode-uri always normalizes drive letters to lower case:\n     * https://github.com/Microsoft/vscode-uri/blob/b1d3221579f97f28a839b6f996d76fc45e9964d8/src/index.ts#L1025\n     * Theia path should be adjusted to this.\n     */\n    static normalizeDrive(path: string): string {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* '/' */ && path.charCodeAt(2) === 58 /* ':' */) {\n            const code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `/${String.fromCharCode(code + 32)}:${path.substring(3)}`; // \"/c:\".length === 3\n            }\n        } else if (path.length >= 2 && path.charCodeAt(1) === 58 /* ':' */) {\n            const code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `${String.fromCharCode(code + 32)}:${path.substring(2)}`; // \"c:\".length === 2\n            }\n            if (path.charCodeAt(0) !== 47 /* '/' */) {\n                path = `${String.fromCharCode(47)}${path}`;\n            }\n        }\n        return path;\n    }\n    /**\n     * Normalize path separator to use Path.separator\n     * @param Path candidate to normalize\n     * @returns Normalized string path\n     */\n    static normalizePathSeparator(path: string): string {\n        return path.split(/[\\\\]/).join(Path.separator);\n    }\n\n    /**\n     * Creates a windows path from the given path string.\n     * A windows path uses an upper case drive letter and backwards slashes.\n     * @param path The input path\n     * @returns Windows style path\n     */\n    static windowsPath(path: string): string {\n        const offset = path.charAt(0) === '/' ? 1 : 0;\n        if (path.charAt(offset + 1) === ':') {\n            const driveLetter = path.charAt(offset).toUpperCase();\n            const substring = path.substring(offset + 2).replace(/\\//g, '\\\\');\n            return `${driveLetter}:${substring || '\\\\'}`;\n        }\n        return path.replace(/\\//g, '\\\\');\n    }\n\n    /**\n     * Tildify path, replacing `home` with `~` if user's `home` is present at the beginning of the path.\n     * This is a non-operation for Windows.\n     *\n     * @param resourcePath\n     * @param home\n     */\n    static tildify(resourcePath: string, home: string): string {\n        const path = new Path(resourcePath);\n        const isWindows = path.root && Path.isDrive(path.root.base);\n\n        if (!isWindows && home && resourcePath.indexOf(`${home}/`) === 0) {\n            return resourcePath.replace(`${home}/`, '~/');\n        }\n\n        return resourcePath;\n    }\n\n    /**\n     * Untildify path, replacing `~` with `home` if `~` present at the beginning of the path.\n     * This is a non-operation for Windows.\n     *\n     * @param resourcePath\n     * @param home\n     */\n    static untildify(resourcePath: string, home: string): string {\n        if (resourcePath.startsWith('~')) {\n            const untildifiedResource = resourcePath.replace(/^~/, home);\n            const untildifiedPath = new Path(untildifiedResource);\n            const isWindows = untildifiedPath.root && Path.isDrive(untildifiedPath.root.base);\n            if (!isWindows && home && untildifiedResource.startsWith(`${home}`)) {\n                return untildifiedResource;\n            }\n        }\n        return resourcePath;\n    }\n\n    readonly isAbsolute: boolean;\n    readonly isRoot: boolean;\n    readonly root: Path | undefined;\n    readonly base: string;\n    readonly name: string;\n    readonly ext: string;\n\n    private _dir: Path;\n    private readonly raw: string;\n\n    /**\n     * The raw should be normalized, meaning that only '/' is allowed as a path separator.\n     */\n    constructor(\n        raw: string\n    ) {\n        raw = Path.normalizePathSeparator(raw);\n        this.raw = Path.normalizeDrive(raw);\n        const firstIndex = this.raw.indexOf(Path.separator);\n        const lastIndex = this.raw.lastIndexOf(Path.separator);\n        this.isAbsolute = firstIndex === 0;\n        this.base = lastIndex === -1 ? this.raw : this.raw.substring(lastIndex + 1);\n        this.isRoot = this.isAbsolute && firstIndex === lastIndex && (!this.base || Path.isDrive(this.base));\n        this.root = this.computeRoot();\n\n        const extIndex = this.base.lastIndexOf('.');\n        this.name = extIndex === -1 ? this.base : this.base.substring(0, extIndex);\n        this.ext = extIndex === -1 ? '' : this.base.substring(extIndex);\n    }\n\n    protected computeRoot(): Path | undefined {\n        // '/' -> '/'\n        // '/c:' -> '/c:'\n        if (this.isRoot) {\n            return this;\n        }\n        // 'foo/bar' -> `undefined`\n        if (!this.isAbsolute) {\n            return undefined;\n        }\n        const index = this.raw.indexOf(Path.separator, Path.separator.length);\n        if (index === -1) {\n            // '/foo/bar' -> '/'\n            return new Path(Path.separator);\n        }\n        // '/c:/foo/bar' -> '/c:'\n        // '/foo/bar' -> '/'\n        return new Path(this.raw.substring(0, index)).root;\n    }\n\n    /**\n     * Returns the parent directory if it exists (`hasDir === true`) or `this` otherwise.\n     */\n    get dir(): Path {\n        if (this._dir === undefined) {\n            this._dir = this.computeDir();\n        }\n        return this._dir;\n    }\n\n    /**\n     * Returns `true` if this has a parent directory, `false` otherwise.\n     *\n     * _This implementation returns `true` if and only if this is not the root dir and\n     * there is a path separator in the raw path._\n     */\n    get hasDir(): boolean {\n        return !this.isRoot && this.raw.lastIndexOf(Path.separator) !== -1;\n    }\n\n    protected computeDir(): Path {\n        if (!this.hasDir) {\n            return this;\n        }\n        const lastIndex = this.raw.lastIndexOf(Path.separator);\n        if (this.isAbsolute) {\n            const firstIndex = this.raw.indexOf(Path.separator);\n            if (firstIndex === lastIndex) {\n                return new Path(this.raw.substring(0, firstIndex + 1));\n            }\n        }\n        return new Path(this.raw.substring(0, lastIndex));\n    }\n\n    join(...paths: string[]): Path {\n        const relativePath = paths.filter(s => !!s).join(Path.separator);\n        if (!relativePath) {\n            return this;\n        }\n        if (this.raw.endsWith(Path.separator)) {\n            return new Path(this.raw + relativePath);\n        }\n        return new Path(this.raw + Path.separator + relativePath);\n    }\n\n    /**\n     *\n     * @param paths portions of a path\n     * @returns a new Path if an absolute path can be computed from the segments passed in + this.raw\n     * If no absolute path can be computed, returns undefined.\n     *\n     * Processes the path segments passed in from right to left (reverse order) concatenating until an\n     * absolute path is found.\n     */\n    resolve(...paths: string[]): Path | undefined {\n        const segments = paths.slice().reverse(); // Don't mutate the caller's array.\n        segments.push(this.raw);\n        let result = new Path('');\n        for (const segment of segments) {\n            if (segment) {\n                const next = new Path(segment).join(result.raw);\n                if (next.isAbsolute) {\n                    return next.normalize();\n                }\n                result = next;\n            }\n        }\n    }\n\n    toString(): string {\n        return this.raw;\n    }\n\n    /**\n     * Converts the current path into a file system path.\n     * @param format Determines the format of the path.\n     * If `undefined`, the format will be determined by the `OS.backend.type` value.\n     * @returns A file system path.\n     */\n    fsPath(format?: Path.Format): string {\n        if (format === Path.Format.Windows || (format === undefined && OS.backend.isWindows)) {\n            return Path.windowsPath(this.raw);\n        } else {\n            return this.raw;\n        }\n    }\n\n    relative(path: Path): Path | undefined {\n        if (this.raw === path.raw) {\n            return new Path('');\n        }\n        if (!this.raw || !path.raw) {\n            return undefined;\n        }\n        const raw = this.base ? this.raw + Path.separator : this.raw;\n        if (!path.raw.startsWith(raw)) {\n            return undefined;\n        }\n        const relativePath = path.raw.substring(raw.length);\n        return new Path(relativePath);\n    }\n\n    isEqualOrParent(path: Path): boolean {\n        return !!this.relative(path);\n    }\n\n    relativity(path: Path): number {\n        const relative = this.relative(path);\n        if (relative) {\n            const relativeStr = relative.toString();\n            if (relativeStr === '') {\n                return 0;\n            }\n            return relativeStr.split(Path.separator).length;\n        }\n        return -1;\n    }\n\n    /*\n     * return a normalized Path, resolving '..' and '.' segments\n     */\n    normalize(): Path {\n        const trailingSlash = this.raw.endsWith('/');\n        const pathArray = this.toString().split('/');\n        const resultArray: string[] = [];\n        pathArray.forEach((value, index) => {\n            if (!value || value === '.') {\n                return;\n            }\n            if (value === '..') {\n                if (resultArray.length && resultArray[resultArray.length - 1] !== '..') {\n                    resultArray.pop();\n                } else if (!this.isAbsolute) {\n                    resultArray.push('..');\n                }\n            } else {\n                resultArray.push(value);\n            }\n        });\n        if (resultArray.length === 0) {\n            if (this.isRoot) {\n                return new Path('/');\n            } else {\n                return new Path('.');\n            }\n        }\n        return new Path((this.isAbsolute ? '/' : '') + resultArray.join('/') + (trailingSlash ? '/' : ''));\n    }\n}\n\nexport namespace Path {\n    export enum Format {\n        Posix,\n        Windows\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './measurement';\nexport * from './stopwatch';\nexport * from './measurement-protocol';\n","/********************************************************************************\n* Copyright (c) 2021 STMicroelectronics and others.\n*\n* This program and the accompanying materials are made available under the\n* terms of the Eclipse Public License 2.0 which is available at\n* http://www.eclipse.org/legal/epl-2.0.\n*\n* This Source Code may also be made available under the following Secondary\n* Licenses when the conditions for such availability set forth in the Eclipse\n* Public License v. 2.0 are satisfied: GNU General Public License, version 2\n* with the GNU Classpath Exception which is available at\n* https://www.gnu.org/software/classpath/license.html.\n*\n* SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n*******************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { inject, injectable } from 'inversify';\nimport { Measurement, MeasurementOptions } from './measurement';\nimport { Stopwatch } from './stopwatch';\n\nexport const BackendStopwatch = Symbol('BackendStopwatch');\n\n/** API path of the stopwatch service that exposes the back-end stopwatch to clients. */\nexport const stopwatchPath = '/services/stopwatch';\n\n/** Token representing a remote measurement in the {@link BackendStopwatch} protocol. */\nexport type RemoteMeasurement = number;\n\nexport const BackendStopwatchOptions = Symbol('BackendStopwatchOptions');\n\n/**\n * A service that exposes the back-end's {@link Stopwatch} to clients\n * via the remote API. If you do not need this service then bind or re-bind\n * the {@link NullBackendStopwatch} implementation to this service interface.\n */\nexport interface BackendStopwatch {\n\n    /**\n     * Create a {@link Measurement} that will compute the time that elapsed on the back-end when logged.\n     *\n     * @param name the {@link Measurement.name measurement name}\n     * @param options optional configuration of the new measurement\n     * @returns a token identifying an unique self-timing measurement relative to the back-end's timeline\n     */\n    start(name: string, options?: MeasurementOptions): Promise<RemoteMeasurement>;\n\n    /**\n     * Stop a measurement previously {@link start started} and log in the back-end a measurement of\n     * its duration relative to the back-end's timeline.\n     *\n     * @param measurement token identifying a measurement previously {@link start started}\n     * @param message a message to log\n     * @param messageArgs optional arguments to the `message`\n     */\n    stop(measurement: RemoteMeasurement, message: string, messageArgs: any[]): Promise<void>;\n\n}\n\n/**\n * Default implementation of the (remote) back-end stopwatch service.\n */\n@injectable()\nexport class DefaultBackendStopwatch {\n\n    readonly measurements = new Map<number, Measurement>();\n\n    protected idSequence: number = 0;\n\n    @inject(Stopwatch)\n    protected readonly stopwatch: Stopwatch;\n\n    start(name: string, options?: MeasurementOptions): RemoteMeasurement {\n        const result = ++this.idSequence;\n        this.measurements.set(result, this.stopwatch.start(name, options));\n        return result;\n    }\n\n    stop(measurementToken: RemoteMeasurement, message: string, messageArgs: any[]): void {\n        const measurement = this.measurements.get(measurementToken);\n        if (measurement) {\n            this.measurements.delete(measurementToken);\n            measurement.log(message, ...messageArgs);\n        }\n    }\n\n}\n\n/**\n * No-op implementation of the (remote) back-end stopwatch service.\n */\n@injectable()\nexport class NullBackendStopwatch implements BackendStopwatch {\n\n    start(): Promise<RemoteMeasurement> {\n        return Promise.resolve(0);\n    }\n\n    stop(): Promise<void> {\n        return Promise.resolve();\n    }\n\n}\n","/********************************************************************************\n* Copyright (c) 2021 STMicroelectronics and others.\n*\n* This program and the accompanying materials are made available under the\n* terms of the Eclipse Public License 2.0 which is available at\n* http://www.eclipse.org/legal/epl-2.0.\n*\n* This Source Code may also be made available under the following Secondary\n* Licenses when the conditions for such availability set forth in the Eclipse\n* Public License v. 2.0 are satisfied: GNU General Public License, version 2\n* with the GNU Classpath Exception which is available at\n* https://www.gnu.org/software/classpath/license.html.\n*\n* SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n*******************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { LogLevel } from '../logger';\n\n/**\n * A `Measurement` counts the time elapsed between its creation when the {@link Stopwatch}\n * is {@link Stopwatch.start started} and when it is {@link stop stopped}.\n */\nexport interface Measurement {\n    /**\n     * Compute the elapsed time, in milliseconds, if not already done (only has effect on the first invocation).\n     * A `NaN` result indicates that the watch was stopped but failed to make a measurement.\n     */\n    stop(): number;\n\n    /** The measurement name. This may show up in the performance measurement framework appropriate to the application context. */\n    name: string;\n\n    /**\n     * The elapsed time measured, if it has been {@link stop stopped} and measured, or `NaN` if the platform disabled\n     * performance measurement.\n     */\n    elapsed?: number;\n\n    /**\n     * Compute the elapsed time and log a message annotated with that timing information.\n     * The message is logged at the level determined by the {@link MeasurementOptions}.\n     *\n     * @param detail a message detailing what activity was measured\n     * @param optionalArgs optional message arguments as per the usual console API\n     */\n    log(detail: string, ...optionalArgs: any[]): void;\n\n    /**\n     * Compute the elapsed time and log a debug message annotated with that timing information.\n     *\n     * @param detail a message detailing what activity was measured\n     * @param optionalArgs optional message arguments as per the usual console API\n     */\n    debug(detail: string, ...optionalArgs: any[]): void;\n\n    /**\n     * Compute the elapsed time and log an info message annotated with that timing information.\n     *\n     * @param detail a message detailing what activity was measured\n     * @param optionalArgs optional message arguments as per the usual console API\n     */\n    info(detail: string, ...optionalArgs: any[]): void;\n\n    /**\n     * Compute the elapsed time and log a warning message annotated with that timing information.\n     *\n     * @param detail a message detailing what activity was measured\n     * @param optionalArgs optional message arguments as per the usual console API\n     */\n    warn(detail: string, ...optionalArgs: any[]): void;\n\n    /**\n     * Compute the elapsed time and log an error message annotated with that timing information.\n     *\n     * @param detail a message detailing what activity was measured\n     * @param optionalArgs optional message arguments as per the usual console API\n     */\n    error(detail: string, ...optionalArgs: any[]): void;\n}\n\n/**\n * Optional configuration of a {@link Measurement} specified at the time of its creation.\n */\nexport interface MeasurementOptions {\n    /**\n     * A specific context of the application in which an activity was measured.\n     * Results in logs being emitted with a \"[<context>]\" qualified at the head.\n     */\n    context?: string;\n\n    /** An optional logging level at which to emit the log message. The default value is {@link LogLevel.INFO}. */\n    defaultLogLevel?: LogLevel;\n\n    /**\n     * Some measurements are measured against a threshold (in millis) that they should not exceed.\n     * If omitted, the implied threshold is unlimited time (no threshold).\n     *\n     * @see {@link Stopwatch.startAsync}\n     * @see {@link thresholdLogLevel}\n     */\n    thresholdMillis?: number;\n\n    /**\n     * Flag to indicate whether the stopwatch should store measurement results for later retrieval.\n     * For example the cache can be used to retrieve measurements which were taken during startup before a listener had a chance to register.\n     */\n    storeResults?: boolean\n}\n\n/**\n * Captures the result of a {@link Measurement} in a serializable format.\n */\nexport interface MeasurementResult {\n    /** The measurement name. This may show up in the performance measurement framework appropriate to the application context. */\n    name: string;\n\n    /** The time when the measurement recording has been started */\n    startTime: number;\n\n    /**\n     * The elapsed time measured, if it has been {@link stop stopped} and measured, or `NaN` if the platform disabled\n     * performance measurement.\n     */\n    elapsed: number;\n\n    /** An optional label for the application the start of which (in real time) is the basis of all measurements. */\n    owner?: string;\n}\n","/********************************************************************************\n* Copyright (c) 2021 STMicroelectronics and others.\n*\n* This program and the accompanying materials are made available under the\n* terms of the Eclipse Public License 2.0 which is available at\n* http://www.eclipse.org/legal/epl-2.0.\n*\n* This Source Code may also be made available under the following Secondary\n* Licenses when the conditions for such availability set forth in the Eclipse\n* Public License v. 2.0 are satisfied: GNU General Public License, version 2\n* with the GNU Classpath Exception which is available at\n* https://www.gnu.org/software/classpath/license.html.\n*\n* SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n*******************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { inject, injectable } from 'inversify';\nimport { ILogger, LogLevel } from '../logger';\nimport { MaybePromise } from '../types';\nimport { Measurement, MeasurementOptions, MeasurementResult } from './measurement';\nimport { Emitter, Event } from '../event';\n\n/** The default log level for measurements that are not otherwise configured with a default. */\nconst DEFAULT_LOG_LEVEL = LogLevel.INFO;\n\n/**\n * Configuration of the log messages written by a {@link Measurement}.\n */\ninterface LogOptions extends MeasurementOptions {\n    /** A function that computes the current time, in millis, since the start of the application. */\n    now: () => number;\n\n    /** An optional label for the application the start of which (in real time) is the basis of all measurements. */\n    owner?: string;\n\n    /** An optional log level to override any default or dynamic log level for a specific log message. */\n    levelOverride?: LogLevel;\n\n    /** Optional arguments to the log message. The 'optionalArgs' coming in from the {@link Measurement} API are slotted in here. */\n    arguments?: any[];\n}\n\n/**\n * A factory of {@link Measurement}s for performance logging.\n */\n@injectable()\nexport abstract class Stopwatch {\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    protected _storedMeasurements: MeasurementResult[] = [];\n\n    protected onDidAddMeasurementResultEmitter = new Emitter<MeasurementResult>();\n    get onDidAddMeasurementResult(): Event<MeasurementResult> {\n        return this.onDidAddMeasurementResultEmitter.event;\n    }\n\n    constructor(protected readonly defaultLogOptions: LogOptions) {\n        if (!defaultLogOptions.defaultLogLevel) {\n            defaultLogOptions.defaultLogLevel = DEFAULT_LOG_LEVEL;\n        }\n        if (defaultLogOptions.storeResults === undefined) {\n            defaultLogOptions.storeResults = true;\n        }\n    }\n\n    /**\n     * Create a {@link Measurement} that will compute its elapsed time when logged.\n     *\n     * @param name the {@link Measurement.name measurement name}\n     * @param options optional configuration of the new measurement\n     * @returns a self-timing measurement\n     */\n    public abstract start(name: string, options?: MeasurementOptions): Measurement;\n\n    /**\n     * Wrap an asynchronous function in a {@link Measurement} that logs itself on completion.\n     * If obtaining and awaiting the `computation` runs too long according to the threshold\n     * set in the `options`, then the log message is a warning, otherwise a debug log.\n     *\n     * @param name the {@link Measurement.name name of the measurement} to wrap around the function\n     * @param description a description of what the function does, to be included in the log\n     * @param computation a supplier of the asynchronous function to wrap\n     * @param options optional addition configuration as for {@link measure}\n     * @returns the wrapped `computation`\n     *\n     * @see {@link MeasurementOptions.thresholdMillis}\n     */\n    public async startAsync<T>(name: string, description: string, computation: () => MaybePromise<T>, options?: MeasurementOptions): Promise<T> {\n        const threshold = options?.thresholdMillis ?? Number.POSITIVE_INFINITY;\n\n        const measure = this.start(name, options);\n        const result = await computation();\n        if (measure.stop() > threshold) {\n            measure.warn(`${description} took longer than the expected maximum ${threshold} milliseconds`);\n        } else {\n            measure.log(description);\n        }\n        return result;\n    }\n\n    protected createMeasurement(name: string, measure: () => { startTime: number, duration: number }, options?: MeasurementOptions): Measurement {\n        const logOptions = this.mergeLogOptions(options);\n\n        const measurement: Measurement = {\n            name,\n            stop: () => {\n                if (measurement.elapsed === undefined) {\n                    const { startTime, duration } = measure();\n                    measurement.elapsed = duration;\n                    const result: MeasurementResult = {\n                        name,\n                        elapsed: duration,\n                        startTime,\n                        owner: logOptions.owner\n                    };\n                    if (logOptions.storeResults) {\n                        this._storedMeasurements.push(result);\n                    }\n                    this.onDidAddMeasurementResultEmitter.fire(result);\n                }\n                return measurement.elapsed;\n            },\n            log: (activity: string, ...optionalArgs: any[]) => this.log(measurement, activity, this.atLevel(logOptions, undefined, optionalArgs)),\n            debug: (activity: string, ...optionalArgs: any[]) => this.log(measurement, activity, this.atLevel(logOptions, LogLevel.DEBUG, optionalArgs)),\n            info: (activity: string, ...optionalArgs: any[]) => this.log(measurement, activity, this.atLevel(logOptions, LogLevel.INFO, optionalArgs)),\n            warn: (activity: string, ...optionalArgs: any[]) => this.log(measurement, activity, this.atLevel(logOptions, LogLevel.WARN, optionalArgs)),\n            error: (activity: string, ...optionalArgs: any[]) => this.log(measurement, activity, this.atLevel(logOptions, LogLevel.ERROR, optionalArgs)),\n        };\n\n        return measurement;\n    }\n\n    protected mergeLogOptions(logOptions?: Partial<LogOptions>): LogOptions {\n        const result: LogOptions = { ...this.defaultLogOptions };\n        if (logOptions) {\n            Object.assign(result, logOptions);\n        }\n        return result;\n    }\n\n    protected atLevel(logOptions: LogOptions, levelOverride?: LogLevel, optionalArgs?: any[]): LogOptions {\n        return { ...logOptions, levelOverride, arguments: optionalArgs };\n    }\n\n    protected logLevel(elapsed: number, options?: Partial<LogOptions>): LogLevel {\n        if (options?.levelOverride) {\n            return options.levelOverride;\n        }\n\n        return options?.defaultLogLevel ?? this.defaultLogOptions.defaultLogLevel ?? DEFAULT_LOG_LEVEL;\n    }\n\n    protected log(measurement: Measurement, activity: string, options: LogOptions): void {\n        const elapsed = measurement.stop();\n        const level = this.logLevel(elapsed, options);\n\n        if (Number.isNaN(elapsed)) {\n            switch (level) {\n                case LogLevel.ERROR:\n                case LogLevel.FATAL:\n                    // Always log errors, even if NaN duration from native API preventing a measurement\n                    break;\n                default:\n                    // Measurement was prevented by native API, do not log NaN duration\n                    return;\n            }\n        }\n\n        const start = options.owner ? `${options.owner} start` : 'start';\n        const timeFromStart = `Finished ${(options.now() / 1000).toFixed(3)} s after ${start}`;\n        const whatWasMeasured = options.context ? `[${options.context}] ${activity}` : activity;\n        this.logger.log(level, `${whatWasMeasured}: ${elapsed.toFixed(1)} ms [${timeFromStart}]`, ...(options.arguments ?? []));\n    }\n\n    get storedMeasurements(): ReadonlyArray<MeasurementResult> {\n        return this._storedMeasurements;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2023 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport type { MaybeArray, MaybePromise } from './types';\n\nexport interface Prioritizeable<T> {\n    readonly priority: number;\n    readonly value: T;\n}\nexport namespace Prioritizeable {\n    export type GetPriority<T> = (value: T) => MaybePromise<number>;\n    export type GetPrioritySync<T> = (value: T) => number;\n    export async function toPrioritizeable<T>(rawValue: MaybePromise<T>, getPriority: GetPriority<T>): Promise<Prioritizeable<T>>;\n    export async function toPrioritizeable<T>(rawValue: MaybePromise<T>[], getPriority: GetPriority<T>): Promise<Prioritizeable<T>[]>;\n    export async function toPrioritizeable<T>(rawValue: MaybeArray<MaybePromise<T>>, getPriority: GetPriority<T>): Promise<MaybeArray<Prioritizeable<T>>> {\n        if (rawValue instanceof Array) {\n            return Promise.all(\n                rawValue.map(v => toPrioritizeable(v, getPriority))\n            );\n        }\n        const value = await rawValue;\n        const priority = await getPriority(value);\n        return { priority, value };\n    }\n    export function toPrioritizeableSync<T>(rawValue: T[], getPriority: GetPrioritySync<T>): Prioritizeable<T>[] {\n        return rawValue.map(v => ({\n            value: v,\n            priority: getPriority(v)\n        }));\n    }\n    export function prioritizeAllSync<T>(values: T[], getPriority: GetPrioritySync<T>): Prioritizeable<T>[] {\n        const prioritizeable = toPrioritizeableSync(values, getPriority);\n        return prioritizeable.filter(isValid).sort(compare);\n    }\n    export async function prioritizeAll<T>(values: MaybePromise<T>[], getPriority: GetPriority<T>): Promise<Prioritizeable<T>[]> {\n        const prioritizeable = await toPrioritizeable(values, getPriority);\n        return prioritizeable.filter(isValid).sort(compare);\n    }\n    export function isValid<T>(p: Prioritizeable<T>): boolean {\n        return p.priority > 0;\n    }\n    export function compare<T>(p: Prioritizeable<T>, p2: Prioritizeable<T>): number {\n        return p2.priority - p.priority;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport {\n    ProgressUpdate,\n    ProgressMessage\n} from './message-service-protocol';\nimport { CancellationToken } from './cancellation';\n\nexport const ProgressClient = Symbol('ProgressClient');\nexport interface ProgressClient {\n\n    /**\n     * Show a progress message with possible actions to user.\n     */\n    showProgress(progressId: string, message: ProgressMessage, cancellationToken: CancellationToken): Promise<string | undefined>;\n\n    /**\n     * Update a previously created progress message.\n     */\n    reportProgress(progressId: string, update: ProgressUpdate, message: ProgressMessage, cancellationToken: CancellationToken): Promise<void>;\n}\n","// *****************************************************************************\n// Copyright (C) 2019 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject } from 'inversify';\nimport {\n    Progress,\n    ProgressUpdate,\n    ProgressMessage\n} from './message-service-protocol';\nimport { CancellationTokenSource } from './cancellation';\nimport { ProgressClient } from './progress-service-protocol';\nimport { MessageService } from './message-service';\n\n@injectable()\nexport class ProgressService {\n\n    @inject(ProgressClient) protected readonly client: ProgressClient;\n    @inject(MessageService) protected readonly messageService: MessageService;\n\n    async showProgress(message: ProgressMessage, onDidCancel?: () => void): Promise<Progress> {\n        if (this.shouldDelegate(message)) {\n            return this.messageService.showProgress(message, onDidCancel);\n        }\n        const id = this.newProgressId();\n        const cancellationSource = new CancellationTokenSource();\n        const report = (update: ProgressUpdate) => {\n            this.client.reportProgress(id, update, message, cancellationSource.token);\n        };\n        const actions = new Set<string>(message.actions);\n        if (ProgressMessage.isCancelable(message)) {\n            actions.delete(ProgressMessage.Cancel);\n            actions.add(ProgressMessage.Cancel);\n        }\n        const clientMessage = { ...message, actions: Array.from(actions) };\n        const result = this.client.showProgress(id, clientMessage, cancellationSource.token);\n        if (ProgressMessage.isCancelable(message) && typeof onDidCancel === 'function') {\n            result.then(value => {\n                if (value === ProgressMessage.Cancel) {\n                    onDidCancel();\n                }\n            });\n        }\n        return {\n            id,\n            cancel: () => cancellationSource.cancel(),\n            result,\n            report\n        };\n    }\n    protected shouldDelegate(message: ProgressMessage): boolean {\n        const location = message.options && message.options.location;\n        return location === 'notification';\n    }\n\n    private progressIdPrefix = Math.random().toString(36).substring(5);\n    private counter = 0;\n    protected newProgressId(): string {\n        return `${this.progressIdPrefix}-${++this.counter}`;\n    }\n\n    async withProgress<T>(text: string, locationId: string, task: () => Promise<T>, onDidCancel?: () => void): Promise<T> {\n        const progress = await this.showProgress({ text, options: { cancelable: true, location: locationId } }, onDidCancel);\n        try {\n            return await task();\n        } finally {\n            progress.cancel();\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Disposable } from './disposable';\nimport { Event } from './event';\nimport { CancellationToken, CancellationError, cancelled } from './cancellation';\nimport { isFunction, isObject } from './types';\n\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nexport class Deferred<T = void> {\n    state: 'resolved' | 'rejected' | 'unresolved' = 'unresolved';\n    resolve: (value: T | PromiseLike<T>) => void;\n    reject: (err?: unknown) => void;\n\n    promise = new Promise<T>((resolve, reject) => {\n        this.resolve = resolve;\n        this.reject = reject;\n    }).then(\n        res => (this.setState('resolved'), res),\n        err => (this.setState('rejected'), Promise.reject(err)),\n    );\n\n    protected setState(state: 'resolved' | 'rejected'): void {\n        if (this.state === 'unresolved') {\n            this.state = state;\n        }\n    }\n}\n\n/**\n * @returns resolves after a specified number of milliseconds\n * @throws cancelled if a given token is cancelled before a specified number of milliseconds\n */\nexport function timeout(ms: number, token = CancellationToken.None): Promise<void> {\n    const deferred = new Deferred<void>();\n    const handle = setTimeout(() => deferred.resolve(), ms);\n    token.onCancellationRequested(() => {\n        clearTimeout(handle);\n        deferred.reject(cancelled());\n    });\n    return deferred.promise;\n}\n\n/**\n * Creates a promise that is rejected after the given amount of time. A typical use case is to wait for another promise until a specified timeout using:\n * ```\n * Promise.race([ promiseToPerform, timeoutReject(timeout, 'Timeout error message') ]);\n * ```\n *\n * @param ms timeout in milliseconds\n * @param message error message on promise rejection\n * @returns rejection promise\n */\nexport function timeoutReject<T>(ms: number, message?: string): Promise<T> {\n    const deferred = new Deferred<T>();\n    setTimeout(() => deferred.reject(new Error(message)), ms);\n    return deferred.promise;\n}\n\nexport async function retry<T>(task: () => Promise<T>, retryDelay: number, retries: number): Promise<T> {\n    let lastError: Error | undefined;\n\n    for (let i = 0; i < retries; i++) {\n        try {\n            return await task();\n        } catch (error) {\n            lastError = error;\n\n            await timeout(retryDelay);\n        }\n    }\n\n    throw lastError;\n}\n\n/**\n * A function to allow a promise resolution to be delayed by a number of milliseconds. Usage is as follows:\n *\n * `const stringValue = await myPromise.then(delay(600)).then(value => value.toString());`\n *\n * @param ms the number of millisecond to delay\n * @returns a function that returns a promise that returns the given value, but delayed\n */\nexport function delay<T>(ms: number): (value: T) => Promise<T> {\n    return value => new Promise((resolve, reject) => { setTimeout(() => resolve(value), ms); });\n}\n\n/**\n * Constructs a promise that will resolve after a given delay.\n * @param ms the number of milliseconds to wait\n */\nexport async function wait(ms: number): Promise<void> {\n    await delay(ms)(undefined);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function waitForEvent<T>(event: Event<T>, ms: number, thisArg?: any, disposables?: Disposable[]): Promise<T> {\n    return new Promise<T>((resolve, reject) => {\n        const registration = setTimeout(() => {\n            listener.dispose();\n            reject(new CancellationError());\n        }, ms);\n\n        const listener = event((evt: T) => {\n            clearTimeout(registration);\n            listener.dispose();\n            resolve(evt);\n        }, thisArg, disposables);\n\n    });\n}\n\nexport function isThenable<T>(obj: unknown): obj is Promise<T> {\n    return isObject<Promise<unknown>>(obj) && isFunction(obj.then);\n}\n\n/**\n * Returns with a promise that waits until the first promise resolves to `true`.\n */\n// Based on https://stackoverflow.com/a/51160727/5529090\nexport function firstTrue(...promises: readonly Promise<boolean>[]): Promise<boolean> {\n    const newPromises = promises.map(promise => new Promise<boolean>(\n        (resolve, reject) => promise.then(result => result && resolve(true), reject)\n    ));\n    newPromises.push(Promise.all(promises).then(() => false));\n    return Promise.race(newPromises);\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport URI from './uri';\nimport * as fuzzy from 'fuzzy';\nimport { Event } from './event';\nimport { KeySequence } from './keys';\nimport { CancellationToken } from './cancellation';\nimport { URI as Uri } from 'vscode-uri';\n\nexport const quickPickServicePath = '/services/quickPick';\nexport const QuickPickService = Symbol('QuickPickService');\nexport interface QuickPickService {\n    show<T extends QuickPickItem>(items: Array<T | QuickPickSeparator>, options?: QuickPickOptions<T>): Promise<T | undefined>;\n    setItems<T extends QuickPickItem>(items: Array<T>): void;\n    hide(): void\n    readonly onDidHide: Event<void>;\n    readonly onDidAccept: Event<void>;\n    readonly onDidChangeValue: Event<{ quickPick: QuickPick<QuickPickItem>, filter: string }>;\n    readonly onDidChangeActive: Event<{ quickPick: QuickPick<QuickPickItem>, activeItems: Array<QuickPickItem> }>;\n    readonly onDidChangeSelection: Event<{ quickPick: QuickPick<QuickPickItem>, selectedItems: Array<QuickPickItem> }>;\n    readonly onDidTriggerButton: Event<QuickInputButtonHandle>;\n}\n\nexport interface Match {\n    start: number;\n    end: number;\n}\nexport interface QuickPickItemHighlights {\n    label?: Match[];\n    description?: Match[];\n    detail?: Match[];\n}\n\nexport interface QuickPickItem {\n    type?: 'item';\n    id?: string;\n    label: string;\n    meta?: string;\n    ariaLabel?: string;\n    description?: string;\n    detail?: string;\n    keySequence?: KeySequence;\n    iconClasses?: string[];\n    alwaysShow?: boolean;\n    highlights?: QuickPickItemHighlights;\n    buttons?: readonly QuickInputButton[];\n    execute?: () => void;\n}\n\nexport interface QuickPickSeparator {\n    type: 'separator';\n    label?: string;\n}\n\nexport type QuickPickItemOrSeparator = QuickPickItem | QuickPickSeparator;\nexport type QuickPickInput<T = QuickPickItem> = T | QuickPickSeparator;\n\nexport namespace QuickPickItem {\n    export function is(item: QuickPickSeparator | QuickPickItem): item is QuickPickItem {\n        // if it's not a separator, it's an item\n        return item.type !== 'separator';\n    }\n}\n\nexport interface QuickPickSeparator {\n    type: 'separator';\n    label?: string;\n}\n\nexport namespace QuickPickSeparator {\n    export function is(item: QuickPickItemOrSeparator): item is QuickPickSeparator {\n        return item.type === 'separator';\n    }\n}\n\nexport type QuickPicks = (QuickPickSeparator | QuickPickItem)[];\n\nexport interface QuickPickValue<V> extends QuickPickItem {\n    value: V\n}\n\nexport interface QuickInputButton {\n    iconPath?: URI | Uri | { light?: URI | Uri; dark: URI | Uri } | { id: string };\n    iconClass?: string;\n    tooltip?: string;\n    /**\n     * Whether the button should be visible even when the user is not hovering.\n     */\n    alwaysVisible?: boolean;\n}\n\nexport interface NormalizedQuickInputButton extends QuickInputButton {\n    iconPath?: { light?: Uri, dark: Uri };\n}\n\nexport namespace QuickInputButton {\n    export function normalize(button: undefined): undefined;\n    export function normalize(button: QuickInputButton): NormalizedQuickInputButton;\n    export function normalize(button?: QuickInputButton): NormalizedQuickInputButton | undefined {\n        if (!button) {\n            return button;\n        }\n        let iconPath: NormalizedQuickInputButton['iconPath'] = undefined;\n        if (button.iconPath instanceof URI) {\n            iconPath = { dark: button.iconPath['codeUri'] };\n        } else if (button.iconPath && 'dark' in button.iconPath) {\n            const dark = Uri.isUri(button.iconPath.dark) ? button.iconPath.dark : button.iconPath.dark['codeUri'];\n            const light = Uri.isUri(button.iconPath.light) ? button.iconPath.light : button.iconPath.light?.['codeUri'];\n            iconPath = { dark, light };\n        }\n        return {\n            ...button,\n            iconPath,\n        };\n    }\n}\n\nexport interface QuickInputButtonHandle extends QuickInputButton {\n    index: number; // index of where they are in buttons array if QuickInputButton or -1 if QuickInputButtons.Back\n}\n\nexport enum QuickInputHideReason {\n    /**\n     * Focus was moved away from the input, but the user may not have explicitly closed it.\n     */\n    Blur = 1,\n    /**\n     * An explicit close gesture, like striking the Escape key\n     */\n    Gesture = 2,\n    /**\n     * Any other reason\n     */\n    Other = 3,\n}\n\nexport interface QuickInput {\n    readonly onDidHide: Event<{ reason: QuickInputHideReason }>;\n    readonly onDispose: Event<void>;\n    title: string | undefined;\n    description: string | undefined;\n    step: number | undefined;\n    totalSteps: number | undefined;\n    enabled: boolean;\n    contextKey: string | undefined;\n    busy: boolean;\n    ignoreFocusOut: boolean;\n    show(): void;\n    hide(): void;\n    dispose(): void;\n}\n\nexport interface InputBox extends QuickInput {\n    value: string | undefined;\n    valueSelection: Readonly<[number, number]> | undefined;\n    placeholder: string | undefined;\n    password: boolean;\n    readonly onDidChangeValue: Event<string>;\n    readonly onDidAccept: Event<void>;\n    buttons: ReadonlyArray<QuickInputButton>;\n    readonly onDidTriggerButton: Event<QuickInputButton>;\n    prompt: string | undefined;\n    validationMessage: string | undefined;\n}\n\nexport interface QuickPick<T extends QuickPickItemOrSeparator> extends QuickInput {\n    value: string;\n    placeholder: string | undefined;\n    items: ReadonlyArray<T | QuickPickSeparator>;\n    activeItems: ReadonlyArray<T>;\n    selectedItems: ReadonlyArray<T>;\n    canSelectMany: boolean;\n    matchOnDescription: boolean;\n    matchOnDetail: boolean;\n    keepScrollPosition: boolean;\n    readonly onDidAccept: Event<{ inBackground: boolean } | undefined>;\n    readonly onDidChangeValue: Event<string>;\n    readonly onDidTriggerButton: Event<QuickInputButton>;\n    readonly onDidTriggerItemButton: Event<QuickPickItemButtonEvent<T>>;\n    readonly onDidChangeActive: Event<T[]>;\n    readonly onDidChangeSelection: Event<T[]>;\n}\n\nexport interface PickOptions<T extends QuickPickItem> {\n    title?: string;\n    placeHolder?: string;\n    matchOnDescription?: boolean;\n    matchOnDetail?: boolean;\n    matchOnLabel?: boolean;\n    autoFocusOnList?: boolean;\n    ignoreFocusLost?: boolean;\n    canPickMany?: boolean;\n    contextKey?: string;\n    activeItem?: Promise<T> | T;\n    onDidFocus?: (entry: T) => void;\n}\n\nexport interface InputOptions {\n    title?: string;\n    value?: string;\n    valueSelection?: [number, number];\n    prompt?: string;\n    placeHolder?: string;\n    password?: boolean;\n    ignoreFocusLost?: boolean;\n    validateInput?(input: string): Promise<string | { content: string; severity: number; } | null | undefined> | undefined;\n}\n\nexport interface QuickPickItemButtonEvent<T extends QuickPickItemOrSeparator> {\n    button: QuickInputButton;\n    item: T;\n}\n\nexport interface QuickPickItemButtonContext<T extends QuickPickItemOrSeparator> extends QuickPickItemButtonEvent<T> {\n    removeItem(): void;\n}\n\nexport interface QuickPickOptions<T extends QuickPickItemOrSeparator> {\n    busy?: boolean;\n    enabled?: boolean;\n    title?: string;\n    description?: string;\n    value?: string;\n    filterValue?: (value: string) => string;\n    ariaLabel?: string;\n    buttons?: Array<QuickInputButton>;\n    placeholder?: string;\n    canAcceptInBackground?: boolean;\n    customButton?: boolean;\n    customLabel?: string;\n    customHover?: string;\n    canSelectMany?: boolean;\n    matchOnDescription?: boolean;\n    matchOnDetail?: boolean;\n    matchOnLabel?: boolean;\n    sortByLabel?: boolean;\n    keepScrollPosition?: boolean;\n    autoFocusOnList?: boolean;\n    ignoreFocusOut?: boolean;\n    valueSelection?: Readonly<[number, number]>;\n    validationMessage?: string;\n    hideInput?: boolean;\n    hideCheckAll?: boolean;\n    runIfSingle?: boolean\n    contextKey?: string;\n    activeItem?: T,\n    step?: number;\n    totalSteps?: number;\n\n    onDidAccept?: () => void,\n    onDidChangeActive?: (quickPick: QuickPick<T>, activeItems: Array<T>) => void,\n    onDidChangeSelection?: (quickPick: QuickPick<T>, selectedItems: Array<T>) => void,\n    onDidChangeValue?: (quickPick: QuickPick<T>, filter: string) => void,\n    onDidCustom?: () => void,\n    onDidHide?: () => void;\n    onDidTriggerButton?: (button: QuickInputButton) => void,\n    onDidTriggerItemButton?: (ItemButtonEvent: QuickPickItemButtonContext<T>) => void\n}\n\nexport const QuickInputService = Symbol('QuickInputService');\nexport interface QuickInputService {\n    readonly backButton: QuickInputButton;\n    readonly onShow: Event<void>;\n    readonly onHide: Event<void>;\n    open(filter: string): void;\n    createInputBox(): InputBox;\n    input(options?: InputOptions, token?: CancellationToken): Promise<string | undefined>;\n    pick<T extends QuickPickItem, O extends PickOptions<T>>(picks: Promise<QuickPickInput<T>[]> | QuickPickInput<T>[], options?: O, token?: CancellationToken):\n        Promise<(O extends { canPickMany: true } ? T[] : T) | undefined>;\n    showQuickPick<T extends QuickPickItem>(items: Array<T | QuickPickSeparator>, options?: QuickPickOptions<T>): Promise<T | undefined>;\n    hide(): void;\n    /**\n     * Provides raw access to the quick pick controller.\n     */\n    createQuickPick<T extends QuickPickItem>(): QuickPick<T>;\n}\n\n/**\n * Filter the list of quick pick items based on the provided filter.\n * Items are filtered based on if:\n * - their `label` satisfies the filter using `fuzzy`.\n * - their `description` satisfies the filter using `fuzzy`.\n * - their `detail` satisfies the filter using `fuzzy`.\n * Filtered items are also updated to display proper highlights based on how they were filtered.\n * @param items the list of quick pick items.\n * @param filter the filter to search for.\n * @returns the list of quick pick items that satisfy the filter.\n */\nexport function filterItems(items: QuickPickItemOrSeparator[], filter: string): QuickPickItemOrSeparator[] {\n    filter = filter.trim().toLowerCase();\n\n    if (filter.length === 0) {\n        for (const item of items) {\n            if (item.type !== 'separator') {\n                item.highlights = undefined; // reset highlights from previous filtering.\n            }\n        }\n        return items;\n    }\n\n    const filteredItems: QuickPickItemOrSeparator[] = [];\n    for (const item of items) {\n        if (item.type === 'separator') {\n            filteredItems.push(item);\n        } else if (\n            fuzzy.test(filter, item.label) ||\n            (item.description && fuzzy.test(filter, item.description)) ||\n            (item.detail && fuzzy.test(filter, item.detail))\n        ) {\n            item.highlights = {\n                label: findMatches(item.label, filter),\n                description: item.description ? findMatches(item.description, filter) : undefined,\n                detail: item.detail ? findMatches(item.detail, filter) : undefined\n            };\n            filteredItems.push(item);\n        }\n    }\n    return filteredItems;\n}\n\n/**\n * Find match highlights when testing a word against a pattern.\n * @param word the word to test.\n * @param pattern the word to match against.\n * @returns the list of highlights if present.\n */\nexport function findMatches(word: string, pattern: string): Array<{ start: number, end: number }> | undefined {\n    word = word.toLocaleLowerCase();\n    pattern = pattern.toLocaleLowerCase();\n\n    if (pattern.trim().length === 0) {\n        return undefined;\n    }\n\n    const delimiter = '\\u0000'; // null byte that shouldn't appear in the input and is used to denote matches.\n    const matchResult = fuzzy.match(pattern.replace(/\\u0000/gu, ''), word, { pre: delimiter, post: delimiter });\n    if (!matchResult) {\n        return undefined;\n    }\n\n    const match = matchResult.rendered;\n    const highlights: { start: number, end: number }[] = [];\n\n    let lastIndex = 0;\n    /** We need to account for the extra markers by removing them from the range */\n    let offset = 0;\n\n    while (true) {\n        const start = match.indexOf(delimiter, lastIndex);\n        if (start === -1) { break; }\n        const end = match.indexOf(delimiter, start + 1);\n        if (end === -1) { break; }\n        highlights.push({\n            start: start - offset++,\n            end: end - offset++\n        });\n        lastIndex = end + 1;\n    }\n\n    return highlights.length > 0 ? highlights : undefined;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Disposable, DisposableCollection } from './disposable';\nimport { Emitter, Event } from './event';\nimport { MaybePromise } from './types';\n\nexport interface Reference<T> extends Disposable {\n    readonly object: T\n}\n\nexport abstract class AbstractReferenceCollection<K, V extends Disposable> implements Disposable {\n\n    protected readonly _keys = new Map<string, K>();\n    protected readonly _values = new Map<string, V>();\n    protected readonly references = new Map<string, DisposableCollection>();\n\n    protected readonly onDidCreateEmitter = new Emitter<V>();\n    readonly onDidCreate: Event<V> = this.onDidCreateEmitter.event;\n\n    protected readonly onWillDisposeEmitter = new Emitter<V>();\n    readonly onWillDispose: Event<V> = this.onWillDisposeEmitter.event;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor() {\n        this.toDispose.push(this.onDidCreateEmitter);\n        this.toDispose.push(this.onWillDisposeEmitter);\n        this.toDispose.push(Disposable.create(() => this.clear()));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    clear(): void {\n        for (const value of this._values.values()) {\n            try {\n                value.dispose();\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n\n    has(args: K): boolean {\n        const key = this.toKey(args);\n        return this.references.has(key);\n    }\n\n    keys(): K[] {\n        return [...this._keys.values()];\n    }\n\n    values(): V[] {\n        return [...this._values.values()];\n    }\n\n    get(args: K): V | undefined {\n        const key = this.toKey(args);\n        return this._values.get(key);\n    }\n\n    abstract acquire(args: K): MaybePromise<Reference<V>>;\n\n    protected doAcquire(key: string, object: V): Reference<V> {\n        const references = this.references.get(key) || this.createReferences(key, object);\n        const reference: Reference<V> = {\n            object,\n            dispose: () => { }\n        };\n        references.push(reference);\n        return reference;\n    }\n\n    protected toKey(args: K): string {\n        return JSON.stringify(args);\n    }\n\n    protected createReferences(key: string, value: V): DisposableCollection {\n        const references = new DisposableCollection();\n        references.onDispose(() => value.dispose());\n        const disposeObject = value.dispose.bind(value);\n        value.dispose = () => {\n            this.onWillDisposeEmitter.fire(value);\n            disposeObject();\n            this._values.delete(key);\n            this._keys.delete(key);\n            this.references.delete(key);\n            references!.dispose();\n        };\n        this.references.set(key, references);\n        return references;\n    }\n\n}\n\nexport class ReferenceCollection<K, V extends Disposable> extends AbstractReferenceCollection<K, V> {\n\n    constructor(protected readonly factory: (key: K) => MaybePromise<V>) {\n        super();\n    }\n\n    async acquire(args: K): Promise<Reference<V>> {\n        const key = this.toKey(args);\n        const existing = this._values.get(key);\n        if (existing) {\n            return this.doAcquire(key, existing);\n        }\n        const object = await this.getOrCreateValue(key, args);\n        return this.doAcquire(key, object);\n    }\n\n    protected readonly pendingValues = new Map<string, MaybePromise<V>>();\n    protected async getOrCreateValue(key: string, args: K): Promise<V> {\n        const existing = this.pendingValues.get(key);\n        if (existing) {\n            return existing;\n        }\n        const pending = this.factory(args);\n        this._keys.set(key, args);\n        this.pendingValues.set(key, pending);\n        try {\n            const value = await pending;\n            this._values.set(key, value);\n            this.onDidCreateEmitter.fire(value);\n            return value;\n        } catch (e) {\n            this._keys.delete(key);\n            throw e;\n        } finally {\n            this.pendingValues.delete(key);\n        }\n    }\n\n}\n\nexport class SyncReferenceCollection<K, V extends Disposable> extends AbstractReferenceCollection<K, V> {\n\n    constructor(protected readonly factory: (key: K) => V) {\n        super();\n    }\n\n    acquire(args: K): Reference<V> {\n        const key = this.toKey(args);\n        const object = this.getOrCreateValue(key, args);\n        return this.doAcquire(key, object);\n    }\n\n    protected getOrCreateValue(key: string, args: K): V {\n        const existing = this._values.get(key);\n        if (existing) {\n            return existing;\n        }\n        const value = this.factory(args);\n        this._keys.set(key, args);\n        this._values.set(key, value);\n        this.onDidCreateEmitter.fire(value);\n        return value;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { injectable, inject, named } from 'inversify';\nimport { TextDocumentContentChangeEvent } from 'vscode-languageserver-protocol';\nimport URI from '../common/uri';\nimport { ContributionProvider } from './contribution-provider';\nimport { Event, Emitter } from './event';\nimport { Disposable } from './disposable';\nimport { MaybePromise } from './types';\nimport { CancellationToken } from './cancellation';\nimport { ApplicationError } from './application-error';\nimport { ReadableStream, Readable } from './stream';\nimport { SyncReferenceCollection, Reference } from './reference';\n\nexport interface ResourceVersion {\n}\n\nexport interface ResourceReadOptions {\n    encoding?: string\n}\n\nexport interface ResourceSaveOptions {\n    encoding?: string\n    overwriteEncoding?: boolean\n    version?: ResourceVersion\n}\n\nexport interface Resource extends Disposable {\n    readonly uri: URI;\n    /**\n     * Latest read version of this resource.\n     *\n     * Optional if a resource does not support versioning, check with `in` operator`.\n     * Undefined if a resource did not read content yet.\n     */\n    readonly version?: ResourceVersion | undefined;\n    /**\n     * Latest read encoding of this resource.\n     *\n     * Optional if a resource does not support encoding, check with `in` operator`.\n     * Undefined if a resource did not read content yet.\n     */\n    readonly encoding?: string | undefined;\n    readonly isReadonly?: boolean;\n    /**\n     * Reads latest content of this resource.\n     *\n     * If a resource supports versioning it updates version to latest.\n     * If a resource supports encoding it updates encoding to latest.\n     *\n     * @throws `ResourceError.NotFound` if a resource not found\n     */\n    readContents(options?: ResourceReadOptions): Promise<string>;\n    /**\n     * Stream latest content of this resource.\n     *\n     * If a resource supports versioning it updates version to latest.\n     * If a resource supports encoding it updates encoding to latest.\n     *\n     * @throws `ResourceError.NotFound` if a resource not found\n     */\n    readStream?(options?: ResourceReadOptions): Promise<ReadableStream<string>>;\n    /**\n     * Rewrites the complete content for this resource.\n     * If a resource does not exist it will be created.\n     *\n     * If a resource supports versioning clients can pass some version\n     * to check against it, if it is not provided latest version is used.\n     *\n     * It updates version and encoding to latest.\n     *\n     * @throws `ResourceError.OutOfSync` if latest resource version is out of sync with the given\n     */\n    saveContents?(content: string, options?: ResourceSaveOptions): Promise<void>;\n    /**\n     * Rewrites the complete content for this resource.\n     * If a resource does not exist it will be created.\n     *\n     * If a resource supports versioning clients can pass some version\n     * to check against it, if it is not provided latest version is used.\n     *\n     * It updates version and encoding to latest.\n     *\n     * @throws `ResourceError.OutOfSync` if latest resource version is out of sync with the given\n     */\n    saveStream?(content: Readable<string>, options?: ResourceSaveOptions): Promise<void>;\n    /**\n     * Applies incremental content changes to this resource.\n     *\n     * If a resource supports versioning clients can pass some version\n     * to check against it, if it is not provided latest version is used.\n     * It updates version to latest.\n     *\n     * @throws `ResourceError.NotFound` if a resource not found or was not read yet\n     * @throws `ResourceError.OutOfSync` if latest resource version is out of sync with the given\n     */\n    saveContentChanges?(changes: TextDocumentContentChangeEvent[], options?: ResourceSaveOptions): Promise<void>;\n    readonly onDidChangeContents?: Event<void>;\n    guessEncoding?(): Promise<string | undefined>\n}\nexport namespace Resource {\n    export interface SaveContext {\n        contentLength: number\n        content: string | Readable<string>\n        changes?: TextDocumentContentChangeEvent[]\n        options?: ResourceSaveOptions\n    }\n    export async function save(resource: Resource, context: SaveContext, token?: CancellationToken): Promise<void> {\n        if (!resource.saveContents) {\n            return;\n        }\n        if (await trySaveContentChanges(resource, context)) {\n            return;\n        }\n        if (token && token.isCancellationRequested) {\n            return;\n        }\n        if (typeof context.content !== 'string' && resource.saveStream) {\n            await resource.saveStream(context.content, context.options);\n        } else {\n            const content = typeof context.content === 'string' ? context.content : Readable.toString(context.content);\n            await resource.saveContents(content, context.options);\n        }\n    }\n    export async function trySaveContentChanges(resource: Resource, context: SaveContext): Promise<boolean> {\n        if (!context.changes || !resource.saveContentChanges || shouldSaveContent(resource, context)) {\n            return false;\n        }\n        try {\n            await resource.saveContentChanges(context.changes, context.options);\n            return true;\n        } catch (e) {\n            if (!ResourceError.NotFound.is(e) && !ResourceError.OutOfSync.is(e)) {\n                console.error(`Failed to apply incremental changes to '${resource.uri.toString()}':`, e);\n            }\n            return false;\n        }\n    }\n    export function shouldSaveContent(resource: Resource, { contentLength, changes }: SaveContext): boolean {\n        if (!changes || (resource.saveStream && contentLength > 32 * 1024 * 1024)) {\n            return true;\n        }\n        let contentChangesLength = 0;\n        for (const change of changes) {\n            contentChangesLength += JSON.stringify(change).length;\n            if (contentChangesLength > contentLength) {\n                return true;\n            }\n        }\n        return contentChangesLength > contentLength;\n    }\n}\n\nexport namespace ResourceError {\n    export const NotFound = ApplicationError.declare(-40000, (raw: ApplicationError.Literal<{ uri: URI }>) => raw);\n    export const OutOfSync = ApplicationError.declare(-40001, (raw: ApplicationError.Literal<{ uri: URI }>) => raw);\n}\n\nexport const ResourceResolver = Symbol('ResourceResolver');\nexport interface ResourceResolver {\n    /**\n     * Reject if a resource cannot be provided.\n     */\n    resolve(uri: URI): MaybePromise<Resource>;\n}\n\nexport const ResourceProvider = Symbol('ResourceProvider');\nexport type ResourceProvider = (uri: URI) => Promise<Resource>;\n\n@injectable()\nexport class DefaultResourceProvider {\n\n    constructor(\n        @inject(ContributionProvider) @named(ResourceResolver)\n        protected readonly resolversProvider: ContributionProvider<ResourceResolver>\n    ) { }\n\n    /**\n     * Reject if a resource cannot be provided.\n     */\n    async get(uri: URI): Promise<Resource> {\n        const resolvers = this.resolversProvider.getContributions();\n        for (const resolver of resolvers) {\n            try {\n                return await resolver.resolve(uri);\n            } catch (err) {\n                // no-op\n            }\n        }\n        return Promise.reject(new Error(`A resource provider for '${uri.toString()}' is not registered.`));\n    }\n\n}\n\nexport class MutableResource implements Resource {\n    private contents: string = '';\n\n    constructor(readonly uri: URI) {\n    }\n\n    dispose(): void { }\n\n    async readContents(): Promise<string> {\n        return this.contents;\n    }\n\n    async saveContents(contents: string): Promise<void> {\n        this.contents = contents;\n        this.fireDidChangeContents();\n    }\n\n    protected readonly onDidChangeContentsEmitter = new Emitter<void>();\n    readonly onDidChangeContents = this.onDidChangeContentsEmitter.event;\n    protected fireDidChangeContents(): void {\n        this.onDidChangeContentsEmitter.fire(undefined);\n    }\n}\nexport class ReferenceMutableResource implements Resource {\n    constructor(protected reference: Reference<MutableResource>) { }\n\n    get uri(): URI {\n        return this.reference.object.uri;\n    }\n\n    get onDidChangeContents(): Event<void> {\n        return this.reference.object.onDidChangeContents;\n    }\n\n    dispose(): void {\n        this.reference.dispose();\n    }\n\n    readContents(): Promise<string> {\n        return this.reference.object.readContents();\n    }\n\n    saveContents(contents: string): Promise<void> {\n        return this.reference.object.saveContents(contents);\n    }\n}\n\n@injectable()\nexport class InMemoryResources implements ResourceResolver {\n\n    protected readonly resources = new SyncReferenceCollection<string, MutableResource>(uri => new MutableResource(new URI(uri)));\n\n    add(uri: URI, contents: string): Resource {\n        const resourceUri = uri.toString();\n        if (this.resources.has(resourceUri)) {\n            throw new Error(`Cannot add already existing in-memory resource '${resourceUri}'`);\n        }\n        const resource = this.acquire(resourceUri);\n        resource.saveContents(contents);\n        return resource;\n    }\n\n    update(uri: URI, contents: string): Resource {\n        const resourceUri = uri.toString();\n        const resource = this.resources.get(resourceUri);\n        if (!resource) {\n            throw new Error(`Cannot update non-existed in-memory resource '${resourceUri}'`);\n        }\n        resource.saveContents(contents);\n        return resource;\n    }\n\n    resolve(uri: URI): Resource {\n        const uriString = uri.toString();\n        if (!this.resources.has(uriString)) {\n            throw new Error(`In memory '${uriString}' resource does not exist.`);\n        }\n        return this.acquire(uriString);\n    }\n\n    protected acquire(uri: string): ReferenceMutableResource {\n        const reference = this.resources.acquire(uri);\n        return new ReferenceMutableResource(reference);\n    }\n}\n\nexport const MEMORY_TEXT = 'mem-txt';\n\n/**\n * Resource implementation for 'mem-txt' URI scheme where content is saved in URI query.\n */\nexport class InMemoryTextResource implements Resource {\n    constructor(readonly uri: URI) { }\n\n    async readContents(options?: { encoding?: string | undefined; } | undefined): Promise<string> {\n        return this.uri.query;\n    }\n    dispose(): void { }\n}\n\n/**\n * ResourceResolver implementation for 'mem-txt' URI scheme.\n */\n@injectable()\nexport class InMemoryTextResourceResolver implements ResourceResolver {\n    resolve(uri: URI): MaybePromise<Resource> {\n        if (uri.scheme !== MEMORY_TEXT) {\n            throw new Error(`Expected a URI with ${MEMORY_TEXT} scheme. Was: ${uri}.`);\n        }\n        return new InMemoryTextResource(uri);\n    }\n}\n\nexport const UNTITLED_SCHEME = 'untitled';\n\nlet untitledResourceSequenceIndex = 0;\n\n@injectable()\nexport class UntitledResourceResolver implements ResourceResolver {\n\n    protected readonly resources = new Map<string, UntitledResource>();\n\n    has(uri: URI): boolean {\n        if (uri.scheme !== UNTITLED_SCHEME) {\n            throw new Error('The given uri is not untitled file uri: ' + uri);\n        } else {\n            return this.resources.has(uri.toString());\n        }\n    }\n\n    async resolve(uri: URI): Promise<UntitledResource> {\n        if (uri.scheme !== UNTITLED_SCHEME) {\n            throw new Error('The given uri is not untitled file uri: ' + uri);\n        } else {\n            const untitledResource = this.resources.get(uri.toString());\n            if (!untitledResource) {\n                return this.createUntitledResource('', '', uri);\n            } else {\n                return untitledResource;\n            }\n        }\n    }\n\n    async createUntitledResource(content?: string, extension?: string, uri?: URI): Promise<UntitledResource> {\n        if (!uri) {\n            uri = this.createUntitledURI(extension);\n        }\n        return new UntitledResource(this.resources, uri, content);\n    }\n\n    createUntitledURI(extension?: string, parent?: URI): URI {\n        let counter = 1; // vscode starts at 1\n        let untitledUri;\n        do {\n            const name = `Untitled-${counter}${extension ?? ''}`;\n            if (parent) {\n                untitledUri = parent.resolve(name).withScheme(UNTITLED_SCHEME);\n            }\n            untitledUri = new URI().resolve(name).withScheme(UNTITLED_SCHEME);\n            counter++;\n        } while (this.has(untitledUri));\n        return untitledUri;\n    }\n}\n\nexport class UntitledResource implements Resource {\n\n    protected readonly onDidChangeContentsEmitter = new Emitter<void>();\n    get onDidChangeContents(): Event<void> {\n        return this.onDidChangeContentsEmitter.event;\n    }\n\n    constructor(private resources: Map<string, UntitledResource>, public uri: URI, private content?: string) {\n        this.resources.set(this.uri.toString(), this);\n    }\n\n    dispose(): void {\n        this.resources.delete(this.uri.toString());\n        this.onDidChangeContentsEmitter.dispose();\n    }\n\n    async readContents(options?: { encoding?: string | undefined; } | undefined): Promise<string> {\n        if (this.content) {\n            return this.content;\n        } else {\n            return '';\n        }\n    }\n\n    async saveContents(content: string, options?: { encoding?: string, overwriteEncoding?: boolean }): Promise<void> {\n        // This function must exist to ensure readOnly is false for the Monaco editor.\n        // However it should not be called because saving 'untitled' is always processed as 'Save As'.\n        throw Error('Untitled resources cannot be saved.');\n    }\n\n    protected fireDidChangeContents(): void {\n        this.onDidChangeContentsEmitter.fire(undefined);\n    }\n\n    get version(): ResourceVersion | undefined {\n        return undefined;\n    }\n\n    get encoding(): string | undefined {\n        return undefined;\n    }\n}\n\n/**\n * @deprecated Since 1.27.0. Please use `UntitledResourceResolver.createUntitledURI` instead.\n */\nexport function createUntitledURI(extension?: string, parent?: URI): URI {\n    const name = `Untitled-${untitledResourceSequenceIndex++}${extension ?? ''}`;\n    if (parent) {\n        return parent.resolve(name).withScheme(UNTITLED_SCHEME);\n    }\n    return new URI().resolve(name).withScheme(UNTITLED_SCHEME);\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { injectable } from 'inversify';\nimport { Emitter, Event } from '../common/event';\n\n/**\n * `SelectionProvider` is implemented by services to notify listeners about selection changes.\n */\nexport interface SelectionProvider<T> {\n    onSelectionChanged: Event<T | undefined>;\n}\n\n/**\n * Singleton service that is used to share the current selection globally in a Theia application.\n * On each change of selection, subscribers are notified and receive the updated selection object.\n */\n@injectable()\nexport class SelectionService implements SelectionProvider<Object | undefined> {\n\n    private currentSelection: Object | undefined;\n\n    protected readonly onSelectionChangedEmitter = new Emitter<any>();\n    readonly onSelectionChanged: Event<any> = this.onSelectionChangedEmitter.event;\n\n    get selection(): Object | undefined {\n        return this.currentSelection;\n    }\n\n    set selection(selection: Object | undefined) {\n        this.currentSelection = selection;\n        this.onSelectionChangedEmitter.fire(this.currentSelection);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { isObject } from './types';\nimport URI from './uri';\n\nexport interface UriSelection {\n    readonly uri: URI\n}\n\nexport namespace UriSelection {\n\n    export function is(arg: unknown): arg is UriSelection {\n        return isObject<UriSelection>(arg) && arg.uri instanceof URI;\n    }\n\n    export function getUri(selection: unknown): URI | undefined {\n        if (is(selection)) {\n            return selection.uri;\n        }\n        if (Array.isArray(selection) && is(selection[0])) {\n            return selection[0].uri;\n        }\n        return undefined;\n    }\n\n    export function getUris(selection: unknown): URI[] {\n        if (is(selection)) {\n            return [selection.uri];\n        }\n        if (Array.isArray(selection)) {\n            return selection.filter(is).map(s => s.uri);\n        }\n        return [];\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DiagnosticSeverity } from 'vscode-languageserver-protocol';\nimport { nls } from './nls';\n\nexport enum Severity {\n    Ignore = 0,\n    Error = 1,\n    Warning = 2,\n    Info = 3,\n    Log = 4\n}\n\nconst error = 'Errors';\nconst warning = 'Warnings';\nconst info = 'Info';\nconst log = 'Log';\nconst ignore = 'All';\n\nexport namespace Severity {\n    export function fromValue(value: string | undefined): Severity {\n        value = value && value.toLowerCase();\n\n        if (!value) {\n            return Severity.Ignore;\n        }\n        if (['error', 'errors'].indexOf(value) !== -1) {\n            return Severity.Error;\n        }\n        if (['warn', 'warning', 'warnings'].indexOf(value) !== -1) {\n            return Severity.Warning;\n        }\n        if (value === 'info') {\n            return Severity.Info;\n        }\n        if (value === 'log') {\n            return Severity.Log;\n        }\n\n        return Severity.Ignore;\n    }\n\n    export function toDiagnosticSeverity(value: Severity): DiagnosticSeverity {\n        switch (value) {\n            case Severity.Ignore:\n                return DiagnosticSeverity.Hint;\n            case Severity.Info:\n                return DiagnosticSeverity.Information;\n            case Severity.Log:\n                return DiagnosticSeverity.Information;\n            case Severity.Warning:\n                return DiagnosticSeverity.Warning;\n            case Severity.Error:\n                return DiagnosticSeverity.Error;\n            default:\n                return DiagnosticSeverity.Error;\n        }\n    }\n\n    export function toString(severity: Severity | undefined): string {\n        switch (severity) {\n            case Severity.Error:\n                return error;\n            case Severity.Warning:\n                return warning;\n            case Severity.Info:\n                return info;\n            case Severity.Log:\n                return log;\n            default:\n                return ignore;\n        }\n    }\n\n    export function toLocaleString(severity: string | Severity): string {\n        if (severity === Severity.Error || severity === error) {\n            return nls.localize('theia/core/severity/errors', 'Errors');\n        } else if (severity === Severity.Warning || severity === warning) {\n            return nls.localize('theia/core/severity/warnings', 'Warnings');\n        } else if (severity === Severity.Info || severity === info) {\n            return nls.localizeByDefault('Info');\n        } else if (severity === Severity.Log || severity === log) {\n            return nls.localize('theia/core/severity/log', 'Log');\n        } else {\n            return nls.localizeByDefault('All');\n        }\n    }\n\n    export function toArray(): string[] {\n        return [ignore, error, warning, info, log];\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/stream.ts\n\n/* eslint-disable max-len */\n/* eslint-disable no-null/no-null */\n/* eslint-disable @typescript-eslint/tslint/config */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { DisposableCollection, Disposable } from './disposable';\n\nexport interface ReadableStreamEvents<T> {\n\n    /**\n     * The 'data' event is emitted whenever the stream is\n     * relinquishing ownership of a chunk of data to a consumer.\n     */\n    on(event: 'data', callback: (data: T) => void): void;\n\n    /**\n     * Emitted when any error occurs.\n     */\n    on(event: 'error', callback: (err: Error) => void): void;\n\n    /**\n     * The 'end' event is emitted when there is no more data\n     * to be consumed from the stream. The 'end' event will\n     * not be emitted unless the data is completely consumed.\n     */\n    on(event: 'end', callback: () => void): void;\n}\n\n/**\n * A interface that emulates the API shape of a node.js readable\n * stream for use in desktop and web environments.\n */\nexport interface ReadableStream<T> extends ReadableStreamEvents<T> {\n\n    /**\n     * Stops emitting any events until resume() is called.\n     */\n    pause(): void;\n\n    /**\n     * Starts emitting events again after pause() was called.\n     */\n    resume(): void;\n\n    /**\n     * Destroys the stream and stops emitting any event.\n     */\n    destroy(): void;\n\n    /**\n     * Allows to remove a listener that was previously added.\n     */\n    removeListener(event: string, callback: Function): void;\n}\n\n/**\n * A interface that emulates the API shape of a node.js readable\n * for use in desktop and web environments.\n */\nexport interface Readable<T> {\n\n    /**\n     * Read data from the underlying source. Will return\n     * null to indicate that no more data can be read.\n     */\n    read(): T | null;\n}\nexport namespace Readable {\n    export function fromString(value: string): Readable<string> {\n        let done = false;\n\n        return {\n            read(): string | null {\n                if (!done) {\n                    done = true;\n\n                    return value;\n                }\n\n                return null;\n            }\n        };\n    }\n    export function toString(readable: Readable<string>): string {\n        let result = '';\n        let chunk: string | null;\n        while ((chunk = readable.read()) != null) {\n            result += chunk;\n        }\n        return result;\n    }\n}\n\n/**\n * A interface that emulates the API shape of a node.js writeable\n * stream for use in desktop and web environments.\n */\nexport interface WriteableStream<T> extends ReadableStream<T> {\n\n    /**\n     * Writing data to the stream will trigger the on('data')\n     * event listener if the stream is flowing and buffer the\n     * data otherwise until the stream is flowing.\n     *\n     * If a `highWaterMark` is configured and writing to the\n     * stream reaches this mark, a promise will be returned\n     * that should be awaited on before writing more data.\n     * Otherwise there is a risk of buffering a large number\n     * of data chunks without consumer.\n     */\n    write(data: T): void | Promise<void>;\n\n    /**\n     * Signals an error to the consumer of the stream via the\n     * on('error') handler if the stream is flowing.\n     */\n    error(error: Error): void;\n\n    /**\n     * Signals the end of the stream to the consumer. If the\n     * result is not an error, will trigger the on('data') event\n     * listener if the stream is flowing and buffer the data\n     * otherwise until the stream is flowing.\n     *\n     * In case of an error, the on('error') event will be used\n     * if the stream is flowing.\n     */\n    end(result?: T | Error): void;\n}\n\n/**\n * A stream that has a buffer already read. Returns the original stream\n * that was read as well as the chunks that got read.\n *\n * The `ended` flag indicates if the stream has been fully consumed.\n */\nexport interface ReadableBufferedStream<T> {\n\n    /**\n     * The original stream that is being read.\n     */\n    stream: ReadableStream<T>;\n\n    /**\n     * An array of chunks already read from this stream.\n     */\n    buffer: T[];\n\n    /**\n     * Signals if the stream has ended or not. If not, consumers\n     * should continue to read from the stream until consumed.\n     */\n    ended: boolean;\n}\n\nexport function isReadableStream<T>(obj: unknown): obj is ReadableStream<T> {\n    const candidate = obj as ReadableStream<T>;\n\n    return candidate && [candidate.on, candidate.pause, candidate.resume, candidate.destroy].every(fn => typeof fn === 'function');\n}\n\nexport function isReadableBufferedStream<T>(obj: unknown): obj is ReadableBufferedStream<T> {\n    const candidate = obj as ReadableBufferedStream<T>;\n\n    return candidate && isReadableStream(candidate.stream) && Array.isArray(candidate.buffer) && typeof candidate.ended === 'boolean';\n}\n\nexport interface Reducer<T> {\n    (data: T[]): T;\n}\n\nexport interface DataTransformer<Original, Transformed> {\n    (data: Original): Transformed;\n}\n\nexport interface ErrorTransformer {\n    (error: Error): Error;\n}\n\nexport interface ITransformer<Original, Transformed> {\n    data: DataTransformer<Original, Transformed>;\n    error?: ErrorTransformer;\n}\n\nexport function newWriteableStream<T>(reducer: Reducer<T>, options?: WriteableStreamOptions): WriteableStream<T> {\n    return new WriteableStreamImpl<T>(reducer);\n}\n\nexport interface WriteableStreamOptions {\n\n    /**\n     * The number of objects to buffer before WriteableStream#write()\n     * signals back that the buffer is full. Can be used to reduce\n     * the memory pressure when the stream is not flowing.\n     */\n    highWaterMark?: number;\n}\n\nclass WriteableStreamImpl<T> implements WriteableStream<T> {\n\n    private readonly state = {\n        flowing: false,\n        ended: false,\n        destroyed: false\n    };\n\n    private readonly buffer = {\n        data: [] as T[],\n        error: [] as Error[]\n    };\n\n    private readonly listeners = {\n        data: [] as { (data: T): void }[],\n        error: [] as { (error: Error): void }[],\n        end: [] as { (): void }[]\n    };\n\n    private readonly pendingWritePromises: Function[] = [];\n\n    constructor(private reducer: Reducer<T>, private options?: WriteableStreamOptions) { }\n\n    pause(): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        this.state.flowing = false;\n    }\n\n    resume(): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        if (!this.state.flowing) {\n            this.state.flowing = true;\n\n            // emit buffered events\n            this.flowData();\n            this.flowErrors();\n            this.flowEnd();\n        }\n    }\n\n    write(data: T): void | Promise<void> {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        // flowing: directly send the data to listeners\n        if (this.state.flowing) {\n            this.listeners.data.forEach(listener => listener(data));\n        }\n\n        // not yet flowing: buffer data until flowing\n        else {\n            this.buffer.data.push(data);\n\n            // highWaterMark: if configured, signal back when buffer reached limits\n            if (typeof this.options?.highWaterMark === 'number' && this.buffer.data.length > this.options.highWaterMark) {\n                return new Promise(resolve => this.pendingWritePromises.push(resolve));\n            }\n        }\n    }\n\n    error(error: Error): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        // flowing: directly send the error to listeners\n        if (this.state.flowing) {\n            this.listeners.error.forEach(listener => listener(error));\n        }\n\n        // not yet flowing: buffer errors until flowing\n        else {\n            this.buffer.error.push(error);\n        }\n    }\n\n    end(result?: T | Error): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        // end with data or error if provided\n        if (result instanceof Error) {\n            this.error(result);\n        } else if (result) {\n            this.write(result);\n        }\n\n        // flowing: send end event to listeners\n        if (this.state.flowing) {\n            this.listeners.end.forEach(listener => listener());\n\n            this.destroy();\n        }\n\n        // not yet flowing: remember state\n        else {\n            this.state.ended = true;\n        }\n    }\n\n    on(event: 'data', callback: (data: T) => void): void;\n    on(event: 'error', callback: (err: Error) => void): void;\n    on(event: 'end', callback: () => void): void;\n    on(event: 'data' | 'error' | 'end', callback: (arg0?: any) => void): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        switch (event) {\n            case 'data':\n                this.listeners.data.push(callback);\n\n                // switch into flowing mode as soon as the first 'data'\n                // listener is added and we are not yet in flowing mode\n                this.resume();\n\n                break;\n\n            case 'end':\n                this.listeners.end.push(callback);\n\n                // emit 'end' event directly if we are flowing\n                // and the end has already been reached\n                //\n                // finish() when it went through\n                if (this.state.flowing && this.flowEnd()) {\n                    this.destroy();\n                }\n\n                break;\n\n            case 'error':\n                this.listeners.error.push(callback);\n\n                // emit buffered 'error' events unless done already\n                // now that we know that we have at least one listener\n                if (this.state.flowing) {\n                    this.flowErrors();\n                }\n\n                break;\n        }\n    }\n\n    removeListener(event: string, callback: Function): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        let listeners: unknown[] | undefined = undefined;\n\n        switch (event) {\n            case 'data':\n                listeners = this.listeners.data;\n                break;\n\n            case 'end':\n                listeners = this.listeners.end;\n                break;\n\n            case 'error':\n                listeners = this.listeners.error;\n                break;\n        }\n\n        if (listeners) {\n            const index = listeners.indexOf(callback);\n            if (index >= 0) {\n                listeners.splice(index, 1);\n            }\n        }\n    }\n\n    private flowData(): void {\n        if (this.buffer.data.length > 0) {\n            const fullDataBuffer = this.reducer(this.buffer.data);\n\n            this.listeners.data.forEach(listener => listener(fullDataBuffer));\n\n            this.buffer.data.length = 0;\n\n            // When the buffer is empty, resolve all pending writers\n            const pendingWritePromises = [...this.pendingWritePromises];\n            this.pendingWritePromises.length = 0;\n            pendingWritePromises.forEach(pendingWritePromise => pendingWritePromise());\n        }\n    }\n\n    private flowErrors(): void {\n        if (this.listeners.error.length > 0) {\n            for (const error of this.buffer.error) {\n                this.listeners.error.forEach(listener => listener(error));\n            }\n\n            this.buffer.error.length = 0;\n        }\n    }\n\n    private flowEnd(): boolean {\n        if (this.state.ended) {\n            this.listeners.end.forEach(listener => listener());\n\n            return this.listeners.end.length > 0;\n        }\n\n        return false;\n    }\n\n    destroy(): void {\n        if (!this.state.destroyed) {\n            this.state.destroyed = true;\n            this.state.ended = true;\n\n            this.buffer.data.length = 0;\n            this.buffer.error.length = 0;\n\n            this.listeners.data.length = 0;\n            this.listeners.error.length = 0;\n            this.listeners.end.length = 0;\n\n            this.pendingWritePromises.length = 0;\n        }\n    }\n}\n\n/**\n * Helper to fully read a T readable into a T.\n */\nexport function consumeReadable<T>(readable: Readable<T>, reducer: Reducer<T>): T {\n    const chunks: T[] = [];\n\n    let chunk: T | null;\n    while ((chunk = readable.read()) !== null) {\n        chunks.push(chunk);\n    }\n\n    return reducer(chunks);\n}\n\n/**\n * Helper to read a T readable up to a maximum of chunks. If the limit is\n * reached, will return a readable instead to ensure all data can still\n * be read.\n */\nexport function consumeReadableWithLimit<T>(readable: Readable<T>, reducer: Reducer<T>, maxChunks: number): T | Readable<T> {\n    const chunks: T[] = [];\n\n    let chunk: T | null | undefined = undefined;\n    while ((chunk = readable.read()) !== null && chunks.length < maxChunks) {\n        chunks.push(chunk);\n    }\n\n    // If the last chunk is null, it means we reached the end of\n    // the readable and return all the data at once\n    if (chunk === null && chunks.length > 0) {\n        return reducer(chunks);\n    }\n\n    // Otherwise, we still have a chunk, it means we reached the maxChunks\n    // value and as such we return a new Readable that first returns\n    // the existing read chunks and then continues with reading from\n    // the underlying readable.\n    return {\n        read: () => {\n\n            // First consume chunks from our array\n            if (chunks.length > 0) {\n                return chunks.shift()!;\n            }\n\n            // Then ensure to return our last read chunk\n            if (typeof chunk !== 'undefined') {\n                const lastReadChunk = chunk;\n\n                // explicitly use undefined here to indicate that we consumed\n                // the chunk, which could have either been null or valued.\n                chunk = undefined;\n\n                return lastReadChunk;\n            }\n\n            // Finally delegate back to the Readable\n            return readable.read();\n        }\n    };\n}\n\n/**\n * Helper to read a T readable up to a maximum of chunks. If the limit is\n * reached, will return a readable instead to ensure all data can still\n * be read.\n */\nexport function peekReadable<T>(readable: Readable<T>, reducer: Reducer<T>, maxChunks: number): T | Readable<T> {\n    const chunks: T[] = [];\n\n    let chunk: T | null | undefined = undefined;\n    while ((chunk = readable.read()) !== null && chunks.length < maxChunks) {\n        chunks.push(chunk);\n    }\n\n    // If the last chunk is null, it means we reached the end of\n    // the readable and return all the data at once\n    if (chunk === null && chunks.length > 0) {\n        return reducer(chunks);\n    }\n\n    // Otherwise, we still have a chunk, it means we reached the maxChunks\n    // value and as such we return a new Readable that first returns\n    // the existing read chunks and then continues with reading from\n    // the underlying readable.\n    return {\n        read: () => {\n\n            // First consume chunks from our array\n            if (chunks.length > 0) {\n                return chunks.shift()!;\n            }\n\n            // Then ensure to return our last read chunk\n            if (typeof chunk !== 'undefined') {\n                const lastReadChunk = chunk;\n\n                // explicitly use undefined here to indicate that we consumed\n                // the chunk, which could have either been null or valued.\n                chunk = undefined;\n\n                return lastReadChunk;\n            }\n\n            // Finally delegate back to the Readable\n            return readable.read();\n        }\n    };\n}\n\n/**\n * Helper to fully read a T stream into a T.\n */\nexport function consumeStream<T>(stream: ReadableStream<T>, reducer: Reducer<T>): Promise<T> {\n    return new Promise((resolve, reject) => {\n        const chunks: T[] = [];\n\n        stream.on('data', data => chunks.push(data));\n        stream.on('error', error => reject(error));\n        stream.on('end', () => resolve(reducer(chunks)));\n    });\n}\n\n/**\n * Helper to peek up to `maxChunks` into a stream. The return type signals if\n * the stream has ended or not. If not, caller needs to add a `data` listener\n * to continue reading.\n */\nexport function peekStream<T>(stream: ReadableStream<T>, maxChunks: number): Promise<ReadableBufferedStream<T>> {\n    return new Promise((resolve, reject) => {\n        const streamListeners = new DisposableCollection();\n\n        // Data Listener\n        const buffer: T[] = [];\n        const dataListener = (chunk: T) => {\n\n            // Add to buffer\n            buffer.push(chunk);\n\n            // We reached maxChunks and thus need to return\n            if (buffer.length > maxChunks) {\n\n                // Dispose any listeners and ensure to pause the\n                // stream so that it can be consumed again by caller\n                streamListeners.dispose();\n                stream.pause();\n\n                return resolve({ stream, buffer, ended: false });\n            }\n        };\n\n        streamListeners.push(Disposable.create(() => stream.removeListener('data', dataListener)));\n        stream.on('data', dataListener);\n\n        // Error Listener\n        const errorListener = (error: Error) => reject(error);\n\n        streamListeners.push(Disposable.create(() => stream.removeListener('error', errorListener)));\n        stream.on('error', errorListener);\n\n        const endListener = () => resolve({ stream, buffer, ended: true });\n\n        streamListeners.push(Disposable.create(() => stream.removeListener('end', endListener)));\n        stream.on('end', endListener);\n    });\n}\n\n/**\n * Helper to read a T stream up to a maximum of chunks. If the limit is\n * reached, will return a stream instead to ensure all data can still\n * be read.\n */\nexport function consumeStreamWithLimit<T>(stream: ReadableStream<T>, reducer: Reducer<T>, maxChunks: number): Promise<T | ReadableStream<T>> {\n    return new Promise((resolve, reject) => {\n        const chunks: T[] = [];\n\n        let wrapperStream: WriteableStream<T> | undefined = undefined;\n\n        stream.on('data', data => {\n\n            // If we reach maxChunks, we start to return a stream\n            // and make sure that any data we have already read\n            // is in it as well\n            if (!wrapperStream && chunks.length === maxChunks) {\n                wrapperStream = newWriteableStream(reducer);\n                while (chunks.length) {\n                    wrapperStream.write(chunks.shift()!);\n                }\n\n                wrapperStream.write(data);\n\n                return resolve(wrapperStream);\n            }\n\n            if (wrapperStream) {\n                wrapperStream.write(data);\n            } else {\n                chunks.push(data);\n            }\n        });\n\n        stream.on('error', error => {\n            if (wrapperStream) {\n                wrapperStream.error(error);\n            } else {\n                return reject(error);\n            }\n        });\n\n        stream.on('end', () => {\n            if (wrapperStream) {\n                while (chunks.length) {\n                    wrapperStream.write(chunks.shift()!);\n                }\n\n                wrapperStream.end();\n            } else {\n                return resolve(reducer(chunks));\n            }\n        });\n    });\n}\n\n/**\n * Helper to create a readable stream from an existing T.\n */\nexport function toStream<T>(t: T, reducer: Reducer<T>): ReadableStream<T> {\n    const stream = newWriteableStream<T>(reducer);\n\n    stream.end(t);\n\n    return stream;\n}\n\n/**\n * Helper to convert a T into a Readable<T>.\n */\nexport function toReadable<T>(t: T): Readable<T> {\n    let consumed = false;\n\n    return {\n        read: () => {\n            if (consumed) {\n                return null;\n            }\n\n            consumed = true;\n\n            return t;\n        }\n    };\n}\n\n/**\n * Helper to transform a readable stream into another stream.\n */\nexport function transform<Original, Transformed>(stream: ReadableStreamEvents<Original>, transformer: ITransformer<Original, Transformed>, reducer: Reducer<Transformed>): ReadableStream<Transformed> {\n    const target = newWriteableStream<Transformed>(reducer);\n\n    stream.on('data', data => target.write(transformer.data(data)));\n    stream.on('end', () => target.end());\n    stream.on('error', error => target.error(transformer.error ? transformer.error(error) : error));\n\n    return target;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/strings.ts\n\nimport { CharCode } from './char-code';\n\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack: string, needle: string): boolean {\n    const diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.indexOf(needle, diff) === diff;\n    } else if (diff === 0) {\n        return haystack === needle;\n    } else {\n        return false;\n    }\n}\nexport function isLowerAsciiLetter(code: number): boolean {\n    return code >= CharCode.a && code <= CharCode.z;\n}\n\nexport function isUpperAsciiLetter(code: number): boolean {\n    return code >= CharCode.A && code <= CharCode.Z;\n}\n\nfunction isAsciiLetter(code: number): boolean {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\nexport function equalsIgnoreCase(a: string, b: string): boolean {\n    const len1 = a ? a.length : 0;\n    const len2 = b ? b.length : 0;\n\n    if (len1 !== len2) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(a, b);\n}\n\nfunction doEqualsIgnoreCase(a: string, b: string, stopAt = a.length): boolean {\n    if (typeof a !== 'string' || typeof b !== 'string') {\n        return false;\n    }\n\n    for (let i = 0; i < stopAt; i++) {\n        const codeA = a.charCodeAt(i);\n        const codeB = b.charCodeAt(i);\n\n        if (codeA === codeB) {\n            continue;\n        }\n\n        // a-z A-Z\n        if (isAsciiLetter(codeA) && isAsciiLetter(codeB)) {\n            const diff = Math.abs(codeA - codeB);\n            if (diff !== 0 && diff !== 32) {\n                return false;\n            }\n        }\n\n        // Any other charcode\n        // tslint:disable-next-line:one-line\n        else {\n            if (String.fromCharCode(codeA).toLowerCase() !== String.fromCharCode(codeB).toLowerCase()) {\n                return false;\n            }\n        }\n    }\n\n    return true;\n}\n\n/**\n * @returns the length of the common prefix of the two strings.\n */\nexport function commonPrefixLength(a: string, b: string): number {\n\n    let i: number;\n    const len = Math.min(a.length, b.length);\n\n    for (i = 0; i < len; i++) {\n        if (a.charCodeAt(i) !== b.charCodeAt(i)) {\n            return i;\n        }\n    }\n\n    return len;\n}\n\n/**\n * Escapes regular expression characters in a given string\n */\nexport function escapeRegExpCharacters(value: string): string {\n    return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)\\#]/g, '\\\\$&');\n}\n\nexport function startsWithIgnoreCase(str: string, candidate: string): boolean {\n    const candidateLength = candidate.length;\n    if (candidate.length > str.length) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(str, candidate, candidateLength);\n}\n\nexport function* split(s: string, splitter: string): IterableIterator<string> {\n    let start = 0;\n    while (start < s.length) {\n        let end = s.indexOf(splitter, start);\n        if (end === -1) {\n            end = s.length;\n        }\n\n        yield s.substring(start, end);\n        start = end + splitter.length;\n    }\n}\n\nexport function escapeInvisibleChars(value: string): string {\n    return value.replace(/\\n/g, '\\\\n').replace(/\\r/g, '\\\\r');\n}\n\nexport function unescapeInvisibleChars(value: string): string {\n    return value.replace(/\\\\n/g, '\\n').replace(/\\\\r/g, '\\r');\n}\n\nexport function compare(a: string, b: string): number {\n    if (a < b) {\n        return -1;\n    } else if (a > b) {\n        return 1;\n    } else {\n        return 0;\n    }\n}\n\nexport function compareSubstring(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n    for (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n        const codeA = a.charCodeAt(aStart);\n        const codeB = b.charCodeAt(bStart);\n        if (codeA < codeB) {\n            return -1;\n        } else if (codeA > codeB) {\n            return 1;\n        }\n    }\n    const aLen = aEnd - aStart;\n    const bLen = bEnd - bStart;\n    if (aLen < bLen) {\n        return -1;\n    } else if (aLen > bLen) {\n        return 1;\n    }\n    return 0;\n}\n\nexport function compareIgnoreCase(a: string, b: string): number {\n    return compareSubstringIgnoreCase(a, b, 0, a.length, 0, b.length);\n}\n\nexport function compareSubstringIgnoreCase(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n\n    for (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n\n        const codeA = a.charCodeAt(aStart);\n        const codeB = b.charCodeAt(bStart);\n\n        if (codeA === codeB) {\n            // equal\n            continue;\n        }\n\n        const diff = codeA - codeB;\n        if (diff === 32 && isUpperAsciiLetter(codeB)) { // codeB =[65-90] && codeA =[97-122]\n            continue;\n\n        } else if (diff === -32 && isUpperAsciiLetter(codeA)) {  // codeB =[97-122] && codeA =[65-90]\n            continue;\n        }\n\n        if (isLowerAsciiLetter(codeA) && isLowerAsciiLetter(codeB)) {\n            //\n            return diff;\n\n        } else {\n            return compareSubstring(a.toLowerCase(), b.toLowerCase(), aStart, aEnd, bStart, bEnd);\n        }\n    }\n\n    const aLen = aEnd - aStart;\n    const bLen = bEnd - bStart;\n\n    if (aLen < bLen) {\n        return -1;\n    } else if (aLen > bLen) {\n        return 1;\n    }\n\n    return 0;\n}\n","// *****************************************************************************\n// Copyright (C) 2023 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport class TelemetryTrustedValue<T> {\n    readonly value: T;\n\n    constructor(value: T) {\n        this.value = value;\n    }\n}\n\nexport interface TelemetryLogger {\n    readonly sender: TelemetrySender;\n    readonly options: TelemetryLoggerOptions | undefined;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logUsage(eventName: string, data?: Record<string, any | TelemetryTrustedValue<any>>): void;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logError(eventNameOrException: string | Error, data?: Record<string, any | TelemetryTrustedValue<any>>): void;\n\n    dispose(): void;\n}\n\ninterface TelemetrySender {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    sendEventData(eventName: string, data?: Record<string, any>): void;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    sendErrorData(error: Error, data?: Record<string, any>): void;\n    flush?(): void | Thenable<void>;\n}\n\ninterface TelemetryLoggerOptions {\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport { ArrayUtils } from './array-utils';\nexport { Prioritizeable } from './prioritizeable';\n\ntype UnknownObject<T extends object> = Record<string | number | symbol, unknown> & { [K in keyof T]: unknown };\n\nexport type Deferred<T> = { [P in keyof T]: Promise<T[P]> };\nexport type MaybeArray<T> = T | T[];\nexport type MaybeNull<T> = { [P in keyof T]: T[P] | null };\nexport type MaybePromise<T> = T | PromiseLike<T>;\nexport type MaybeUndefined<T> = { [P in keyof T]?: T[P] | undefined };\nexport type Mutable<T> = { -readonly [P in keyof T]: T[P] };\nexport type RecursivePartial<T> = {\n    [P in keyof T]?: T[P] extends (infer I)[]\n    ? RecursivePartial<I>[]\n    : RecursivePartial<T[P]>;\n};\n\nexport function isBoolean(value: unknown): value is boolean {\n    return value === true || value === false;\n}\n\nexport function isString(value: unknown): value is string {\n    return typeof value === 'string' || value instanceof String;\n}\n\nexport function isNumber(value: unknown): value is number {\n    return typeof value === 'number' || value instanceof Number;\n}\n\nexport function isError(value: unknown): value is Error {\n    return value instanceof Error;\n}\n\nexport function isErrorLike(value: unknown): value is Error {\n    return isObject(value) && isString(value.name) && isString(value.message) && (isUndefined(value.stack) || isString(value.stack));\n}\n\n// eslint-disable-next-line space-before-function-paren\nexport function isFunction<T extends (...args: unknown[]) => unknown>(value: unknown): value is T {\n    return typeof value === 'function';\n}\n\n/**\n * @returns whether the provided parameter is an empty JavaScript Object or not.\n */\nexport function isEmptyObject(obj: unknown): obj is object {\n    if (!isObject(obj)) {\n        return false;\n    }\n\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nexport function isObject<T extends object>(value: unknown): value is UnknownObject<T> {\n    // eslint-disable-next-line no-null/no-null\n    return typeof value === 'object' && value !== null;\n}\n\nexport function isUndefined(value: unknown): value is undefined {\n    return typeof value === 'undefined';\n}\n\n/**\n * @param value value to check.\n * @param every optional predicate ran on every element of the array.\n * @param thisArg value to substitute `this` with when invoking in the predicate.\n * @returns whether or not `value` is an array.\n */\nexport function isArray<T>(value: unknown, every?: (value: unknown) => unknown, thisArg?: unknown): value is T[] {\n    return Array.isArray(value) && (!isFunction(every) || value.every(every, thisArg));\n}\n\nexport function isStringArray(value: unknown): value is string[] {\n    return isArray(value, isString);\n}\n\n/**\n * Creates a shallow copy with all ownkeys of the original object that are `null` made `undefined`\n */\nexport function nullToUndefined<T>(nullable: MaybeNull<T>): MaybeUndefined<T> {\n    const undefinable = { ...nullable } as MaybeUndefined<T>;\n    for (const key in nullable) {\n        // eslint-disable-next-line no-null/no-null\n        if (nullable[key] === null && Object.prototype.hasOwnProperty.call(nullable, key)) {\n            undefinable[key] = undefined;\n        }\n    }\n    return undefinable;\n}\n\n/**\n * Throws when called and statically makes sure that all variants of a type were consumed.\n */\nexport function unreachable(_never: never, message: string = 'unhandled case'): never {\n    throw new Error(message);\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI as Uri } from 'vscode-uri';\nimport { Path } from './path';\n\nexport class URI {\n\n    public static fromComponents(components: UriComponents): URI {\n        return new URI(Uri.revive(components));\n    }\n\n    public static fromFilePath(path: string): URI {\n        return new URI(Uri.file(path));\n    }\n\n    public static isUri(uri: unknown): boolean {\n        return Uri.isUri(uri);\n    }\n\n    private readonly codeUri: Uri;\n    private _path: Path | undefined;\n\n    constructor(uri: string | Uri = '') {\n        if (uri instanceof Uri) {\n            this.codeUri = uri;\n        } else {\n            this.codeUri = Uri.parse(uri);\n        }\n    }\n\n    /**\n     * TODO move implementation to `DefaultUriLabelProviderContribution.getName`\n     *\n     * @deprecated use `LabelProvider.getName` instead\n     */\n    get displayName(): string {\n        const base = this.path.base;\n        if (base) {\n            return base;\n        }\n        if (this.path.isRoot) {\n            return this.path.fsPath();\n        }\n        return '';\n    }\n\n    /**\n     * Return all uri from the current to the top most.\n     */\n    get allLocations(): URI[] {\n        const locations = [];\n        let location: URI = this;\n        while (!location.path.isRoot && location.path.hasDir) {\n            locations.push(location);\n            location = location.parent;\n        }\n        locations.push(location);\n        return locations;\n    }\n\n    get parent(): URI {\n        if (this.path.isRoot) {\n            return this;\n        }\n        return this.withPath(this.path.dir);\n    }\n\n    relative(uri: URI): Path | undefined {\n        if (this.authority !== uri.authority || this.scheme !== uri.scheme) {\n            return undefined;\n        }\n        return this.path.relative(uri.path);\n    }\n\n    resolve(path: string | Path): URI {\n        return this.withPath(this.path.join(path.toString()));\n    }\n\n    /**\n     * @returns a new, absolute URI if one can be computed from the path segments passed in.\n     */\n    resolveToAbsolute(...pathSegments: Array<string | Path>): URI | undefined {\n        const absolutePath = this.path.resolve(...pathSegments.map(path => path.toString()));\n        if (absolutePath) {\n            return this.withPath(absolutePath);\n        }\n    }\n\n    /**\n     * return a new URI replacing the current with the given scheme\n     */\n    withScheme(scheme: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return a new URI replacing the current with the given authority\n     */\n    withAuthority(authority: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            authority\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a authority\n     */\n    withoutAuthority(): URI {\n        return this.withAuthority('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given path\n     */\n    withPath(path: string | Path): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            path: path.toString()\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a path\n     */\n    withoutPath(): URI {\n        return this.withPath('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given query\n     */\n    withQuery(query: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            query\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a query\n     */\n    withoutQuery(): URI {\n        return this.withQuery('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given fragment\n     */\n    withFragment(fragment: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            fragment\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a fragment\n     */\n    withoutFragment(): URI {\n        return this.withFragment('');\n    }\n\n    /**\n     * return a new URI replacing the current with its normalized path, resolving '..' and '.' segments\n     */\n    normalizePath(): URI {\n        return this.withPath(this.path.normalize());\n    }\n\n    get scheme(): string {\n        return this.codeUri.scheme;\n    }\n\n    get authority(): string {\n        return this.codeUri.authority;\n    }\n\n    get path(): Path {\n        if (this._path === undefined) {\n            this._path = new Path(this.codeUri.path);\n        }\n        return this._path;\n    }\n\n    get query(): string {\n        return this.codeUri.query;\n    }\n\n    get fragment(): string {\n        return this.codeUri.fragment;\n    }\n\n    toString(skipEncoding?: boolean): string {\n        return this.codeUri.toString(skipEncoding);\n    }\n\n    isEqual(uri: URI, caseSensitive: boolean = true): boolean {\n        if (!this.hasSameOrigin(uri)) {\n            return false;\n        }\n\n        return caseSensitive\n            ? this.toString() === uri.toString()\n            : this.toString().toLowerCase() === uri.toString().toLowerCase();\n    }\n\n    isEqualOrParent(uri: URI, caseSensitive: boolean = true): boolean {\n        if (!this.hasSameOrigin(uri)) {\n            return false;\n        }\n        let left = this.path;\n        let right = uri.path;\n        if (!caseSensitive) {\n            left = new Path(left.toString().toLowerCase());\n            right = new Path(right.toString().toLowerCase());\n        }\n        return left.isEqualOrParent(right);\n    }\n\n    static getDistinctParents(uris: URI[]): URI[] {\n        const result: URI[] = [];\n        uris.forEach((uri, i) => {\n            if (!uris.some((otherUri, index) => index !== i && otherUri.isEqualOrParent(uri))) {\n                result.push(uri);\n            }\n        });\n        return result;\n    }\n\n    private hasSameOrigin(uri: URI): boolean {\n        return (this.authority === uri.authority) && (this.scheme === uri.scheme);\n    }\n\n    toComponents(): UriComponents {\n        return {\n            scheme: this.scheme,\n            authority: this.authority,\n            path: this.path.toString(),\n            query: this.query,\n            fragment: this.fragment\n        };\n    }\n}\n\nexport interface UriComponents {\n    scheme: string;\n    authority: string;\n    path: string;\n    query: string;\n    fragment: string;\n    external?: string;\n}\n\nexport default URI;\n","// *****************************************************************************\n// Copyright (C) 2022 STMicroelectronics.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/**\n * Denotes a column in the editor window.\n * Columns are used to show editors side by side.\n */\nexport enum ViewColumn {\n    Active = -1,\n    Beside = -2,\n    One = 1,\n    Two = 2,\n    Three = 3,\n    Four = 4,\n    Five = 5,\n    Six = 6,\n    Seven = 7,\n    Eight = 8,\n    Nine = 9\n}\n","module.exports = require('@phosphor/coreutils');\n\n;(globalThis['theia'] = globalThis['theia'] || {})['@theia/core/shared/@phosphor/coreutils'] = this;\n","module.exports = require('inversify');\n\n;(globalThis['theia'] = globalThis['theia'] || {})['@theia/core/shared/inversify'] = this;\n","module.exports = require('vscode-languageserver-protocol');\n\n;(globalThis['theia'] = globalThis['theia'] || {})['@theia/core/shared/vscode-languageserver-protocol'] = this;\n","module.exports = require('vscode-uri');\n\n;(globalThis['theia'] = globalThis['theia'] || {})['@theia/core/shared/vscode-uri'] = this;\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// Some entities copied and modified from https://github.com/Microsoft/vscode-debugadapter-node/blob/master/adapter/src/protocol.ts\n\nimport {\n    DebugAdapter,\n    DebugAdapterSession\n} from './debug-model';\nimport { DebugProtocol } from '@vscode/debugprotocol';\nimport { DebugChannel } from './debug-service';\n\n/**\n * [DebugAdapterSession](#DebugAdapterSession) implementation.\n */\nexport class DebugAdapterSessionImpl implements DebugAdapterSession {\n\n    private channel: DebugChannel | undefined;\n    private isClosed: boolean = false;\n\n    constructor(\n        readonly id: string,\n        protected readonly debugAdapter: DebugAdapter\n    ) {\n        this.debugAdapter.onMessageReceived((message: string) => this.send(message));\n        this.debugAdapter.onClose(() => this.onDebugAdapterExit());\n        this.debugAdapter.onError(error => this.onDebugAdapterError(error));\n\n    }\n\n    async start(channel: DebugChannel): Promise<void> {\n\n        console.debug(`starting debug adapter session '${this.id}'`);\n        if (this.channel) {\n            throw new Error('The session has already been started, id: ' + this.id);\n        }\n        this.channel = channel;\n        this.channel.onMessage((message: string) => this.write(message));\n        this.channel.onClose(() => this.channel = undefined);\n\n    }\n\n    protected onDebugAdapterExit(): void {\n        this.isClosed = true;\n        console.debug(`onDebugAdapterExit session: '${this.id}'`);\n        if (this.channel) {\n            this.channel.close();\n            this.channel = undefined;\n        }\n    }\n\n    protected onDebugAdapterError(error: Error): void {\n        console.debug(`error in debug adapter session: '${this.id}': ${JSON.stringify(error)}`);\n        const event: DebugProtocol.Event = {\n            type: 'event',\n            event: 'error',\n            seq: -1,\n            body: error\n        };\n        this.send(JSON.stringify(event));\n    }\n\n    protected send(message: string): void {\n        if (this.channel) {\n            this.channel.send(message);\n        }\n    }\n\n    protected write(message: string): void {\n        if (!this.isClosed) {\n            this.debugAdapter.send(message);\n        }\n    }\n\n    async stop(): Promise<void> {\n        console.debug(`stopping debug adapter session: '${this.id}'`);\n\n        if (!this.isClosed) {\n            await this.debugAdapter.stop();\n        }\n        this.channel?.close();\n        this.channel = undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * The URI scheme for debug URIs.\n */\nexport const DEBUG_SCHEME = 'debug';\n/**\n * The pattern for URI schemes.\n */\nexport const SCHEME_PATTERN = /^[a-zA-Z][a-zA-Z0-9\\+\\-\\.]+:/;\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DebugAdapter } from './debug-model';\nimport * as theia from '@theia/plugin';\n\n/**\n * A debug adapter for using the inline implementation from a plugin.\n */\nexport class InlineDebugAdapter implements DebugAdapter {\n    private messageReceivedEmitter = new Emitter<string>();\n    onMessageReceived: Event<string> = this.messageReceivedEmitter.event;\n    onError: Event<Error> = Event.None;\n    private closeEmitter = new Emitter<void>();\n    onClose: Event<void> = this.closeEmitter.event;\n\n    constructor(private debugAdapter: theia.DebugAdapter) {\n        this.debugAdapter.onDidSendMessage(msg => {\n            this.messageReceivedEmitter.fire(JSON.stringify(msg));\n        });\n    }\n\n    async start(): Promise<void> {\n    }\n\n    send(message: string): void {\n        this.debugAdapter.handleMessage(JSON.parse(message));\n    }\n\n    async stop(): Promise<void> {\n        this.debugAdapter.dispose();\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { ChildProcess } from 'child_process';\nimport * as stream from 'stream';\nimport * as net from 'net';\nimport { DebugAdapter } from '../common/debug-model';\n\nabstract class StreamDebugAdapter extends DisposableCollection {\n    private messageReceivedEmitter = new Emitter<string>();\n    onMessageReceived: Event<string> = this.messageReceivedEmitter.event;\n    private errorEmitter = new Emitter<Error>();\n    onError: Event<Error> = this.errorEmitter.event;\n    private closeEmitter = new Emitter<void>();\n    onClose: Event<void> = this.closeEmitter.event;\n\n    // these constants are for the message header, see: https://microsoft.github.io/debug-adapter-protocol/overview#header-part\n    private static TWO_CRLF = '\\r\\n\\r\\n';\n    private static CONTENT_LENGTH = 'Content-Length';\n    private contentLength: number = -1;\n    private buffer: Buffer = Buffer.alloc(0);\n\n    constructor(private fromAdapter: stream.Readable, private toAdapter: stream.Writable) {\n        super();\n\n        this.fromAdapter.on('data', (data: Buffer) => this.handleData(data));\n        this.fromAdapter.on('close', () => this.handleClosed()); // FIXME pass a proper exit code\n        this.fromAdapter.on('error', error => this.errorEmitter.fire(error));\n        this.toAdapter.on('error', error => this.errorEmitter.fire(error));\n    }\n\n    handleClosed(): void {\n        this.closeEmitter.fire();\n    }\n\n    send(message: string): void {\n        const msg = `${StreamDebugAdapter.CONTENT_LENGTH}: ${Buffer.byteLength(message, 'utf8')}${StreamDebugAdapter.TWO_CRLF}${message}`;\n\n        this.toAdapter.write(msg, 'utf8');\n    }\n\n    protected handleData(data: Buffer): void {\n        this.buffer = Buffer.concat([this.buffer, data]);\n\n        while (true) {\n            if (this.contentLength >= 0) {\n                if (this.buffer.length >= this.contentLength) {\n                    const message = this.buffer.toString('utf8', 0, this.contentLength);\n                    this.buffer = this.buffer.slice(this.contentLength);\n                    this.contentLength = -1;\n\n                    if (message.length > 0) {\n                        this.messageReceivedEmitter.fire(message);\n                    }\n                    continue; // there may be more complete messages to process\n                }\n            } else {\n                let idx = this.buffer.indexOf(StreamDebugAdapter.CONTENT_LENGTH);\n                if (idx > 0) {\n                    // log unrecognized output\n                    const output = this.buffer.slice(0, idx);\n                    console.log(output.toString('utf-8'));\n\n                    this.buffer = this.buffer.slice(idx);\n                }\n\n                idx = this.buffer.indexOf(StreamDebugAdapter.TWO_CRLF);\n                if (idx !== -1) {\n                    const header = this.buffer.toString('utf8', 0, idx);\n                    const lines = header.split('\\r\\n');\n                    for (let i = 0; i < lines.length; i++) {\n                        const pair = lines[i].split(/: +/);\n                        if (pair[0] === StreamDebugAdapter.CONTENT_LENGTH) {\n                            this.contentLength = +pair[1];\n                        }\n                    }\n                    this.buffer = this.buffer.slice(idx + StreamDebugAdapter.TWO_CRLF.length);\n                    continue;\n                }\n            }\n            break;\n        }\n    }\n}\n\nexport class ProcessDebugAdapter extends StreamDebugAdapter implements DebugAdapter {\n    protected readonly process: ChildProcess;\n    constructor(process: ChildProcess) {\n        super(process.stdout!, process.stdin!);\n        this.process = process;\n    }\n\n    async stop(): Promise<void> {\n        this.process.kill();\n        this.process.stdin?.end();\n    }\n}\n\nexport class SocketDebugAdapter extends StreamDebugAdapter implements DebugAdapter {\n    private readonly socket: net.Socket;\n    constructor(socket: net.Socket) {\n        super(socket, socket);\n        this.socket = socket;\n    }\n\n    stop(): Promise<void> {\n        return new Promise<void>(resolve => {\n            this.socket.end(() => resolve());\n        });\n    }\n}\n","\n// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function ok(val?: any, message?: string): void {\n    if (!val || val === null) {\n        throw new Error(message ? `Assertion failed (${message})` : 'Assertion failed');\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// copied from https://github.com/microsoft/vscode/blob/53eac52308c4611000a171cc7bf1214293473c78/src/vs/workbench/api/common/cache.ts\nexport class Cache<T> {\n\n    private static readonly enableDebugLogging = false;\n\n    private readonly _data = new Map<number, readonly T[]>();\n    private _idPool = 1;\n\n    constructor(\n        private readonly id: string\n    ) { }\n\n    add(item: readonly T[]): number {\n        const id = this._idPool++;\n        this._data.set(id, item);\n        this.logDebugInfo();\n        return id;\n    }\n\n    get(pid: number, id: number): T | undefined {\n        return this._data.has(pid) ? this._data.get(pid)![id] : undefined;\n    }\n\n    delete(id: number): void {\n        this._data.delete(id);\n        this.logDebugInfo();\n    }\n\n    private logDebugInfo(): void {\n        if (!Cache.enableDebugLogging) {\n            return;\n        }\n        console.log(`${this.id} cache size  ${this._data.size}`);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/editor/common/core/characterClassifier.ts\n\nimport { toUint8 } from './uint';\n\n/**\n * A fast character classifier that uses a compact array for ASCII values.\n */\nexport class CharacterClassifier<T extends number> {\n    /**\n     * Maintain a compact (fully initialized ASCII map for quickly classifying ASCII characters - used more often in code).\n     */\n    protected _asciiMap: Uint8Array;\n\n    /**\n     * The entire map (sparse array).\n     */\n    protected _map: Map<number, number>;\n\n    protected _defaultValue: number;\n\n    constructor(_defaultValue: T) {\n        const defaultValue = toUint8(_defaultValue);\n\n        this._defaultValue = defaultValue;\n        this._asciiMap = CharacterClassifier._createAsciiMap(defaultValue);\n        this._map = new Map<number, number>();\n    }\n\n    private static _createAsciiMap(defaultValue: number): Uint8Array {\n        const asciiMap: Uint8Array = new Uint8Array(256);\n        for (let i = 0; i < 256; i++) {\n            asciiMap[i] = defaultValue;\n        }\n        return asciiMap;\n    }\n\n    public set(charCode: number, _value: T): void {\n        const value = toUint8(_value);\n\n        if (charCode >= 0 && charCode < 256) {\n            this._asciiMap[charCode] = value;\n        } else {\n            this._map.set(charCode, value);\n        }\n    }\n\n    public get(charCode: number): T {\n        if (charCode >= 0 && charCode < 256) {\n            return <T>this._asciiMap[charCode];\n        } else {\n            return <T>(this._map.get(charCode) || this._defaultValue);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport class IdGenerator {\n    private lastId: number;\n    constructor(private prefix: string) {\n        this.lastId = 0;\n    }\n\n    nextId(): string {\n        return this.prefix + (++this.lastId);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/editor/common/modes/linkComputer.ts\n\n/* eslint-disable max-len */\n\nimport { CharacterClassifier } from './character-classifier';\nimport { CharCode } from '@theia/core/lib/common/char-code';\nimport { DocumentLink as ILink } from './plugin-api-rpc-model';\n\nexport interface ILinkComputerTarget {\n    getLineCount(): number;\n    getLineContent(lineNumber: number): string;\n}\n\nexport const enum State {\n    Invalid = 0,\n    Start = 1,\n    H = 2,\n    HT = 3,\n    HTT = 4,\n    HTTP = 5,\n    F = 6,\n    FI = 7,\n    FIL = 8,\n    BeforeColon = 9,\n    AfterColon = 10,\n    AlmostThere = 11,\n    End = 12,\n    Accept = 13,\n    LastKnownState = 14 // marker, custom states may follow\n}\n\nexport type Edge = [State, number, State];\n\nexport class Uint8Matrix {\n\n    private readonly _data: Uint8Array;\n    public readonly rows: number;\n    public readonly cols: number;\n\n    constructor(rows: number, cols: number, defaultValue: number) {\n        const data = new Uint8Array(rows * cols);\n        for (let i = 0, len = rows * cols; i < len; i++) {\n            data[i] = defaultValue;\n        }\n\n        this._data = data;\n        this.rows = rows;\n        this.cols = cols;\n    }\n\n    public get(row: number, col: number): number {\n        return this._data[row * this.cols + col];\n    }\n\n    public set(row: number, col: number, value: number): void {\n        this._data[row * this.cols + col] = value;\n    }\n}\n\nexport class StateMachine {\n\n    private readonly _states: Uint8Matrix;\n    private readonly _maxCharCode: number;\n\n    constructor(edges: Edge[]) {\n        let maxCharCode = 0;\n        let maxState = State.Invalid;\n        for (let i = 0, len = edges.length; i < len; i++) {\n            const [from, chCode, to] = edges[i];\n            if (chCode > maxCharCode) {\n                maxCharCode = chCode;\n            }\n            if (from > maxState) {\n                maxState = from;\n            }\n            if (to > maxState) {\n                maxState = to;\n            }\n        }\n\n        maxCharCode++;\n        maxState++;\n\n        const states = new Uint8Matrix(maxState, maxCharCode, State.Invalid);\n        for (let i = 0, len = edges.length; i < len; i++) {\n            const [from, chCode, to] = edges[i];\n            states.set(from, chCode, to);\n        }\n\n        this._states = states;\n        this._maxCharCode = maxCharCode;\n    }\n\n    public nextState(currentState: State, chCode: number): State {\n        if (chCode < 0 || chCode >= this._maxCharCode) {\n            return State.Invalid;\n        }\n        return this._states.get(currentState, chCode);\n    }\n}\n\n// State machine for http:// or https:// or file://\nlet _stateMachine: StateMachine | null = null;\nfunction getStateMachine(): StateMachine {\n    if (_stateMachine === null) {\n        _stateMachine = new StateMachine([\n            [State.Start, CharCode.h, State.H],\n            [State.Start, CharCode.H, State.H],\n            [State.Start, CharCode.f, State.F],\n            [State.Start, CharCode.F, State.F],\n\n            [State.H, CharCode.t, State.HT],\n            [State.H, CharCode.T, State.HT],\n\n            [State.HT, CharCode.t, State.HTT],\n            [State.HT, CharCode.T, State.HTT],\n\n            [State.HTT, CharCode.p, State.HTTP],\n            [State.HTT, CharCode.P, State.HTTP],\n\n            [State.HTTP, CharCode.s, State.BeforeColon],\n            [State.HTTP, CharCode.S, State.BeforeColon],\n            [State.HTTP, CharCode.Colon, State.AfterColon],\n\n            [State.F, CharCode.i, State.FI],\n            [State.F, CharCode.I, State.FI],\n\n            [State.FI, CharCode.l, State.FIL],\n            [State.FI, CharCode.L, State.FIL],\n\n            [State.FIL, CharCode.e, State.BeforeColon],\n            [State.FIL, CharCode.E, State.BeforeColon],\n\n            [State.BeforeColon, CharCode.Colon, State.AfterColon],\n\n            [State.AfterColon, CharCode.Slash, State.AlmostThere],\n\n            [State.AlmostThere, CharCode.Slash, State.End],\n        ]);\n    }\n    return _stateMachine;\n}\n\nconst enum CharacterClass {\n    None = 0,\n    ForceTermination = 1,\n    CannotEndIn = 2\n}\n\nlet _classifier: CharacterClassifier<CharacterClass> | null = null;\nfunction getClassifier(): CharacterClassifier<CharacterClass> {\n    if (_classifier === null) {\n        _classifier = new CharacterClassifier<CharacterClass>(CharacterClass.None);\n\n        const FORCE_TERMINATION_CHARACTERS = ' \\t<>\\'\\\"';\n        for (let i = 0; i < FORCE_TERMINATION_CHARACTERS.length; i++) {\n            _classifier.set(FORCE_TERMINATION_CHARACTERS.charCodeAt(i), CharacterClass.ForceTermination);\n        }\n\n        const CANNOT_END_WITH_CHARACTERS = '.,;';\n        for (let i = 0; i < CANNOT_END_WITH_CHARACTERS.length; i++) {\n            _classifier.set(CANNOT_END_WITH_CHARACTERS.charCodeAt(i), CharacterClass.CannotEndIn);\n        }\n    }\n    return _classifier;\n}\n\nexport class LinkComputer {\n\n    private static _createLink(classifier: CharacterClassifier<CharacterClass>, line: string, lineNumber: number, linkBeginIndex: number, linkEndIndex: number): ILink {\n        // Do not allow to end link in certain characters...\n        let lastIncludedCharIndex = linkEndIndex - 1;\n        do {\n            const chCode = line.charCodeAt(lastIncludedCharIndex);\n            const chClass = classifier.get(chCode);\n            if (chClass !== CharacterClass.CannotEndIn) {\n                break;\n            }\n            lastIncludedCharIndex--;\n        } while (lastIncludedCharIndex > linkBeginIndex);\n\n        // Handle links enclosed in parens, square and curly brackets.\n        if (linkBeginIndex > 0) {\n            const charCodeBeforeLink = line.charCodeAt(linkBeginIndex - 1);\n            const lastCharCodeInLink = line.charCodeAt(lastIncludedCharIndex);\n\n            if (\n                (charCodeBeforeLink === CharCode.OpenParen && lastCharCodeInLink === CharCode.CloseParen)\n                || (charCodeBeforeLink === CharCode.OpenSquareBracket && lastCharCodeInLink === CharCode.CloseSquareBracket)\n                || (charCodeBeforeLink === CharCode.OpenCurlyBrace && lastCharCodeInLink === CharCode.CloseCurlyBrace)\n            ) {\n                // Do not end in ) if ( is before the link start\n                // Do not end in ] if [ is before the link start\n                // Do not end in } if { is before the link start\n                lastIncludedCharIndex--;\n            }\n        }\n\n        return {\n            range: {\n                startLineNumber: lineNumber,\n                startColumn: linkBeginIndex + 1,\n                endLineNumber: lineNumber,\n                endColumn: lastIncludedCharIndex + 2\n            },\n            url: line.substring(linkBeginIndex, lastIncludedCharIndex + 1)\n        };\n    }\n\n    public static computeLinks(model: ILinkComputerTarget, stateMachine: StateMachine = getStateMachine()): ILink[] {\n        const classifier = getClassifier();\n\n        const result: ILink[] = [];\n        for (let i = 1, lineCount = model.getLineCount(); i <= lineCount; i++) {\n            const line = model.getLineContent(i);\n            const len = line.length;\n\n            let j = 0;\n            let linkBeginIndex = 0;\n            let linkBeginChCode = 0;\n            let state = State.Start;\n            let hasOpenParens = false;\n            let hasOpenSquareBracket = false;\n            let inSquareBrackets = false;\n            let hasOpenCurlyBracket = false;\n\n            while (j < len) {\n\n                let resetStateMachine = false;\n                const chCode = line.charCodeAt(j);\n\n                if (state === State.Accept) {\n                    let chClass: CharacterClass;\n                    switch (chCode) {\n                        case CharCode.OpenParen:\n                            hasOpenParens = true;\n                            chClass = CharacterClass.None;\n                            break;\n                        case CharCode.CloseParen:\n                            chClass = (hasOpenParens ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        case CharCode.OpenSquareBracket:\n                            inSquareBrackets = true;\n                            hasOpenSquareBracket = true;\n                            chClass = CharacterClass.None;\n                            break;\n                        case CharCode.CloseSquareBracket:\n                            inSquareBrackets = false;\n                            chClass = (hasOpenSquareBracket ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        case CharCode.OpenCurlyBrace:\n                            hasOpenCurlyBracket = true;\n                            chClass = CharacterClass.None;\n                            break;\n                        case CharCode.CloseCurlyBrace:\n                            chClass = (hasOpenCurlyBracket ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        /* The following three rules make it that ' or \" or ` are allowed inside links if the link began with a different one */\n                        case CharCode.SingleQuote:\n                            chClass = (linkBeginChCode === CharCode.DoubleQuote || linkBeginChCode === CharCode.BackTick) ? CharacterClass.None : CharacterClass.ForceTermination;\n                            break;\n                        case CharCode.DoubleQuote:\n                            chClass = (linkBeginChCode === CharCode.SingleQuote || linkBeginChCode === CharCode.BackTick) ? CharacterClass.None : CharacterClass.ForceTermination;\n                            break;\n                        case CharCode.BackTick:\n                            chClass = (linkBeginChCode === CharCode.SingleQuote || linkBeginChCode === CharCode.DoubleQuote) ? CharacterClass.None : CharacterClass.ForceTermination;\n                            break;\n                        case CharCode.Asterisk:\n                            // `*` terminates a link if the link began with `*`\n                            chClass = (linkBeginChCode === CharCode.Asterisk) ? CharacterClass.ForceTermination : CharacterClass.None;\n                            break;\n                        case CharCode.Pipe:\n                            // `|` terminates a link if the link began with `|`\n                            chClass = (linkBeginChCode === CharCode.Pipe) ? CharacterClass.ForceTermination : CharacterClass.None;\n                            break;\n                        case CharCode.Space:\n                            // ` ` allow space in between [ and ]\n                            chClass = (inSquareBrackets ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        default:\n                            chClass = classifier.get(chCode);\n                    }\n\n                    // Check if character terminates link\n                    if (chClass === CharacterClass.ForceTermination) {\n                        result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, j));\n                        resetStateMachine = true;\n                    }\n                } else if (state === State.End) {\n\n                    let chClass: CharacterClass;\n                    if (chCode === CharCode.OpenSquareBracket) {\n                        // Allow for the authority part to contain ipv6 addresses which contain [ and ]\n                        hasOpenSquareBracket = true;\n                        chClass = CharacterClass.None;\n                    } else {\n                        chClass = classifier.get(chCode);\n                    }\n\n                    // Check if character terminates link\n                    if (chClass === CharacterClass.ForceTermination) {\n                        resetStateMachine = true;\n                    } else {\n                        state = State.Accept;\n                    }\n                } else {\n                    state = stateMachine.nextState(state, chCode);\n                    if (state === State.Invalid) {\n                        resetStateMachine = true;\n                    }\n                }\n\n                if (resetStateMachine) {\n                    state = State.Start;\n                    hasOpenParens = false;\n                    hasOpenSquareBracket = false;\n                    hasOpenCurlyBracket = false;\n\n                    // Record where the link started\n                    linkBeginIndex = j + 1;\n                    linkBeginChCode = chCode;\n                }\n\n                j++;\n            }\n\n            if (state === State.Accept) {\n                result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, len));\n            }\n\n        }\n\n        return result;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport interface ObjectIdentifier {\n    $ident: number;\n}\n\nexport namespace ObjectIdentifier {\n    export const name = '$ident';\n\n    export function mixin<T>(obj: T, id: number): T & ObjectIdentifier {\n        Object.defineProperty(obj, name, { value: id, enumerable: true });\n        return <T & ObjectIdentifier>obj;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function of(obj: any): number {\n        return obj[name];\n    }\n}\n","/* eslint-disable */\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/base/common/objects.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\nimport { isUndefinedOrNull, isArray, isObject } from './types';\n\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function cloneAndChange(obj: any, changer: (orig: any) => any): any {\n    return _cloneAndChange(obj, changer, new Set());\n}\n\nfunction _cloneAndChange(obj: any, changer: (orig: any) => any, seen: Set<any>): any {\n    if (isUndefinedOrNull(obj)) {\n        return obj;\n    }\n\n    const changed = changer(obj);\n    if (typeof changed !== 'undefined') {\n        return changed;\n    }\n\n    if (isArray(obj)) {\n        const r1: any[] = [];\n        for (const e of obj) {\n            r1.push(_cloneAndChange(e, changer, seen));\n        }\n        return r1;\n    }\n\n    if (isObject(obj)) {\n        if (seen.has(obj)) {\n            throw new Error('Cannot clone recursive data-structure');\n        }\n        seen.add(obj);\n        const r2 = {};\n        for (let i2 in obj) {\n            if (_hasOwnProperty.call(obj, i2)) {\n                (r2 as any)[i2] = _cloneAndChange(obj[i2], changer, seen);\n            }\n        }\n        seen.delete(obj);\n        return r2;\n    }\n\n    return obj;\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// copied from hhttps://github.com/microsoft/vscode/blob/6261075646f055b99068d3688932416f2346dd3b/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L1291-L1310.\n\nexport class ReferenceMap<T> {\n    private readonly _references = new Map<number, T>();\n    private _idPool = 1;\n\n    createReferenceId(value: T): number {\n        const id = this._idPool++;\n        this._references.set(id, value);\n        return id;\n    }\n\n    disposeReferenceId(referenceId: number): T | undefined {\n        const value = this._references.get(referenceId);\n        this._references.delete(referenceId);\n        return value;\n    }\n\n    get(referenceId: number): T | undefined {\n        return this._references.get(referenceId);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/0eb3a02ca2bcfab5faa3dc6e52d7c079efafcab0/src/vs/workbench/api/common/shared/semanticTokensDto.ts\n\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\n\nlet _isLittleEndian = true;\nlet _isLittleEndianComputed = false;\nfunction isLittleEndian(): boolean {\n    if (!_isLittleEndianComputed) {\n        _isLittleEndianComputed = true;\n        const test = new Uint8Array(2);\n        test[0] = 1;\n        test[1] = 2;\n        const view = new Uint16Array(test.buffer);\n        _isLittleEndian = (view[0] === (2 << 8) + 1);\n    }\n    return _isLittleEndian;\n}\n\nexport interface IFullSemanticTokensDto {\n    id: number;\n    type: 'full';\n    data: Uint32Array;\n}\n\nexport interface IDeltaSemanticTokensDto {\n    id: number;\n    type: 'delta';\n    deltas: { start: number; deleteCount: number; data?: Uint32Array; }[];\n}\n\nexport type ISemanticTokensDto = IFullSemanticTokensDto | IDeltaSemanticTokensDto;\n\nconst enum EncodedSemanticTokensType {\n    Full = 1,\n    Delta = 2\n}\n\nfunction reverseEndianness(arr: Uint8Array): void {\n    for (let i = 0, len = arr.length; i < len; i += 4) {\n        // flip bytes 0<->3 and 1<->2\n        const b0 = arr[i + 0];\n        const b1 = arr[i + 1];\n        const b2 = arr[i + 2];\n        const b3 = arr[i + 3];\n        arr[i + 0] = b3;\n        arr[i + 1] = b2;\n        arr[i + 2] = b1;\n        arr[i + 3] = b0;\n    }\n}\n\nfunction toLittleEndianBuffer(arr: Uint32Array): BinaryBuffer {\n    const uint8Arr = new Uint8Array(arr.buffer, arr.byteOffset, arr.length * 4);\n    if (!isLittleEndian()) {\n        // the byte order must be changed\n        reverseEndianness(uint8Arr);\n    }\n    return BinaryBuffer.wrap(uint8Arr);\n}\n\nfunction fromLittleEndianBuffer(buff: BinaryBuffer): Uint32Array {\n    const uint8Arr = buff.buffer;\n    if (!isLittleEndian()) {\n        // the byte order must be changed\n        reverseEndianness(uint8Arr);\n    }\n    if (uint8Arr.byteOffset % 4 === 0) {\n        return new Uint32Array(uint8Arr.buffer, uint8Arr.byteOffset, uint8Arr.length / 4);\n    } else {\n        // unaligned memory access doesn't work on all platforms\n        const data = new Uint8Array(uint8Arr.byteLength);\n        data.set(uint8Arr);\n        return new Uint32Array(data.buffer, data.byteOffset, data.length / 4);\n    }\n}\n\nexport function encodeSemanticTokensDto(semanticTokens: ISemanticTokensDto): BinaryBuffer {\n    const dest = new Uint32Array(encodeSemanticTokensDtoSize(semanticTokens));\n    let offset = 0;\n    dest[offset++] = semanticTokens.id;\n    if (semanticTokens.type === 'full') {\n        dest[offset++] = EncodedSemanticTokensType.Full;\n        dest[offset++] = semanticTokens.data.length;\n        dest.set(semanticTokens.data, offset); offset += semanticTokens.data.length;\n    } else {\n        dest[offset++] = EncodedSemanticTokensType.Delta;\n        dest[offset++] = semanticTokens.deltas.length;\n        for (const delta of semanticTokens.deltas) {\n            dest[offset++] = delta.start;\n            dest[offset++] = delta.deleteCount;\n            if (delta.data) {\n                dest[offset++] = delta.data.length;\n                dest.set(delta.data, offset); offset += delta.data.length;\n            } else {\n                dest[offset++] = 0;\n            }\n        }\n    }\n    return toLittleEndianBuffer(dest);\n}\n\nfunction encodeSemanticTokensDtoSize(semanticTokens: ISemanticTokensDto): number {\n    let result = 0;\n    result += (\n        + 1 // id\n        + 1 // type\n    );\n    if (semanticTokens.type === 'full') {\n        result += (\n            + 1 // data length\n            + semanticTokens.data.length\n        );\n    } else {\n        result += (\n            + 1 // delta count\n        );\n        result += (\n            + 1 // start\n            + 1 // deleteCount\n            + 1 // data length\n        ) * semanticTokens.deltas.length;\n        for (const delta of semanticTokens.deltas) {\n            if (delta.data) {\n                result += delta.data.length;\n            }\n        }\n    }\n    return result;\n}\n\nexport function decodeSemanticTokensDto(_buff: BinaryBuffer): ISemanticTokensDto {\n    const src = fromLittleEndianBuffer(_buff);\n    let offset = 0;\n    const id = src[offset++];\n    const type: EncodedSemanticTokensType = src[offset++];\n    if (type === EncodedSemanticTokensType.Full) {\n        const length = src[offset++];\n        const data = src.subarray(offset, offset + length); offset += length;\n        return {\n            id: id,\n            type: 'full',\n            data: data\n        };\n    }\n    const deltaCount = src[offset++];\n    const deltas: { start: number; deleteCount: number; data?: Uint32Array; }[] = [];\n    for (let i = 0; i < deltaCount; i++) {\n        const start = src[offset++];\n        const deleteCount = src[offset++];\n        const length = src[offset++];\n        let data: Uint32Array | undefined;\n        if (length > 0) {\n            data = src.subarray(offset, offset + length); offset += length;\n        }\n        deltas[i] = { start, deleteCount, data };\n    }\n    return {\n        id: id,\n        type: 'delta',\n        deltas: deltas\n    };\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/uint.ts\n\nexport const enum Constants {\n    /**\n     * Max unsigned integer that fits on 8 bits.\n     */\n    MAX_UINT_8 = 255, // 2^8 - 1\n}\n\nexport function toUint8(v: number): number {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > Constants.MAX_UINT_8) {\n        return Constants.MAX_UINT_8;\n    }\n    return v | 0;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// eslint-disable-next-line @theia/runtime-import-check\nimport { DebugExtImpl } from '../../../plugin/debug/debug-ext';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport function createDebugExtStub(rpc: RPCProtocol): DebugExtImpl {\n    return new Proxy(new DebugExtImpl(rpc), {\n        apply: function (target, that, args): void {\n            console.error('Debug API works only in plugin container');\n        }\n    });\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { PluginIdentifiers, PluginModel, PluginPackage } from '../../../common/plugin-protocol';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\nimport URI from '@theia/core/lib/common/uri';\n\nconst NLS_REGEX = /^%([\\w\\d.-]+)%$/i;\n\nfunction getUri(pluginModel: PluginModel, relativePath: string): URI {\n    const ownURI = new Endpoint().getRestUrl();\n    return ownURI.parent.resolve(PluginPackage.toPluginUrl(pluginModel, relativePath));\n}\n\nfunction readPluginFile(pluginModel: PluginModel, relativePath: string): Promise<string> {\n    return readContents(getUri(pluginModel, relativePath).toString());\n}\n\nfunction readContents(uri: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const request = new XMLHttpRequest();\n\n        request.onreadystatechange = function (): void {\n            if (this.readyState === XMLHttpRequest.DONE) {\n                if (this.status === 200) {\n                    resolve(this.response);\n                } else if (this.status === 404) {\n                    reject('NotFound');\n                } else {\n                    reject(new Error('Could not fetch plugin resource'));\n                }\n            }\n        };\n\n        request.open('GET', uri, true);\n        request.send();\n    });\n}\n\nasync function readPluginJson(pluginModel: PluginModel, relativePath: string): Promise<any> {\n    const content = await readPluginFile(pluginModel, relativePath);\n    const json = JSON.parse(content) as PluginPackage;\n    json.publisher ??= PluginIdentifiers.UNPUBLISHED;\n    return json;\n}\n\nexport async function loadManifest(pluginModel: PluginModel): Promise<any> {\n    const [manifest, translations] = await Promise.all([\n        readPluginJson(pluginModel, 'package.json'),\n        loadTranslations(pluginModel)\n    ]);\n    // translate vscode builtins, as they are published with a prefix.\n    const built_prefix = '@theia/vscode-builtin-';\n    if (manifest && manifest.name && manifest.name.startsWith(built_prefix)) {\n        manifest.name = manifest.name.substring(built_prefix.length);\n    }\n    return manifest && translations && Object.keys(translations).length ?\n        localize(manifest, translations) :\n        manifest;\n}\n\nasync function loadTranslations(pluginModel: PluginModel): Promise<any> {\n    try {\n        return await readPluginJson(pluginModel, 'package.nls.json');\n    } catch (e) {\n        if (e !== 'NotFound') {\n            throw e;\n        }\n        return {};\n    }\n}\n\nfunction localize(value: any, translations: {\n    [key: string]: string\n}): any {\n    if (typeof value === 'string') {\n        const match = NLS_REGEX.exec(value);\n        return match && translations[match[1]] || value;\n    }\n    if (Array.isArray(value)) {\n        const result = [];\n        for (const item of value) {\n            result.push(localize(item, translations));\n        }\n        return result;\n    }\n    if (value === null) {\n        return value;\n    }\n    if (typeof value === 'object') {\n        const result: { [key: string]: any } = {};\n        // eslint-disable-next-line guard-for-in\n        for (const propertyName in value) {\n            result[propertyName] = localize(value[propertyName], translations);\n        }\n        return result;\n    }\n    return value;\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { EnvExtImpl } from '../../../plugin/env';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\n\n/**\n * Worker specific implementation not returning any FileSystem details\n * Extending the common class\n */\nexport class WorkerEnvExtImpl extends EnvExtImpl {\n\n    constructor(rpc: RPCProtocol) {\n        super(rpc);\n    }\n\n    /**\n     * Throw error for app-root as there is no filesystem in worker context\n     */\n    get appRoot(): string {\n        throw new Error('There is no app root in worker context');\n    }\n\n    get isNewAppInstall(): boolean {\n        return false;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport 'reflect-metadata';\nimport { BasicChannel } from '@theia/core/lib/common/message-rpc/channel';\nimport { Uint8ArrayReadBuffer, Uint8ArrayWriteBuffer } from '@theia/core/lib/common/message-rpc/uint8-array-message-buffer';\nimport * as theia from '@theia/plugin';\nimport { emptyPlugin, MAIN_RPC_CONTEXT, Plugin, TerminalServiceExt } from '../../../common/plugin-api-rpc';\nimport { ExtPluginApi } from '../../../common/plugin-ext-api-contribution';\nimport { getPluginId, PluginMetadata } from '../../../common/plugin-protocol';\nimport { RPCProtocolImpl } from '../../../common/rpc-protocol';\nimport { ClipboardExt } from '../../../plugin/clipboard-ext';\nimport { EditorsAndDocumentsExtImpl } from '../../../plugin/editors-and-documents';\nimport { MessageRegistryExt } from '../../../plugin/message-registry';\nimport { createAPIFactory } from '../../../plugin/plugin-context';\nimport { PluginManagerExtImpl } from '../../../plugin/plugin-manager';\nimport { KeyValueStorageProxy } from '../../../plugin/plugin-storage';\nimport { PreferenceRegistryExtImpl } from '../../../plugin/preference-registry';\nimport { SecretsExtImpl } from '../../../plugin/secrets-ext';\nimport { TerminalServiceExtImpl } from '../../../plugin/terminal-ext';\nimport { WebviewsExtImpl } from '../../../plugin/webviews';\nimport { WorkspaceExtImpl } from '../../../plugin/workspace';\nimport { createDebugExtStub } from './debug-stub';\nimport { loadManifest } from './plugin-manifest-loader';\nimport { WorkerEnvExtImpl } from './worker-env-ext';\nimport { LocalizationExtImpl } from '../../../plugin/localization-ext';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst ctx = self as any;\n\nconst pluginsApiImpl = new Map<string, typeof theia>();\nconst pluginsModulesNames = new Map<string, Plugin>();\n\nconst channel = new BasicChannel(() => {\n    const writeBuffer = new Uint8ArrayWriteBuffer();\n    writeBuffer.onCommit(buffer => {\n        ctx.postMessage(buffer);\n    });\n    return writeBuffer;\n});\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\naddEventListener('message', (message: any) => {\n    channel.onMessageEmitter.fire(() => new Uint8ArrayReadBuffer(message.data));\n});\n\nconst rpc = new RPCProtocolImpl(channel);\n\nconst scripts = new Set<string>();\n\nfunction initialize(contextPath: string, pluginMetadata: PluginMetadata): void {\n    const path = '/context/' + contextPath;\n\n    if (!scripts.has(path)) {\n        ctx.importScripts(path);\n        scripts.add(path);\n    }\n}\nconst envExt = new WorkerEnvExtImpl(rpc);\nconst storageProxy = new KeyValueStorageProxy(rpc);\nconst editorsAndDocuments = new EditorsAndDocumentsExtImpl(rpc);\nconst messageRegistryExt = new MessageRegistryExt(rpc);\nconst workspaceExt = new WorkspaceExtImpl(rpc, editorsAndDocuments, messageRegistryExt);\nconst preferenceRegistryExt = new PreferenceRegistryExtImpl(rpc, workspaceExt);\nconst debugExt = createDebugExtStub(rpc);\nconst clipboardExt = new ClipboardExt(rpc);\nconst webviewExt = new WebviewsExtImpl(rpc, workspaceExt);\nconst secretsExt = new SecretsExtImpl(rpc);\nconst localizationExt = new LocalizationExtImpl(rpc);\nconst terminalService: TerminalServiceExt = new TerminalServiceExtImpl(rpc);\n\nconst pluginManager = new PluginManagerExtImpl({\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    loadPlugin(plugin: Plugin): any {\n        if (plugin.pluginPath) {\n            if (isElectron()) {\n                ctx.importScripts(plugin.pluginPath);\n            } else {\n                if (plugin.lifecycle.frontendModuleName) {\n                    // Set current module name being imported\n                    ctx.frontendModuleName = plugin.lifecycle.frontendModuleName;\n                }\n\n                ctx.importScripts('/hostedPlugin/' + getPluginId(plugin.model) + '/' + plugin.pluginPath);\n            }\n        }\n\n        if (plugin.lifecycle.frontendModuleName) {\n            if (!ctx[plugin.lifecycle.frontendModuleName]) {\n                console.error(`WebWorker: Cannot start plugin \"${plugin.model.name}\". Frontend plugin not found: \"${plugin.lifecycle.frontendModuleName}\"`);\n                return;\n            }\n            return ctx[plugin.lifecycle.frontendModuleName];\n        }\n    },\n    async init(rawPluginData: PluginMetadata[]): Promise<[Plugin[], Plugin[]]> {\n        const result: Plugin[] = [];\n        const foreign: Plugin[] = [];\n        // Process the plugins concurrently, making sure to keep the order.\n        const plugins = await Promise.all<{\n            /** Where to push the plugin: `result` or `foreign` */\n            target: Plugin[],\n            plugin: Plugin\n        }>(rawPluginData.map(async plg => {\n            const pluginModel = plg.model;\n            const pluginLifecycle = plg.lifecycle;\n            if (pluginModel.entryPoint!.frontend) {\n                let frontendInitPath = pluginLifecycle.frontendInitPath;\n                if (frontendInitPath) {\n                    initialize(frontendInitPath, plg);\n                } else {\n                    frontendInitPath = '';\n                }\n                const rawModel = await loadManifest(pluginModel);\n                const plugin: Plugin = {\n                    pluginPath: pluginModel.entryPoint.frontend!,\n                    pluginFolder: pluginModel.packagePath,\n                    pluginUri: pluginModel.packageUri,\n                    model: pluginModel,\n                    lifecycle: pluginLifecycle,\n                    rawModel,\n                    isUnderDevelopment: !!plg.isUnderDevelopment\n                };\n                const apiImpl = apiFactory(plugin);\n                pluginsApiImpl.set(plugin.model.id, apiImpl);\n                pluginsModulesNames.set(plugin.lifecycle.frontendModuleName!, plugin);\n                return { target: result, plugin };\n            } else {\n                return {\n                    target: foreign,\n                    plugin: {\n                        pluginPath: pluginModel.entryPoint.backend,\n                        pluginFolder: pluginModel.packagePath,\n                        pluginUri: pluginModel.packageUri,\n                        model: pluginModel,\n                        lifecycle: pluginLifecycle,\n                        get rawModel(): never {\n                            throw new Error('not supported');\n                        },\n                        isUnderDevelopment: !!plg.isUnderDevelopment\n                    }\n                };\n            }\n        }));\n        // Collect the ordered plugins and insert them in the target array:\n        for (const { target, plugin } of plugins) {\n            target.push(plugin);\n        }\n        return [result, foreign];\n    },\n    initExtApi(extApi: ExtPluginApi[]): void {\n        for (const api of extApi) {\n            try {\n                if (api.frontendExtApi) {\n                    ctx.importScripts(api.frontendExtApi.initPath);\n                    ctx[api.frontendExtApi.initVariable][api.frontendExtApi.initFunction](rpc, pluginsModulesNames);\n                }\n\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n}, envExt, terminalService, storageProxy, secretsExt, preferenceRegistryExt, webviewExt, localizationExt, rpc);\n\nconst apiFactory = createAPIFactory(\n    rpc,\n    pluginManager,\n    envExt,\n    debugExt,\n    preferenceRegistryExt,\n    editorsAndDocuments,\n    workspaceExt,\n    messageRegistryExt,\n    clipboardExt,\n    webviewExt,\n    localizationExt\n);\nlet defaultApi: typeof theia;\n\nconst handler = {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    get: (target: any, name: string) => {\n        const plugin = pluginsModulesNames.get(name);\n        if (plugin) {\n            const apiImpl = pluginsApiImpl.get(plugin.model.id);\n            return apiImpl;\n        }\n\n        if (!defaultApi) {\n            defaultApi = apiFactory(emptyPlugin);\n        }\n\n        return defaultApi;\n    }\n};\nctx['theia'] = new Proxy(Object.create(null), handler);\n\nrpc.set(MAIN_RPC_CONTEXT.HOSTED_PLUGIN_MANAGER_EXT, pluginManager);\nrpc.set(MAIN_RPC_CONTEXT.EDITORS_AND_DOCUMENTS_EXT, editorsAndDocuments);\nrpc.set(MAIN_RPC_CONTEXT.WORKSPACE_EXT, workspaceExt);\nrpc.set(MAIN_RPC_CONTEXT.PREFERENCE_REGISTRY_EXT, preferenceRegistryExt);\nrpc.set(MAIN_RPC_CONTEXT.STORAGE_EXT, storageProxy);\nrpc.set(MAIN_RPC_CONTEXT.WEBVIEWS_EXT, webviewExt);\n\nfunction isElectron(): boolean {\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n        return true;\n    }\n\n    return false;\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.47.3/src/vs/workbench/api/common/extHostAuthentication.ts\n\nimport { Disposable } from './types-impl';\nimport {\n    AuthenticationExt,\n    AuthenticationMain, Plugin as InternalPlugin,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\n\nexport class AuthenticationExtImpl implements AuthenticationExt {\n    private proxy: AuthenticationMain;\n    private authenticationProviders: Map<string, theia.AuthenticationProvider> = new Map<string, theia.AuthenticationProvider>();\n\n    private onDidChangeSessionsEmitter = new Emitter<theia.AuthenticationSessionsChangeEvent>();\n    readonly onDidChangeSessions: Event<theia.AuthenticationSessionsChangeEvent> = this.onDidChangeSessionsEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.AUTHENTICATION_MAIN);\n    }\n\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions & ({ createIfNone: true } | { forceNewSession: true } | { forceNewSession: theia.AuthenticationForceNewSessionOptions })):\n        Promise<theia.AuthenticationSession>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions & { forceNewSession: true }): Promise<theia.AuthenticationSession>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions & { forceNewSession: theia.AuthenticationForceNewSessionOptions }): Promise<theia.AuthenticationSession>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions): Promise<theia.AuthenticationSession | undefined>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions = {}): Promise<theia.AuthenticationSession | undefined> {\n        const extensionName = requestingExtension.model.displayName || requestingExtension.model.name;\n        const extensionId = requestingExtension.model.id.toLowerCase();\n        return this.proxy.$getSession(providerId, scopes, extensionId, extensionName, options);\n    }\n\n    registerAuthenticationProvider(id: string, label: string, provider: theia.AuthenticationProvider, options?: theia.AuthenticationProviderOptions): theia.Disposable {\n        if (this.authenticationProviders.get(id)) {\n            throw new Error(`An authentication provider with id '${id}' is already registered.`);\n        }\n\n        this.authenticationProviders.set(id, provider);\n        const listener = provider.onDidChangeSessions(e => {\n            this.proxy.$onDidChangeSessions(id, e);\n        });\n\n        this.proxy.$registerAuthenticationProvider(id, label, !!options?.supportsMultipleAccounts);\n\n        return new Disposable(() => {\n            listener.dispose();\n            this.authenticationProviders.delete(id);\n            this.proxy.$unregisterAuthenticationProvider(id);\n        });\n    }\n\n    $createSession(providerId: string, scopes: string[]): Promise<theia.AuthenticationSession> {\n        const authProvider = this.authenticationProviders.get(providerId);\n        if (authProvider) {\n            return Promise.resolve(authProvider.createSession(scopes));\n        }\n\n        throw new Error(`Unable to find authentication provider with handle: ${providerId}`);\n    }\n\n    $removeSession(providerId: string, sessionId: string): Promise<void> {\n        const authProvider = this.authenticationProviders.get(providerId);\n        if (authProvider) {\n            return Promise.resolve(authProvider.removeSession(sessionId));\n        }\n\n        throw new Error(`Unable to find authentication provider with handle: ${providerId}`);\n    }\n\n    async $getSessions(providerId: string, scopes?: string[]): Promise<ReadonlyArray<theia.AuthenticationSession>> {\n        const authProvider = this.authenticationProviders.get(providerId);\n        if (authProvider) {\n            const sessions = await authProvider.getSessions(scopes);\n\n            /* Wrap the session object received from the plugin to prevent serialization mismatches\n            e.g. if the plugin object is constructed with the help of getters they won't be serialized:\n            class SessionImpl implements AuthenticationSession {\n                private _id;\n                get id() {\n                    return _id;\n                }\n            ...\n            } will translate to JSON as { _id: '<sessionid>' } not { id: '<sessionid>' } */\n            return sessions.map(session => ({\n                id: session.id,\n                accessToken: session.accessToken,\n                account: { id: session.account.id, label: session.account.label },\n                scopes: session.scopes\n            }));\n        }\n\n        throw new Error(`Unable to find authentication provider with handle: ${providerId}`);\n    }\n\n    async $onDidChangeAuthenticationSessions(provider: theia.AuthenticationProviderInformation): Promise<void> {\n        this.onDidChangeSessionsEmitter.fire({ provider });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 RedHat and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, ClipboardMain } from '../common';\n\nexport class ClipboardExt implements theia.Clipboard {\n\n    protected readonly proxy: ClipboardMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.CLIPBOARD_MAIN);\n    }\n\n    readText(): Promise<string> {\n        return this.proxy.$readText();\n    }\n\n    writeText(value: string): Promise<void> {\n        return this.proxy.$writeText(value);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as theia from '@theia/plugin';\nimport * as model from '../common/plugin-api-rpc-model';\nimport { CommandRegistryExt, PLUGIN_RPC_CONTEXT as Ext, CommandRegistryMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable } from './types-impl';\nimport { DisposableCollection } from '@theia/core';\nimport { KnownCommands } from './known-commands';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type Handler = <T>(...args: any[]) => T | PromiseLike<T | undefined>;\n\nexport interface ArgumentProcessor {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    processArgument(arg: any): any;\n}\n\nexport class CommandRegistryImpl implements CommandRegistryExt {\n\n    private proxy: CommandRegistryMain;\n    private readonly commands = new Set<string>();\n    private readonly handlers = new Map<string, Handler>();\n    private readonly argumentProcessors: ArgumentProcessor[];\n    private readonly commandsConverter: CommandsConverter;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.COMMAND_REGISTRY_MAIN);\n        this.argumentProcessors = [];\n        this.commandsConverter = new CommandsConverter(this);\n    }\n\n    get converter(): CommandsConverter {\n        return this.commandsConverter;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    registerCommand(command: theia.CommandDescription, handler?: Handler, thisArg?: any): Disposable {\n        if (this.commands.has(command.id)) {\n            throw new Error(`Command ${command.id} already exist`);\n        }\n        this.commands.add(command.id);\n        this.proxy.$registerCommand(command);\n\n        const toDispose: Disposable[] = [];\n        if (handler) {\n            toDispose.push(this.registerHandler(command.id, handler, thisArg));\n        }\n        toDispose.push(Disposable.create(() => {\n            this.commands.delete(command.id);\n            this.proxy.$unregisterCommand(command.id);\n        }));\n        return Disposable.from(...toDispose);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    registerHandler(commandId: string, handler: Handler, thisArg?: any): Disposable {\n        if (this.handlers.has(commandId)) {\n            throw new Error(`Command \"${commandId}\" already has handler`);\n        }\n        this.proxy.$registerHandler(commandId);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.handlers.set(commandId, (...args: any[]) => handler.apply(thisArg, args));\n        return Disposable.create(() => {\n            this.handlers.delete(commandId);\n            this.proxy.$unregisterHandler(commandId);\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined> {\n        if (this.handlers.has(id)) {\n            return this.executeLocalCommand(id, ...args);\n        } else {\n            return Promise.reject(new Error(`Command: ${id} does not exist.`));\n        }\n    }\n\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined> {\n        if (this.handlers.has(id)) {\n            return this.executeLocalCommand(id, ...args);\n        } else if (KnownCommands.mapped(id)) {\n            // Using the KnownCommand exclusions, convert the commands manually\n            return KnownCommands.map(id, args, (mappedId: string, mappedArgs: any[] | undefined, mappedResult: KnownCommands.ConversionFunction) => {\n                const mr: KnownCommands.ConversionFunction = mappedResult;\n                return this.proxy.$executeCommand(mappedId, ...mappedArgs || []).then((result: any) => {\n                    if (!result) {\n                        return undefined;\n                    }\n                    if (!mr) {\n                        return result;\n                    }\n                    return mr(result);\n                });\n            }\n            );\n        } else {\n            return this.proxy.$executeCommand(id, ...args);\n        }\n    }\n    /* eslint-enable @typescript-eslint/no-explicit-any */\n\n    getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n        return this.proxy.$getKeyBinding(commandId);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async executeLocalCommand<T>(id: string, ...args: any[]): Promise<T | undefined> {\n        const handler = this.handlers.get(id);\n        if (handler) {\n            return handler<T>(...args.map(arg => this.argumentProcessors.reduce((r, p) => p.processArgument(r), arg)));\n        } else {\n            throw new Error(`No handler exists for command '${id}'`);\n        }\n    }\n\n    async getCommands(filterUnderscoreCommands: boolean = false): Promise<string[]> {\n        const result = await this.proxy.$getCommands();\n        if (filterUnderscoreCommands) {\n            return result.filter(command => command[0] !== '_');\n        }\n        return result;\n    }\n\n    registerArgumentProcessor(processor: ArgumentProcessor): void {\n        this.argumentProcessors.push(processor);\n    }\n}\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.37.1/src/vs/workbench/api/common/extHostCommands.ts#L217-L259\nexport class CommandsConverter {\n\n    private readonly safeCommandId: string;\n    private readonly commands: CommandRegistryImpl;\n    private readonly commandsMap = new Map<number, theia.Command>();\n    private handle = 0;\n    private isSafeCommandRegistered: boolean;\n\n    constructor(commands: CommandRegistryImpl) {\n        this.safeCommandId = `theia_safe_cmd_${Date.now().toString()}`;\n        this.commands = commands;\n        this.isSafeCommandRegistered = false;\n    }\n\n    /**\n     * Convert to a command that can be safely passed over JSON-RPC.\n     */\n    toSafeCommand(command: undefined, disposables: DisposableCollection): undefined;\n    toSafeCommand(command: theia.Command, disposables: DisposableCollection): model.Command;\n    toSafeCommand(command: theia.Command | undefined, disposables: DisposableCollection): model.Command | undefined;\n    toSafeCommand(command: theia.Command | undefined, disposables: DisposableCollection): model.Command | undefined {\n        if (!command) {\n            return undefined;\n        }\n\n        const result = this.toInternalCommand(command);\n        if (KnownCommands.mapped(result.id)) {\n            return result;\n        }\n\n        if (!this.isSafeCommandRegistered) {\n            this.commands.registerCommand({ id: this.safeCommandId }, this.executeSafeCommand, this);\n            this.isSafeCommandRegistered = true;\n        }\n\n        if (command.arguments && command.arguments.length > 0) {\n            const id = this.handle++;\n            this.commandsMap.set(id, command);\n            disposables.push(new Disposable(() => this.commandsMap.delete(id)));\n            result.id = this.safeCommandId;\n            result.arguments = [id];\n        }\n\n        return result;\n    }\n\n    protected toInternalCommand(external: theia.Command): model.Command {\n        // we're deprecating Command.id, so it has to be optional.\n        // Existing code will have compiled against a non - optional version of the field, so asserting it to exist is ok\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return KnownCommands.map(external.command, external.arguments, (mappedId: string, mappedArgs: any[]) =>\n        ({\n            id: mappedId,\n            title: external.title || ' ',\n            tooltip: external.tooltip,\n            arguments: mappedArgs\n        }));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private executeSafeCommand<R>(...args: any[]): PromiseLike<R | undefined> {\n        const command = this.commandsMap.get(args[0]);\n        if (!command || !command.command) {\n            return Promise.reject(`command ${args[0]} not found`);\n        }\n        return this.commands.executeCommand(command.command, ...(command.arguments || []));\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { CommandRegistryImpl } from './command-registry';\nimport { UriComponents } from '../common/uri-components';\nimport { CommentThreadCollapsibleState, CommentThreadState, URI } from './types-impl';\nimport {\n    Range,\n    Comment,\n    CommentThreadState as CommentThreadStateModel,\n    CommentThreadCollapsibleState as CommentThreadCollapsibleStateModel,\n    CommentOptions\n} from '../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from './documents';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { fromMarkdown, fromRange, toRange } from './type-converters';\nimport {\n    CommentsCommandArg, CommentsContextCommandArg, CommentsEditCommandArg,\n    CommentsExt,\n    CommentsMain,\n    CommentThreadChanges,\n    Plugin as InternalPlugin,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.3/src/vs/workbench/api/common/extHostComments.ts\n\ntype ProviderHandle = number;\n\nexport class CommentsExtImpl implements CommentsExt {\n    private handle = 0;\n    private readonly proxy: CommentsMain;\n    private readonly commentControllers: Map<ProviderHandle, CommentController> = new Map<ProviderHandle, CommentController>();\n    private readonly commentControllersByExtension: Map<string, CommentController[]> = new Map<string, CommentController[]>();\n\n    constructor(readonly rpc: RPCProtocol, readonly commands: CommandRegistryImpl, readonly _documents: DocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.COMMENTS_MAIN);\n\n        commands.registerArgumentProcessor({\n            processArgument: arg => {\n                if (CommentsCommandArg.is(arg)) {\n                    const commentController = this.commentControllers.get(arg.commentControlHandle);\n\n                    if (!commentController) {\n                        return arg;\n                    }\n\n                    const commentThread = commentController.getCommentThread(arg.commentThreadHandle);\n\n                    if (!commentThread) {\n                        return arg;\n                    }\n\n                    return {\n                        thread: commentThread,\n                        text: arg.text\n                    };\n                } else if (CommentsContextCommandArg.is(arg)) {\n                    const commentController = this.commentControllers.get(arg.commentControlHandle);\n\n                    if (!commentController) {\n                        return arg;\n                    }\n\n                    const commentThread = commentController.getCommentThread(arg.commentThreadHandle);\n\n                    if (!commentThread) {\n                        return arg;\n                    }\n\n                    const comment = commentThread.getCommentByUniqueId(arg.commentUniqueId);\n\n                    if (!comment) {\n                        return arg;\n                    }\n\n                    return comment;\n                } else if (CommentsEditCommandArg.is(arg)) {\n                    const commentController = this.commentControllers.get(arg.commentControlHandle);\n\n                    if (!commentController) {\n                        return arg;\n                    }\n\n                    const commentThread = commentController.getCommentThread(arg.commentThreadHandle);\n\n                    if (!commentThread) {\n                        return arg;\n                    }\n\n                    const comment = commentThread.getCommentByUniqueId(arg.commentUniqueId);\n\n                    if (!comment) {\n                        return arg;\n                    }\n\n                    comment.body = arg.text;\n                    return comment;\n                }\n\n                return arg;\n            }\n        });\n    }\n\n    createCommentController(plugin: InternalPlugin, id: string, label: string): theia.CommentController {\n        const handle = this.handle++;\n        const commentController = new CommentController(plugin.model.id, this.proxy, handle, id, label);\n        this.commentControllers.set(commentController.handle, commentController);\n\n        const commentControllers = this.commentControllersByExtension.get(plugin.model.id.toLowerCase()) || [];\n        commentControllers.push(commentController);\n        this.commentControllersByExtension.set(plugin.model.id.toLowerCase(), commentControllers);\n\n        return commentController;\n    }\n\n    $createCommentThreadTemplate(commentControllerHandle: number, uriComponents: UriComponents, range: Range): void {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (!commentController) {\n            return;\n        }\n\n        commentController.$createCommentThreadTemplate(uriComponents, range);\n    }\n\n    async $updateCommentThreadTemplate(commentControllerHandle: number, threadHandle: number, range: Range): Promise<void> {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (!commentController) {\n            return;\n        }\n\n        commentController.$updateCommentThreadTemplate(threadHandle, range);\n    }\n\n    async $deleteCommentThread(commentControllerHandle: number, commentThreadHandle: number): Promise<void> {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (commentController) {\n            commentController.$deleteCommentThread(commentThreadHandle);\n        }\n    }\n\n    async $provideCommentingRanges(commentControllerHandle: number, uriComponents: UriComponents, token: theia.CancellationToken): Promise<Range[] | undefined> {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (!commentController || !commentController.commentingRangeProvider) {\n            return Promise.resolve(undefined);\n        }\n\n        const documentData = this._documents.getDocumentData(URI.revive(uriComponents));\n        if (documentData) {\n            const ranges: theia.Range[] | undefined | null = await commentController.commentingRangeProvider!.provideCommentingRanges(documentData.document, token);\n            if (ranges) {\n                return ranges.map(x => fromRange(x));\n            }\n        }\n    }\n}\n\ntype CommentThreadModification = Partial<{\n    range: theia.Range,\n    label: string | undefined,\n    contextValue: string | undefined,\n    comments: theia.Comment[],\n    collapsibleState: theia.CommentThreadCollapsibleState\n    state: theia.CommentThreadState\n    canReply: boolean;\n}>;\n\nexport class ExtHostCommentThread implements theia.CommentThread, theia.Disposable {\n    private static _handlePool: number = 0;\n    readonly handle = ExtHostCommentThread._handlePool++;\n    public commentHandle: number = 0;\n\n    private modifications: CommentThreadModification = Object.create(null);\n\n    set threadId(id: string) {\n        this._id = id;\n    }\n\n    get threadId(): string {\n        return this._id!;\n    }\n\n    get id(): string {\n        return this._id!;\n    }\n\n    get resource(): theia.Uri {\n        return this._uri;\n    }\n\n    get uri(): theia.Uri {\n        return this._uri;\n    }\n\n    private readonly _onDidUpdateCommentThread = new Emitter<void>();\n    readonly onDidUpdateCommentThread = this._onDidUpdateCommentThread.event;\n\n    set range(range: theia.Range) {\n        if (!range.isEqual(this._range)) {\n            this._range = range;\n            this.modifications.range = range;\n            this._onDidUpdateCommentThread.fire();\n        }\n    }\n\n    get range(): theia.Range {\n        return this._range;\n    }\n\n    private _label: string | undefined;\n\n    get label(): string | undefined {\n        return this._label;\n    }\n\n    set label(label: string | undefined) {\n        this._label = label;\n        this.modifications.label = label;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private _contextValue: string | undefined;\n\n    get contextValue(): string | undefined {\n        return this._contextValue;\n    }\n\n    set contextValue(context: string | undefined) {\n        this._contextValue = context;\n        this.modifications.contextValue = context;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    get comments(): theia.Comment[] {\n        return this._comments;\n    }\n\n    set comments(newComments: theia.Comment[]) {\n        this._comments = newComments;\n        this.modifications.comments = newComments;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private collapseState?: theia.CommentThreadCollapsibleState;\n\n    get collapsibleState(): theia.CommentThreadCollapsibleState {\n        return this.collapseState!;\n    }\n\n    set collapsibleState(newState: theia.CommentThreadCollapsibleState) {\n        this.collapseState = newState;\n        this.modifications.collapsibleState = newState;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private _state?: theia.CommentThreadState;\n\n    get state(): theia.CommentThreadState {\n        return this._state!;\n    }\n\n    set state(newState: theia.CommentThreadState) {\n        if (this._state !== newState) {\n            this._state = newState;\n            this.modifications.state = newState;\n            this._onDidUpdateCommentThread.fire();\n        }\n    }\n\n    private localDisposables: Disposable[];\n\n    private _isDisposed: boolean;\n\n    public get isDisposed(): boolean {\n        return this._isDisposed;\n    }\n\n    private _canReply: boolean = true;\n    get canReply(): boolean {\n        return this._canReply;\n    }\n\n    set canReply(canReply: boolean) {\n        this._canReply = canReply;\n        this.modifications.canReply = canReply;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private commentsMap: Map<theia.Comment, number> = new Map<theia.Comment, number>();\n\n    private acceptInputDisposables = new DisposableCollection();\n\n    constructor(\n        private proxy: CommentsMain,\n        private commentController: CommentController,\n        private _id: string | undefined,\n        private _uri: theia.Uri,\n        private _range: theia.Range,\n        private _comments: theia.Comment[],\n        extensionId: string\n    ) {\n        if (this._id === undefined) {\n            this._id = `${commentController.id}.${this.handle}`;\n        }\n\n        this.proxy.$createCommentThread(\n            this.commentController.handle,\n            this.handle,\n            this._id,\n            this._uri,\n            fromRange(this._range),\n            extensionId\n        );\n\n        this.localDisposables = [];\n        this._isDisposed = false;\n\n        this.localDisposables.push(this.onDidUpdateCommentThread(() => {\n            this.eventuallyUpdateCommentThread();\n        }));\n\n        // set up comments after ctor to batch update events.\n        this.comments = _comments;\n    }\n\n    eventuallyUpdateCommentThread(): void {\n        if (this._isDisposed) {\n            return;\n        }\n\n        const modified = (value: keyof CommentThreadModification): boolean =>\n            Object.prototype.hasOwnProperty.call(this.modifications, value);\n\n        const formattedModifications: CommentThreadChanges = {};\n        if (modified('range')) {\n            formattedModifications.range = fromRange(this._range);\n        }\n        if (modified('label')) {\n            formattedModifications.label = this.label;\n        }\n        if (modified('contextValue')) {\n            formattedModifications.contextValue = this.contextValue;\n        }\n        if (modified('comments')) {\n            formattedModifications.comments =\n                this._comments.map(comment => convertToModeComment(this, this.commentController, comment, this.commentsMap));\n        }\n        if (modified('collapsibleState')) {\n            formattedModifications.collapseState = convertToCollapsibleState(this.collapseState);\n        }\n        if (modified('state')) {\n            formattedModifications.state = convertToState(this._state);\n        }\n        if (modified('canReply')) {\n            formattedModifications.canReply = this.canReply;\n        }\n        this.modifications = {};\n\n        this.proxy.$updateCommentThread(\n            this.commentController.handle,\n            this.handle,\n            this._id!,\n            this._uri,\n            formattedModifications\n        );\n    }\n\n    getCommentByUniqueId(uniqueId: number): theia.Comment | undefined {\n        for (const key of this.commentsMap) {\n            const comment = key[0];\n            const id = key[1];\n            if (uniqueId === id) {\n                return comment;\n            }\n        }\n\n        return;\n    }\n\n    dispose(): void {\n        this._isDisposed = true;\n        this.acceptInputDisposables.dispose();\n        this.localDisposables.forEach(disposable => disposable.dispose());\n        this.proxy.$deleteCommentThread(\n            this.commentController.handle,\n            this.handle\n        );\n    }\n}\n\nclass CommentController implements theia.CommentController {\n\n    constructor(\n        private extension: string,\n        private proxy: CommentsMain,\n        private _handle: number,\n        private _id: string,\n        private _label: string\n    ) {\n        this.proxy.$registerCommentController(this.handle, _id, _label);\n    }\n\n    private readonly threads: Map<number, ExtHostCommentThread> = new Map<number, ExtHostCommentThread>();\n    readonly commentingRangeProvider?: theia.CommentingRangeProvider;\n\n    get id(): string {\n        return this._id;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get handle(): number {\n        return this._handle;\n    }\n\n    private _options: CommentOptions | undefined;\n\n    get options(): CommentOptions | undefined {\n        return this._options;\n    }\n\n    set options(options: CommentOptions | undefined) {\n        this._options = options;\n\n        this.proxy.$updateCommentControllerFeatures(this.handle, { options: this._options });\n    }\n\n    createCommentThread(resource: theia.Uri, range: theia.Range, comments: theia.Comment[]): theia.CommentThread;\n    createCommentThread(arg0: theia.Uri | string, arg1: theia.Uri | theia.Range, arg2: theia.Range | theia.Comment[], arg3?: theia.Comment[]): theia.CommentThread {\n        if (typeof arg0 === 'string') {\n            const commentThread = new ExtHostCommentThread(this.proxy, this, arg0, arg1 as theia.Uri, arg2 as theia.Range, arg3 as theia.Comment[], this.extension);\n            this.threads.set(commentThread.handle, commentThread);\n            return commentThread;\n        } else {\n            const commentThread = new ExtHostCommentThread(this.proxy, this, undefined, arg0 as theia.Uri, arg1 as theia.Range, arg2 as theia.Comment[], this.extension);\n            this.threads.set(commentThread.handle, commentThread);\n            return commentThread;\n        }\n    }\n\n    $createCommentThreadTemplate(uriComponents: UriComponents, range: Range): ExtHostCommentThread {\n        const commentThread = new ExtHostCommentThread(this.proxy, this, undefined, URI.revive(uriComponents), toRange(range), [], this.extension);\n        commentThread.collapsibleState = CommentThreadCollapsibleStateModel.Expanded;\n        this.threads.set(commentThread.handle, commentThread);\n        return commentThread;\n    }\n\n    $updateCommentThreadTemplate(threadHandle: number, range: Range): void {\n        const thread = this.threads.get(threadHandle);\n        if (thread) {\n            thread.range = toRange(range);\n        }\n    }\n\n    $deleteCommentThread(threadHandle: number): void {\n        const thread = this.threads.get(threadHandle);\n\n        if (thread) {\n            thread.dispose();\n        }\n\n        this.threads.delete(threadHandle);\n    }\n\n    getCommentThread(handle: number): ExtHostCommentThread | undefined {\n        return this.threads.get(handle);\n    }\n\n    dispose(): void {\n        this.threads.forEach(value => {\n            value.dispose();\n        });\n\n        this.proxy.$unregisterCommentController(this.handle);\n    }\n}\n\nfunction convertToModeComment(thread: ExtHostCommentThread, commentController: CommentController, theiaComment: theia.Comment, commentsMap: Map<theia.Comment, number>): Comment {\n    let commentUniqueId = commentsMap.get(theiaComment)!;\n    if (!commentUniqueId) {\n        commentUniqueId = ++thread.commentHandle;\n        commentsMap.set(theiaComment, commentUniqueId);\n    }\n\n    const iconPath = theiaComment.author && theiaComment.author.iconPath ? theiaComment.author.iconPath.toString() : undefined;\n    const date = theiaComment.timestamp ? theiaComment.timestamp.toISOString() : undefined;\n\n    return {\n        mode: theiaComment.mode,\n        contextValue: theiaComment.contextValue,\n        uniqueIdInThread: commentUniqueId,\n        body: fromMarkdown(theiaComment.body),\n        userName: theiaComment.author.name,\n        userIconPath: iconPath,\n        label: theiaComment.label,\n        timestamp: date,\n    };\n}\n\nfunction convertToCollapsibleState(kind: theia.CommentThreadCollapsibleState | undefined): CommentThreadCollapsibleStateModel {\n    if (kind !== undefined) {\n        switch (kind) {\n            case CommentThreadCollapsibleState.Expanded:\n                return CommentThreadCollapsibleStateModel.Expanded;\n            case CommentThreadCollapsibleState.Collapsed:\n                return CommentThreadCollapsibleStateModel.Collapsed;\n        }\n    }\n    return CommentThreadCollapsibleStateModel.Collapsed;\n}\n\nfunction convertToState(kind: theia.CommentThreadState | undefined): CommentThreadStateModel {\n    if (kind !== undefined) {\n        switch (kind) {\n            case CommentThreadState.Resolved:\n                return CommentThreadStateModel.Resolved;\n            case CommentThreadState.Unresolved:\n                return CommentThreadStateModel.Unresolved;\n        }\n    }\n    return CommentThreadStateModel.Unresolved;\n}\n","// *****************************************************************************\n// Copyright (C) 2021 SAP SE or an SAP affiliate company and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/53eac52308c4611000a171cc7bf1214293473c78/src/vs/workbench/api/common/extHostCustomEditors.ts\n\nimport { CustomEditorsExt, CustomEditorsMain, Plugin, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable, URI } from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport { DocumentsExtImpl } from './documents';\nimport { WebviewImpl, WebviewsExtImpl } from './webviews';\nimport { CancellationToken, CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { WorkspaceExtImpl } from './workspace';\nimport { Cache } from '../common/cache';\n\nexport class CustomEditorsExtImpl implements CustomEditorsExt {\n    private readonly proxy: CustomEditorsMain;\n    private readonly editorProviders = new EditorProviderStore();\n    private readonly documents = new CustomDocumentStore();\n\n    constructor(rpc: RPCProtocol,\n        private readonly documentExt: DocumentsExtImpl,\n        private readonly webviewExt: WebviewsExtImpl,\n        private readonly workspace: WorkspaceExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.CUSTOM_EDITORS_MAIN);\n    }\n\n    registerCustomEditorProvider(\n        viewType: string,\n        provider: theia.CustomReadonlyEditorProvider | theia.CustomTextEditorProvider,\n        options: { webviewOptions?: theia.WebviewPanelOptions, supportsMultipleEditorsPerDocument?: boolean },\n        plugin: Plugin\n    ): theia.Disposable {\n        const disposables = new DisposableCollection();\n        if ('resolveCustomTextEditor' in provider) {\n            disposables.push(this.editorProviders.addTextProvider(viewType, plugin, provider));\n            this.proxy.$registerTextEditorProvider(viewType, options.webviewOptions || {}, {\n                supportsMove: !!provider.moveCustomTextEditor,\n            });\n        } else {\n            disposables.push(this.editorProviders.addCustomProvider(viewType, plugin, provider));\n\n            if (this.supportEditing(provider)) {\n                disposables.push(provider.onDidChangeCustomDocument((e: theia.CustomDocumentEditEvent | theia.CustomDocumentContentChangeEvent) => {\n                    const entry = this.getCustomDocumentEntry(viewType, e.document.uri);\n                    if (isEditEvent(e)) {\n                        const editId = entry.addEdit(e);\n                        this.proxy.$onDidEdit(e.document.uri, viewType, editId, e.label);\n                    } else {\n                        this.proxy.$onContentChange(e.document.uri, viewType);\n                    }\n                }));\n            }\n\n            this.proxy.$registerCustomEditorProvider(viewType, options.webviewOptions || {}, !!options.supportsMultipleEditorsPerDocument);\n        }\n\n        return Disposable.from(\n            disposables,\n            Disposable.create(() => {\n                this.proxy.$unregisterEditorProvider(viewType);\n            })\n        );\n    }\n\n    async $createCustomDocument(resource: UriComponents, viewType: string, openContext: theia.CustomDocumentOpenContext, cancellation: CancellationToken): Promise<{\n        editable: boolean;\n    }> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n\n        if (entry.type !== CustomEditorType.Custom) {\n            throw new Error(`Invalid provide type for '${viewType}'`);\n        }\n\n        const revivedResource = URI.revive(resource);\n        const document = await entry.provider.openCustomDocument(revivedResource, openContext, cancellation);\n        this.documents.add(viewType, document);\n\n        return { editable: this.supportEditing(entry.provider) };\n    }\n\n    async $disposeCustomDocument(resource: UriComponents, viewType: string): Promise<void> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n\n        if (entry.type !== CustomEditorType.Custom) {\n            throw new Error(`Invalid provider type for '${viewType}'`);\n        }\n\n        const revivedResource = URI.revive(resource);\n        const { document } = this.getCustomDocumentEntry(viewType, revivedResource);\n        this.documents.delete(viewType, document);\n        document.dispose();\n    }\n\n    async $resolveWebviewEditor<T>(\n        resource: UriComponents,\n        handler: string,\n        viewType: string,\n        title: string,\n        widgetOpenerOptions: T | undefined,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        cancellation: CancellationToken\n    ): Promise<void> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n        const panel = this.webviewExt.createWebviewPanel(viewType, title, {}, options, entry.plugin, handler);\n        const webviewOptions = WebviewImpl.toWebviewOptions(options, this.workspace, entry.plugin);\n        await this.proxy.$createCustomEditorPanel(handler, title, widgetOpenerOptions, webviewOptions);\n\n        const revivedResource = URI.revive(resource);\n\n        switch (entry.type) {\n            case CustomEditorType.Custom: {\n                const { document } = this.getCustomDocumentEntry(viewType, revivedResource);\n                return entry.provider.resolveCustomEditor(document, panel, cancellation);\n            }\n            case CustomEditorType.Text: {\n                const document = this.documentExt.getDocument(revivedResource);\n                return entry.provider.resolveCustomTextEditor(document, panel, cancellation);\n            }\n            default: {\n                throw new Error('Unknown webview provider type');\n            }\n        }\n    }\n\n    getCustomDocumentEntry(viewType: string, resource: UriComponents): CustomDocumentStoreEntry {\n        const entry = this.documents.get(viewType, URI.revive(resource));\n        if (!entry) {\n            throw new Error('No custom document found');\n        }\n        return entry;\n    }\n\n    $disposeEdits(resourceComponents: UriComponents, viewType: string, editIds: number[]): void {\n        const document = this.getCustomDocumentEntry(viewType, resourceComponents);\n        document.disposeEdits(editIds);\n    }\n\n    async $onMoveCustomEditor(handle: string, newResourceComponents: UriComponents, viewType: string): Promise<void> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n\n        if (!(entry.provider as theia.CustomTextEditorProvider).moveCustomTextEditor) {\n            throw new Error(`Provider does not implement move '${viewType}'`);\n        }\n\n        const webview = this.webviewExt.getWebviewPanel(handle);\n        if (!webview) {\n            throw new Error('No webview found');\n        }\n\n        const resource = URI.revive(newResourceComponents);\n        const document = this.documentExt.getDocument(resource);\n        const cancellationSource = new CancellationTokenSource();\n        await (entry.provider as theia.CustomTextEditorProvider).moveCustomTextEditor!(document, webview, cancellationSource.token);\n    }\n\n    async $undo(resourceComponents: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        return entry.undo(editId, isDirty);\n    }\n\n    async $redo(resourceComponents: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        return entry.redo(editId, isDirty);\n    }\n\n    async $revert(resourceComponents: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        const provider = this.getCustomEditorProvider(viewType);\n        await provider.revertCustomDocument(entry.document, cancellation);\n    }\n\n    async $onSave(resourceComponents: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        const provider = this.getCustomEditorProvider(viewType);\n        await provider.saveCustomDocument(entry.document, cancellation);\n    }\n\n    async $onSaveAs(resourceComponents: UriComponents, viewType: string, targetResource: UriComponents, cancellation: CancellationToken): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        const provider = this.getCustomEditorProvider(viewType);\n        return provider.saveCustomDocumentAs(entry.document, URI.revive(targetResource), cancellation);\n    }\n\n    private getCustomEditorProvider(viewType: string): theia.CustomEditorProvider {\n        const entry = this.editorProviders.get(viewType);\n        const provider = entry?.provider;\n        if (!provider || !this.supportEditing(provider)) {\n            throw new Error('Custom document is not editable');\n        }\n        return provider;\n    }\n\n    private supportEditing(\n        provider: theia.CustomTextEditorProvider | theia.CustomEditorProvider | theia.CustomReadonlyEditorProvider\n    ): provider is theia.CustomEditorProvider {\n        return !!(provider as theia.CustomEditorProvider).onDidChangeCustomDocument;\n    }\n}\n\nfunction isEditEvent(e: theia.CustomDocumentContentChangeEvent | theia.CustomDocumentEditEvent): e is theia.CustomDocumentEditEvent {\n    return typeof (e as theia.CustomDocumentEditEvent).undo === 'function'\n        && typeof (e as theia.CustomDocumentEditEvent).redo === 'function';\n}\n\nclass CustomDocumentStoreEntry {\n    constructor(\n        readonly document: theia.CustomDocument,\n    ) { }\n\n    private readonly edits = new Cache<theia.CustomDocumentEditEvent>('custom documents');\n\n    addEdit(item: theia.CustomDocumentEditEvent): number {\n        return this.edits.add([item]);\n    }\n\n    async undo(editId: number, isDirty: boolean): Promise<void> {\n        await this.getEdit(editId).undo();\n    }\n\n    async redo(editId: number, isDirty: boolean): Promise<void> {\n        await this.getEdit(editId).redo();\n    }\n\n    disposeEdits(editIds: number[]): void {\n        for (const id of editIds) {\n            this.edits.delete(id);\n        }\n    }\n\n    private getEdit(editId: number): theia.CustomDocumentEditEvent {\n        const edit = this.edits.get(editId, 0);\n        if (!edit) {\n            throw new Error('No edit found');\n        }\n        return edit;\n    }\n}\n\nconst enum CustomEditorType {\n    Text,\n    Custom\n}\n\ntype ProviderEntry = {\n    readonly plugin: Plugin;\n    readonly type: CustomEditorType.Text;\n    readonly provider: theia.CustomTextEditorProvider;\n} | {\n    readonly plugin: Plugin;\n    readonly type: CustomEditorType.Custom;\n    readonly provider: theia.CustomReadonlyEditorProvider;\n};\n\nclass EditorProviderStore {\n    private readonly providers = new Map<string, ProviderEntry>();\n\n    addTextProvider(viewType: string, plugin: Plugin, provider: theia.CustomTextEditorProvider): theia.Disposable {\n        return this.add(CustomEditorType.Text, viewType, plugin, provider);\n    }\n\n    addCustomProvider(viewType: string, plugin: Plugin, provider: theia.CustomReadonlyEditorProvider): theia.Disposable {\n        return this.add(CustomEditorType.Custom, viewType, plugin, provider);\n    }\n\n    get(viewType: string): ProviderEntry | undefined {\n        return this.providers.get(viewType);\n    }\n\n    private add(type: CustomEditorType, viewType: string,\n        plugin: Plugin, provider: theia.CustomTextEditorProvider | theia.CustomReadonlyEditorProvider): theia.Disposable {\n        if (this.providers.has(viewType)) {\n            throw new Error(`Provider for viewType:${viewType} already registered`);\n        }\n        this.providers.set(viewType, { type, plugin: plugin, provider } as ProviderEntry);\n        return new Disposable(() => this.providers.delete(viewType));\n    }\n}\n\nclass CustomDocumentStore {\n    private readonly documents = new Map<string, CustomDocumentStoreEntry>();\n\n    get(viewType: string, resource: theia.Uri): CustomDocumentStoreEntry | undefined {\n        return this.documents.get(this.key(viewType, resource));\n    }\n\n    add(viewType: string, document: theia.CustomDocument): CustomDocumentStoreEntry {\n        const key = this.key(viewType, document.uri);\n        if (this.documents.has(key)) {\n            throw new Error(`Document already exists for viewType:${viewType} resource:${document.uri}`);\n        }\n        const entry = new CustomDocumentStoreEntry(document);\n        this.documents.set(key, entry);\n        return entry;\n    }\n\n    delete(viewType: string, document: theia.CustomDocument): void {\n        const key = this.key(viewType, document.uri);\n        this.documents.delete(key);\n    }\n\n    private key(viewType: string, resource: theia.Uri): string {\n        return `${viewType}@@@${resource}`;\n    }\n}\n\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Path } from '@theia/core/lib/common/path';\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { Breakpoint } from '../../common/plugin-api-rpc-model';\nimport { DebugConfigurationProviderTriggerKind, DebugExt, DebugMain, PLUGIN_RPC_CONTEXT as Ext, TerminalOptionsExt } from '../../common/plugin-api-rpc';\nimport { PluginPackageDebuggersContribution } from '../../common/plugin-protocol';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { ConnectionImpl } from '../../common/connection';\nimport { DEBUG_SCHEME, SCHEME_PATTERN } from '@theia/debug/lib/common/debug-uri-utils';\nimport { Disposable, Breakpoint as BreakpointExt, SourceBreakpoint, FunctionBreakpoint, Location, Range, URI as URIImpl } from '../types-impl';\nimport { PluginDebugAdapterSession } from './plugin-debug-adapter-session';\nimport { PluginDebugAdapterTracker } from './plugin-debug-adapter-tracker';\nimport uuid = require('uuid');\nimport { DebugAdapter } from '@theia/debug/lib/common/debug-model';\nimport { PluginDebugAdapterCreator } from './plugin-debug-adapter-creator';\nimport { NodeDebugAdapterCreator } from '../node/debug/plugin-node-debug-adapter-creator';\nimport { DebugProtocol } from '@vscode/debugprotocol';\nimport { DebugConfiguration } from '@theia/debug/lib/common/debug-configuration';\n\ninterface ConfigurationProviderRecord {\n    handle: number;\n    type: string;\n    trigger: DebugConfigurationProviderTriggerKind,\n    provider: theia.DebugConfigurationProvider;\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport class DebugExtImpl implements DebugExt {\n    // debug sessions by sessionId\n    private sessions = new Map<string, PluginDebugAdapterSession>();\n    private configurationProviderHandleGenerator: number;\n    private configurationProviders: ConfigurationProviderRecord[];\n\n    /**\n     * Only use internally, don't send it to the frontend. It's expensive!\n     * It's already there as a part of the plugin metadata.\n     */\n    private debuggersContributions = new Map<string, PluginPackageDebuggersContribution>();\n    private descriptorFactories = new Map<string, theia.DebugAdapterDescriptorFactory>();\n    private trackerFactories: [string, theia.DebugAdapterTrackerFactory][] = [];\n    private contributionPaths = new Map<string, string>();\n    private contributionTypes = new Map<string, theia.PluginType>();\n\n    private connectionExt: ConnectionImpl;\n    private commandRegistryExt: CommandRegistryImpl;\n\n    private proxy: DebugMain;\n\n    private readonly onDidChangeBreakpointsEmitter = new Emitter<theia.BreakpointsChangeEvent>();\n    private readonly onDidChangeActiveDebugSessionEmitter = new Emitter<theia.DebugSession | undefined>();\n    private readonly onDidTerminateDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidCreateDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidStartDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidReceiveDebugSessionCustomEmitter = new Emitter<theia.DebugSessionCustomEvent>();\n\n    activeDebugSession: theia.DebugSession | undefined;\n    activeDebugConsole: theia.DebugConsole;\n\n    private readonly _breakpoints = new Map<string, theia.Breakpoint>();\n\n    private frontendAdapterCreator = new PluginDebugAdapterCreator();\n    private backendAdapterCreator = new NodeDebugAdapterCreator();\n\n    get breakpoints(): theia.Breakpoint[] {\n        return [...this._breakpoints.values()];\n    }\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DEBUG_MAIN);\n        this.activeDebugConsole = {\n            append: (value: string) => this.proxy.$appendToDebugConsole(value),\n            appendLine: (value: string) => this.proxy.$appendLineToDebugConsole(value)\n        };\n        this.configurationProviderHandleGenerator = 0;\n        this.configurationProviders = [];\n    }\n\n    /**\n     * Sets dependencies.\n     */\n    assistedInject(connectionExt: ConnectionImpl, commandRegistryExt: CommandRegistryImpl): void {\n        this.connectionExt = connectionExt;\n        this.commandRegistryExt = commandRegistryExt;\n    }\n\n    /**\n     * Registers contributions.\n     * @param pluginFolder plugin folder path\n     * @param pluginType plugin type\n     * @param contributions available debuggers contributions\n     */\n    registerDebuggersContributions(pluginFolder: string, pluginType: theia.PluginType, contributions: PluginPackageDebuggersContribution[]): void {\n        contributions.forEach(contribution => {\n            this.contributionPaths.set(contribution.type, pluginFolder);\n            this.contributionTypes.set(contribution.type, pluginType);\n            this.debuggersContributions.set(contribution.type, contribution);\n            this.proxy.$registerDebuggerContribution({\n                type: contribution.type,\n                label: contribution.label || contribution.type\n            });\n            console.log(`Debugger contribution has been registered: ${contribution.type}`);\n        });\n    }\n\n    get onDidReceiveDebugSessionCustomEvent(): theia.Event<theia.DebugSessionCustomEvent> {\n        return this.onDidReceiveDebugSessionCustomEmitter.event;\n    }\n\n    get onDidChangeActiveDebugSession(): theia.Event<theia.DebugSession | undefined> {\n        return this.onDidChangeActiveDebugSessionEmitter.event;\n    }\n\n    get onDidTerminateDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidTerminateDebugSessionEmitter.event;\n    }\n\n    get onDidCreateDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidCreateDebugSessionEmitter.event;\n    }\n\n    get onDidStartDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidStartDebugSessionEmitter.event;\n    }\n\n    get onDidChangeBreakpoints(): theia.Event<theia.BreakpointsChangeEvent> {\n        return this.onDidChangeBreakpointsEmitter.event;\n    }\n\n    addBreakpoints(breakpoints: readonly theia.Breakpoint[]): void {\n        const added: theia.Breakpoint[] = [];\n        for (const b of breakpoints) {\n            if (this._breakpoints.has(b.id)) {\n                continue;\n            }\n            this._breakpoints.set(b.id, b);\n            added.push(b);\n        }\n        if (added.length) {\n            this.onDidChangeBreakpointsEmitter.fire({ added, removed: [], changed: [] });\n            this.proxy.$addBreakpoints(added);\n        }\n    }\n\n    removeBreakpoints(breakpoints: readonly theia.Breakpoint[]): void {\n        const removed: theia.Breakpoint[] = [];\n        const removedIds: string[] = [];\n        for (const b of breakpoints) {\n            if (!this._breakpoints.has(b.id)) {\n                continue;\n            }\n            this._breakpoints.delete(b.id);\n            removed.push(b);\n            removedIds.push(b.id);\n        }\n        if (removed.length) {\n            this.onDidChangeBreakpointsEmitter.fire({ added: [], removed, changed: [] });\n            this.proxy.$removeBreakpoints(removedIds);\n        }\n    }\n\n    startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration, options: theia.DebugSessionOptions): PromiseLike<boolean> {\n        return this.proxy.$startDebugging(folder, nameOrConfiguration, {\n            parentSessionId: options.parentSession?.id,\n            compact: options.compact,\n            consoleMode: options.consoleMode,\n            suppressSaveBeforeStart: options.suppressSaveBeforeStart,\n            suppressDebugStatusbar: options.suppressDebugStatusbar,\n            suppressDebugView: options.suppressDebugView,\n            lifecycleManagedByParent: options.lifecycleManagedByParent,\n            noDebug: options.noDebug\n        });\n    }\n\n    stopDebugging(session?: theia.DebugSession): PromiseLike<void> {\n        return this.proxy.$stopDebugging(session?.id);\n    }\n\n    asDebugSourceUri(source: theia.DebugProtocolSource, session?: theia.DebugSession): theia.Uri {\n        return this.getDebugSourceUri(source, session?.id);\n    }\n\n    private getDebugSourceUri(raw: DebugProtocol.Source, sessionId?: string): theia.Uri {\n        if (raw.sourceReference && raw.sourceReference > 0) {\n            let query = 'ref=' + String(raw.sourceReference);\n            if (sessionId) {\n                query += `&session=${sessionId}`;\n            }\n            return URIImpl.from({ scheme: DEBUG_SCHEME, path: raw.path ?? '', query });\n        }\n        if (!raw.path) {\n            throw new Error('Unrecognized source type: ' + JSON.stringify(raw));\n        }\n        if (raw.path.match(SCHEME_PATTERN)) {\n            return URIImpl.parse(raw.path);\n        }\n        return URIImpl.file(raw.path);\n    }\n\n    registerDebugAdapterDescriptorFactory(debugType: string, factory: theia.DebugAdapterDescriptorFactory): Disposable {\n        if (this.descriptorFactories.has(debugType)) {\n            throw new Error(`Descriptor factory for ${debugType} has been already registered`);\n        }\n        this.descriptorFactories.set(debugType, factory);\n        return Disposable.create(() => this.descriptorFactories.delete(debugType));\n    }\n\n    registerDebugAdapterTrackerFactory(debugType: string, factory: theia.DebugAdapterTrackerFactory): Disposable {\n        if (!factory) {\n            return Disposable.create(() => { });\n        }\n\n        this.trackerFactories.push([debugType, factory]);\n        return Disposable.create(() => {\n            this.trackerFactories = this.trackerFactories.filter(tuple => tuple[1] !== factory);\n        });\n    }\n\n    registerDebugConfigurationProvider(debugType: string, provider: theia.DebugConfigurationProvider, trigger: DebugConfigurationProviderTriggerKind): Disposable {\n        console.log(`Debug configuration provider has been registered: ${debugType}, trigger: ${trigger}`);\n\n        const handle = this.configurationProviderHandleGenerator++;\n        this.configurationProviders.push({ handle, type: debugType, trigger, provider });\n        const descriptor = {\n            handle,\n            type: debugType,\n            trigger,\n            provideDebugConfiguration: !!provider.provideDebugConfigurations,\n            resolveDebugConfigurations: !!provider.resolveDebugConfiguration,\n            resolveDebugConfigurationWithSubstitutedVariables: !!provider.resolveDebugConfigurationWithSubstitutedVariables\n        };\n        this.proxy.$registerDebugConfigurationProvider(descriptor);\n        return Disposable.create(() => {\n            this.configurationProviders = this.configurationProviders.filter(p => (p.handle !== handle));\n            this.proxy.$unregisterDebugConfigurationProvider(handle);\n        });\n    }\n\n    async $onSessionCustomEvent(sessionId: string, event: string, body?: any): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidReceiveDebugSessionCustomEmitter.fire({ event, body, session });\n        }\n    }\n\n    async $sessionDidCreate(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidCreateDebugSessionEmitter.fire(session);\n        }\n    }\n\n    async $sessionDidStart(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidStartDebugSessionEmitter.fire(session);\n        }\n    }\n\n    async $sessionDidDestroy(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidTerminateDebugSessionEmitter.fire(session);\n            this.sessions.delete(sessionId);\n        }\n    }\n\n    async $sessionDidChange(sessionId: string | undefined): Promise<void> {\n        this.activeDebugSession = sessionId ? this.sessions.get(sessionId) : undefined;\n        this.onDidChangeActiveDebugSessionEmitter.fire(this.activeDebugSession);\n    }\n\n    async $breakpointsDidChange(added: Breakpoint[], removed: string[], changed: Breakpoint[]): Promise<void> {\n        const a: theia.Breakpoint[] = [];\n        const r: theia.Breakpoint[] = [];\n        const c: theia.Breakpoint[] = [];\n        for (const b of added) {\n            if (this._breakpoints.has(b.id)) {\n                continue;\n            }\n            const bExt = this.toBreakpointExt(b);\n            if (bExt) {\n                this._breakpoints.set(bExt.id, bExt);\n                a.push(bExt);\n            }\n        }\n        for (const id of removed) {\n            const bExt = this._breakpoints.get(id);\n            if (bExt) {\n                this._breakpoints.delete(id);\n                r.push(bExt);\n            }\n        }\n        for (const b of changed) {\n            const bExt = this._breakpoints.get(b.id);\n            if (bExt) {\n                const { functionName, location, enabled, condition, hitCondition, logMessage } = b;\n                if (bExt instanceof FunctionBreakpoint && functionName) {\n                    Object.assign(bExt, { enabled, condition, hitCondition, logMessage, functionName });\n                } else if (bExt instanceof SourceBreakpoint && location) {\n                    const range = new Range(location.range.startLineNumber, location.range.startColumn, location.range.endLineNumber, location.range.endColumn);\n                    Object.assign(bExt, { enabled, condition, hitCondition, logMessage, location: new Location(URI.revive(location.uri), range) });\n                }\n                c.push(bExt);\n            }\n        }\n        this.onDidChangeBreakpointsEmitter.fire({ added: a, removed: r, changed: c });\n    }\n\n    protected toBreakpointExt({ functionName, location, enabled, condition, hitCondition, logMessage, id }: Breakpoint): BreakpointExt | undefined {\n        if (location) {\n            const range = new Range(location.range.startLineNumber, location.range.startColumn, location.range.endLineNumber, location.range.endColumn);\n            return new SourceBreakpoint(new Location(URI.revive(location.uri), range), enabled, condition, hitCondition, logMessage, id);\n        }\n        if (functionName) {\n            return new FunctionBreakpoint(functionName!, enabled, condition, hitCondition, logMessage, id);\n        }\n        return undefined;\n    }\n\n    async $createDebugSession(debugConfiguration: DebugConfiguration, workspaceFolderUri: string | undefined): Promise<string> {\n        const sessionId = uuid.v4();\n\n        const parentSession = debugConfiguration.parentSessionId ? this.sessions.get(debugConfiguration.parentSessionId) : undefined;\n        const theiaSession: theia.DebugSession = {\n            id: sessionId,\n            type: debugConfiguration.type,\n            name: debugConfiguration.name,\n            parentSession: parentSession,\n            workspaceFolder: this.toWorkspaceFolder(workspaceFolderUri),\n            configuration: debugConfiguration,\n            customRequest: async (command: string, args?: any) => {\n                const response = await this.proxy.$customRequest(sessionId, command, args);\n                if (response && response.success) {\n                    return response.body;\n                }\n                return Promise.reject(new Error(response.message ?? 'custom request failed'));\n            },\n            getDebugProtocolBreakpoint: async (breakpoint: Breakpoint) =>\n                this.proxy.$getDebugProtocolBreakpoint(sessionId, breakpoint.id)\n        };\n\n        const tracker = await this.createDebugAdapterTracker(theiaSession);\n        const communicationProvider = await this.createDebugAdapter(theiaSession, debugConfiguration);\n\n        const debugAdapterSession = new PluginDebugAdapterSession(communicationProvider, tracker, theiaSession);\n        this.sessions.set(sessionId, debugAdapterSession);\n\n        const connection = await this.connectionExt!.ensureConnection(sessionId);\n        debugAdapterSession.start(connection);\n\n        return sessionId;\n    }\n\n    async $terminateDebugSession(sessionId: string): Promise<void> {\n        const debugAdapterSession = this.sessions.get(sessionId);\n        if (debugAdapterSession) {\n            await debugAdapterSession.stop();\n        }\n    }\n\n    async $getTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined> {\n        return this.doGetTerminalCreationOptions(debugType);\n    }\n\n    async doGetTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined> {\n        return undefined;\n    }\n\n    private getConfigurationProviderRecord(handle: number): {\n        provider: theia.DebugConfigurationProvider\n        type: string\n    } {\n        const record = this.configurationProviders.find(p => p.handle === handle);\n        if (!record) {\n            throw new Error('No Debug configuration provider found with given handle number: ' + handle);\n        }\n        const { provider, type } = record;\n        return { provider, type };\n    }\n\n    async $provideDebugConfigurationsByHandle(\n        handle: number,\n        workspaceFolderUri: string | undefined\n    ): Promise<theia.DebugConfiguration[]> {\n        const { provider, type } = this.getConfigurationProviderRecord(handle);\n\n        const configurations = await provider.provideDebugConfigurations?.(\n            this.toWorkspaceFolder(workspaceFolderUri)\n        );\n\n        if (!configurations) {\n            throw new Error(\n                'nothing returned from DebugConfigurationProvider.provideDebugConfigurations, type: ' + type\n            );\n        }\n\n        return configurations;\n    }\n\n    async $resolveDebugConfigurationByHandle(\n        handle: number,\n        workspaceFolderUri: string | undefined,\n        debugConfiguration: theia.DebugConfiguration\n    ): Promise<theia.DebugConfiguration | undefined | null> {\n        const { provider } = this.getConfigurationProviderRecord(handle);\n        return provider.resolveDebugConfiguration?.(\n            this.toWorkspaceFolder(workspaceFolderUri),\n            debugConfiguration\n        );\n    }\n\n    async $resolveDebugConfigurationWithSubstitutedVariablesByHandle(\n        handle: number,\n        workspaceFolderUri: string | undefined,\n        debugConfiguration: theia.DebugConfiguration\n    ): Promise<theia.DebugConfiguration | undefined | null> {\n        const { provider } = this.getConfigurationProviderRecord(handle);\n        return provider.resolveDebugConfigurationWithSubstitutedVariables?.(\n            this.toWorkspaceFolder(workspaceFolderUri),\n            debugConfiguration\n        );\n    }\n\n    protected async createDebugAdapterTracker(session: theia.DebugSession): Promise<theia.DebugAdapterTracker> {\n        return PluginDebugAdapterTracker.create(session, this.trackerFactories);\n    }\n\n    protected async createDebugAdapter(session: theia.DebugSession, debugConfiguration: theia.DebugConfiguration): Promise<DebugAdapter> {\n        const executable = await this.resolveDebugAdapterExecutable(debugConfiguration);\n        const descriptorFactory = this.descriptorFactories.get(session.type);\n        return this.getAdapterCreator(debugConfiguration).createDebugAdapter(session, debugConfiguration, executable, descriptorFactory);\n    }\n\n    protected async resolveDebugAdapterExecutable(debugConfiguration: theia.DebugConfiguration): Promise<theia.DebugAdapterExecutable | undefined> {\n        const { type } = debugConfiguration;\n        const contribution = this.debuggersContributions.get(type);\n        if (contribution) {\n            if (contribution.adapterExecutableCommand) {\n                const executable = await this.commandRegistryExt.executeCommand<theia.DebugAdapterExecutable>(contribution.adapterExecutableCommand);\n                if (executable) {\n                    return executable;\n                }\n            } else {\n                const contributionPath = this.contributionPaths.get(type);\n                if (contributionPath) {\n                    return this.getAdapterCreator(debugConfiguration).resolveDebugAdapterExecutable(contributionPath, contribution);\n                }\n            }\n        }\n\n        throw new Error(`It is not possible to provide debug adapter executable for '${debugConfiguration.type}'.`);\n    }\n\n    private toWorkspaceFolder(folder: string | undefined): theia.WorkspaceFolder | undefined {\n        if (!folder) {\n            return undefined;\n        }\n\n        const uri = URI.parse(folder);\n        const path = new Path(uri.path);\n        return {\n            uri: uri,\n            name: path.base,\n            index: 0\n        };\n    }\n\n    private getAdapterCreator(debugConfiguration: theia.DebugConfiguration): PluginDebugAdapterCreator {\n        const pluginType = this.contributionTypes.get(debugConfiguration.type);\n        return pluginType === 'frontend' ? this.frontendAdapterCreator : this.backendAdapterCreator;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Arm and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DebugAdapter } from '@theia/debug/lib/common/debug-model';\nimport { PluginPackageDebuggersContribution } from '../../common';\nimport { DebugAdapterInlineImplementation } from '../types-impl';\nimport { InlineDebugAdapter } from '@theia/debug/lib/common/inline-debug-adapter';\n\nexport class PluginDebugAdapterCreator {\n    public async resolveDebugAdapterExecutable(_pluginPath: string, _debuggerContribution: PluginPackageDebuggersContribution): Promise<theia.DebugAdapterExecutable | undefined> {\n        // Node is required to run the default executable\n        return undefined;\n    }\n\n    public async createDebugAdapter(\n        session: theia.DebugSession,\n        _debugConfiguration: theia.DebugConfiguration,\n        executable: theia.DebugAdapterExecutable | undefined,\n        descriptorFactory: theia.DebugAdapterDescriptorFactory | undefined\n    ): Promise<DebugAdapter> {\n        if (descriptorFactory) {\n            const descriptor = await descriptorFactory.createDebugAdapterDescriptor(session, executable);\n            if (descriptor) {\n                if (DebugAdapterInlineImplementation.is(descriptor)) {\n                    return this.connectInlineDebugAdapter(descriptor);\n                }\n            }\n        }\n\n        throw new Error('It is not possible to provide debug adapter executable.');\n    }\n\n    public connectInlineDebugAdapter(adapter: DebugAdapterInlineImplementation): InlineDebugAdapter {\n        return new InlineDebugAdapter(adapter.implementation);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { DebugAdapterSessionImpl } from '@theia/debug/lib/common/debug-adapter-session';\nimport * as theia from '@theia/plugin';\nimport { DebugAdapter } from '@theia/debug/lib/common/debug-model';\nimport { DebugChannel } from '@theia/debug/lib/common/debug-service';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Server debug adapter session.\n */\nexport class PluginDebugAdapterSession extends DebugAdapterSessionImpl implements theia.DebugSession {\n\n    constructor(\n        override readonly debugAdapter: DebugAdapter,\n        protected readonly tracker: theia.DebugAdapterTracker,\n        protected readonly theiaSession: theia.DebugSession) {\n\n        super(theiaSession.id, debugAdapter);\n    }\n\n    get parentSession(): theia.DebugSession | undefined {\n        return this.theiaSession.parentSession;\n    }\n\n    get type(): string {\n        return this.theiaSession.type;\n    }\n    get name(): string {\n        return this.theiaSession.name;\n    };\n    get workspaceFolder(): theia.WorkspaceFolder | undefined {\n        return this.theiaSession.workspaceFolder;\n    };\n    get configuration(): theia.DebugConfiguration {\n        return this.theiaSession.configuration;\n    };\n\n    override async start(channel: DebugChannel): Promise<void> {\n        if (this.tracker.onWillStartSession) {\n            this.tracker.onWillStartSession();\n        }\n        await super.start(channel);\n    }\n\n    override async stop(): Promise<void> {\n        if (this.tracker.onWillStopSession) {\n            this.tracker.onWillStopSession();\n        }\n        await super.stop();\n    }\n\n    async customRequest(command: string, args?: any): Promise<any> {\n        return this.theiaSession.customRequest(command, args);\n    }\n\n    async getDebugProtocolBreakpoint(breakpoint: theia.Breakpoint): Promise<theia.DebugProtocolBreakpoint | undefined> {\n        return this.theiaSession.getDebugProtocolBreakpoint(breakpoint);\n    }\n\n    protected override onDebugAdapterError(error: Error): void {\n        if (this.tracker.onError) {\n            this.tracker.onError(error);\n        }\n        super.onDebugAdapterError(error);\n    }\n\n    protected override send(message: string): void {\n        try {\n            super.send(message);\n        } finally {\n            if (this.tracker.onDidSendMessage) {\n                this.tracker.onDidSendMessage(JSON.parse(message));\n            }\n        }\n    }\n\n    protected override write(message: string): void {\n        if (this.tracker.onWillReceiveMessage) {\n            this.tracker.onWillReceiveMessage(JSON.parse(message));\n        }\n        super.write(message);\n    }\n\n    protected override onDebugAdapterExit(): void {\n        if (this.tracker.onExit) {\n            this.tracker.onExit(undefined, undefined);\n        }\n        super.onDebugAdapterExit();\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport * as theia from '@theia/plugin';\n\nexport class PluginDebugAdapterTracker implements theia.DebugAdapterTracker {\n    constructor(protected readonly trackers: theia.DebugAdapterTracker[]) { }\n\n    static async create(session: theia.DebugSession, trackerFactories: [string, theia.DebugAdapterTrackerFactory][]): Promise<PluginDebugAdapterTracker> {\n        const trackers: theia.DebugAdapterTracker[] = [];\n\n        const factories = trackerFactories.filter(tuple => tuple[0] === '*' || tuple[0] === session.type).map(tuple => tuple[1]);\n        for (const factory of factories) {\n            const tracker = await factory.createDebugAdapterTracker(session);\n            if (tracker) {\n                trackers.push(tracker);\n            }\n        }\n\n        return new PluginDebugAdapterTracker(trackers);\n    }\n\n    onWillStartSession(): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillStartSession) {\n                tracker.onWillStartSession();\n            }\n        });\n    }\n\n    onWillReceiveMessage(message: any): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillReceiveMessage) {\n                tracker.onWillReceiveMessage(message);\n            }\n        });\n    }\n\n    onDidSendMessage(message: any): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onDidSendMessage) {\n                tracker.onDidSendMessage(message);\n            }\n        });\n    }\n\n    onWillStopSession(): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillStopSession) {\n                tracker.onWillStopSession();\n            }\n        });\n    }\n\n    onError(error: Error): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onError) {\n                tracker.onError(error);\n            }\n        });\n    }\n\n    onExit(code: number | undefined, signal: string | undefined): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onExit) {\n                tracker.onExit(code, signal);\n            }\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport {\n    DecorationData,\n    DecorationReply,\n    DecorationRequest,\n    DecorationsExt,\n    DecorationsMain,\n    PLUGIN_RPC_CONTEXT, PluginInfo\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable, FileDecoration, URI } from './types-impl';\nimport { CancellationToken } from '@theia/core/lib/common';\nimport { dirname } from 'path';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.52.1/src/vs/workbench/api/common/extHostDecorations.ts#L39-L38\n\ninterface ProviderData {\n    provider: theia.FileDecorationProvider;\n    pluginInfo: PluginInfo;\n}\n\nexport class DecorationsExtImpl implements DecorationsExt {\n    private static handle = 0;\n    private static maxEventSize = 250;\n\n    private readonly providersMap: Map<number, ProviderData>;\n    private readonly proxy: DecorationsMain;\n\n    constructor(readonly rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DECORATIONS_MAIN);\n        this.providersMap = new Map();\n    }\n\n    registerFileDecorationProvider(provider: theia.FileDecorationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const handle = DecorationsExtImpl.handle++;\n        this.providersMap.set(handle, { provider, pluginInfo });\n        this.proxy.$registerDecorationProvider(handle);\n\n        const listener = provider.onDidChangeFileDecorations && provider.onDidChangeFileDecorations(e => {\n            if (!e) {\n                this.proxy.$onDidChange(handle, null);\n                return;\n            }\n            const array = Array.isArray(e) ? e : [e];\n            if (array.length <= DecorationsExtImpl.maxEventSize) {\n                this.proxy.$onDidChange(handle, array);\n                return;\n            }\n\n            // too many resources per event. pick one resource per folder, starting\n            // with parent folders\n            const mapped = array.map(uri => ({ uri, rank: (uri.path.match(/\\//g) || []).length }));\n            const groups = groupBy(mapped, (a, b) => a.rank - b.rank);\n            const picked: URI[] = [];\n            outer: for (const uris of groups) {\n                let lastDirname: string | undefined;\n                for (const obj of uris) {\n                    const myDirname = dirname(obj.uri.path);\n                    if (lastDirname !== myDirname) {\n                        lastDirname = myDirname;\n                        if (picked.push(obj.uri) >= DecorationsExtImpl.maxEventSize) {\n                            break outer;\n                        }\n                    }\n                }\n            }\n            this.proxy.$onDidChange(handle, picked);\n        });\n\n        return new Disposable(() => {\n            listener?.dispose();\n            this.proxy.$unregisterDecorationProvider(handle);\n            this.providersMap.delete(handle);\n        });\n\n        function groupBy<T>(data: ReadonlyArray<T>, compareFn: (a: T, b: T) => number): T[][] {\n            const result: T[][] = [];\n            let currentGroup: T[] | undefined = undefined;\n            for (const element of data.slice(0).sort(compareFn)) {\n                if (!currentGroup || compareFn(currentGroup[0], element) !== 0) {\n                    currentGroup = [element];\n                    result.push(currentGroup);\n                } else {\n                    currentGroup.push(element);\n                }\n            }\n            return result;\n        }\n    }\n\n    async $provideDecorations(handle: number, requests: DecorationRequest[], token: CancellationToken): Promise<DecorationReply> {\n        if (!this.providersMap.has(handle)) {\n            // might have been unregistered in the meantime\n            return Object.create(null);\n        }\n\n        const result: DecorationReply = Object.create(null);\n        const { provider, pluginInfo } = this.providersMap.get(handle)!;\n\n        await Promise.all(requests.map(async request => {\n            try {\n                const { uri, id } = request;\n                const data = await Promise.resolve(provider.provideFileDecoration(URI.revive(uri), token));\n                if (!data) {\n                    return;\n                }\n                try {\n                    FileDecoration.validate(data);\n                    result[id] = <DecorationData>[data.propagate, data.tooltip, data.badge, data.color];\n                } catch (e) {\n                    console.warn(`INVALID decoration from extension '${pluginInfo.name}': ${e}`);\n                }\n            } catch (err) {\n                console.error(err);\n            }\n        }));\n\n        return result;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { PLUGIN_RPC_CONTEXT as Ext, OpenDialogOptionsMain, DialogsMain, SaveDialogOptionsMain, UploadDialogOptionsMain } from '../common/plugin-api-rpc';\nimport { OpenDialogOptions, SaveDialogOptions, UploadDialogOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { URI } from './types-impl';\n\nexport class DialogsExtImpl {\n    private proxy: DialogsMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DIALOGS_MAIN);\n    }\n\n    showOpenDialog(options: OpenDialogOptions): PromiseLike<URI[] | undefined> {\n        const optionsMain = {\n            title: options.title,\n            openLabel: options.openLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            canSelectFiles: typeof options.canSelectFiles === 'boolean' ? options.canSelectFiles : true,\n            canSelectFolders: typeof options.canSelectFolders === 'boolean' ? options.canSelectFolders : false,\n            canSelectMany: options.canSelectMany,\n            filters: options.filters\n        } as OpenDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showOpenDialog(optionsMain).then(result => {\n                if (result) {\n                    const uris = [];\n                    for (let i = 0; i < result.length; i++) {\n                        const uri = URI.parse('file://' + result[i]);\n                        uris.push(uri);\n                    }\n                    resolve(uris);\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showSaveDialog(options: SaveDialogOptions): PromiseLike<URI | undefined> {\n        const optionsMain = {\n            title: options.title,\n            saveLabel: options.saveLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            filters: options.filters\n        } as SaveDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showSaveDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(URI.parse('file://' + result));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showUploadDialog(options: UploadDialogOptions): PromiseLike<URI[] | undefined> {\n        const optionsMain = {\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined\n        } as UploadDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showUploadDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(result.map(uri => URI.parse(uri)));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { ModelChangedEvent, DocumentsMain } from '../common/plugin-api-rpc';\nimport { Range as ARange } from '../common/plugin-api-rpc-model';\nimport { EndOfLine, Position, Range, URI } from './types-impl';\nimport { ok } from '../common/assert';\nimport { PrefixSumComputer } from './prefix-sum-computer';\nimport { getWordAtText, ensureValidWordDefinition } from './word-helper';\n\nconst _modeId2WordDefinition = new Map<string, RegExp | null>();\nexport function setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n    _modeId2WordDefinition.set(modeId, wordDefinition);\n}\nexport function getWordDefinitionFor(modeId: string): RegExp {\n    return _modeId2WordDefinition.get(modeId)!;\n}\n\nexport class DocumentDataExt {\n\n    private disposed = false;\n    private dirty: boolean;\n    private _document: theia.TextDocument;\n    private textLines = new Array<theia.TextLine>();\n    private lineStarts: PrefixSumComputer | undefined;\n\n    constructor(private proxy: DocumentsMain, private uri: URI, private lines: string[], private eol: string,\n        private languageId: string, private versionId: number, isDirty: boolean) {\n        this.dirty = isDirty;\n    }\n\n    dispose(): void {\n        ok(!this.disposed);\n        this.dirty = false;\n        this.disposed = true;\n    }\n\n    onEvents(e: ModelChangedEvent): void {\n        if (e.eol && e.eol !== this.eol) {\n            this.eol = e.eol;\n            this.lineStarts = undefined;\n        }\n\n        // Update my lines\n        const changes = e.changes;\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, len = changes.length; i < len; i++) {\n            const change = changes[i];\n            this.acceptDeleteRange(change.range);\n            this.acceptInsertText(new Position(change.range.startLineNumber, change.range.startColumn), change.text);\n        }\n\n        this.versionId = e.versionId;\n    }\n    acceptIsDirty(isDirty: boolean): void {\n        ok(!this.disposed);\n        this.dirty = isDirty;\n    }\n    acceptLanguageId(langId: string): void {\n        ok(!this.disposed);\n        this.languageId = langId;\n    }\n    get document(): theia.TextDocument {\n        if (!this._document) {\n            const that = this;\n            this._document = {\n                get uri(): theia.Uri { return that.uri; },\n                get fileName(): string { return that.uri.fsPath; },\n                get isUntitled(): boolean { return that.uri.scheme === 'untitled'; },\n                get languageId(): string { return that.languageId; },\n                get version(): number { return that.versionId; },\n                get isClosed(): boolean { return that.disposed; },\n                get isDirty(): boolean { return that.dirty; },\n                save(): Promise<boolean> { return that.save(); },\n                getText(range?): string { return range ? that.getTextInRange(range) : that.getText(); },\n                get eol(): theia.EndOfLine { return that.eol === '\\n' ? EndOfLine.LF : EndOfLine.CRLF; },\n                get lineCount(): number { return that.lines.length; },\n                lineAt(lineOrPos: number | theia.Position): theia.TextLine { return that.lineAt(lineOrPos); },\n                offsetAt(pos): number { return that.offsetAt(pos); },\n                positionAt(offset): theia.Position { return that.positionAt(offset); },\n                validateRange(ran): theia.Range { return that.validateRange(ran); },\n                validatePosition(pos): theia.Position { return that.validatePosition(pos); },\n                getWordRangeAtPosition(pos, regexp?): theia.Range | undefined { return that.getWordRangeAtPosition(pos, regexp); }\n            };\n        }\n        return Object.freeze(this._document);\n    }\n\n    private acceptInsertText(position: Position, insertText: string): void {\n        if (insertText.length === 0) {\n            // Nothing to insert\n            return;\n        }\n        const insertLines = insertText.split(/\\r\\n|\\r|\\n/);\n        if (insertLines.length === 1) {\n            // Inserting text on one line\n            this.setLineText(position.line - 1,\n                this.lines[position.line - 1].substring(0, position.character - 1)\n                + insertLines[0]\n                + this.lines[position.line - 1].substring(position.character - 1)\n            );\n            return;\n        }\n\n        // Append overflowing text from first line to the end of text to insert\n        insertLines[insertLines.length - 1] += this.lines[position.line - 1].substring(position.character - 1);\n\n        // Delete overflowing text from first line and insert text on first line\n        this.setLineText(position.line - 1,\n            this.lines[position.line - 1].substring(0, position.character - 1)\n            + insertLines[0]\n        );\n\n        // Insert new lines & store lengths\n        const newLengths = new Uint32Array(insertLines.length - 1);\n        for (let i = 1; i < insertLines.length; i++) {\n            this.lines.splice(position.line + i - 1, 0, insertLines[i]);\n            newLengths[i - 1] = insertLines[i].length + this.eol.length;\n        }\n\n        if (this.lineStarts) {\n            // update prefix sum\n            this.lineStarts.insertValues(position.line, newLengths);\n        }\n    }\n\n    private acceptDeleteRange(range: ARange): void {\n\n        if (range.startLineNumber === range.endLineNumber) {\n            if (range.startColumn === range.endColumn) {\n                // Nothing to delete\n                return;\n            }\n            // Delete text on the affected line\n            this.setLineText(range.startLineNumber - 1,\n                this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n                + this.lines[range.startLineNumber - 1].substring(range.endColumn - 1)\n            );\n            return;\n        }\n\n        // Take remaining text on last line and append it to remaining text on first line\n        this.setLineText(range.startLineNumber - 1,\n            this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n            + this.lines[range.endLineNumber - 1].substring(range.endColumn - 1)\n        );\n\n        // Delete middle lines\n        this.lines.splice(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        if (this.lineStarts) {\n            this.lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        }\n    }\n\n    private setLineText(lineIndex: number, newValue: string): void {\n        this.lines[lineIndex] = newValue;\n        if (this.lineStarts) {\n            this.lineStarts.changeValue(lineIndex, this.lines[lineIndex].length + this.eol.length);\n        }\n    }\n\n    private save(): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('Document is closed'));\n        }\n        return this.proxy.$trySaveDocument(this.uri);\n    }\n\n    private getTextInRange(_range: theia.Range): string {\n        const range = this.validateRange(_range);\n\n        if (range.isEmpty) {\n            return '';\n        }\n\n        if (range.isSingleLine) {\n            return this.lines[range.start.line].substring(range.start.character, range.end.character);\n        }\n\n        const lineEnding = this.eol;\n        const startLineIndex = range.start.line;\n        const endLineIndex = range.end.line;\n        const resultLines: string[] = [];\n\n        resultLines.push(this.lines[startLineIndex].substring(range.start.character));\n        for (let i = startLineIndex + 1; i < endLineIndex; i++) {\n            resultLines.push(this.lines[i]);\n        }\n        resultLines.push(this.lines[endLineIndex].substring(0, range.end.character));\n\n        return resultLines.join(lineEnding);\n    }\n\n    private validateRange(range: theia.Range): theia.Range {\n        if (!(range instanceof Range)) {\n            throw new Error('Invalid argument');\n        }\n\n        const start = this.validatePosition(range.start);\n        const end = this.validatePosition(range.end);\n\n        if (start === range.start && end === range.end) {\n            return range;\n        }\n        return new Range(start.line, start.character, end.line, end.character);\n    }\n\n    private getText(): string {\n        return this.lines.join(this.eol);\n    }\n\n    private validatePosition(position: theia.Position): theia.Position {\n        if (!(position instanceof Position)) {\n            throw new Error('Invalid argument');\n        }\n\n        let { line, character } = position;\n        let hasChanged = false;\n\n        if (line < 0) {\n            line = 0;\n            character = 0;\n            hasChanged = true;\n        } else if (line >= this.lines.length) {\n            line = this.lines.length - 1;\n            character = this.lines[line].length;\n            hasChanged = true;\n        } else {\n            const maxCharacter = this.lines[line].length;\n            if (character < 0) {\n                character = 0;\n                hasChanged = true;\n            } else if (character > maxCharacter) {\n                character = maxCharacter;\n                hasChanged = true;\n            }\n        }\n\n        if (!hasChanged) {\n            return position;\n        }\n        return new Position(line, character);\n    }\n\n    private lineAt(lineOrPosition: number | theia.Position): theia.TextLine {\n\n        let line: number = -1;\n        if (lineOrPosition instanceof Position) {\n            line = lineOrPosition.line;\n        } else if (typeof lineOrPosition === 'number') {\n            line = lineOrPosition;\n        }\n\n        if (line < 0 || line >= this.lines.length) {\n            throw new Error('Illegal value for `line`');\n        }\n\n        let result = this.textLines[line];\n        if (!result || result.lineNumber !== line || result.text !== this.lines[line]) {\n\n            const text = this.lines[line];\n            const firstNonWhitespaceCharacterIndex = /^(\\s*)/.exec(text)![1].length;\n            const range = new Range(line, 0, line, text.length);\n            const rangeIncludingLineBreak = line < this.lines.length - 1\n                ? new Range(line, 0, line + 1, 0)\n                : range;\n\n            result = Object.freeze({\n                lineNumber: line,\n                range,\n                rangeIncludingLineBreak,\n                text,\n                firstNonWhitespaceCharacterIndex,\n                isEmptyOrWhitespace: firstNonWhitespaceCharacterIndex === text.length\n            });\n\n            this.textLines[line] = result;\n        }\n\n        return result;\n    }\n\n    private offsetAt(position: theia.Position): number {\n        position = this.validatePosition(position);\n        this.ensureLineStarts();\n        return this.lineStarts!.getAccumulatedValue(position.line - 1) + position.character;\n    }\n\n    private ensureLineStarts(): void {\n        if (!this.lineStarts) {\n            const eolLength = this.eol.length;\n            const linesLength = this.lines.length;\n            const lineStartValues = new Uint32Array(linesLength);\n            for (let i = 0; i < linesLength; i++) {\n                lineStartValues[i] = this.lines[i].length + eolLength;\n            }\n            this.lineStarts = new PrefixSumComputer(lineStartValues);\n        }\n    }\n\n    private positionAt(offset: number): theia.Position {\n        offset = Math.floor(offset);\n        offset = Math.max(0, offset);\n\n        this.ensureLineStarts();\n        const out = this.lineStarts!.getIndexOf(offset);\n\n        const lineLength = this.lines[out.index].length;\n\n        return new Position(out.index, Math.min(out.remainder, lineLength));\n    }\n\n    private getWordRangeAtPosition(_position: theia.Position, regexp?: RegExp): theia.Range | undefined {\n        const position = this.validatePosition(_position);\n\n        if (!regexp) {\n            // use default when custom-regexp isn't provided\n            regexp = getWordDefinitionFor(this.languageId);\n\n        } else if (regExpLeadsToEndlessLoop(regexp)) {\n            // use default when custom-regexp is bad\n            console.warn(`[getWordRangeAtPosition]: ignoring custom regexp '${regexp.source}' because it matches the empty string.`);\n            regexp = getWordDefinitionFor(this.languageId);\n        }\n\n        const wordAtText = getWordAtText(\n            position.character + 1,\n            ensureValidWordDefinition(regexp),\n            this.lines[position.line],\n            0\n        );\n\n        if (wordAtText) {\n            return new Range(position.line, wordAtText.startColumn - 1, position.line, wordAtText.endColumn - 1);\n        }\n        return undefined;\n    }\n}\n\nexport function regExpLeadsToEndlessLoop(regexp: RegExp): boolean {\n    // Exit early if it's one of these special cases which are meant to match\n    // against an empty string\n    if (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\n        return false;\n    }\n\n    // We check against an empty string. If the regular expression doesn't advance\n    // (e.g. ends in an endless loop) it will match an empty string.\n    const match = regexp.exec('');\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (match && <any>regexp.lastIndex === 0)!;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * based on https://github.com/Microsoft/vscode/blob/bf9a27ec01f2ef82fc45f69e0c946c7d74a57d3e/src/vs/workbench/api/node/extHostDocumentSaveParticipant.ts\n */\nimport { DocumentsExt, ModelChangedEvent, PLUGIN_RPC_CONTEXT, DocumentsMain, SingleEditOperation } from '../common/plugin-api-rpc';\nimport { TextEdit, URI } from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt, setWordDefinitionFor } from './document-data';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport * as Converter from './type-converters';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Range, TextDocumentShowOptions } from '../common/plugin-api-rpc-model';\n\nexport class DocumentsExtImpl implements DocumentsExt {\n    private toDispose = new DisposableCollection();\n    private _onDidAddDocument = new Emitter<theia.TextDocument>();\n    private _onDidRemoveDocument = new Emitter<theia.TextDocument>();\n    private _onDidChangeDocument = new Emitter<theia.TextDocumentChangeEvent>();\n    private _onDidSaveTextDocument = new Emitter<theia.TextDocument>();\n    private _onWillSaveTextDocument = new Emitter<theia.TextDocumentWillSaveEvent>();\n\n    readonly onDidAddDocument: Event<theia.TextDocument> = this._onDidAddDocument.event;\n    readonly onDidRemoveDocument: Event<theia.TextDocument> = this._onDidRemoveDocument.event;\n    readonly onDidChangeDocument: Event<theia.TextDocumentChangeEvent> = this._onDidChangeDocument.event;\n    readonly onDidSaveTextDocument: Event<theia.TextDocument> = this._onDidSaveTextDocument.event;\n    readonly onWillSaveTextDocument: Event<theia.TextDocumentWillSaveEvent> = this._onWillSaveTextDocument.event;\n\n    private proxy: DocumentsMain;\n    private loadingDocuments = new Map<string, Promise<DocumentDataExt | undefined>>();\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN);\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidAddDocuments(documents => {\n                for (const document of documents) {\n                    this._onDidAddDocument.fire(document.document);\n                }\n            })\n        );\n\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidRemoveDocuments(documents => {\n                for (const data of documents) {\n                    this._onDidRemoveDocument.fire(data.document);\n                }\n            })\n        );\n    }\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void {\n        const uri = URI.revive(startUrl);\n        const uriString = uri.toString();\n\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (data) {\n            this._onDidRemoveDocument.fire(data.document);\n            data.acceptLanguageId(newModeId);\n            this._onDidAddDocument.fire(data.document);\n        }\n    }\n    $acceptModelSaved(strUrl: UriComponents): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        this.$acceptDirtyStateChanged(strUrl, false);\n        if (data) {\n            this._onDidSaveTextDocument.fire(data.document);\n        }\n    }\n\n    async $acceptModelWillSave(strUrl: UriComponents, reason: theia.TextDocumentSaveReason, saveTimeout: number): Promise<SingleEditOperation[]> {\n        const uri = URI.revive(strUrl).toString();\n        const operations: SingleEditOperation[] = [];\n        let didTimeout = false;\n        // try to timeout early to squeeze edits at least from some save participants\n        const didTimeoutHandle = setTimeout(() => didTimeout = true, saveTimeout - 250);\n        try {\n            await this._onWillSaveTextDocument.sequence(async fireEvent => {\n                if (didTimeout) {\n                    return false;\n                }\n                try {\n                    const documentData = this.editorsAndDocuments.getDocument(uri);\n                    if (documentData) {\n                        const { document } = documentData;\n                        await this.fireTextDocumentWillSaveEvent({\n                            document, reason, fireEvent,\n                            accept: operation => operations.push(operation)\n                        });\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n                return !didTimeout;\n            });\n        } finally {\n            clearTimeout(didTimeoutHandle);\n        }\n        return operations;\n    }\n\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    protected async fireTextDocumentWillSaveEvent({\n        document, reason, fireEvent, accept\n    }: {\n        document: theia.TextDocument,\n        reason: theia.TextDocumentSaveReason,\n        fireEvent: (e: theia.TextDocumentWillSaveEvent) => any,\n        accept: (operation: SingleEditOperation) => void\n    }): Promise<void> {\n\n        const promises: PromiseLike<TextEdit[] | any>[] = [];\n        fireEvent(Object.freeze({\n            document, reason,\n            waitUntil(p: PromiseLike<TextEdit[] | any>): void {\n                if (Object.isFrozen(promises)) {\n                    throw new Error('waitUntil can not be called async');\n                }\n                promises.push(p);\n            }\n        }));\n        Object.freeze(promises);\n\n        await Promise.all(promises).then(allEdits => allEdits.forEach(edits => {\n            if (Array.isArray(edits)) {\n                edits.forEach(edit => {\n                    if (TextEdit.isTextEdit(edit)) {\n                        accept(Converter.fromTextEdit(edit));\n                    }\n                });\n            }\n        }));\n    }\n    /* eslint-enable  @typescript-eslint/no-explicit-any */\n\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (!data) {\n            throw new Error('unknown document');\n        }\n        data.acceptIsDirty(isDirty);\n        this._onDidChangeDocument.fire({\n            document: data.document,\n            contentChanges: [],\n            reason: undefined,\n        });\n    }\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (!data) {\n            throw new Error('unknown document');\n        }\n        data.acceptIsDirty(isDirty);\n        data.onEvents(e);\n        this._onDidChangeDocument.fire({\n            document: data.document,\n            reason: e.reason,\n            contentChanges: e.changes.map(change => ({\n                range: Converter.toRange(change.range),\n                rangeOffset: change.rangeOffset,\n                rangeLength: change.rangeLength,\n                text: change.text\n            }))\n        });\n    }\n    getAllDocumentData(): DocumentDataExt[] {\n        return this.editorsAndDocuments.allDocuments();\n    }\n\n    getDocumentData(resource: theia.Uri): DocumentDataExt | undefined {\n        if (resource) {\n            return this.editorsAndDocuments.getDocument(resource.toString());\n        }\n\n        return undefined;\n    }\n\n    public getDocument(resource: theia.Uri): theia.TextDocument {\n        const data = this.getDocumentData(resource);\n        if (!data?.document) {\n            throw new Error(`Unable to retrieve document from URI '${resource}'`);\n        }\n        return data.document;\n    }\n\n    /**\n     * Retrieve document and open it in the editor if need.\n     *\n     * @param uri path to the resource\n     * @param options if options exists, resource will be opened in editor, otherwise only document object is returned\n     */\n    async showDocument(uri: URI, options?: theia.TextDocumentShowOptions): Promise<DocumentDataExt | undefined> {\n        // Determine whether the document is already loading\n        const loadingDocument = this.loadingDocuments.get(uri.toString());\n        if (loadingDocument) {\n            // return the promise if document is already loading\n            return loadingDocument;\n        }\n\n        try {\n            // start opening document\n            const document = this.loadDocument(uri, options);\n            // add loader to the map\n            this.loadingDocuments.set(uri.toString(), document);\n            // wait the document being opened\n            await document;\n            // return opened document\n            return document;\n        } catch (error) {\n            return Promise.reject(error);\n        } finally {\n            // remove loader from the map\n            this.loadingDocuments.delete(uri.toString());\n        }\n    }\n\n    async openDocument(uri: URI): Promise<DocumentDataExt | undefined> {\n        const cached = this.editorsAndDocuments.getDocument(uri.toString());\n        if (cached) {\n            return cached;\n        }\n\n        await this.proxy.$tryOpenDocument(uri);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    private async loadDocument(uri: URI, options?: theia.TextDocumentShowOptions): Promise<DocumentDataExt | undefined> {\n        let documentOptions: TextDocumentShowOptions | undefined;\n        if (options) {\n            let selection: Range | undefined;\n            if (options.selection) {\n                const { start, end } = options.selection;\n                selection = {\n                    startLineNumber: start.line + 1,\n                    startColumn: start.character + 1,\n                    endLineNumber: end.line + 1,\n                    endColumn: end.character + 1\n                };\n            }\n            documentOptions = {\n                selection,\n                preserveFocus: options.preserveFocus,\n                preview: options.preview,\n                viewColumn: options.viewColumn\n            };\n        }\n        await this.proxy.$tryShowDocument(uri, documentOptions);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    async createDocumentData(options?: { language?: string; content?: string }): Promise<URI> {\n        return this.proxy.$tryCreateDocument(options).then(data => URI.revive(data));\n    }\n\n    setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n        setWordDefinitionFor(modeId, wordDefinition);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { EditorsAndDocumentsExt, EditorsAndDocumentsDelta, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { TextEditorExt } from './text-editor';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DocumentDataExt } from './document-data';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\nimport { dispose } from '../common/disposable-util';\nimport { URI } from './types-impl';\n\nexport class EditorsAndDocumentsExtImpl implements EditorsAndDocumentsExt {\n    private activeEditorId: string | null = null;\n\n    private readonly _onDidAddDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidRemoveDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<TextEditorExt[]>();\n    private readonly _onDidChangeActiveTextEditor = new Emitter<TextEditorExt | undefined>();\n\n    readonly onDidAddDocuments: Event<DocumentDataExt[]> = this._onDidAddDocuments.event;\n    readonly onDidRemoveDocuments: Event<DocumentDataExt[]> = this._onDidRemoveDocuments.event;\n    readonly onDidChangeVisibleTextEditors: Event<TextEditorExt[]> = this._onDidChangeVisibleTextEditors.event;\n    readonly onDidChangeActiveTextEditor: Event<TextEditorExt | undefined> = this._onDidChangeActiveTextEditor.event;\n\n    private readonly documents = new Map<string, DocumentDataExt>();\n    private readonly editors = new Map<string, TextEditorExt>();\n\n    constructor(private readonly rpc: RPCProtocol) {\n    }\n\n    async $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): Promise<void> {\n        const removedDocuments = new Array<DocumentDataExt>();\n        const addedDocuments = new Array<DocumentDataExt>();\n        const removedEditors = new Array<TextEditorExt>();\n\n        if (delta.removedDocuments) {\n            for (const uriComponent of delta.removedDocuments) {\n                const uri = URI.revive(uriComponent);\n                const id = uri.toString();\n                const data = this.documents.get(id);\n                this.documents.delete(id);\n                if (data) {\n                    removedDocuments.push(data);\n                }\n            }\n        }\n\n        if (delta.addedDocuments) {\n            for (const data of delta.addedDocuments) {\n                const resource = URI.revive(data.uri);\n                ok(!this.documents.has(resource.toString()), `document '${resource}' already exists!`);\n                const documentData = new DocumentDataExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN),\n                    resource,\n                    data.lines,\n                    data.EOL,\n                    data.modeId,\n                    data.versionId,\n                    data.isDirty\n                );\n                this.documents.set(resource.toString(), documentData);\n                addedDocuments.push(documentData);\n            }\n        }\n\n        if (delta.removedEditors) {\n            for (const id of delta.removedEditors) {\n                const editor = this.editors.get(id);\n                this.editors.delete(id);\n                if (editor) {\n                    removedEditors.push(editor);\n                }\n            }\n        }\n\n        if (delta.addedEditors) {\n            for (const data of delta.addedEditors) {\n                const resource = URI.revive(data.documentUri);\n                ok(this.documents.has(resource.toString()), `document '${resource}' doesn't exist`);\n                ok(!this.editors.has(data.id), `editor '${data.id}' already exists!`);\n\n                const documentData = this.documents.get(resource.toString());\n                const editor = new TextEditorExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN),\n                    data.id,\n                    documentData!,\n                    data.selections.map(Converter.toSelection),\n                    data.options,\n                    data.visibleRanges.map(Converter.toRange),\n                    Converter.toViewColumn(data.editorPosition)\n                );\n                this.editors.set(data.id, editor);\n            }\n        }\n\n        // TODO investigate how to get rid of it to align with VS Code extension host code\n        if (this.activeEditorId && delta.removedEditors && delta.removedEditors.indexOf(this.activeEditorId) !== -1 && this.editors.size !== 0) {\n            // to be compatible with VSCode, when active editor is closed onDidChangeActiveTextEditor\n            // should be triggered with undefined before next editor, if any, become active.\n            this.activeEditorId = null;\n            this._onDidChangeActiveTextEditor.fire(undefined);\n        }\n\n        if (delta.newActiveEditor !== undefined) {\n            ok(delta.newActiveEditor === null || this.editors.has(delta.newActiveEditor), `active editor '${delta.newActiveEditor}' does not exist`);\n            this.activeEditorId = delta.newActiveEditor;\n        }\n\n        dispose(removedDocuments);\n        dispose(removedEditors);\n\n        // now that the internal state is complete, fire events\n        if (delta.removedDocuments) {\n            this._onDidRemoveDocuments.fire(removedDocuments);\n        }\n        if (delta.addedDocuments) {\n            this._onDidAddDocuments.fire(addedDocuments);\n        }\n\n        if (delta.removedEditors || delta.addedEditors) {\n            this._onDidChangeVisibleTextEditors.fire(this.allEditors());\n        }\n        if (delta.newActiveEditor !== undefined) {\n            this._onDidChangeActiveTextEditor.fire(this.activeEditor());\n        }\n    }\n\n    allEditors(): TextEditorExt[] {\n        const result = new Array<TextEditorExt>();\n        this.editors.forEach(editor => result.push(editor));\n        return result;\n    }\n\n    activeEditor(): TextEditorExt | undefined {\n        if (!this.activeEditorId) {\n            return undefined;\n        } else {\n            return this.editors.get(this.activeEditorId);\n        }\n    }\n\n    allDocuments(): DocumentDataExt[] {\n        const result = new Array<DocumentDataExt>();\n        this.documents.forEach(data => result.push(data));\n        return result;\n    }\n\n    getDocument(uri: string): DocumentDataExt | undefined {\n        return this.documents.get(uri);\n    }\n\n    getEditor(id: string): TextEditorExt | undefined {\n        return this.editors.get(id);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { EnvMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { QueryParameters } from '../common/env';\nimport { v4 } from 'uuid';\n\nexport abstract class EnvExtImpl {\n    private proxy: EnvMain;\n    private queryParameters: QueryParameters;\n    private lang: string;\n    private applicationName: string;\n    private defaultShell: string;\n    private ui: theia.UIKind;\n    private envMachineId: string;\n    private envSessionId: string;\n    private host: string;\n    private _remoteName: string | undefined;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.ENV_MAIN);\n        this.envSessionId = v4();\n        this.envMachineId = v4();\n        this._remoteName = undefined;\n    }\n\n    getEnvVariable(envVarName: string): Promise<string | undefined> {\n        return this.proxy.$getEnvVariable(envVarName).then(x => {\n            if (x === null) {\n                return undefined;\n            }\n            return x;\n        });\n    }\n\n    getQueryParameter(queryParamName: string): string | string[] | undefined {\n        return this.queryParameters[queryParamName];\n    }\n\n    getQueryParameters(): QueryParameters {\n        return this.queryParameters;\n    }\n\n    setQueryParameters(queryParams: QueryParameters): void {\n        this.queryParameters = queryParams;\n    }\n\n    setApplicationName(applicationName: string): void {\n        this.applicationName = applicationName;\n    }\n\n    setLanguage(lang: string): void {\n        this.lang = lang;\n    }\n\n    setShell(shell: string): void {\n        this.defaultShell = shell;\n    }\n\n    setUIKind(uiKind: theia.UIKind): void {\n        this.ui = uiKind;\n    }\n\n    setAppHost(appHost: string): void {\n        this.host = appHost;\n    }\n\n    getClientOperatingSystem(): Promise<theia.OperatingSystem> {\n        return this.proxy.$getClientOperatingSystem();\n    }\n\n    get appName(): string {\n        return this.applicationName;\n    }\n\n    abstract get appRoot(): string;\n\n    abstract get isNewAppInstall(): boolean;\n\n    get appHost(): string {\n        return this.host;\n    }\n\n    get remoteName(): string | undefined {\n        return this._remoteName;\n    }\n\n    get language(): string {\n        return this.lang;\n    }\n    get machineId(): string {\n        return this.envMachineId;\n    }\n    get sessionId(): string {\n        return this.envSessionId;\n    }\n    get uriScheme(): string {\n        return 'theia';\n    }\n    get shell(): string {\n        return this.defaultShell;\n    }\n    get uiKind(): theia.UIKind {\n        return this.ui;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * **IMPORTANT** this code is running in the plugin host process and should be closed as possible to VS Code counterpart:\n * https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/api/common/extHostFileSystemEventService.ts\n * One should be able to diff them to see differences.\n */\n\n/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/no-shadow */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/tslint/config */\n\nimport { Emitter, WaitUntilEvent, AsyncEmitter, WaitUntilData } from '@theia/core/lib/common/event';\nimport { IRelativePattern, parse } from '@theia/core/lib/common/glob';\nimport { UriComponents } from '@theia/core/shared/vscode-uri';\nimport { Disposable, URI, WorkspaceEdit } from './types-impl';\nimport { EditorsAndDocumentsExtImpl as ExtHostDocumentsAndEditors } from './editors-and-documents';\nimport type * as vscode from '@theia/plugin';\nimport * as typeConverter from './type-converters';\nimport { FileOperation } from '@theia/filesystem/lib/common/files';\nimport { flatten } from '../common/arrays';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport {\n    Plugin, TextEditorsMain as MainThreadTextEditorsShape, PLUGIN_RPC_CONTEXT, FileSystemEvents, ExtHostFileSystemEventServiceShape,\n    WorkspaceFileEditDto, WorkspaceTextEditDto\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\n\ntype Event<T> = vscode.Event<T>;\ntype IExtensionDescription = Plugin;\ntype IWaitUntil = WaitUntilEvent;\n\nclass FileSystemWatcher implements vscode.FileSystemWatcher {\n\n    private readonly _onDidCreate = new Emitter<vscode.Uri>();\n    private readonly _onDidChange = new Emitter<vscode.Uri>();\n    private readonly _onDidDelete = new Emitter<vscode.Uri>();\n    private _disposable: Disposable;\n    private _config: number;\n\n    get ignoreCreateEvents(): boolean {\n        return Boolean(this._config & 0b001);\n    }\n\n    get ignoreChangeEvents(): boolean {\n        return Boolean(this._config & 0b010);\n    }\n\n    get ignoreDeleteEvents(): boolean {\n        return Boolean(this._config & 0b100);\n    }\n\n    constructor(dispatcher: Event<FileSystemEvents>, globPattern: string | IRelativePattern, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean) {\n\n        this._config = 0;\n        if (ignoreCreateEvents) {\n            this._config += 0b001;\n        }\n        if (ignoreChangeEvents) {\n            this._config += 0b010;\n        }\n        if (ignoreDeleteEvents) {\n            this._config += 0b100;\n        }\n\n        const parsedPattern = parse(globPattern);\n\n        const subscription = dispatcher(events => {\n            if (!ignoreCreateEvents) {\n                for (const created of events.created) {\n                    const uri = URI.revive(created);\n                    if (parsedPattern(uri.fsPath)) {\n                        this._onDidCreate.fire(uri);\n                    }\n                }\n            }\n            if (!ignoreChangeEvents) {\n                for (const changed of events.changed) {\n                    const uri = URI.revive(changed);\n                    if (parsedPattern(uri.fsPath)) {\n                        this._onDidChange.fire(uri);\n                    }\n                }\n            }\n            if (!ignoreDeleteEvents) {\n                for (const deleted of events.deleted) {\n                    const uri = URI.revive(deleted);\n                    if (parsedPattern(uri.fsPath)) {\n                        this._onDidDelete.fire(uri);\n                    }\n                }\n            }\n        });\n\n        this._disposable = Disposable.from(this._onDidCreate, this._onDidChange, this._onDidDelete, subscription);\n    }\n\n    dispose() {\n        this._disposable.dispose();\n    }\n\n    get onDidCreate(): Event<vscode.Uri> {\n        return this._onDidCreate.event;\n    }\n\n    get onDidChange(): Event<vscode.Uri> {\n        return this._onDidChange.event;\n    }\n\n    get onDidDelete(): Event<vscode.Uri> {\n        return this._onDidDelete.event;\n    }\n}\n\ninterface IExtensionListener<E> {\n    extension: IExtensionDescription;\n    (e: E): any;\n}\n\nexport class ExtHostFileSystemEventService implements ExtHostFileSystemEventServiceShape {\n\n    private readonly _onFileSystemEvent = new Emitter<FileSystemEvents>();\n\n    private readonly _onDidRenameFile = new Emitter<vscode.FileRenameEvent>();\n    private readonly _onDidCreateFile = new Emitter<vscode.FileCreateEvent>();\n    private readonly _onDidDeleteFile = new Emitter<vscode.FileDeleteEvent>();\n    private readonly _onWillRenameFile = new AsyncEmitter<vscode.FileWillRenameEvent>();\n    private readonly _onWillCreateFile = new AsyncEmitter<vscode.FileWillCreateEvent>();\n    private readonly _onWillDeleteFile = new AsyncEmitter<vscode.FileWillDeleteEvent>();\n\n    readonly onDidRenameFile: Event<vscode.FileRenameEvent> = this._onDidRenameFile.event;\n    readonly onDidCreateFile: Event<vscode.FileCreateEvent> = this._onDidCreateFile.event;\n    readonly onDidDeleteFile: Event<vscode.FileDeleteEvent> = this._onDidDeleteFile.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly _extHostDocumentsAndEditors: ExtHostDocumentsAndEditors,\n        private readonly _mainThreadTextEditors: MainThreadTextEditorsShape = rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN)\n    ) {\n        //\n    }\n\n    // --- file events\n\n    createFileSystemWatcher(globPattern: string | IRelativePattern, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean): vscode.FileSystemWatcher {\n        return new FileSystemWatcher(this._onFileSystemEvent.event, globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n    }\n\n    $onFileEvent(events: FileSystemEvents) {\n        this._onFileSystemEvent.fire(events);\n    }\n\n    // --- file operations\n\n    $onDidRunFileOperation(operation: FileOperation, target: UriComponents, source: UriComponents | undefined): void {\n        switch (operation) {\n            case FileOperation.MOVE:\n                this._onDidRenameFile.fire(Object.freeze({ files: [{ oldUri: URI.revive(source!), newUri: URI.revive(target) }] }));\n                break;\n            case FileOperation.DELETE:\n                this._onDidDeleteFile.fire(Object.freeze({ files: [URI.revive(target)] }));\n                break;\n            case FileOperation.CREATE:\n                this._onDidCreateFile.fire(Object.freeze({ files: [URI.revive(target)] }));\n                break;\n            default:\n            // ignore, dont send\n        }\n    }\n\n    getOnWillRenameFileEvent(extension: IExtensionDescription): Event<vscode.FileWillRenameEvent> {\n        return this._createWillExecuteEvent(extension, this._onWillRenameFile);\n    }\n\n    getOnWillCreateFileEvent(extension: IExtensionDescription): Event<vscode.FileWillCreateEvent> {\n        return this._createWillExecuteEvent(extension, this._onWillCreateFile);\n    }\n\n    getOnWillDeleteFileEvent(extension: IExtensionDescription): Event<vscode.FileWillDeleteEvent> {\n        return this._createWillExecuteEvent(extension, this._onWillDeleteFile);\n    }\n\n    private _createWillExecuteEvent<E extends IWaitUntil>(extension: IExtensionDescription, emitter: AsyncEmitter<E>): Event<E> {\n        return (listener, thisArg, disposables) => {\n            const wrappedListener: IExtensionListener<E> = function wrapped(e: E) { listener.call(thisArg, e); };\n            wrappedListener.extension = extension;\n            return emitter.event(wrappedListener, undefined, disposables);\n        };\n    }\n\n    async $onWillRunFileOperation(operation: FileOperation, target: UriComponents, source: UriComponents | undefined, timeout: number, token: CancellationToken): Promise<any> {\n        switch (operation) {\n            case FileOperation.MOVE:\n                await this._fireWillEvent(this._onWillRenameFile, { files: [{ oldUri: URI.revive(source!), newUri: URI.revive(target) }] }, timeout, token);\n                break;\n            case FileOperation.DELETE:\n                await this._fireWillEvent(this._onWillDeleteFile, { files: [URI.revive(target)] }, timeout, token);\n                break;\n            case FileOperation.CREATE:\n                await this._fireWillEvent(this._onWillCreateFile, { files: [URI.revive(target)] }, timeout, token);\n                break;\n            default:\n            // ignore, dont send\n        }\n    }\n\n    private async _fireWillEvent<E extends IWaitUntil>(emitter: AsyncEmitter<E>, data: WaitUntilData<E>, timeout: number, token: CancellationToken): Promise<any> {\n\n        const edits: WorkspaceEdit[] = [];\n        await emitter.fire(data, token, async (thenable, listener) => {\n            // ignore all results except for WorkspaceEdits. Those are stored in an array.\n            const now = Date.now();\n            const result = await Promise.resolve(thenable);\n            if (result instanceof WorkspaceEdit) {\n                edits.push(result);\n            }\n\n            if (Date.now() - now > timeout) {\n                console.warn('SLOW file-participant', (<IExtensionListener<E>>listener).extension?.model.id);\n            }\n        });\n\n        if (token.isCancellationRequested) {\n            return;\n        }\n\n        if (edits.length > 0) {\n            // flatten all WorkspaceEdits collected via waitUntil-call\n            // and apply them in one go.\n            const allEdits = new Array<Array<WorkspaceFileEditDto | WorkspaceTextEditDto>>();\n            for (const edit of edits) {\n                const { edits } = typeConverter.fromWorkspaceEdit(edit, this._extHostDocumentsAndEditors);\n                allEdits.push(edits);\n            }\n            return this._mainThreadTextEditors.$tryApplyWorkspaceEdit({ edits: flatten(allEdits) });\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * **IMPORTANT** this code is running in the plugin host process and should be closed as possible to VS Code counterpart:\n * https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/api/common/extHostFileSystem.ts\n * One should be able to diff them to see differences.\n */\n\n/* eslint-disable arrow-body-style */\n/* eslint-disable @typescript-eslint/quotes */\n/* eslint-disable @typescript-eslint/tslint/config */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { UriComponents } from '@theia/core/shared/vscode-uri';\nimport { FileChangeType, FileSystemError, URI } from './types-impl';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, FileSystemExt, FileSystemMain, IFileChangeDto } from '../common/plugin-api-rpc';\nimport * as vscode from '@theia/plugin';\nimport * as files from '@theia/filesystem/lib/common/files';\nimport * as typeConverter from './type-converters';\nimport { Schemes as Schemas } from '../common/uri-components';\nimport { State, StateMachine, LinkComputer, Edge } from '../common/link-computer';\nimport { commonPrefixLength } from '@theia/core/lib/common/strings';\nimport { CharCode } from '@theia/core/lib/common/char-code';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { Emitter } from '@theia/core/shared/vscode-languageserver-protocol';\n\ntype IDisposable = vscode.Disposable;\n\nexport class FsLinkProvider {\n\n    private _schemes: string[] = [];\n    private _stateMachine?: StateMachine;\n\n    add(scheme: string): void {\n        this._stateMachine = undefined;\n        this._schemes.push(scheme);\n    }\n\n    delete(scheme: string): void {\n        const idx = this._schemes.indexOf(scheme);\n        if (idx >= 0) {\n            this._schemes.splice(idx, 1);\n            this._stateMachine = undefined;\n        }\n    }\n\n    private _initStateMachine(): void {\n        if (!this._stateMachine) {\n\n            // sort and compute common prefix with previous scheme\n            // then build state transitions based on the data\n            const schemes = this._schemes.sort();\n            const edges: Edge[] = [];\n            let prevScheme: string | undefined;\n            let prevState: State;\n            let lastState = State.LastKnownState;\n            let nextState = State.LastKnownState;\n            for (const scheme of schemes) {\n\n                // skip the common prefix of the prev scheme\n                // and continue with its last state\n                let pos = !prevScheme ? 0 : commonPrefixLength(prevScheme, scheme);\n                if (pos === 0) {\n                    prevState = State.Start;\n                } else {\n                    prevState = nextState;\n                }\n\n                for (; pos < scheme.length; pos++) {\n                    // keep creating new (next) states until the\n                    // end (and the BeforeColon-state) is reached\n                    if (pos + 1 === scheme.length) {\n                        // Save the last state here, because we need to continue for the next scheme\n                        lastState = nextState;\n                        nextState = State.BeforeColon;\n                    } else {\n                        nextState += 1;\n                    }\n                    edges.push([prevState, scheme.toUpperCase().charCodeAt(pos), nextState]);\n                    edges.push([prevState, scheme.toLowerCase().charCodeAt(pos), nextState]);\n                    prevState = nextState;\n                }\n\n                prevScheme = scheme;\n                // Restore the last state\n                nextState = lastState;\n            }\n\n            // all link must match this pattern `<scheme>:/<more>`\n            edges.push([State.BeforeColon, CharCode.Colon, State.AfterColon]);\n            edges.push([State.AfterColon, CharCode.Slash, State.End]);\n\n            this._stateMachine = new StateMachine(edges);\n        }\n    }\n\n    provideDocumentLinks(document: vscode.TextDocument): vscode.ProviderResult<vscode.DocumentLink[]> {\n        this._initStateMachine();\n\n        const result: vscode.DocumentLink[] = [];\n        const links = LinkComputer.computeLinks({\n            getLineContent(lineNumber: number): string {\n                return document.lineAt(lineNumber - 1).text;\n            },\n            getLineCount(): number {\n                return document.lineCount;\n            }\n        }, this._stateMachine);\n\n        for (const link of links) {\n            const docLink = typeConverter.DocumentLink.to(link);\n            if (docLink.target) {\n                result.push(docLink);\n            }\n        }\n        return result;\n    }\n}\n\nclass ConsumerFileSystem implements vscode.FileSystem {\n\n    constructor(private _proxy: FileSystemMain, private _capabilities: Map<string, number>) { }\n\n    stat(uri: vscode.Uri): Promise<vscode.FileStat> {\n        return this._proxy.$stat(uri).catch(ConsumerFileSystem._handleError);\n    }\n    readDirectory(uri: vscode.Uri): Promise<[string, vscode.FileType][]> {\n        return this._proxy.$readdir(uri).catch(ConsumerFileSystem._handleError);\n    }\n    createDirectory(uri: vscode.Uri): Promise<void> {\n        return this._proxy.$mkdir(uri).catch(ConsumerFileSystem._handleError);\n    }\n    readFile(uri: vscode.Uri): Promise<Uint8Array> {\n        return this._proxy.$readFile(uri).then(buff => buff.buffer).catch(ConsumerFileSystem._handleError);\n    }\n    writeFile(uri: vscode.Uri, content: Uint8Array): Promise<void> {\n        return this._proxy.$writeFile(uri, BinaryBuffer.wrap(content)).catch(ConsumerFileSystem._handleError);\n    }\n    delete(uri: vscode.Uri, options?: { recursive?: boolean; useTrash?: boolean; }): Promise<void> {\n        return this._proxy.$delete(uri, { ...{ recursive: false, useTrash: false }, ...options }).catch(ConsumerFileSystem._handleError);\n    }\n    rename(oldUri: vscode.Uri, newUri: vscode.Uri, options?: { overwrite?: boolean; }): Promise<void> {\n        return this._proxy.$rename(oldUri, newUri, { ...{ overwrite: false }, ...options }).catch(ConsumerFileSystem._handleError);\n    }\n    copy(source: vscode.Uri, destination: vscode.Uri, options?: { overwrite?: boolean }): Promise<void> {\n        return this._proxy.$copy(source, destination, { ...{ overwrite: false }, ...options }).catch(ConsumerFileSystem._handleError);\n    }\n    isWritableFileSystem(scheme: string): boolean | undefined {\n        const capabilities = this._capabilities.get(scheme);\n        if (typeof capabilities === 'number') {\n            return (capabilities & files.FileSystemProviderCapabilities.Readonly) === 0;\n        }\n        return undefined;\n    }\n    private static _handleError(err: any): never {\n        // generic error\n        if (!(err instanceof Error)) {\n            throw new FileSystemError(String(err));\n        }\n\n        // no provider (unknown scheme) error\n        if (err.name === 'ENOPRO') {\n            throw FileSystemError.Unavailable(err.message);\n        }\n\n        // file system error\n        switch (err.name) {\n            case files.FileSystemProviderErrorCode.FileExists: throw FileSystemError.FileExists(err.message);\n            case files.FileSystemProviderErrorCode.FileNotFound: throw FileSystemError.FileNotFound(err.message);\n            case files.FileSystemProviderErrorCode.FileNotADirectory: throw FileSystemError.FileNotADirectory(err.message);\n            case files.FileSystemProviderErrorCode.FileIsADirectory: throw FileSystemError.FileIsADirectory(err.message);\n            case files.FileSystemProviderErrorCode.NoPermissions: throw FileSystemError.NoPermissions(err.message);\n            case files.FileSystemProviderErrorCode.Unavailable: throw FileSystemError.Unavailable(err.message);\n\n            default: throw new FileSystemError(err.message, err.name as files.FileSystemProviderErrorCode);\n        }\n    }\n}\n\nexport class FileSystemExtImpl implements FileSystemExt {\n\n    private readonly _proxy: FileSystemMain;\n    private readonly _linkProvider = new FsLinkProvider();\n    private readonly _fsProvider = new Map<number, vscode.FileSystemProvider>();\n    private readonly _capabilities = new Map<string, number>();\n    private readonly _usedSchemes = new Set<string>();\n    private readonly _watches = new Map<number, IDisposable>();\n\n    private readonly onWillRegisterFileSystemProviderEmitter = new Emitter<FsLinkProvider>();\n    readonly onWillRegisterFileSystemProvider = this.onWillRegisterFileSystemProviderEmitter.event;\n\n    private _handlePool: number = 0;\n\n    readonly fileSystem: vscode.FileSystem;\n\n    constructor(rpc: RPCProtocol) {\n        this._proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.FILE_SYSTEM_MAIN);\n        this.fileSystem = new ConsumerFileSystem(this._proxy, this._capabilities);\n\n        // register used schemes\n        Object.keys(Schemas).forEach(scheme => this._usedSchemes.add(scheme));\n    }\n\n    dispose(): void {\n        this.onWillRegisterFileSystemProviderEmitter.dispose();\n    }\n\n    registerFileSystemProvider(scheme: string, provider: vscode.FileSystemProvider, options: { isCaseSensitive?: boolean, isReadonly?: boolean } = {}) {\n\n        if (this._usedSchemes.has(scheme)) {\n            throw new Error(`a provider for the scheme '${scheme}' is already registered`);\n        }\n\n        this.onWillRegisterFileSystemProviderEmitter.fire(this._linkProvider);\n\n        const handle = this._handlePool++;\n        this._linkProvider.add(scheme);\n        this._usedSchemes.add(scheme);\n        this._fsProvider.set(handle, provider);\n\n        let capabilities = files.FileSystemProviderCapabilities.FileReadWrite;\n        if (options.isCaseSensitive) {\n            capabilities += files.FileSystemProviderCapabilities.PathCaseSensitive;\n        }\n        if (options.isReadonly) {\n            capabilities += files.FileSystemProviderCapabilities.Readonly;\n        }\n        if (typeof provider.copy === 'function') {\n            capabilities += files.FileSystemProviderCapabilities.FileFolderCopy;\n        }\n        if (typeof provider.open === 'function' && typeof provider.close === 'function'\n            && typeof provider.read === 'function' && typeof provider.write === 'function'\n        ) {\n            capabilities += files.FileSystemProviderCapabilities.FileOpenReadWriteClose;\n        }\n\n        this._proxy.$registerFileSystemProvider(handle, scheme, capabilities);\n\n        const subscription = provider.onDidChangeFile(event => {\n            const mapped: IFileChangeDto[] = [];\n            for (const e of event) {\n                const { uri: resource, type } = e;\n                if (resource.scheme !== scheme) {\n                    // dropping events for wrong scheme\n                    continue;\n                }\n                let newType: files.FileChangeType | undefined;\n                switch (type) {\n                    case FileChangeType.Changed:\n                        newType = files.FileChangeType.UPDATED;\n                        break;\n                    case FileChangeType.Created:\n                        newType = files.FileChangeType.ADDED;\n                        break;\n                    case FileChangeType.Deleted:\n                        newType = files.FileChangeType.DELETED;\n                        break;\n                    default:\n                        throw new Error('Unknown FileChangeType');\n                }\n                mapped.push({ resource, type: newType });\n            }\n            this._proxy.$onFileSystemChange(handle, mapped);\n        });\n\n        return {\n            dispose: () => {\n                subscription.dispose();\n                this._linkProvider.delete(scheme);\n                this._usedSchemes.delete(scheme);\n                this._fsProvider.delete(handle);\n                this._proxy.$unregisterProvider(handle);\n            }\n        };\n    }\n\n    private static _asIStat(stat: vscode.FileStat): files.Stat {\n        const { type, ctime, mtime, size, permissions } = stat;\n        return { type, ctime, mtime, size, permissions };\n    }\n\n    $acceptProviderInfos(scheme: string, capabilities?: files.FileSystemProviderCapabilities): void {\n        if (typeof capabilities === 'number') {\n            this._capabilities.set(scheme, capabilities);\n        } else {\n            this._capabilities.delete(scheme);\n        }\n    }\n\n    $stat(handle: number, resource: UriComponents): Promise<files.Stat> {\n        return Promise.resolve(this._getFsProvider(handle).stat(URI.revive(resource))).then(FileSystemExtImpl._asIStat);\n    }\n\n    $readdir(handle: number, resource: UriComponents): Promise<[string, files.FileType][]> {\n        return Promise.resolve(this._getFsProvider(handle).readDirectory(URI.revive(resource)));\n    }\n\n    $readFile(handle: number, resource: UriComponents): Promise<BinaryBuffer> {\n        return Promise.resolve(this._getFsProvider(handle).readFile(URI.revive(resource))).then(data => BinaryBuffer.wrap(data));\n    }\n\n    $writeFile(handle: number, resource: UriComponents, content: BinaryBuffer, opts: files.FileWriteOptions): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).writeFile(URI.revive(resource), content.buffer, opts));\n    }\n\n    $delete(handle: number, resource: UriComponents, opts: files.FileDeleteOptions): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).delete(URI.revive(resource), opts));\n    }\n\n    $rename(handle: number, oldUri: UriComponents, newUri: UriComponents, opts: files.FileOverwriteOptions): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).rename(URI.revive(oldUri), URI.revive(newUri), opts));\n    }\n\n    $copy(handle: number, oldUri: UriComponents, newUri: UriComponents, opts: files.FileOverwriteOptions): Promise<void> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.copy) {\n            throw new Error('FileSystemProvider does not implement \"copy\"');\n        }\n        return Promise.resolve(provider.copy(URI.revive(oldUri), URI.revive(newUri), opts));\n    }\n\n    $mkdir(handle: number, resource: UriComponents): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).createDirectory(URI.revive(resource)));\n    }\n\n    $watch(handle: number, session: number, resource: UriComponents, opts: files.WatchOptions): void {\n        const subscription = this._getFsProvider(handle).watch(URI.revive(resource), opts);\n        this._watches.set(session, subscription);\n    }\n\n    $unwatch(_handle: number, session: number): void {\n        const subscription = this._watches.get(session);\n        if (subscription) {\n            subscription.dispose();\n            this._watches.delete(session);\n        }\n    }\n\n    $open(handle: number, resource: UriComponents, opts: files.FileOpenOptions): Promise<number> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.open) {\n            throw new Error('FileSystemProvider does not implement \"open\"');\n        }\n        return Promise.resolve(provider.open(URI.revive(resource), opts));\n    }\n\n    $close(handle: number, fd: number): Promise<void> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.close) {\n            throw new Error('FileSystemProvider does not implement \"close\"');\n        }\n        return Promise.resolve(provider.close(fd));\n    }\n\n    $read(handle: number, fd: number, pos: number, length: number): Promise<BinaryBuffer> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.read) {\n            throw new Error('FileSystemProvider does not implement \"read\"');\n        }\n        const data = BinaryBuffer.alloc(length);\n        return Promise.resolve(provider.read(fd, pos, data.buffer, 0, length)).then(read => {\n            return data.slice(0, read); // don't send zeros\n        });\n    }\n\n    $write(handle: number, fd: number, pos: number, data: BinaryBuffer): Promise<number> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.write) {\n            throw new Error('FileSystemProvider does not implement \"write\"');\n        }\n        return Promise.resolve(provider.write(fd, pos, data.buffer, 0, data.byteLength));\n    }\n\n    private _getFsProvider(handle: number): vscode.FileSystemProvider {\n        const provider = this._fsProvider.get(handle);\n        if (!provider) {\n            const err = new Error();\n            err.name = 'ENOPRO';\n            err.message = `no provider`;\n            throw err;\n        }\n        return provider;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { Range as R, Position as P, Location as L } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { URI as TheiaURI } from '@theia/core/lib/common/uri';\nimport { cloneAndChange } from '../common/objects';\nimport { Position, Range, Location, CallHierarchyItem, TypeHierarchyItem, URI, TextDocumentShowOptions } from './types-impl';\nimport {\n    fromPosition, fromRange, fromLocation,\n    isModelLocation, toLocation,\n    isModelCallHierarchyItem, fromCallHierarchyItem, toCallHierarchyItem,\n    isModelTypeHierarchyItem, fromTypeHierarchyItem, toTypeHierarchyItem,\n    isModelCallHierarchyIncomingCall, toCallHierarchyIncomingCall,\n    isModelCallHierarchyOutgoingCall, toCallHierarchyOutgoingCall, fromTextDocumentShowOptions\n} from './type-converters';\n\n// Here is a mapping of VSCode commands to monaco commands with their conversions\nexport namespace KnownCommands {\n\n    /**\n     * Commands that you want to apply custom conversions to rather than pass through the automatic args converter.\n     * Would be useful in the case where theia provides some command and you need to provide custom conversions\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const mappings: { [id: string]: [string, (args: any[] | undefined) => any[] | undefined, ((results: any[] | undefined) => any[] | undefined)?] } = {};\n    mappings['editor.action.showReferences'] = ['textEditor.commands.showReferences', createConversionFunction(\n        (uri: URI) => uri.toString(),\n        fromPositionToP,\n        toArrayConversion(fromLocationToL)),\n        createConversionFunction()];\n\n    /**\n     * Mapping of all editor.action commands to their conversion function.\n     * executeCommand<T> inside of the plugin command registry will automatically convert\n     * incoming arguments from vscode api types to monaco types\n     */\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const CONVERT_VSCODE_TO_MONACO = (args: any[] | undefined) => {\n        if (!args) {\n            return args;\n        }\n        const argStack: ConversionFunction[] = [];\n        args.forEach(_ => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            argStack.push((arg: any) => vscodeToMonacoArgsConverter(arg));\n        });\n        if (args) {\n            return createConversionFunction(...argStack)(args);\n        }\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const identity = (args: any[]) => args;\n\n    mappings['editor.action.select.all'] = ['editor.action.select.all', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.toggleHighContrast'] = ['editor.action.toggleHighContrast', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveCarretLeftAction'] = ['editor.action.moveCarretLeftAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveCarretRightAction'] = ['editor.action.moveCarretRightAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transposeLetters'] = ['editor.action.transposeLetters', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.clipboardCopyWithSyntaxHighlightingAction'] = ['editor.action.clipboardCopyWithSyntaxHighlightingAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.commentLine'] = ['editor.action.commentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCommentLine'] = ['editor.action.addCommentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.removeCommentLine'] = ['editor.action.removeCommentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.blockComment'] = ['editor.action.blockComment', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showContextMenu'] = ['editor.action.showContextMenu', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUndo'] = ['cursorUndo', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfold'] = ['editor.unfold', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldRecursively'] = ['editor.unfoldRecursively', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.fold'] = ['editor.fold', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldRecursively'] = ['editor.foldRecursively', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAll'] = ['editor.foldAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldAll'] = ['editor.unfoldAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAllBlockComments'] = ['editor.foldAllBlockComments', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAllMarkerRegions'] = ['editor.foldAllMarkerRegions', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldAllMarkerRegions'] = ['editor.unfoldAllMarkerRegions', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel1'] = ['editor.foldLevel1', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel2'] = ['editor.foldLevel2', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel3'] = ['editor.foldLevel3', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel4'] = ['editor.foldLevel4', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel5'] = ['editor.foldLevel5', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel6'] = ['editor.foldLevel6', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel7'] = ['editor.foldLevel7', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomIn'] = ['editor.action.fontZoomIn', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomOut'] = ['editor.action.fontZoomOut', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomReset'] = ['editor.action.fontZoomReset', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.formatDocument'] = ['editor.action.formatDocument', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.formatSelection'] = ['editor.action.formatSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.copyLinesUpAction'] = ['editor.action.copyLinesUpAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.copyLinesDownAction'] = ['editor.action.copyLinesDownAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveLinesUpAction'] = ['editor.action.moveLinesUpAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveLinesDownAction'] = ['editor.action.moveLinesDownAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sortLinesAscending'] = ['editor.action.sortLinesAscending', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sortLinesDescending'] = ['editor.action.sortLinesDescending', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.trimTrailingWhitespace'] = ['editor.action.trimTrailingWhitespace', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.deleteLines'] = ['editor.action.deleteLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.indentLines'] = ['editor.action.indentLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.outdentLines'] = ['editor.action.outdentLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertLineBefore'] = ['editor.action.insertLineBefore', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertLineAfter'] = ['editor.action.insertLineAfter', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteAllLeft'] = ['deleteAllLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteAllRight'] = ['deleteAllRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.joinLines'] = ['editor.action.joinLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transpose'] = ['editor.action.transpose', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToUppercase'] = ['editor.action.transformToUppercase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToLowercase'] = ['editor.action.transformToLowercase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToTitlecase'] = ['editor.action.transformToTitlecase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.smartSelect.expand'] = ['editor.action.smartSelect.expand', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.smartSelect.shrink'] = ['editor.action.smartSelect.shrink', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.forceRetokenize'] = ['editor.action.forceRetokenize', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.toggleTabFocusMode'] = ['editor.action.toggleTabFocusMode', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.gotoLine'] = ['editor.action.gotoLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.quickOutline'] = ['editor.action.quickOutline', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inPlaceReplace.up'] = ['editor.action.inPlaceReplace.up', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inPlaceReplace.down'] = ['editor.action.inPlaceReplace.down', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.diffReview.next'] = ['editor.action.diffReview.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.diffReview.prev'] = ['editor.action.diffReview.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectToBracket'] = ['editor.action.selectToBracket', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.jumpToBracket'] = ['editor.action.jumpToBracket', CONVERT_VSCODE_TO_MONACO];\n    mappings['actions.findWithSelection'] = ['actions.findWithSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.nextMatchFindAction'] = ['editor.action.nextMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.previousMatchFindAction'] = ['editor.action.previousMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.nextSelectionMatchFindAction'] = ['editor.action.nextSelectionMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.previousSelectionMatchFindAction'] = ['editor.action.previousSelectionMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.openLink'] = ['editor.action.openLink', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.quickFix'] = ['editor.action.quickFix', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.refactor'] = ['editor.action.refactor', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sourceAction'] = ['editor.action.sourceAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.organizeImports'] = ['editor.action.organizeImports', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.autoFix'] = ['editor.action.autoFix', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fixAll'] = ['editor.action.fixAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.rename'] = ['editor.action.rename', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorAbove'] = ['editor.action.insertCursorAbove', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorBelow'] = ['editor.action.insertCursorBelow', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorAtEndOfEachLineSelected'] = ['editor.action.insertCursorAtEndOfEachLineSelected', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addSelectionToNextFindMatch'] = ['editor.action.addSelectionToNextFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addSelectionToPreviousFindMatch'] = ['editor.action.addSelectionToPreviousFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveSelectionToNextFindMatch'] = ['editor.action.moveSelectionToNextFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveSelectionToPreviousFindMatch'] = ['editor.action.moveSelectionToPreviousFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectHighlights'] = ['editor.action.selectHighlights', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.changeAll'] = ['editor.action.changeAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCursorsToBottom'] = ['editor.action.addCursorsToBottom', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCursorsToTop'] = ['editor.action.addCursorsToTop', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.triggerParameterHints'] = ['editor.action.triggerParameterHints', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.next'] = ['editor.action.wordHighlight.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.prev'] = ['editor.action.wordHighlight.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.trigger'] = ['editor.action.wordHighlight.trigger', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showAccessibilityHelp'] = ['editor.action.showAccessibilityHelp', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inspectTokens'] = ['editor.action.inspectTokens', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.next'] = ['editor.action.marker.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.prev'] = ['editor.action.marker.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.nextInFiles'] = ['editor.action.marker.nextInFiles', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.prevInFiles'] = ['editor.action.marker.prevInFiles', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showHover'] = ['editor.action.showHover', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDefinition'] = ['editor.action.revealDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDefinitionAside'] = ['editor.action.revealDefinitionAside', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekDefinition'] = ['editor.action.peekDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDeclaration'] = ['editor.action.revealDeclaration', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekDeclaration'] = ['editor.action.peekDeclaration', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.goToImplementation'] = ['editor.action.goToImplementation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekImplementation'] = ['editor.action.peekImplementation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.goToTypeDefinition'] = ['editor.action.goToTypeDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekTypeDefinition'] = ['editor.action.peekTypeDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.referenceSearch.trigger'] = ['editor.action.referenceSearch.trigger', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.triggerSuggest'] = ['editor.action.triggerSuggest', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeReferenceSearchEditor'] = ['closeReferenceSearchEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['cancelSelection'] = ['cancelSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorBottom'] = ['cursorBottom', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorBottomSelect'] = ['cursorBottomSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorDown'] = ['cursorDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorDownSelect'] = ['cursorDownSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorEnd'] = ['cursorEnd', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorEndSelect'] = ['cursorEndSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorHome'] = ['cursorHome', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorHomeSelect'] = ['cursorHomeSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorLeft'] = ['cursorLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorLeftSelect'] = ['cursorLeftSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageDown'] = ['cursorPageDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageDownSelect'] = ['cursorPageDownSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageUp'] = ['cursorPageUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageUpSelect'] = ['cursorPageUpSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorRight'] = ['cursorRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorRightSelect'] = ['cursorRightSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorTop'] = ['cursorTop', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorTopSelect'] = ['cursorTopSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUp'] = ['cursorUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUpSelect'] = ['cursorUpSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteLeft'] = ['deleteLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteRight'] = ['deleteRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectAll'] = ['editor.action.selectAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['expandLineSelection'] = ['expandLineSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['outdent'] = ['outdent', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollLineDown'] = ['scrollLineDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollLineUp'] = ['scrollLineUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollPageDown'] = ['scrollPageDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollPageUp'] = ['scrollPageUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['tab'] = ['tab', CONVERT_VSCODE_TO_MONACO];\n    mappings['removeSecondaryCursors'] = ['removeSecondaryCursors', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordRight'] = ['cursorWordEndRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordEndRight'] = ['cursorWordEndRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordEndRightSelect'] = ['cursorWordEndRightSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordLeft'] = ['cursorWordStartLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordStartLeft'] = ['cursorWordStartLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordStartLeftSelect'] = ['cursorWordStartLeftSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteWordLeft'] = ['deleteWordLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteWordRight'] = ['deleteWordRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.cancelOperation'] = ['editor.cancelOperation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.gotoNextSymbolFromResult'] = ['editor.gotoNextSymbolFromResult', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.gotoNextSymbolFromResult.cancel'] = ['editor.gotoNextSymbolFromResult.cancel', CONVERT_VSCODE_TO_MONACO];\n    mappings['openReferenceToSide'] = ['openReferenceToSide', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleExplainMode'] = ['toggleExplainMode', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeFindWidget'] = ['closeFindWidget', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.replaceAll'] = ['editor.action.replaceAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.replaceOne'] = ['editor.action.replaceOne', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectAllMatches'] = ['editor.action.selectAllMatches', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindCaseSensitive'] = ['toggleFindCaseSensitive', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindInSelection'] = ['toggleFindInSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindRegex'] = ['toggleFindRegex', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindWholeWord'] = ['toggleFindWholeWord', CONVERT_VSCODE_TO_MONACO];\n    mappings['jumpToNextSnippetPlaceholder'] = ['jumpToNextSnippetPlaceholder', CONVERT_VSCODE_TO_MONACO];\n    mappings['jumpToPrevSnippetPlaceholder'] = ['jumpToPrevSnippetPlaceholder', CONVERT_VSCODE_TO_MONACO];\n    mappings['leaveEditorMessage'] = ['leaveEditorMessage', CONVERT_VSCODE_TO_MONACO];\n    mappings['leaveSnippet'] = ['leaveSnippet', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeMarkersNavigation'] = ['closeMarkersNavigation', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToNextReferenceFromEmbeddedEditor'] = ['goToNextReferenceFromEmbeddedEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToPreviousReferenceFromEmbeddedEditor'] = ['goToPreviousReferenceFromEmbeddedEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeParameterHints'] = ['closeParameterHints', CONVERT_VSCODE_TO_MONACO];\n    mappings['showNextParameterHint'] = ['showNextParameterHint', CONVERT_VSCODE_TO_MONACO];\n    mappings['showPrevParameterHint'] = ['showPrevParameterHint', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptSelectedSuggestion'] = ['acceptSelectedSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptSelectedSuggestionOnEnter'] = ['acceptSelectedSuggestionOnEnter', CONVERT_VSCODE_TO_MONACO];\n    mappings['hideSuggestWidget'] = ['hideSuggestWidget', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertBestCompletion'] = ['insertBestCompletion', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertNextSuggestion'] = ['insertNextSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertPrevSuggestion'] = ['insertPrevSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectNextPageSuggestion'] = ['selectNextPageSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectNextSuggestion'] = ['selectNextSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectPrevPageSuggestion'] = ['selectPrevPageSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectPrevSuggestion'] = ['selectPrevSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleSuggestionDetails'] = ['toggleSuggestionDetails', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleSuggestionFocus'] = ['toggleSuggestionFocus', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptRenameInput'] = ['acceptRenameInput', CONVERT_VSCODE_TO_MONACO];\n    mappings['cancelRenameInput'] = ['cancelRenameInput', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeAccessibilityHelp'] = ['closeAccessibilityHelp', CONVERT_VSCODE_TO_MONACO];\n    mappings['history.showNext'] = ['history.showNext', CONVERT_VSCODE_TO_MONACO];\n    mappings['history.showPrevious'] = ['history.showPrevious', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeReferenceSearch'] = ['closeReferenceSearch', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToNextReference'] = ['goToNextReference', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToPreviousReference'] = ['goToPreviousReference', CONVERT_VSCODE_TO_MONACO];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const CONVERT_MONACO_TO_VSCODE = (args: any | undefined) => {\n        if (!args) {\n            return args;\n        }\n        if (!Array.isArray(args)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return monacoToVscodeArgsConverter(args);\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const argsArray: any[] = args;\n        const argStack: ConversionFunction[] = [];\n        argsArray.forEach(_ => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            argStack.push((arg: any) => monacoToVscodeArgsConverter(arg));\n        });\n        if (argsArray) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return createConversionFunction(...argStack)(argsArray);\n        }\n    };\n\n    // vscode-'executeXXX'-like commands\n    mappings['vscode.executeReferenceProvider'] = ['vscode.executeReferenceProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeImplementationProvider'] = ['vscode.executeImplementationProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeDefinitionProvider'] = ['vscode.executeDefinitionProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeDeclarationProvider'] = ['vscode.executeDeclarationProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeTypeDefinitionProvider'] = ['vscode.executeTypeDefinitionProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeHoverProvider'] = ['vscode.executeHoverProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeDocumentHighlights'] = ['vscode.executeDocumentHighlights', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeFormatDocumentProvider'] = ['vscode.executeFormatDocumentProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeFormatRangeProvider'] = ['vscode.executeFormatRangeProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeFormatOnTypeProvider'] = ['vscode.executeFormatOnTypeProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.prepareCallHierarchy'] = ['vscode.prepareCallHierarchy', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideIncomingCalls'] = ['vscode.provideIncomingCalls', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideOutgoingCalls'] = ['vscode.provideOutgoingCalls', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.prepareTypeHierarchy'] = ['vscode.prepareTypeHierarchy', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideSupertypes'] = ['vscode.provideSupertypes', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideSubtypes'] = ['vscode.provideSubtypes', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n\n    mappings['vscode.open'] = ['vscode.open', CONVERT_VSCODE_TO_MONACO];\n    mappings['vscode.diff'] = ['vscode.diff', CONVERT_VSCODE_TO_MONACO];\n\n    // terminal commands\n    mappings['workbench.action.terminal.new'] = ['terminal:new', identity];\n    mappings['workbench.action.terminal.newWithProfile'] = ['terminal:new:profile', identity];\n    mappings['workbench.action.terminal.selectDefaultShell'] = ['terminal:profile:default', identity];\n    mappings['workbench.action.terminal.newInActiveWorkspace'] = ['terminal:new:active:workspace', identity];\n    mappings['workbench.action.terminal.clear'] = ['terminal:clear', identity];\n    mappings['openInTerminal'] = ['terminal:context', createConversionFunction((uri: URI) => new TheiaURI(uri))];\n    mappings['workbench.action.terminal.split'] = ['terminal:split', identity];\n    mappings['workbench.action.terminal.focusFind'] = ['terminal:find', identity];\n    mappings['workbench.action.terminal.hideFind'] = ['terminal:find:cancel', identity];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function map<T>(id: string, args: any[] | undefined, toDo: (mappedId: string, mappedArgs: any[] | undefined, mappedResult: ConversionFunction | undefined) => T): T {\n        if (mappings[id]) {\n            return toDo(mappings[id][0], mappings[id][1](args), mappings[id][2] ? (result => mappings[id][2]!(result)) : undefined);\n        } else {\n            return toDo(id, args, undefined);\n        }\n    }\n\n    export function mapped(id: string): boolean {\n        return !!mappings[id];\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export type ConversionFunction = ((parameter: any) => any) | undefined;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    function createConversionFunction(...conversions: ConversionFunction[]): (args: any[] | undefined) => any[] | undefined {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return function (args: any[] | undefined): any[] | undefined {\n            if (!args) {\n                return args;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return args.map(function (arg: any, index: number): any {\n                if (index < conversions.length) {\n                    const conversion = conversions[index];\n                    if (conversion) {\n                        return conversion(arg);\n                    }\n                }\n                return arg;\n            });\n        };\n    }\n\n    function fromPositionToP(p: theia.Position): P {\n        return P.create(p.line, p.character);\n    }\n\n    function fromRangeToR(r: theia.Range): R {\n        return R.create(fromPositionToP(r.start), fromPositionToP(r.end));\n    }\n\n    function fromLocationToL(l: theia.Location): L {\n        return L.create(l.uri.toString(), fromRangeToR(l.range));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/tslint/config\n    function vscodeToMonacoArgsConverter(args: any[]) {\n        // tslint:disable-next-line:typedef\n        return cloneAndChange(args, function (value) {\n            if (CallHierarchyItem.isCallHierarchyItem(value)) {\n                return fromCallHierarchyItem(value);\n            }\n            if (TypeHierarchyItem.isTypeHierarchyItem(value)) {\n                return fromTypeHierarchyItem(value);\n            }\n            if (TextDocumentShowOptions.isTextDocumentShowOptions(value)) {\n                return fromTextDocumentShowOptions(value);\n            }\n            if (Position.isPosition(value)) {\n                return fromPosition(value);\n            }\n            if (Range.isRange(value)) {\n                return fromRange(value);\n            }\n            if (Location.isLocation(value)) {\n                return fromLocation(value);\n            }\n            if (!Array.isArray(value)) {\n                return value;\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/tslint/config\n    function monacoToVscodeArgsConverter(args: any[]) {\n        // tslint:disable-next-line:typedef\n        return cloneAndChange(args, function (value) {\n            if (isModelCallHierarchyItem(value)) {\n                return toCallHierarchyItem(value);\n            }\n            if (isModelTypeHierarchyItem(value)) {\n                return toTypeHierarchyItem(value);\n            }\n            if (isModelCallHierarchyIncomingCall(value)) {\n                return toCallHierarchyIncomingCall(value);\n            }\n            if (isModelCallHierarchyOutgoingCall(value)) {\n                return toCallHierarchyOutgoingCall(value);\n            }\n            if (isModelLocation(value)) {\n                return toLocation(value);\n            }\n            if (!Array.isArray(value)) {\n                return value;\n            }\n\n        });\n    }\n}\n\nfunction toArrayConversion<T, U>(f: (a: T) => U): (a: T[]) => U[] {\n    // tslint:disable-next-line:typedef\n    return function (a: T[]) {\n        return a.map(f);\n    };\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { ResourceLabelFormatter } from '@theia/plugin';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { LabelServiceExt, LabelServiceMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\n\nexport class LabelServiceExtImpl implements LabelServiceExt {\n    private handle: number = 0;\n    private proxy: LabelServiceMain;\n    constructor(readonly rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LABEL_SERVICE_MAIN);\n    }\n\n    $registerResourceLabelFormatter(formatter: ResourceLabelFormatter): Disposable {\n        const handle = this.handle++;\n        this.proxy.$registerResourceLabelFormatter(handle, formatter);\n        return Disposable.create(() => {\n            this.proxy.$unregisterResourceLabelFormatter(handle);\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { SerializedIndentationRule, SerializedOnEnterRule, SerializedRegExp } from '../common';\n\nexport function serializeEnterRules(rules?: theia.OnEnterRule[]): SerializedOnEnterRule[] | undefined {\n    if (typeof rules === 'undefined' || rules === null) {\n        return undefined;\n    }\n\n    return rules.map(r =>\n    ({\n        beforeText: serializeRegExp(r.beforeText),\n        afterText: serializeRegExp(r.afterText),\n        previousLineText: serializeRegExp(r.previousLineText),\n        action: r.action,\n    } as SerializedOnEnterRule));\n}\n\nexport function serializeRegExp(regexp?: RegExp): SerializedRegExp | undefined {\n    if (typeof regexp === 'undefined' || regexp === null) {\n        return undefined;\n    }\n\n    return {\n        pattern: regexp.source,\n        flags: (regexp.global ? 'g' : '') + (regexp.ignoreCase ? 'i' : '') + (regexp.multiline ? 'm' : '')\n    };\n}\n\nexport function serializeIndentation(indentationRules?: theia.IndentationRule): SerializedIndentationRule | undefined {\n    if (typeof indentationRules === 'undefined' || indentationRules === null) {\n        return undefined;\n    }\n\n    return {\n        increaseIndentPattern: serializeRegExp(indentationRules.increaseIndentPattern),\n        decreaseIndentPattern: serializeRegExp(indentationRules.decreaseIndentPattern),\n        indentNextLinePattern: serializeRegExp(indentationRules.indentNextLinePattern),\n        unIndentedLinePattern: serializeRegExp(indentationRules.unIndentedLinePattern)\n    };\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport {\n    LanguagesExt,\n    PLUGIN_RPC_CONTEXT,\n    LanguagesMain,\n    SerializedLanguageConfiguration,\n    Position,\n    Selection,\n    RawColorInfo,\n    WorkspaceEditDto,\n    PluginInfo,\n    Plugin,\n    InlayHintsDto,\n    InlayHintDto,\n    IdentifiableInlineCompletions,\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from './documents';\nimport { PluginModel } from '../common/plugin-protocol';\nimport { Disposable, URI, LanguageStatusSeverity } from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport {\n    CodeActionProviderDocumentation,\n    CompletionContext,\n    CompletionResultDto,\n    Completion,\n    SerializedDocumentFilter,\n    SignatureHelp,\n    Hover,\n    DocumentHighlight,\n    Range,\n    TextEdit,\n    FormattingOptions,\n    Definition,\n    DocumentLink,\n    CodeLensSymbol,\n    DocumentSymbol,\n    ReferenceContext,\n    Location,\n    ColorPresentation,\n    RenameLocation,\n    SignatureHelpContext,\n    CodeActionContext,\n    CodeAction,\n    FoldingRange,\n    SelectionRange,\n    ChainedCacheId,\n    CallHierarchyItem,\n    CallHierarchyIncomingCall,\n    CallHierarchyOutgoingCall,\n    LinkedEditingRanges,\n    EvaluatableExpression,\n    InlineValue,\n    InlineValueContext,\n    TypeHierarchyItem,\n    InlineCompletionContext,\n    DocumentDropEdit,\n    DataTransferDTO\n} from '../common/plugin-api-rpc-model';\nimport { CompletionAdapter } from './languages/completion';\nimport { Diagnostics } from './languages/diagnostics';\nimport { SignatureHelpAdapter } from './languages/signature';\nimport { HoverAdapter } from './languages/hover';\nimport { EvaluatableExpressionAdapter } from './languages/evaluatable-expression';\nimport { InlineValuesAdapter } from './languages/inline-values';\nimport { DocumentHighlightAdapter } from './languages/document-highlight';\nimport { DocumentFormattingAdapter } from './languages/document-formatting';\nimport { RangeFormattingAdapter } from './languages/range-formatting';\nimport { OnTypeFormattingAdapter } from './languages/on-type-formatting';\nimport { DefinitionAdapter } from './languages/definition';\nimport { ImplementationAdapter } from './languages/implementation';\nimport { TypeDefinitionAdapter } from './languages/type-definition';\nimport { CodeActionAdapter } from './languages/code-action';\nimport { LinkProviderAdapter } from './languages/link-provider';\nimport { CodeLensAdapter } from './languages/lens';\nimport { OutlineAdapter } from './languages/outline';\nimport { ReferenceAdapter } from './languages/reference';\nimport { WorkspaceSymbolAdapter } from './languages/workspace-symbol';\nimport { SymbolInformation } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { FoldingProviderAdapter } from './languages/folding';\nimport { SelectionRangeProviderAdapter } from './languages/selection-range';\nimport { ColorProviderAdapter } from './languages/color';\nimport { RenameAdapter } from './languages/rename';\nimport { Event } from '@theia/core/lib/common/event';\nimport { CommandRegistryImpl } from './command-registry';\nimport { DeclarationAdapter } from './languages/declaration';\nimport { CallHierarchyAdapter } from './languages/call-hierarchy';\nimport { TypeHierarchyAdapter } from './languages/type-hierarchy';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { DocumentSemanticTokensAdapter, DocumentRangeSemanticTokensAdapter } from './languages/semantic-highlighting';\nimport { isReadonlyArray } from '../common/arrays';\nimport { DisposableCollection, disposableTimeout, Disposable as TheiaDisposable } from '@theia/core/lib/common/disposable';\nimport { Severity } from '@theia/core/lib/common/severity';\nimport { LinkedEditingRangeAdapter } from './languages/linked-editing-range';\nimport { serializeEnterRules, serializeIndentation, serializeRegExp } from './languages-utils';\nimport { InlayHintsAdapter } from './languages/inlay-hints';\nimport { InlineCompletionAdapter, InlineCompletionAdapterBase } from './languages/inline-completion';\nimport { DocumentDropEditAdapter } from './languages/document-drop-edit';\nimport { IDisposable } from '@theia/monaco-editor-core';\nimport { FileSystemExtImpl, FsLinkProvider } from './file-system-ext-impl';\n\ntype Adapter = CompletionAdapter |\n    SignatureHelpAdapter |\n    HoverAdapter |\n    EvaluatableExpressionAdapter |\n    InlineValuesAdapter |\n    DocumentHighlightAdapter |\n    DocumentFormattingAdapter |\n    RangeFormattingAdapter |\n    OnTypeFormattingAdapter |\n    DefinitionAdapter |\n    DeclarationAdapter |\n    ImplementationAdapter |\n    TypeDefinitionAdapter |\n    LinkProviderAdapter |\n    CodeLensAdapter |\n    CodeActionAdapter |\n    OutlineAdapter |\n    ReferenceAdapter |\n    WorkspaceSymbolAdapter |\n    FoldingProviderAdapter |\n    SelectionRangeProviderAdapter |\n    ColorProviderAdapter |\n    InlayHintsAdapter |\n    RenameAdapter |\n    CallHierarchyAdapter |\n    DocumentRangeSemanticTokensAdapter |\n    DocumentSemanticTokensAdapter |\n    LinkedEditingRangeAdapter |\n    TypeHierarchyAdapter |\n    InlineCompletionAdapter |\n    DocumentDropEditAdapter;\n\nexport class LanguagesExtImpl implements LanguagesExt {\n\n    private proxy: LanguagesMain;\n\n    private readonly diagnostics: Diagnostics;\n\n    private linkProviderRegistration?: IDisposable;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, Adapter>();\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl,\n        private readonly filesSystem: FileSystemExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n        this.diagnostics = new Diagnostics(rpc);\n        filesSystem.onWillRegisterFileSystemProvider(linkProvider => this.registerLinkProviderIfNotYetRegistered(linkProvider));\n    }\n\n    dispose(): void {\n        if (this.linkProviderRegistration) {\n            this.linkProviderRegistration.dispose();\n        }\n    }\n\n    get onDidChangeDiagnostics(): Event<theia.DiagnosticChangeEvent> {\n        return this.diagnostics.onDidChangeDiagnostics;\n    }\n\n    getLanguages(): Promise<string[]> {\n        return this.proxy.$getLanguages();\n    }\n\n    changeLanguage(uri: URI, languageId: string): Promise<theia.TextDocument> {\n        return this.proxy.$changeLanguage(uri, languageId).then(() => {\n            const doc = this.documents.getDocumentData(uri);\n            if (!doc) {\n                throw new Error('No document found by URI ' + uri.toString());\n            }\n            return doc.document;\n        });\n    }\n\n    setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n        const { wordPattern } = configuration;\n\n        if (wordPattern) {\n            this.documents.setWordDefinitionFor(language, wordPattern);\n        } else {\n            this.documents.setWordDefinitionFor(language, null);\n        }\n\n        const callId = this.nextCallId();\n\n        const config: SerializedLanguageConfiguration = {\n            brackets: configuration.brackets,\n            comments: configuration.comments,\n            onEnterRules: serializeEnterRules(configuration.onEnterRules),\n            wordPattern: serializeRegExp(configuration.wordPattern),\n            indentationRules: serializeIndentation(configuration.indentationRules)\n        };\n\n        this.proxy.$setLanguageConfiguration(callId, language, config);\n        return this.createDisposable(callId);\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number, onDispose?: () => void): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n            onDispose?.();\n        });\n    }\n\n    private addNewAdapter(adapter: Adapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async withAdapter<A, R>(handle: number, ctor: { new(...args: any[]): A }, callback: (adapter: A) => Promise<R>, fallbackValue: R): Promise<R> {\n        const adapter = this.adaptersMap.get(handle);\n        if (!adapter) {\n            return fallbackValue;\n        }\n        if (adapter instanceof ctor) {\n            return callback(adapter);\n        }\n        throw new Error('no adapter found');\n    }\n\n    private transformDocumentSelector(selector: theia.DocumentSelector): SerializedDocumentFilter[] {\n        if (isReadonlyArray(selector)) {\n            return selector.map(sel => this.doTransformDocumentSelector(sel)!);\n        }\n\n        return [this.doTransformDocumentSelector(selector)!];\n    }\n\n    private doTransformDocumentSelector(selector: string | theia.DocumentFilter): SerializedDocumentFilter | undefined {\n        if (typeof selector === 'string') {\n            return {\n                $serialized: true,\n                language: selector\n            };\n        }\n\n        if (selector) {\n            return {\n                $serialized: true,\n                language: selector.language,\n                scheme: selector.scheme,\n                pattern: selector.pattern,\n                notebookType: selector.notebookType\n            };\n        }\n\n        return undefined;\n    }\n\n    private registerLinkProviderIfNotYetRegistered(linkProvider: FsLinkProvider): void {\n        if (!this.linkProviderRegistration) {\n            this.linkProviderRegistration = this.registerDocumentLinkProvider('*', linkProvider, {\n                id: 'theia.fs-ext-impl',\n                name: 'fs-ext-impl'\n            });\n        }\n    }\n\n    // ### Completion begin\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position,\n        context: CompletionContext, token: theia.CancellationToken): Promise<CompletionResultDto | undefined> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.provideCompletionItems(URI.revive(resource), position, context, token), undefined);\n    }\n\n    $resolveCompletionItem(handle: number, chainedId: ChainedCacheId, token: theia.CancellationToken): Promise<Completion | undefined> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.resolveCompletionItem(chainedId, token), undefined);\n    }\n\n    $releaseCompletionItems(handle: number, id: number): void {\n        this.withAdapter(handle, CompletionAdapter, async adapter => adapter.releaseCompletionItems(id), undefined);\n    }\n\n    registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, triggerCharacters: string[],\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new CompletionAdapter(provider, this.documents, this.commands));\n        this.proxy.$registerCompletionSupport(callId, pluginInfo, this.transformDocumentSelector(selector), triggerCharacters, CompletionAdapter.hasResolveSupport(provider));\n        return this.createDisposable(callId);\n    }\n    // ### Completion end\n\n    // ### Inline completion provider begin\n    registerInlineCompletionsProvider(selector: theia.DocumentSelector, provider: theia.InlineCompletionItemProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new InlineCompletionAdapter(this.documents, provider, this.commands));\n        this.proxy.$registerInlineCompletionsSupport(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideInlineCompletions(\n        handle: number,\n        resource: UriComponents,\n        position: Position,\n        context: InlineCompletionContext,\n        token: theia.CancellationToken\n    ): Promise<IdentifiableInlineCompletions | undefined> {\n        return this.withAdapter(handle, InlineCompletionAdapterBase, adapter => adapter.provideInlineCompletions(URI.revive(resource), position, context, token), undefined);\n    }\n\n    $freeInlineCompletionsList(handle: number, pid: number): void {\n        this.withAdapter(handle, InlineCompletionAdapterBase, async adapter => { adapter.disposeCompletions(pid); }, undefined);\n    }\n    // ### Inline completion provider end\n\n    // ### Definition provider begin\n    $provideDefinition(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, DefinitionAdapter, adapter => adapter.provideDefinition(URI.revive(resource), position, token), undefined);\n    }\n\n    registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DefinitionAdapter(provider, this.documents));\n        this.proxy.$registerDefinitionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Definition provider end\n\n    // ### Declaration provider begin\n    $provideDeclaration(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, DeclarationAdapter, adapter => adapter.provideDeclaration(URI.revive(resource), position, token), undefined);\n    }\n\n    registerDeclarationProvider(selector: theia.DocumentSelector, provider: theia.DeclarationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DeclarationAdapter(provider, this.documents));\n        this.proxy.$registerDeclarationProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Declaration provider end\n\n    // ### Signature help begin\n    $provideSignatureHelp(\n        handle: number, resource: UriComponents, position: Position, context: SignatureHelpContext, token: theia.CancellationToken\n    ): Promise<SignatureHelp | undefined> {\n        return this.withAdapter(handle, SignatureHelpAdapter, adapter => adapter.provideSignatureHelp(URI.revive(resource), position, token, context), undefined);\n    }\n\n    $releaseSignatureHelp(handle: number, id: number): void {\n        this.withAdapter(handle, SignatureHelpAdapter, async adapter => adapter.releaseSignatureHelp(id), undefined);\n    }\n\n    registerSignatureHelpProvider(selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, metadata: theia.SignatureHelpProviderMetadata,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new SignatureHelpAdapter(provider, this.documents));\n        this.proxy.$registerSignatureHelpProvider(callId, pluginInfo, this.transformDocumentSelector(selector), metadata);\n        return this.createDisposable(callId);\n    }\n    // ### Signature help end\n\n    // ### Diagnostics begin\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        return this.diagnostics.getDiagnostics(resource!);\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        return this.diagnostics.createDiagnosticCollection(name);\n    }\n    // ### Diagnostics end\n\n    // ### Implementation provider begin\n    $provideImplementation(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, ImplementationAdapter, adapter => adapter.provideImplementation(URI.revive(resource), position, token), undefined);\n    }\n\n    registerImplementationProvider(selector: theia.DocumentSelector, provider: theia.ImplementationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ImplementationAdapter(provider, this.documents));\n        this.proxy.$registerImplementationProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Implementation provider end\n\n    // ### Type Definition provider begin\n    $provideTypeDefinition(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, TypeDefinitionAdapter, adapter => adapter.provideTypeDefinition(URI.revive(resource), position, token), undefined);\n    }\n\n    registerTypeDefinitionProvider(selector: theia.DocumentSelector, provider: theia.TypeDefinitionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new TypeDefinitionAdapter(provider, this.documents));\n        this.proxy.$registerTypeDefinitionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Type Definition provider end\n\n    // ### Hover Provider begin\n    registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new HoverAdapter(provider, this.documents));\n        this.proxy.$registerHoverProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideHover(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Hover | undefined> {\n        return this.withAdapter(handle, HoverAdapter, adapter => adapter.provideHover(URI.revive(resource), position, token), undefined);\n    }\n    // ### Hover Provider end\n\n    // ### EvaluatableExpression Provider begin\n    registerEvaluatableExpressionProvider(selector: theia.DocumentSelector, provider: theia.EvaluatableExpressionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new EvaluatableExpressionAdapter(provider, this.documents));\n        this.proxy.$registerEvaluatableExpressionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideEvaluatableExpression(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<EvaluatableExpression | undefined> {\n        return this.withAdapter(handle, EvaluatableExpressionAdapter, adapter => adapter.provideEvaluatableExpression(URI.revive(resource), position, token), undefined);\n    }\n    // ### EvaluatableExpression Provider end\n\n    // ### InlineValues Provider begin\n    registerInlineValuesProvider(selector: theia.DocumentSelector, provider: theia.InlineValuesProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const eventHandle = typeof provider.onDidChangeInlineValues === 'function' ? this.nextCallId() : undefined;\n        const callId = this.addNewAdapter(new InlineValuesAdapter(provider, this.documents));\n        this.proxy.$registerInlineValuesProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined) {\n            const subscription = provider.onDidChangeInlineValues!(_ => this.proxy.$emitInlineValuesEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n        return result;\n    }\n\n    $provideInlineValues(handle: number, resource: UriComponents, range: Range, context: InlineValueContext, token: theia.CancellationToken): Promise<InlineValue[] | undefined> {\n        return this.withAdapter(handle, InlineValuesAdapter, adapter => adapter.provideInlineValues(URI.revive(resource), range, context, token), undefined);\n    }\n    // ### InlineValue Provider end\n\n    // ### Document Highlight Provider begin\n    registerDocumentHighlightProvider(selector: theia.DocumentSelector, provider: theia.DocumentHighlightProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentHighlightAdapter(provider, this.documents));\n        this.proxy.$registerDocumentHighlightProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentHighlights(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<DocumentHighlight[] | undefined> {\n        return this.withAdapter(handle, DocumentHighlightAdapter, adapter => adapter.provideDocumentHighlights(URI.revive(resource), position, token), undefined);\n    }\n    // ### Document Highlight Provider end\n\n    // ### WorkspaceSymbol Provider begin\n    registerWorkspaceSymbolProvider(provider: theia.WorkspaceSymbolProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new WorkspaceSymbolAdapter(provider));\n        this.proxy.$registerWorkspaceSymbolProvider(callId, pluginInfo);\n        return this.createDisposable(callId);\n    }\n\n    $provideWorkspaceSymbols(handle: number, query: string, token: theia.CancellationToken): PromiseLike<SymbolInformation[]> {\n        return this.withAdapter(handle, WorkspaceSymbolAdapter, adapter => adapter.provideWorkspaceSymbols(query, token), []);\n    }\n\n    $resolveWorkspaceSymbol(handle: number, symbol: SymbolInformation, token: theia.CancellationToken): PromiseLike<SymbolInformation | undefined> {\n        return this.withAdapter(handle, WorkspaceSymbolAdapter, adapter => adapter.resolveWorkspaceSymbol(symbol, token), undefined);\n    }\n    // ### WorkspaceSymbol Provider end\n\n    // ### Document Formatting Edit begin\n    registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentFormattingAdapter(provider, this.documents));\n        this.proxy.$registerDocumentFormattingSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, DocumentFormattingAdapter, adapter => adapter.provideDocumentFormattingEdits(URI.revive(resource), options, token), undefined);\n    }\n    // ### Document Formatting Edit end\n\n    // ### Drop Edit Provider start\n    $provideDocumentDropEdits(handle: number, resource: UriComponents, position: Position,\n        dataTransfer: DataTransferDTO, token: theia.CancellationToken): Promise<DocumentDropEdit | undefined> {\n        return this.withAdapter(handle, DocumentDropEditAdapter, adapter => adapter.provideDocumentDropEdits(URI.revive(resource), position, dataTransfer, token), undefined);\n    }\n\n    registerDocumentDropEditProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.DocumentDropEditProvider,\n        metadata?: theia.DocumentDropEditProviderMetadata\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentDropEditAdapter(provider, this.documents, this.filesSystem));\n        this.proxy.$registerDocumentDropEditProvider(callId, this.transformDocumentSelector(selector), metadata);\n        return this.createDisposable(callId);\n    }\n    // ### Drop Edit Provider end\n\n    // ### Document Range Formatting Edit begin\n    registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new RangeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerRangeFormattingSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangeFormattingEdits(URI.revive(resource), range, options, token), undefined);\n    }\n    // ### Document Range Formatting Edit end\n\n    // ### On Type Formatting Edit begin\n    registerOnTypeFormattingEditProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.OnTypeFormattingEditProvider,\n        triggerCharacters: string[],\n        pluginInfo: PluginInfo\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new OnTypeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerOnTypeFormattingProvider(callId, pluginInfo, this.transformDocumentSelector(selector), triggerCharacters);\n        return this.createDisposable(callId);\n    }\n\n    $provideOnTypeFormattingEdits(handle: number, resource: UriComponents, position: Position, ch: string,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, OnTypeFormattingAdapter, adapter => adapter.provideOnTypeFormattingEdits(URI.revive(resource), position, ch, options, token), undefined);\n    }\n    // ### On Type Formatting Edit end\n\n    // ### Document Link Provider begin\n    $provideDocumentLinks(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<DocumentLink[] | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.provideLinks(URI.revive(resource), token), undefined);\n    }\n\n    $resolveDocumentLink(handle: number, link: DocumentLink, token: theia.CancellationToken): Promise<DocumentLink | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.resolveLink(link, token), undefined);\n    }\n\n    registerDocumentLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new LinkProviderAdapter(provider, this.documents));\n        this.proxy.$registerDocumentLinkProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $releaseDocumentLinks(handle: number, ids: number[]): void {\n        this.withAdapter(handle, LinkProviderAdapter, async adapter => adapter.releaseDocumentLinks(ids), undefined);\n    }\n\n    // ### Document Link Provider end\n\n    // ### Code Actions Provider begin\n    registerCodeActionsProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.CodeActionProvider,\n        pluginModel: PluginModel,\n        pluginInfo: PluginInfo,\n        metadata?: theia.CodeActionProviderMetadata\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeActionAdapter(provider, this.documents, this.diagnostics, pluginModel ? pluginModel.id : '', this.commands));\n\n        let documentation: CodeActionProviderDocumentation | undefined;\n        let disposables: DisposableCollection | undefined;\n        if (metadata && metadata.documentation) {\n            disposables = new DisposableCollection();\n            documentation = metadata.documentation.map(doc => ({\n                kind: doc.kind.value,\n                command: this.commands.converter.toSafeCommand(doc.command, disposables!)\n            }));\n        }\n\n        this.proxy.$registerQuickFixProvider(\n            callId,\n            pluginInfo,\n            this.transformDocumentSelector(selector),\n            metadata && metadata.providedCodeActionKinds ? metadata.providedCodeActionKinds.map(kind => kind.value) : undefined,\n            documentation\n        );\n\n        return this.createDisposable(callId, disposables?.dispose);\n    }\n\n    $provideCodeActions(\n        handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: CodeActionContext,\n        token: theia.CancellationToken\n    ): Promise<CodeAction[] | undefined> {\n        return this.withAdapter(handle, CodeActionAdapter, adapter => adapter.provideCodeAction(URI.revive(resource), rangeOrSelection, context, token), undefined);\n    }\n\n    $releaseCodeActions(handle: number, cacheIds: number[]): void {\n        this.withAdapter(handle, CodeActionAdapter, adapter => adapter.releaseCodeActions(cacheIds), undefined);\n    }\n\n    $resolveCodeAction(handle: number, cacheId: number, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        return this.withAdapter(handle, CodeActionAdapter, adapter => adapter.resolveCodeAction(cacheId, token), undefined);\n    };\n\n    // ### Code Actions Provider end\n\n    // ### Code Lens Provider begin\n    registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeLensAdapter(provider, this.documents, this.commands));\n        const eventHandle = typeof provider.onDidChangeCodeLenses === 'function' ? this.nextCallId() : undefined;\n        this.proxy.$registerCodeLensSupport(callId, pluginInfo, this.transformDocumentSelector(selector), eventHandle);\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined && provider.onDidChangeCodeLenses) {\n            const subscription = provider.onDidChangeCodeLenses(e => this.proxy.$emitCodeLensEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideCodeLenses(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<CodeLensSymbol[] | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.provideCodeLenses(URI.revive(resource), token), undefined);\n    }\n\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol, token: theia.CancellationToken): Promise<CodeLensSymbol | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.resolveCodeLens(URI.revive(resource), symbol, token), undefined);\n    }\n\n    $releaseCodeLenses(handle: number, ids: number[]): void {\n        this.withAdapter(handle, CodeLensAdapter, async adapter => adapter.releaseCodeLenses(ids), undefined);\n    }\n    // ### Code Lens Provider end\n\n    // ### Code Reference Provider begin\n    $provideReferences(handle: number, resource: UriComponents, position: Position, context: ReferenceContext, token: theia.CancellationToken): Promise<Location[] | undefined> {\n        return this.withAdapter(handle, ReferenceAdapter, adapter => adapter.provideReferences(URI.revive(resource), position, context, token), undefined);\n    }\n\n    registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ReferenceAdapter(provider, this.documents));\n        this.proxy.$registerReferenceProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Code Reference Provider end\n\n    // ### Document Symbol Provider begin\n    registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider, pluginInfo: PluginInfo,\n        metadata?: theia.DocumentSymbolProviderMetadata): theia.Disposable {\n        const callId = this.addNewAdapter(new OutlineAdapter(this.documents, provider));\n        const displayName = (metadata && metadata.label) || getPluginLabel(pluginInfo);\n        this.proxy.$registerOutlineSupport(callId, pluginInfo, this.transformDocumentSelector(selector), displayName);\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentSymbols(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<DocumentSymbol[] | undefined> {\n        return this.withAdapter(handle, OutlineAdapter, adapter => adapter.provideDocumentSymbols(URI.revive(resource), token), undefined);\n    }\n    // ### Document Symbol Provider end\n\n    // ### Color Provider begin\n    registerColorProvider(selector: theia.DocumentSelector, provider: theia.DocumentColorProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ColorProviderAdapter(this.documents, provider));\n        this.proxy.$registerDocumentColorProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentColors(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<RawColorInfo[]> {\n        return this.withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColors(URI.revive(resource), token), []);\n    }\n\n    $provideColorPresentations(handle: number, resource: UriComponents, colorInfo: RawColorInfo, token: theia.CancellationToken): Promise<ColorPresentation[]> {\n        return this.withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColorPresentations(URI.revive(resource), colorInfo, token), []);\n    }\n    // ### Color Provider end\n\n    // ### InlayHints Provider begin\n    registerInlayHintsProvider(selector: theia.DocumentSelector, provider: theia.InlayHintsProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const eventHandle = typeof provider.onDidChangeInlayHints === 'function' ? this.nextCallId() : undefined;\n        const callId = this.addNewAdapter(new InlayHintsAdapter(provider, this.documents, this.commands));\n        this.proxy.$registerInlayHintsProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined) {\n            const subscription = provider.onDidChangeInlayHints!(() => this.proxy.$emitInlayHintsEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideInlayHints(handle: number, resource: UriComponents, range: Range, token: theia.CancellationToken): Promise<InlayHintsDto | undefined> {\n        return this.withAdapter(handle, InlayHintsAdapter, adapter => adapter.provideInlayHints(URI.revive(resource), range, token), undefined);\n    }\n\n    $resolveInlayHint(handle: number, id: ChainedCacheId, token: theia.CancellationToken): Promise<InlayHintDto | undefined> {\n        return this.withAdapter(handle, InlayHintsAdapter, adapter => adapter.resolveInlayHint(id, token), undefined);\n    }\n\n    $releaseInlayHints(handle: number, id: number): void {\n        this.withAdapter(handle, InlayHintsAdapter, async adapter => adapter.releaseHints(id), undefined);\n    }\n    // ### InlayHints Provider end\n\n    // ### Folding Range Provider begin\n    registerFoldingRangeProvider(selector: theia.DocumentSelector, provider: theia.FoldingRangeProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new FoldingProviderAdapter(provider, this.documents));\n        const eventHandle = typeof provider.onDidChangeFoldingRanges === 'function' ? this.nextCallId() : undefined;\n\n        this.proxy.$registerFoldingRangeProvider(callId, pluginInfo, this.transformDocumentSelector(selector), eventHandle);\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined) {\n            const subscription = provider.onDidChangeFoldingRanges!(() => this.proxy.$emitFoldingRangeEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n        return result;\n    }\n\n    $provideFoldingRange(\n        callId: number,\n        resource: UriComponents,\n        context: theia.FoldingContext,\n        token: theia.CancellationToken\n    ): Promise<FoldingRange[] | undefined> {\n        return this.withAdapter(callId, FoldingProviderAdapter, adapter => adapter.provideFoldingRanges(URI.revive(resource), context, token), undefined);\n    }\n    // ### Folding Range Provider end\n\n    registerSelectionRangeProvider(selector: theia.DocumentSelector, provider: theia.SelectionRangeProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new SelectionRangeProviderAdapter(provider, this.documents));\n        this.proxy.$registerSelectionRangeProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideSelectionRanges(handle: number, resource: UriComponents, positions: Position[], token: theia.CancellationToken): Promise<SelectionRange[][]> {\n        return this.withAdapter(handle, SelectionRangeProviderAdapter, adapter => adapter.provideSelectionRanges(URI.revive(resource), positions, token), []);\n    }\n\n    // ### Rename Provider begin\n    registerRenameProvider(selector: theia.DocumentSelector, provider: theia.RenameProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new RenameAdapter(provider, this.documents));\n        this.proxy.$registerRenameProvider(callId, pluginInfo, this.transformDocumentSelector(selector), RenameAdapter.supportsResolving(provider));\n        return this.createDisposable(callId);\n    }\n\n    $provideRenameEdits(handle: number, resource: UriComponents, position: Position, newName: string, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        return this.withAdapter(handle, RenameAdapter, adapter => adapter.provideRenameEdits(URI.revive(resource), position, newName, token), undefined);\n    }\n\n    $resolveRenameLocation(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<RenameLocation | undefined> {\n        return this.withAdapter(handle, RenameAdapter, adapter => adapter.resolveRenameLocation(URI.revive(resource), position, token), undefined);\n    }\n    // ### Rename Provider end\n\n    // ### Call Hierarchy Provider begin\n    registerCallHierarchyProvider(selector: theia.DocumentSelector, provider: theia.CallHierarchyProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new CallHierarchyAdapter(provider, this.documents));\n        this.proxy.$registerCallHierarchyProvider(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideRootDefinition(\n        handle: number, resource: UriComponents, location: Position, token: theia.CancellationToken\n    ): Promise<CallHierarchyItem[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideRootDefinition(URI.revive(resource), location, token), undefined);\n    }\n\n    $provideCallers(handle: number, definition: CallHierarchyItem, token: theia.CancellationToken): Promise<CallHierarchyIncomingCall[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallers(definition, token), undefined);\n    }\n\n    $provideCallees(handle: number, definition: CallHierarchyItem, token: theia.CancellationToken): Promise<CallHierarchyOutgoingCall[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallees(definition, token), undefined);\n    }\n\n    $releaseCallHierarchy(handle: number, session?: string): Promise<boolean> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.releaseSession(session), false);\n    }\n    // ### Call Hierarchy Provider end\n\n    // ### Type hierarchy Provider begin\n    registerTypeHierarchyProvider(selector: theia.DocumentSelector, provider: theia.TypeHierarchyProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new TypeHierarchyAdapter(provider, this.documents));\n        this.proxy.$registerTypeHierarchyProvider(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $prepareTypeHierarchy(handle: number, resource: UriComponents, location: Position, token: theia.CancellationToken\n    ): Promise<TypeHierarchyItem[] | undefined> {\n        return this.withAdapter(\n            handle,\n            TypeHierarchyAdapter,\n            adapter => adapter.prepareSession(URI.revive(resource), location, token),\n            undefined\n        );\n    }\n\n    $provideSuperTypes(handle: number, sessionId: string, itemId: string, token: theia.CancellationToken):\n        Promise<TypeHierarchyItem[] | undefined> {\n        return this.withAdapter(\n            handle,\n            TypeHierarchyAdapter,\n            adapter => adapter.provideSupertypes(sessionId, itemId, token),\n            undefined\n        );\n    }\n\n    $provideSubTypes(handle: number, sessionId: string, itemId: string, token: theia.CancellationToken):\n        Promise<TypeHierarchyItem[] | undefined> {\n        return this.withAdapter(\n            handle,\n            TypeHierarchyAdapter,\n            adapter => adapter.provideSubtypes(sessionId, itemId, token),\n            undefined\n        );\n    }\n\n    $releaseTypeHierarchy(handle: number, session?: string): Promise<boolean> {\n        return this.withAdapter(\n            handle,\n            TypeHierarchyAdapter,\n            adapter => adapter.releaseSession(session),\n            false);\n    }\n\n    // ### Type hierarchy Provider end\n\n    // ### Linked Editing Range Provider begin\n    registerLinkedEditingRangeProvider(selector: theia.DocumentSelector, provider: theia.LinkedEditingRangeProvider): theia.Disposable {\n        const handle = this.addNewAdapter(new LinkedEditingRangeAdapter(this.documents, provider));\n        this.proxy.$registerLinkedEditingRangeProvider(handle, this.transformDocumentSelector(selector));\n        return this.createDisposable(handle);\n    }\n\n    $provideLinkedEditingRanges(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<LinkedEditingRanges | undefined> {\n        return this.withAdapter(handle, LinkedEditingRangeAdapter, async adapter => adapter.provideRanges(URI.revive(resource), position, token), undefined);\n    }\n\n    // ### Linked Editing Range Provider end\n\n    // #region semantic coloring\n\n    registerDocumentSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentSemanticTokensProvider, legend: theia.SemanticTokensLegend,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const eventHandle = (typeof provider.onDidChangeSemanticTokens === 'function' ? this.nextCallId() : undefined);\n\n        const handle = this.addNewAdapter(new DocumentSemanticTokensAdapter(this.documents, provider));\n        this.proxy.$registerDocumentSemanticTokensProvider(handle, pluginInfo, this.transformDocumentSelector(selector), legend, eventHandle);\n        let result = this.createDisposable(handle);\n\n        if (eventHandle) {\n            // eslint-disable-next-line no-unsanitized/method\n            const subscription = provider.onDidChangeSemanticTokens!(_ => this.proxy.$emitDocumentSemanticTokensEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideDocumentSemanticTokens(handle: number, resource: UriComponents, previousResultId: number, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        return this.withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.provideDocumentSemanticTokens(URI.revive(resource), previousResultId, token), null);\n    }\n\n    $releaseDocumentSemanticTokens(handle: number, semanticColoringResultId: number): void {\n        this.withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.releaseDocumentSemanticColoring(semanticColoringResultId), undefined);\n    }\n\n    registerDocumentRangeSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeSemanticTokensProvider,\n        legend: theia.SemanticTokensLegend, pluginInfo: PluginInfo): theia.Disposable {\n        const handle = this.addNewAdapter(new DocumentRangeSemanticTokensAdapter(this.documents, provider));\n        this.proxy.$registerDocumentRangeSemanticTokensProvider(handle, pluginInfo, this.transformDocumentSelector(selector), legend);\n        return this.createDisposable(handle);\n    }\n\n    $provideDocumentRangeSemanticTokens(handle: number, resource: UriComponents, range: Range, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        return this.withAdapter(handle, DocumentRangeSemanticTokensAdapter, adapter => adapter.provideDocumentRangeSemanticTokens(URI.revive(resource), range, token), null);\n    }\n\n    // Copied from https://github.com/microsoft/vscode/blob/7d9b1c37f8e5ae3772782ba3b09d827eb3fdd833/src/vs/workbench/api/common/extHostLanguages.ts\n    protected statusItemHandlePool = 0;\n    protected readonly statusItemIds = new Set<string>();\n    createLanguageStatusItem(extension: Plugin, id: string, selector: theia.DocumentSelector): theia.LanguageStatusItem {\n\n        const handle = this.statusItemHandlePool++;\n        const proxy = this.proxy;\n        const ids = this.statusItemIds;\n\n        // enforce extension unique identifier\n        const fullyQualifiedId = `${extension.model.id}/${id}`;\n        if (ids.has(fullyQualifiedId)) {\n            throw new Error(`LanguageStatusItem with id '${id}' ALREADY exists`);\n        }\n        ids.add(fullyQualifiedId);\n\n        const data: Omit<theia.LanguageStatusItem, 'dispose'> = {\n            selector,\n            id,\n            name: extension.model.displayName ?? extension.model.name,\n            severity: LanguageStatusSeverity.Information,\n            command: undefined,\n            text: '',\n            detail: '',\n            busy: false\n        };\n\n        let soonHandle: TheiaDisposable | undefined;\n        const commandDisposables = new DisposableCollection();\n        const updateAsync = () => {\n            soonHandle?.dispose();\n            soonHandle = disposableTimeout(() => {\n                commandDisposables.dispose();\n                commandDisposables.push({ dispose: () => { } }); // Mark disposable as undisposed.\n                this.proxy.$setLanguageStatus(handle, {\n                    id: fullyQualifiedId,\n                    name: data.name ?? extension.model.displayName ?? extension.model.name,\n                    source: extension.model.displayName ?? extension.model.name,\n                    selector: this.transformDocumentSelector(data.selector),\n                    label: data.text,\n                    detail: data.detail ?? '',\n                    severity: data.severity === LanguageStatusSeverity.Error ? Severity.Error : data.severity === LanguageStatusSeverity.Warning ? Severity.Warning : Severity.Info,\n                    command: data.command && this.commands.converter.toSafeCommand(data.command, commandDisposables),\n                    accessibilityInfo: data.accessibilityInformation,\n                    busy: data.busy\n                });\n            }, 0);\n        };\n\n        const result: theia.LanguageStatusItem = {\n            dispose(): void {\n                commandDisposables.dispose();\n                soonHandle?.dispose();\n                proxy.$removeLanguageStatus(handle);\n                ids.delete(fullyQualifiedId);\n            },\n            get id(): string {\n                return data.id;\n            },\n            get name(): string | undefined {\n                return data.name;\n            },\n            set name(value) {\n                data.name = value;\n                updateAsync();\n            },\n            get selector(): theia.DocumentSelector {\n                return data.selector;\n            },\n            set selector(value) {\n                data.selector = value;\n                updateAsync();\n            },\n            get text(): string {\n                return data.text;\n            },\n            set text(value) {\n                data.text = value;\n                updateAsync();\n            },\n            get detail(): string | undefined {\n                return data.detail;\n            },\n            set detail(value) {\n                data.detail = value;\n                updateAsync();\n            },\n            get severity(): theia.LanguageStatusSeverity {\n                return data.severity;\n            },\n            set severity(value) {\n                data.severity = value;\n                updateAsync();\n            },\n            get accessibilityInformation(): theia.AccessibilityInformation | undefined {\n                return data.accessibilityInformation;\n            },\n            set accessibilityInformation(value) {\n                data.accessibilityInformation = value;\n                updateAsync();\n            },\n            get command(): theia.Command | undefined {\n                return data.command;\n            },\n            set command(value) {\n                data.command = value;\n                updateAsync();\n            },\n            get busy(): boolean {\n                return data.busy;\n            },\n            set busy(value: boolean) {\n                data.busy = value;\n                updateAsync();\n            }\n        };\n        updateAsync();\n        return result;\n    }\n    // #endregion\n\n    // region DocumentPaste\n\n    /** @stubbed */\n    registerDocumentPasteEditProvider(\n        extension: Plugin, selector: theia.DocumentSelector, provider: theia.DocumentPasteEditProvider, metadata: theia.DocumentPasteProviderMetadata\n    ): theia.Disposable {\n        return Disposable.NULL;\n    }\n    // #endregion\n}\n\nfunction getPluginLabel(pluginInfo: PluginInfo): string {\n    return pluginInfo.displayName || pluginInfo.name;\n}\n\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as dto from '../../common/plugin-api-rpc-model';\nimport * as rpc from '../../common/plugin-api-rpc';\nimport * as types from '../types-impl';\nimport { fromRange, SymbolKind } from '../type-converters';\n\nexport class CallHierarchyAdapter {\n\n    constructor(\n        private readonly provider: theia.CallHierarchyProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    protected sessionIds = 0;\n    protected readonly cache = new Map<string, Map<string, theia.CallHierarchyItem>>();\n\n    async provideRootDefinition(\n        resource: URI, position: rpc.Position, token: theia.CancellationToken\n    ): Promise<dto.CallHierarchyItem[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const definition = await this.provider.prepareCallHierarchy(documentData.document,\n            new types.Position(\n                position.lineNumber,\n                position.column\n            ),\n            token\n        );\n\n        if (!definition) {\n            return undefined;\n        }\n        const sessionId = (this.sessionIds++).toString(36);\n        this.cache.set(sessionId, new Map());\n        return Array.isArray(definition) ? definition.map(item => this.fromCallHierarchyItem(item, sessionId)) : [this.fromCallHierarchyItem(definition, sessionId)];\n    }\n\n    async provideCallers(definition: dto.CallHierarchyItem, token: theia.CancellationToken): Promise<dto.CallHierarchyIncomingCall[] | undefined> {\n        const callers = await this.provider.provideCallHierarchyIncomingCalls(this.toCallHierarchyItem(definition), token);\n        if (!callers) {\n            return undefined;\n        }\n\n        return callers.map(item => this.fromCallHierarchyIncomingCall(item, definition._sessionId!));\n    }\n\n    async provideCallees(definition: dto.CallHierarchyItem, token: theia.CancellationToken): Promise<dto.CallHierarchyOutgoingCall[] | undefined> {\n        const callees = await this.provider.provideCallHierarchyOutgoingCalls(this.toCallHierarchyItem(definition), token);\n        if (!callees) {\n            return undefined;\n        }\n\n        return callees.map(item => this.fromCallHierarchyOutgoingCall(item, definition._sessionId!));\n    }\n\n    private fromCallHierarchyItem(item: theia.CallHierarchyItem, sessionId: string): dto.CallHierarchyItem {\n        const sessionCache = this.cache.get(sessionId)!;\n        const itemId = sessionCache.size.toString(36);\n        const definition: dto.CallHierarchyItem = {\n            uri: item.uri,\n            range: fromRange(item.range),\n            selectionRange: fromRange(item.selectionRange),\n            name: item.name,\n            kind: SymbolKind.fromSymbolKind(item.kind),\n            tags: item.tags,\n            _itemId: itemId,\n            _sessionId: sessionId,\n        };\n        sessionCache.set(itemId, item);\n        return definition;\n    }\n\n    private toCallHierarchyItem(definition: dto.CallHierarchyItem): theia.CallHierarchyItem {\n        const cached = this.cache.get(definition._sessionId!)?.get(definition._itemId!);\n        if (!cached) {\n            throw new Error(`Found no cached item corresponding to ${definition.name} in ${definition.uri.path} with ID ${definition.data}.`);\n        }\n        return cached;\n    }\n\n    private fromCallHierarchyIncomingCall(caller: theia.CallHierarchyIncomingCall, sessionId: string): dto.CallHierarchyIncomingCall {\n        return {\n            from: this.fromCallHierarchyItem(caller.from, sessionId),\n            fromRanges: caller.fromRanges.map(r => fromRange(r))\n        };\n    }\n\n    protected fromCallHierarchyOutgoingCall(caller: theia.CallHierarchyOutgoingCall, sessionId: string): dto.CallHierarchyOutgoingCall {\n        return {\n            to: this.fromCallHierarchyItem(caller.to, sessionId),\n            fromRanges: caller.fromRanges.map(r => fromRange(r)),\n        };\n    }\n\n    releaseSession(session?: string): Promise<boolean> {\n        if (session !== undefined) {\n            return Promise.resolve(this.cache.delete(session));\n        } else {\n            this.cache.clear();\n            return Promise.resolve(true);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { Selection, WorkspaceEditDto } from '../../common/plugin-api-rpc';\nimport { Range, CodeActionContext, CodeAction } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { DocumentsExtImpl } from '../documents';\nimport { Diagnostics } from './diagnostics';\nimport { CodeActionKind } from '../types-impl';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { isObject } from '@theia/core/lib/common';\n\nexport class CodeActionAdapter {\n\n    constructor(\n        private readonly provider: theia.CodeActionProvider,\n        private readonly document: DocumentsExtImpl,\n        private readonly diagnostics: Diagnostics,\n        private readonly pluginId: string,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    private readonly cache = new Map<number, theia.CodeAction | theia.Command>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    private cacheId = 0;\n\n    async provideCodeAction(resource: URI, rangeOrSelection: Range | Selection,\n        context: CodeActionContext, token: theia.CancellationToken): Promise<CodeAction[] | undefined> {\n        const document = this.document.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = CodeActionAdapter._isSelection(rangeOrSelection)\n            ? <theia.Selection>Converter.toSelection(rangeOrSelection)\n            : <theia.Range>Converter.toRange(rangeOrSelection);\n        const allDiagnostics: theia.Diagnostic[] = [];\n\n        for (const diagnostic of this.diagnostics.getDiagnostics(resource)) {\n            if (ran.intersection(diagnostic.range)) {\n                allDiagnostics.push(diagnostic);\n            }\n        }\n\n        const codeActionContext: theia.CodeActionContext = {\n            diagnostics: allDiagnostics,\n            only: context.only ? new CodeActionKind(context.only) : undefined,\n            triggerKind: Converter.toCodeActionTriggerKind(context.trigger)\n        };\n\n        const commandsOrActions = await this.provider.provideCodeActions(doc, ran, codeActionContext, token);\n\n        if (!Array.isArray(commandsOrActions) || commandsOrActions.length === 0) {\n            return undefined;\n        }\n        const result: CodeAction[] = [];\n        for (const candidate of commandsOrActions) {\n            if (!candidate) {\n                continue;\n            }\n\n            // Cache candidates and created commands.\n            const nextCacheId = this.nextCacheId();\n            const toDispose = new DisposableCollection();\n            this.cache.set(nextCacheId, candidate);\n            this.disposables.set(nextCacheId, toDispose);\n\n            if (CodeActionAdapter._isCommand(candidate)) {\n                result.push({\n                    cacheId: nextCacheId,\n                    title: candidate.title || '',\n                    command: this.commands.converter.toSafeCommand(candidate, toDispose)\n                });\n            } else {\n                if (codeActionContext.only) {\n                    if (!candidate.kind) {\n                        /* eslint-disable-next-line max-len */\n                        console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`);\n                    } else if (!codeActionContext.only.contains(candidate.kind)) {\n                        /* eslint-disable-next-line max-len */\n                        console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action is of kind '${candidate.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code action.`);\n                    }\n                }\n\n                result.push({\n                    cacheId: nextCacheId,\n                    title: candidate.title,\n                    command: this.commands.converter.toSafeCommand(candidate.command, toDispose),\n                    diagnostics: candidate.diagnostics && candidate.diagnostics.map(Converter.convertDiagnosticToMarkerData),\n                    edit: candidate.edit && Converter.fromWorkspaceEdit(candidate.edit),\n                    kind: candidate.kind && candidate.kind.value,\n                    disabled: candidate.disabled,\n                    isPreferred: candidate.isPreferred\n                });\n            }\n        }\n\n        return result;\n    }\n\n    async releaseCodeActions(cacheIds: number[]): Promise<void> {\n        cacheIds.forEach(id => {\n            this.cache.delete(id);\n            const toDispose = this.disposables.get(id);\n            if (toDispose) {\n                toDispose.dispose();\n                this.disposables.delete(id);\n            }\n        });\n    }\n\n    async resolveCodeAction(cacheId: number, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        if (!this.provider.resolveCodeAction) {\n            return undefined;\n        }\n\n        // Code actions are only resolved if they are not legacy commands and don't have an edit property\n        // https://code.visualstudio.com/api/references/vscode-api#CodeActionProvider\n        const candidate = this.cache.get(cacheId);\n        if (!candidate || CodeActionAdapter._isCommand(candidate) || candidate.edit) {\n            return undefined;\n        }\n\n        const resolved = await this.provider.resolveCodeAction(candidate, token);\n        return resolved?.edit && Converter.fromWorkspaceEdit(resolved.edit);\n    }\n\n    private nextCacheId(): number {\n        return this.cacheId++;\n    }\n\n    private static _isCommand(arg: unknown): arg is theia.Command {\n        return isObject<theia.Command>(arg) && typeof arg.command === 'string';\n    }\n\n    private static _isSelection(arg: unknown): arg is Selection {\n        return isObject<Selection>(arg)\n            && typeof arg.selectionStartLineNumber === 'number'\n            && typeof arg.selectionStartColumn === 'number'\n            && typeof arg.positionLineNumber === 'number'\n            && typeof arg.positionColumn === 'number';\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { RawColorInfo } from '../../common/plugin-api-rpc';\nimport { ColorPresentation } from '../../common/plugin-api-rpc-model';\n\nexport class ColorProviderAdapter {\n\n    constructor(\n        private documents: DocumentsExtImpl,\n        private provider: theia.DocumentColorProvider\n    ) { }\n\n    provideColors(resource: URI, token: theia.CancellationToken): Promise<RawColorInfo[]> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(\n            this.provider.provideDocumentColors(doc, token)\n        ).then(colors => {\n            if (!Array.isArray(colors)) {\n                return [];\n            }\n\n            const colorInfos: RawColorInfo[] = colors.map(colorInfo => ({\n                color: Converter.fromColor(colorInfo.color),\n                range: Converter.fromRange(colorInfo.range)!\n            }));\n\n            return colorInfos;\n        });\n    }\n\n    provideColorPresentations(resource: URI, raw: RawColorInfo, token: theia.CancellationToken): Promise<ColorPresentation[]> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const range = Converter.toRange(raw.range);\n        const color = Converter.toColor(raw.color);\n        return Promise.resolve(\n            this.provider.provideColorPresentations(color, { document: doc, range: range }, token)\n        ).then(value => {\n            if (!Array.isArray(value)) {\n                return [];\n            }\n\n            return value.map(Converter.fromColorPresentation);\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { CompletionItemTag, CompletionList, Range, SnippetString } from '../types-impl';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { CompletionContext, CompletionResultDto, Completion, CompletionDto, CompletionItemInsertTextRule, ChainedCacheId } from '../../common/plugin-api-rpc-model';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class CompletionAdapter {\n    private cacheId = 0;\n    private readonly cache = new Map<number, theia.CompletionItem[]>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly delegate: theia.CompletionItemProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    provideCompletionItems(resource: URI, position: Position, context: CompletionContext, token: theia.CancellationToken): Promise<CompletionResultDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const doc = document.document;\n\n        const pos = Converter.toPosition(position);\n\n        // The default insert/replace ranges. It's important to compute them\n        // before asynchronously asking the provider for its results. See\n        // https://github.com/microsoft/vscode/issues/83400#issuecomment-546851421\n        const replacing = doc.getWordRangeAtPosition(pos) || new Range(pos, pos);\n        const inserting = replacing.with({ end: pos });\n\n        return Promise.resolve(this.delegate.provideCompletionItems(doc, pos, token, context)).then(value => {\n            const id = this.cacheId++;\n\n            const toDispose = new DisposableCollection();\n            this.disposables.set(id, toDispose);\n\n            const result: CompletionResultDto = {\n                id,\n                completions: [],\n                defaultRange: {\n                    insert: Converter.fromRange(inserting),\n                    replace: Converter.fromRange(replacing)\n                }\n            };\n\n            let list: CompletionList;\n            if (!value) {\n                return undefined;\n            } else if (Array.isArray(value)) {\n                list = new CompletionList(value);\n            } else {\n                list = value;\n                result.incomplete = list.isIncomplete;\n            }\n\n            for (let i = 0; i < list.items.length; i++) {\n                const suggestion = this.convertCompletionItem(list.items[i], i, id, inserting, replacing);\n                if (suggestion) {\n                    result.completions.push(suggestion);\n                }\n            }\n            this.cache.set(id, list.items);\n\n            return result;\n        });\n    }\n\n    async resolveCompletionItem(chainedId: ChainedCacheId, token: theia.CancellationToken): Promise<Completion | undefined> {\n        const [parentId, id] = chainedId;\n        if (typeof this.delegate.resolveCompletionItem !== 'function') {\n            return undefined;\n        }\n        const item = this.cache.get(parentId)?.[id];\n        if (!item) {\n            return undefined;\n        }\n        const resolvedItem = await this.delegate.resolveCompletionItem(item, token);\n        if (!resolvedItem) {\n            return undefined;\n        }\n        return this.convertCompletionItem(resolvedItem, id, parentId);\n    }\n\n    async releaseCompletionItems(id: number): Promise<void> {\n        this.cache.delete(id);\n        const toDispose = this.disposables.get(id);\n        if (toDispose) {\n            toDispose.dispose();\n            this.disposables.delete(id);\n        }\n    }\n\n    private convertCompletionItem(item: theia.CompletionItem, id: number, parentId: number,\n        defaultInserting?: theia.Range, defaultReplacing?: theia.Range): CompletionDto | undefined {\n\n        const itemLabel = typeof item.label === 'string' ? item.label : item.label.label;\n        if (itemLabel.length === 0) {\n            console.warn('Invalid Completion Item -> must have at least a label');\n            return undefined;\n        }\n\n        const toDispose = this.disposables.get(parentId);\n        if (!toDispose) {\n            throw Error('DisposableCollection is missing...');\n        }\n\n        let insertText = itemLabel;\n        let insertTextRules = item.keepWhitespace ? CompletionItemInsertTextRule.KeepWhitespace : 0;\n        if (item.textEdit) {\n            insertText = item.textEdit.newText;\n        } else if (typeof item.insertText === 'string') {\n            insertText = item.insertText;\n        } else if (item.insertText instanceof SnippetString) {\n            insertText = item.insertText.value;\n            insertTextRules |= CompletionItemInsertTextRule.InsertAsSnippet;\n        }\n\n        let range: Completion['range'] | undefined;\n        const itemRange = item.textEdit?.range || item.range;\n        if (Range.isRange(itemRange)) {\n            range = Converter.fromRange(itemRange);\n        } else if (itemRange && (!defaultInserting?.isEqual(itemRange.inserting) || !defaultReplacing?.isEqual(itemRange.replacing))) {\n            range = {\n                insert: Converter.fromRange(itemRange.inserting),\n                replace: Converter.fromRange(itemRange.replacing)\n            };\n        }\n\n        const tags = (!!item.tags?.length || item.deprecated === true)\n            ? [CompletionItemTag.Deprecated]\n            : undefined;\n\n        const documentation = typeof item.documentation !== 'undefined'\n            ? Converter.fromMarkdown(item.documentation)\n            : undefined;\n\n        return {\n            id,\n            parentId,\n            label: item.label,\n            kind: Converter.fromCompletionItemKind(item.kind),\n            detail: item.detail,\n            documentation,\n            filterText: item.filterText,\n            sortText: item.sortText,\n            preselect: item.preselect,\n            insertText,\n            insertTextRules,\n            range,\n            additionalTextEdits: item.additionalTextEdits && item.additionalTextEdits.map(Converter.fromTextEdit),\n            command: this.commands.converter.toSafeCommand(item.command, toDispose),\n            commitCharacters: item.commitCharacters,\n            tags\n        };\n    }\n\n    static hasResolveSupport(provider: theia.CompletionItemProvider): boolean {\n        return typeof provider.resolveCompletionItem === 'function';\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, Location, LocationLink } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class DeclarationAdapter {\n\n    constructor(\n        private readonly provider: theia.DeclarationProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideDeclaration(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideDeclaration(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, LocationLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class DefinitionAdapter {\n\n    constructor(\n        private readonly delegate: theia.DefinitionProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    provideDefinition(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.delegate.provideDefinition(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { convertDiagnosticToMarkerData } from '../type-converters';\nimport { DiagnosticSeverity, MarkerSeverity } from '../types-impl';\nimport { MarkerData } from '../../common/plugin-api-rpc-model';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, LanguagesMain } from '../../common/plugin-api-rpc';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { v4 } from 'uuid';\n\nexport class DiagnosticCollection implements theia.DiagnosticCollection {\n    private static DIAGNOSTICS_PRIORITY = [\n        DiagnosticSeverity.Error, DiagnosticSeverity.Warning, DiagnosticSeverity.Information, DiagnosticSeverity.Hint\n    ];\n\n    private collectionName: string;\n    private diagnosticsLimitPerResource: number;\n    private proxy: LanguagesMain;\n    private onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>;\n\n    private diagnostics: Map<string, theia.Diagnostic[]>; // uri -> diagnostics\n    private isDisposed: boolean;\n    private onDisposeCallback: (() => void) | undefined;\n\n    constructor(name: string, maxCountPerFile: number, proxy: LanguagesMain, onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>) {\n        this.collectionName = name;\n        this.diagnosticsLimitPerResource = maxCountPerFile;\n        this.proxy = proxy;\n        this.onDidChangeDiagnosticsEmitter = onDidChangeDiagnosticsEmitter;\n\n        this.diagnostics = new Map<string, theia.Diagnostic[]>();\n        this.isDisposed = false;\n        this.onDisposeCallback = undefined;\n    }\n\n    get name(): string {\n        return this.collectionName;\n    }\n\n    set(uri: theia.Uri, diagnostics: theia.Diagnostic[] | undefined): void;\n    set(entries: [theia.Uri, theia.Diagnostic[] | undefined][]): void;\n    set(arg: theia.Uri | [theia.Uri, theia.Diagnostic[] | undefined][], diagnostics?: theia.Diagnostic[] | undefined): void {\n        this.ensureNotDisposed();\n\n        if (arg instanceof URI) {\n            this.setDiagnosticsForUri(arg, diagnostics);\n        } else if (!arg) {\n            this.clear();\n        } else if (arg instanceof Array) {\n            this.setDiagnostics(arg);\n        }\n    }\n\n    private setDiagnosticsForUri(uri: URI, diagnostics?: theia.Diagnostic[]): void {\n        if (!diagnostics) {\n            this.diagnostics.delete(uri.toString());\n        } else {\n            this.diagnostics.set(uri.toString(), diagnostics);\n        }\n        this.fireDiagnosticChangeEvent(uri);\n        this.sendChangesToEditor([uri]);\n    }\n\n    private setDiagnostics(entries: [URI, theia.Diagnostic[] | undefined][]): void {\n        const delta: URI[] = [];\n\n        // clear old diagnostics for given resources\n        for (const [uri] of entries) {\n            this.diagnostics.delete(uri.toString());\n        }\n\n        for (const [uri, diagnostics] of entries) {\n            const uriString = uri.toString();\n\n            if (!diagnostics) {\n                // clear existed\n                this.diagnostics.delete(uriString);\n                delta.push(uri);\n            } else {\n                // merge with existed if any\n                const existedDiagnostics = this.diagnostics.get(uriString);\n                if (existedDiagnostics) {\n                    existedDiagnostics.push(...diagnostics);\n                } else {\n                    this.diagnostics.set(uriString, diagnostics);\n                }\n            }\n\n            if (delta.indexOf(uri) === -1) {\n                delta.push(uri);\n            }\n        }\n\n        this.fireDiagnosticChangeEvent(delta);\n        this.sendChangesToEditor(delta);\n    }\n\n    delete(uri: URI): void {\n        if (this.has(uri)) {\n            this.fireDiagnosticChangeEvent(uri);\n            this.diagnostics.delete(uri.toString());\n            this.proxy.$changeDiagnostics(this.name, [[uri.toString(), []]]);\n        }\n    }\n\n    clear(): void {\n        this.ensureNotDisposed();\n        this.fireDiagnosticChangeEvent(this.getAllResourcesUris());\n        this.diagnostics.clear();\n        this.proxy.$clearDiagnostics(this.name);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    forEach(callback: (uri: URI, diagnostics: theia.Diagnostic[], collection: theia.DiagnosticCollection) => any, thisArg?: any): void {\n        this.ensureNotDisposed();\n        this.diagnostics.forEach((diagnostics, uriString) => {\n            const uri = URI.parse(uriString);\n            callback.apply(thisArg, [uri, this.getDiagnosticsByUri(uri), this]);\n        });\n    }\n\n    get(uri: URI): theia.Diagnostic[] | undefined {\n        this.ensureNotDisposed();\n        return this.getDiagnosticsByUri(uri);\n    }\n\n    has(uri: URI): boolean {\n        this.ensureNotDisposed();\n        return (this.diagnostics.get(uri.toString()) instanceof Array);\n    }\n\n    dispose(): void {\n        if (!this.isDisposed) {\n            if (this.onDisposeCallback) {\n                this.onDisposeCallback();\n            }\n            this.clear();\n            this.isDisposed = true;\n        }\n    }\n\n    setOnDisposeCallback(onDisposeCallback: (() => void) | undefined): void {\n        this.onDisposeCallback = onDisposeCallback;\n    }\n\n    private ensureNotDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('Diagnostic collection with name \"' + this.name + '\" is already disposed.');\n        }\n    }\n\n    private getAllResourcesUris(): string[] {\n        const resourcesUris: string[] = [];\n        this.diagnostics.forEach((diagnostics, uri) => resourcesUris.push(uri));\n        return resourcesUris;\n    }\n\n    private getDiagnosticsByUri(uri: URI): theia.Diagnostic[] | undefined {\n        const diagnostics = this.diagnostics.get(uri.toString());\n        return (diagnostics instanceof Array) ? <theia.Diagnostic[]>Object.freeze(diagnostics) : undefined;\n    }\n\n    private fireDiagnosticChangeEvent(arg: string | string[] | URI | URI[]): void {\n        this.onDidChangeDiagnosticsEmitter.fire({ uris: this.toUrisArray(arg) });\n    }\n\n    private toUrisArray(arg: string | string[] | URI | URI[]): URI[] {\n        if (arg instanceof Array) {\n            if (arg.length === 0) {\n                return [];\n            }\n\n            if (arg[0] instanceof URI) {\n                return arg as URI[];\n            } else {\n                const result: URI[] = [];\n                for (const uriString of arg as string[]) {\n                    result.push(URI.parse(uriString));\n                }\n                return result;\n            }\n        } else {\n            if (arg instanceof URI) {\n                return [arg];\n            } else {\n                return [URI.parse(arg)];\n            }\n        }\n    }\n\n    private sendChangesToEditor(uris: URI[]): void {\n        const markers: [string, MarkerData[]][] = [];\n        nextUri:\n        for (const uri of uris) {\n            const uriMarkers: MarkerData[] = [];\n            const uriDiagnostics = this.diagnostics.get(uri.toString());\n            if (uriDiagnostics) {\n                if (uriDiagnostics.length > this.diagnosticsLimitPerResource) {\n                    for (const severity of DiagnosticCollection.DIAGNOSTICS_PRIORITY) {\n                        for (const diagnostic of uriDiagnostics) {\n                            if (severity === diagnostic.severity) {\n                                if (uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)) + 1 === this.diagnosticsLimitPerResource) {\n                                    const lastMarker = uriMarkers[uriMarkers.length - 1];\n                                    uriMarkers.push({\n                                        severity: MarkerSeverity.Info,\n                                        message: 'Limit of diagnostics is reached. ' + (uriDiagnostics.length - this.diagnosticsLimitPerResource) + ' items are hidden',\n                                        startLineNumber: lastMarker.startLineNumber,\n                                        startColumn: lastMarker.startColumn,\n                                        endLineNumber: lastMarker.endLineNumber,\n                                        endColumn: lastMarker.endColumn\n                                    });\n                                    markers.push([uri.toString(), uriMarkers]);\n                                    continue nextUri;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    uriDiagnostics.forEach(diagnostic => uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)));\n                    markers.push([uri.toString(), uriMarkers]);\n                }\n            } else {\n                markers.push([uri.toString(), []]);\n            }\n        }\n\n        this.proxy.$changeDiagnostics(this.name, markers);\n    }\n}\n\nexport class Diagnostics {\n    public static MAX_DIAGNOSTICS_PER_FILE = 1000;\n    private static GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX = '_generated_diagnostic_collection_name_#';\n\n    private proxy: LanguagesMain;\n    private diagnosticCollections: Map<string, DiagnosticCollection>; // id -> diagnostic collection\n\n    private diagnosticsChangedEmitter = new Emitter<theia.DiagnosticChangeEvent>();\n    public readonly onDidChangeDiagnostics: Event<theia.DiagnosticChangeEvent> = this.diagnosticsChangedEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n\n        this.diagnosticCollections = new Map<string, DiagnosticCollection>();\n    }\n\n    getDiagnostics(resource: theia.Uri): theia.Diagnostic[];\n    getDiagnostics(): [theia.Uri, theia.Diagnostic[]][];\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        if (resource) {\n            return this.getAllDiagnosticsForResource(resource);\n        } else {\n            return this.getAllDiagnostics();\n        }\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        if (!name) {\n            do {\n                name = Diagnostics.GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX + this.getNextId();\n            } while (this.diagnosticCollections.has(name));\n        } else if (this.diagnosticCollections.has(name)) {\n            console.warn(`Diagnostic collection with name '${name}' already exist.`);\n        }\n\n        const diagnosticCollection = new DiagnosticCollection(name, Diagnostics.MAX_DIAGNOSTICS_PER_FILE, this.proxy, this.diagnosticsChangedEmitter);\n        diagnosticCollection.setOnDisposeCallback(() => {\n            this.diagnosticCollections.delete(name!);\n        });\n        this.diagnosticCollections.set(name, diagnosticCollection);\n        return diagnosticCollection;\n    }\n\n    private getNextId(): string {\n        return v4();\n    }\n\n    private getAllDiagnosticsForResource(uri: URI): theia.Diagnostic[] {\n        let result: theia.Diagnostic[] = [];\n        this.diagnosticCollections.forEach(diagnosticCollection => {\n            const diagnostics = diagnosticCollection.get(uri);\n            if (diagnostics) {\n                result = result.concat(...diagnostics);\n            }\n        });\n        return result;\n    }\n\n    private getAllDiagnostics(): [URI, theia.Diagnostic[]][] {\n        const result: [URI, theia.Diagnostic[]][] = [];\n        // Holds uri index in result array of tuples.\n        const urisIndexes = new Map<string, number>();\n        let nextIndex = 0;\n        this.diagnosticCollections.forEach(diagnosticsCollection =>\n            diagnosticsCollection.forEach((uri, diagnostics) => {\n                let uriIndex = urisIndexes.get(uri.toString());\n                if (uriIndex === undefined) {\n                    uriIndex = nextIndex++;\n                    urisIndexes.set(uri.toString(), uriIndex);\n                    result.push([uri, [...diagnostics]]);\n                } else {\n                    result[uriIndex][1] = result[uriIndex][1].concat(...diagnostics);\n                }\n            })\n        );\n        return result;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport * as theia from '@theia/plugin';\nimport { DataTransferDTO, DocumentDropEdit } from '../../common/plugin-api-rpc-model';\nimport { CancellationToken } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { Position } from '../../common/plugin-api-rpc';\nimport * as Converter from '../type-converters';\nimport { DocumentsExtImpl } from '../documents';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FileSystemExtImpl } from '../file-system-ext-impl';\nimport * as os from 'os';\nimport * as path from 'path';\n\nexport class DocumentDropEditAdapter {\n    constructor(private readonly provider: theia.DocumentDropEditProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly fileSystem: FileSystemExtImpl) { }\n\n    async provideDocumentDropEdits(resource: URI, position: Position, dataTransfer: DataTransferDTO, token: CancellationToken): Promise<DocumentDropEdit | undefined> {\n        return this.provider.provideDocumentDropEdits(\n            this.documents.getDocument(resource),\n            Converter.toPosition(position),\n            Converter.DataTransfer.toDataTransfer(dataTransfer, itemId => this.resolveFileData(itemId)),\n            token) as DocumentDropEdit | undefined;\n    }\n\n    private async resolveFileData(itemId: string): Promise<Uint8Array> {\n        const filePath = URI.file(path.resolve(os.tmpdir(), 'theia_upload', itemId));\n        return this.fileSystem.fileSystem.readFile(filePath);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FormattingOptions, TextEdit } from '../../common/plugin-api-rpc-model';\n\nexport class DocumentFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentFormattingEdits(resource: URI, options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideDocumentFormattingEdits(doc, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { DocumentHighlight } from '../../common/plugin-api-rpc-model';\n\nexport class DocumentHighlightAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentHighlightProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideDocumentHighlights(resource: URI, position: Position, token: theia.CancellationToken): Promise<DocumentHighlight[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideDocumentHighlights(document, zeroBasedPosition, token)).then(documentHighlights => {\n            if (!documentHighlights) {\n                return undefined;\n            }\n\n            if (this.isDocumentHighlightArray(documentHighlights)) {\n                const highlights: DocumentHighlight[] = [];\n\n                for (const highlight of documentHighlights) {\n                    highlights.push(Converter.fromDocumentHighlight(highlight));\n                }\n\n                return highlights;\n            }\n        });\n    }\n\n    private isDocumentHighlightArray(array: unknown): array is types.DocumentHighlight[] {\n        return Array.isArray(array) && array.length > 0 && array[0] instanceof types.DocumentHighlight;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { EvaluatableExpression } from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\n\nexport class EvaluatableExpressionAdapter {\n\n    constructor(\n        private readonly provider: theia.EvaluatableExpressionProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    async provideEvaluatableExpression(resource: URI, position: Position, token: theia.CancellationToken): Promise<EvaluatableExpression | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document data for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideEvaluatableExpression(document, pos, token)).then(expression => {\n            if (!expression) {\n                return undefined;\n            }\n            return Converter.fromEvaluatableExpression(expression);\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as Converter from '../type-converters';\nimport * as model from '../../common/plugin-api-rpc-model';\n\nexport class FoldingProviderAdapter {\n\n    constructor(\n        private readonly provider: theia.FoldingRangeProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideFoldingRanges(resource: URI, context: model.FoldingContext, token: theia.CancellationToken): Promise<model.FoldingRange[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideFoldingRanges(doc, context, token)).then(ranges => {\n            if (!Array.isArray(ranges)) {\n                return undefined;\n            }\n\n            return ranges.map(Converter.fromFoldingRange);\n        });\n    }\n}\n","\n// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { Hover } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { Range } from '../types-impl';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class HoverAdapter {\n\n    constructor(\n        private readonly provider: theia.HoverProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    public provideHover(resource: URI, position: Position, token: theia.CancellationToken): Promise<Hover | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideHover(doc, pos, token)).then(value => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (!value || !Array.isArray(value.contents) || (value.contents as Array<any>).length === 0) {\n                return undefined;\n            }\n            if (!value.range) {\n                value.range = doc.getWordRangeAtPosition(pos);\n            }\n            if (!value.range) {\n                value.range = new Range(pos, pos);\n            }\n\n            return Converter.fromHover(value);\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, LocationLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class ImplementationAdapter {\n\n    constructor(\n        private readonly provider: theia.ImplementationProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideImplementation(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideImplementation(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.65.0/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L1178-L1288\n\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport { Cache } from '../../common/cache';\nimport { ChainedCacheId, InlayHint, InlayHintLabelPart, Range } from '../../common/plugin-api-rpc-model';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { DocumentsExtImpl } from '../documents';\nimport { InlayHintDto, InlayHintsDto } from '../../common';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { isLocationArray } from './util';\n\nexport class InlayHintsAdapter {\n\n    private cache = new Cache<theia.InlayHint>('InlayHints');\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly provider: theia.InlayHintsProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    async provideInlayHints(resource: URI, range: Range, token: theia.CancellationToken): Promise<InlayHintsDto | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no documents for ${resource}`));\n        }\n\n        const doc = documentData.document;\n        const ran = Converter.toRange(range);\n        const hints = await this.provider.provideInlayHints(doc, ran, token);\n\n        if (!Array.isArray(hints) || hints.length === 0) {\n            return undefined;\n        }\n\n        if (token.isCancellationRequested) {\n            return undefined;\n        }\n\n        const pid = this.cache.add(hints);\n        this.disposables.set(pid, new DisposableCollection());\n        const result: InlayHintsDto = { hints: [], cacheId: pid };\n\n        for (let i = 0; i < hints.length; i++) {\n            if (this.isValidInlayHint(hints[i], ran)) {\n                result.hints.push(this.convertInlayHint(hints[i], [pid, i]));\n            }\n        }\n\n        return result;\n    }\n\n    async resolveInlayHint(id: ChainedCacheId, token: theia.CancellationToken): Promise<InlayHint | undefined> {\n        if (typeof this.provider.resolveInlayHint !== 'function') {\n            return undefined;\n        }\n        const item = this.cache.get(...id);\n        if (!item) {\n            return undefined;\n        }\n        const hint = await this.provider.resolveInlayHint!(item, token);\n        if (!hint) {\n            return undefined;\n        }\n        if (!this.isValidInlayHint(hint)) {\n            return undefined;\n        }\n        return this.convertInlayHint(hint, id);\n    }\n\n    private isValidInlayHint(hint: theia.InlayHint, range?: theia.Range): boolean {\n        if (hint.label.length === 0 || Array.isArray(hint.label) && hint.label.every(part => part.value.length === 0)) {\n            return false;\n        }\n        if (range && !range.contains(hint.position)) {\n            return false;\n        }\n        return true;\n    }\n\n    private convertInlayHint(hint: theia.InlayHint, id: ChainedCacheId): InlayHintDto {\n\n        const disposables = this.disposables.get(id[0]);\n        if (!disposables) {\n            throw Error('DisposableCollection is missing...');\n        }\n\n        const result: InlayHintDto = {\n            label: '', // fill-in below.\n            cacheId: id,\n            tooltip: hint.tooltip,\n            position: Converter.fromPosition(hint.position),\n            textEdits: hint.textEdits && hint.textEdits.map(Converter.fromTextEdit),\n            kind: hint.kind && Converter.InlayHintKind.from(hint.kind),\n            paddingLeft: hint.paddingLeft,\n            paddingRight: hint.paddingRight,\n        };\n\n        if (typeof hint.label === 'string') {\n            result.label = hint.label;\n        } else {\n            result.label = hint.label.map(part => {\n                const partResult: InlayHintLabelPart = { label: part.value };\n                if (part.tooltip) {\n                    partResult.tooltip = typeof partResult === 'string' ? part.tooltip : Converter.fromMarkdown(part.tooltip);\n                }\n                if (isLocationArray(part.location)) {\n                    partResult.location = Converter.fromLocation(part.location);\n                }\n                if (part.command) {\n                    partResult.command = this.commands.converter.toSafeCommand(part.command, disposables);\n                }\n                return partResult;\n            });\n        }\n\n        return result;\n    }\n\n    async releaseHints(id: number): Promise<void> {\n        this.disposables.get(id)?.dispose();\n        this.disposables.delete(id);\n        this.cache.delete(id);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// copied from https://github.com/microsoft/vscode/blob/6261075646f055b99068d3688932416f2346dd3b/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L1069-L1185.\n\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport { DocumentsExtImpl } from '../documents';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { ReferenceMap } from '../../common/reference-map';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { InlineCompletionTriggerKind as TriggerKind } from '../../plugin/types-impl';\nimport { Command, InlineCompletionContext, InlineCompletionTriggerKind } from '../../common/plugin-api-rpc-model';\nimport { IdentifiableInlineCompletion, IdentifiableInlineCompletions, Position } from '../../common/plugin-api-rpc';\n\nexport class InlineCompletionAdapterBase {\n\n    async provideInlineCompletions(\n        _resource: URI,\n        _position: Position,\n        _context: InlineCompletionContext,\n        _token: theia.CancellationToken\n    ): Promise<IdentifiableInlineCompletions | undefined> {\n        return undefined;\n    }\n\n    disposeCompletions(pid: number): void { return; };\n}\n\nexport class InlineCompletionAdapter extends InlineCompletionAdapterBase {\n\n    private readonly references = new ReferenceMap<{\n        dispose(): void;\n        items: readonly theia.InlineCompletionItem[];\n    }>();\n\n    constructor(\n        private readonly documents: DocumentsExtImpl,\n        private readonly provider: theia.InlineCompletionItemProvider,\n        private readonly commands: CommandRegistryImpl,\n    ) {\n        super();\n    }\n\n    private readonly languageTriggerKindToVSCodeTriggerKind: Record<InlineCompletionTriggerKind, TriggerKind> = {\n        [InlineCompletionTriggerKind.Automatic]: TriggerKind.Automatic,\n        [InlineCompletionTriggerKind.Explicit]: TriggerKind.Invoke,\n    };\n\n    override async provideInlineCompletions(\n        resource: URI,\n        position: Position,\n        context: InlineCompletionContext,\n        token: theia.CancellationToken\n    ): Promise<IdentifiableInlineCompletions | undefined> {\n        const doc = this.documents.getDocument(resource);\n        const pos = Converter.toPosition(position);\n\n        const result = await this.provider.provideInlineCompletionItems(doc, pos, {\n            selectedCompletionInfo:\n                context.selectedSuggestionInfo\n                    ? {\n                        range: Converter.toRange(context.selectedSuggestionInfo.range),\n                        text: context.selectedSuggestionInfo.text\n                    }\n                    : undefined,\n            triggerKind: this.languageTriggerKindToVSCodeTriggerKind[context.triggerKind]\n        }, token);\n\n        if (!result || token.isCancellationRequested) {\n            return undefined;\n        }\n\n        const normalizedResult = Array.isArray(result) ? result : result.items;\n\n        let disposableCollection: DisposableCollection | undefined = undefined;\n        const pid = this.references.createReferenceId({\n            dispose(): void {\n                disposableCollection?.dispose();\n            },\n            items: normalizedResult\n        });\n\n        return {\n            pid,\n            items: normalizedResult.map<IdentifiableInlineCompletion>((item, idx) => {\n                let command: Command | undefined = undefined;\n                if (item.command) {\n                    if (!disposableCollection) {\n                        disposableCollection = new DisposableCollection();\n                    }\n                    command = this.commands.converter.toSafeCommand(item.command, disposableCollection);\n                }\n\n                const insertText = item.insertText;\n                return ({\n                    insertText: typeof insertText === 'string' ? insertText : { snippet: insertText.value },\n                    filterText: item.filterText,\n                    range: item.range ? Converter.fromRange(item.range) : undefined,\n                    command,\n                    idx: idx\n                });\n            })\n        };\n    }\n\n    override disposeCompletions(pid: number): void {\n        const data = this.references.disposeReferenceId(pid);\n        data?.dispose();\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2022 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { InlineValue, InlineValueContext, Range } from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\n\nexport class InlineValuesAdapter {\n\n    constructor(\n        private readonly provider: theia.InlineValuesProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    async provideInlineValues(resource: URI, range: Range, context: InlineValueContext, token: theia.CancellationToken): Promise<InlineValue[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document data for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const viewPort = Converter.toRange(range);\n        const ctx = Converter.toInlineValueContext(context);\n\n        return Promise.resolve(this.provider.provideInlineValues(document, viewPort, ctx, token)).then(inlineValue => {\n            if (!inlineValue) {\n                return undefined;\n            }\n            if (Array.isArray(inlineValue)) {\n                return inlineValue.map(iv => Converter.fromInlineValue(iv));\n            }\n            return undefined;\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { CodeLensSymbol } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\n/** Adapts the calls from main to extension thread for providing/resolving the code lenses. */\nexport class CodeLensAdapter {\n\n    private static readonly BAD_CMD: theia.Command = { command: 'missing', title: '<<MISSING COMMAND>>' };\n\n    private cacheId = 0;\n    private readonly cache = new Map<number, theia.CodeLens>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly provider: theia.CodeLensProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    provideCodeLenses(resource: URI, token: theia.CancellationToken): Promise<CodeLensSymbol[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideCodeLenses(doc, token)).then(lenses => {\n            if (Array.isArray(lenses)) {\n                return lenses.map(lens => {\n                    const cacheId = this.cacheId++;\n                    const toDispose = new DisposableCollection();\n                    const lensSymbol = ObjectIdentifier.mixin({\n                        range: Converter.fromRange(lens.range)!,\n                        command: this.commands.converter.toSafeCommand(lens.command, toDispose)\n                    }, cacheId);\n                    this.cache.set(cacheId, lens);\n                    this.disposables.set(cacheId, toDispose);\n                    return lensSymbol;\n                });\n            }\n            return undefined;\n        });\n    }\n\n    async resolveCodeLens(resource: URI, symbol: CodeLensSymbol, token: theia.CancellationToken): Promise<CodeLensSymbol | undefined> {\n        const cacheId = ObjectIdentifier.of(symbol);\n        const lens = this.cache.get(cacheId);\n        if (!lens) {\n            return undefined;\n        }\n\n        let newLens: theia.CodeLens | undefined | null;\n        if (typeof this.provider.resolveCodeLens === 'function' && !lens.isResolved) {\n            newLens = await this.provider.resolveCodeLens(lens, token);\n            if (token.isCancellationRequested) {\n                return undefined;\n            }\n        }\n        newLens = newLens || lens;\n\n        const disposables = this.disposables.get(cacheId);\n        if (!disposables) {\n            // already been disposed of\n            return undefined;\n        }\n        symbol.command = this.commands.converter.toSafeCommand(newLens.command ? newLens.command : CodeLensAdapter.BAD_CMD, disposables);\n        return symbol;\n    }\n\n    releaseCodeLenses(ids: number[]): void {\n        ids.forEach(id => {\n            this.cache.delete(id);\n            const toDispose = this.disposables.get(id);\n            if (toDispose) {\n                toDispose.dispose();\n                this.disposables.delete(id);\n            }\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { DocumentLink } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\n\nexport class LinkProviderAdapter {\n    private cacheId = 0;\n    private cache = new Map<number, theia.DocumentLink>();\n\n    constructor(\n        private readonly provider: theia.DocumentLinkProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideLinks(resource: URI, token: theia.CancellationToken): Promise<DocumentLink[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentLinks(doc, token)).then(links => {\n            if (!Array.isArray(links)) {\n                return undefined;\n            }\n            const result: DocumentLink[] = [];\n            for (const link of links) {\n                const data = Converter.DocumentLink.from(link);\n                const id = this.cacheId++;\n                ObjectIdentifier.mixin(data, id);\n                this.cache.set(id, link);\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    resolveLink(link: DocumentLink, token: theia.CancellationToken): Promise<DocumentLink | undefined> {\n        if (typeof this.provider.resolveDocumentLink !== 'function') {\n            return Promise.resolve(undefined);\n        }\n        const id = ObjectIdentifier.of(link);\n        const item = this.cache.get(id);\n        if (!item) {\n            return Promise.resolve(undefined);\n        }\n        return Promise.resolve(this.provider.resolveDocumentLink(item, token)).then(value => {\n            if (value) {\n                return Converter.DocumentLink.from(value);\n            }\n            return undefined;\n        });\n    }\n\n    releaseDocumentLinks(ids: number[]): void {\n        ids.forEach(id => {\n            this.cache.delete(id);\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport * as rpc from '../../common/plugin-api-rpc';\nimport { DocumentsExtImpl } from '../documents';\nimport { LinkedEditingRanges } from '../../common/plugin-api-rpc-model';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { coalesce } from '../../common/arrays';\nimport { fromRange, toPosition } from '../type-converters';\nimport { serializeRegExp } from '../languages-utils';\n\nexport class LinkedEditingRangeAdapter {\n\n    constructor(\n        private readonly documents: DocumentsExtImpl,\n        private readonly provider: theia.LinkedEditingRangeProvider\n    ) { }\n\n    async provideRanges(resource: URI, position: rpc.Position, token: theia.CancellationToken): Promise<LinkedEditingRanges | undefined> {\n\n        const doc = this.documents.getDocument(resource);\n        const pos = toPosition(position);\n\n        const value = await this.provider.provideLinkedEditingRanges(doc, pos, token);\n        if (value && Array.isArray(value.ranges)) {\n            return {\n                ranges: coalesce(value.ranges.map(r => fromRange(r))),\n                wordPattern: serializeRegExp(value.wordPattern)\n            };\n        }\n        return undefined;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FormattingOptions, TextEdit } from '../../common/plugin-api-rpc-model';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class OnTypeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.OnTypeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideOnTypeFormattingEdits(resource: URI, position: Position, ch: string,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideOnTypeFormattingEdits(doc, pos, ch, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { DocumentSymbol, Range } from '../../common/plugin-api-rpc-model';\nimport * as types from '../types-impl';\n\n/** Adapts the calls from main to extension thread for providing the document symbols. */\nexport class OutlineAdapter {\n\n    constructor(\n        private readonly documents: DocumentsExtImpl,\n        private readonly provider: theia.DocumentSymbolProvider\n    ) { }\n\n    provideDocumentSymbols(resource: URI, token: theia.CancellationToken): Promise<DocumentSymbol[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentSymbols(doc, token)).then(value => {\n            if (!value || value.length === 0) {\n                return undefined;\n            }\n            if (value[0] instanceof types.DocumentSymbol) {\n                return (<types.DocumentSymbol[]>value).map(Converter.fromDocumentSymbol);\n            } else {\n                return OutlineAdapter.asDocumentSymbolTree(resource, <types.SymbolInformation[]>value);\n            }\n        });\n    }\n\n    private static asDocumentSymbolTree(resource: URI, infos: types.SymbolInformation[]): DocumentSymbol[] {\n        // first sort by start (and end) and then loop over all elements\n        // and build a tree based on containment.\n        infos = infos.slice(0).sort((a, b) => {\n            let r = a.location.range.start.compareTo(b.location.range.start);\n            if (r === 0) {\n                r = b.location.range.end.compareTo(a.location.range.end);\n            }\n            return r;\n        });\n        const res: DocumentSymbol[] = [];\n        const parentStack: DocumentSymbol[] = [];\n        for (const info of infos) {\n            const element = <DocumentSymbol>{\n                name: info.name,\n                detail: '',\n                kind: Converter.SymbolKind.fromSymbolKind(info.kind),\n                containerName: info.containerName,\n                range: Converter.fromRange(info.location.range),\n                selectionRange: Converter.fromRange(info.location.range),\n                children: [],\n                tags: info.tags && info.tags.length > 0 ? info.tags.map(Converter.fromSymbolTag) : [],\n            };\n\n            while (true) {\n                if (parentStack.length === 0) {\n                    parentStack.push(element);\n                    res.push(element);\n                    break;\n                }\n                const parent = parentStack[parentStack.length - 1];\n                if (OutlineAdapter.containsRange(parent.range, element.range) && !OutlineAdapter.equalsRange(parent.range, element.range)) {\n                    parent.children!.push(element);\n                    parentStack.push(element);\n                    break;\n                }\n                parentStack.pop();\n            }\n        }\n        return res;\n    }\n\n    /**\n     * Test if `otherRange` is in `range`. If the ranges are equal, will return true.\n     */\n    private static containsRange(range: Range, otherRange: Range): boolean {\n        if (otherRange.startLineNumber < range.startLineNumber || otherRange.endLineNumber < range.startLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber > range.endLineNumber || otherRange.endLineNumber > range.endLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber === range.startLineNumber && otherRange.startColumn < range.startColumn) {\n            return false;\n        }\n        if (otherRange.endLineNumber === range.endLineNumber && otherRange.endColumn > range.endColumn) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Test if range `a` equals `b`.\n     */\n    private static equalsRange(a: Range, b: Range): boolean {\n        return (\n            !!a &&\n            !!b &&\n            a.startLineNumber === b.startLineNumber &&\n            a.startColumn === b.startColumn &&\n            a.endLineNumber === b.endLineNumber &&\n            a.endColumn === b.endColumn\n        );\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FormattingOptions, TextEdit, Range } from '../../common/plugin-api-rpc-model';\n\nexport class RangeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentRangeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentRangeFormattingEdits(resource: URI, range: Range, options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = Converter.toRange(range);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideDocumentRangeFormattingEdits(doc, ran, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { ReferenceContext, Location } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { isLocationArray } from './util';\n\nexport class ReferenceAdapter {\n\n    constructor(\n        private readonly provider: theia.ReferenceProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideReferences(resource: URI, position: Position, context: ReferenceContext, token: theia.CancellationToken): Promise<Location[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideReferences(document, zeroBasedPosition, context, token)).then(reference => {\n            if (!reference) {\n                return undefined;\n            }\n\n            if (isLocationArray(reference)) {\n                const locations: Location[] = [];\n\n                for (const location of reference) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport { Position, WorkspaceEditDto } from '../../common/plugin-api-rpc';\nimport { Range } from '../types-impl';\nimport { isObject } from '../../common/types';\n\nexport class RenameAdapter {\n\n    static supportsResolving(provider: theia.RenameProvider): boolean {\n        return typeof provider.prepareRename === 'function';\n    }\n\n    constructor(\n        private readonly provider: theia.RenameProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideRenameEdits(resource: URI, position: Position, newName: string, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(\n            this.provider.provideRenameEdits(doc, pos, newName, token)\n        ).then(value => {\n            if (!value) {\n                return undefined;\n            }\n\n            return Converter.fromWorkspaceEdit(value);\n        }, error => {\n            const rejectReason = RenameAdapter.asMessage(error);\n            if (rejectReason) {\n                return <WorkspaceEditDto>{\n                    rejectReason,\n                    edits: []\n                };\n            } else {\n                return Promise.reject<WorkspaceEditDto>(error);\n            }\n        });\n    }\n\n    resolveRenameLocation(resource: URI, position: Position, token: theia.CancellationToken): Promise<model.RenameLocation & model.Rejection | undefined> {\n        if (typeof this.provider.prepareRename !== 'function') {\n            return Promise.resolve(undefined);\n        }\n\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(\n            this.provider.prepareRename(doc, pos, token)\n        ).then(rangeOrLocation => {\n\n            let range: theia.Range | undefined;\n            let text: string;\n            if (rangeOrLocation && Range.isRange(rangeOrLocation)) {\n                range = rangeOrLocation;\n                text = doc.getText(rangeOrLocation);\n            } else if (rangeOrLocation && isObject(rangeOrLocation)) {\n                range = rangeOrLocation.range;\n                text = rangeOrLocation.placeholder;\n            }\n\n            if (!range) {\n                return undefined;\n            }\n            if (range.start.line > pos.line || range.end.line < pos.line) {\n                console.warn('INVALID rename location: position line must be within range start/end lines');\n                return undefined;\n            }\n            return {\n                range: Converter.fromRange(range)!,\n                text: text!\n            };\n        }, error => {\n            const rejectReason = RenameAdapter.asMessage(error);\n            if (rejectReason) {\n                return Promise.resolve(<model.RenameLocation & model.Rejection>{\n                    rejectReason,\n                    range: undefined!,\n                    text: undefined!\n                });\n            } else {\n                return Promise.reject(error);\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private static asMessage(err: any): string | undefined {\n        if (typeof err === 'string') {\n            return err;\n        } else if (err instanceof Error && typeof err.message === 'string') {\n            return err.message;\n        } else {\n            return undefined;\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/standalone/0.19.x/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L1107-L1151\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport * as types from '../types-impl';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class SelectionRangeProviderAdapter {\n\n    constructor(\n        private readonly provider: theia.SelectionRangeProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideSelectionRanges(resource: URI, position: Position[], token: theia.CancellationToken): Promise<model.SelectionRange[][]> {\n        const documentData = this.documents.getDocumentData(resource);\n\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const document = documentData.document;\n        const positions = position.map(pos => Converter.toPosition(pos));\n\n        return Promise.resolve(this.provider.provideSelectionRanges(document, positions, token)).then(allProviderRanges => {\n            if (!Array.isArray(allProviderRanges) || allProviderRanges.length === 0) {\n                return [];\n            }\n\n            if (allProviderRanges.length !== positions.length) {\n                return [];\n            }\n\n            const allResults: model.SelectionRange[][] = [];\n            for (let i = 0; i < positions.length; i++) {\n                const oneResult: model.SelectionRange[] = [];\n                allResults.push(oneResult);\n\n                let last: types.Position | theia.Range = positions[i];\n                let selectionRange = allProviderRanges[i];\n\n                while (true) {\n                    if (!selectionRange.range.contains(last)) {\n                        return Promise.reject(new Error('INVALID selection range, must contain the previous range'));\n                    }\n                    oneResult.push(Converter.fromSelectionRange(selectionRange));\n                    if (!selectionRange.parent) {\n                        break;\n                    }\n                    last = selectionRange.range;\n                    selectionRange = selectionRange.parent;\n                }\n            }\n            return allResults;\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/0eb3a02ca2bcfab5faa3dc6e52d7c079efafcab0/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L692-L869\n\n/* eslint-disable @typescript-eslint/consistent-type-definitions */\n\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { SemanticTokens, SemanticTokensEdit, SemanticTokensEdits } from '../types-impl';\nimport { DocumentsExtImpl } from '../documents';\nimport { toRange } from '../type-converters';\nimport { encodeSemanticTokensDto } from '../../common/semantic-tokens-dto';\nimport { Range } from '../../common/plugin-api-rpc-model';\n\nclass SemanticTokensPreviousResult {\n    constructor(\n        public readonly resultId: string | undefined,\n        public readonly tokens?: Uint32Array,\n    ) { }\n}\n\ntype RelaxedSemanticTokens = { readonly resultId?: string; readonly data: number[]; };\ntype RelaxedSemanticTokensEdit = { readonly start: number; readonly deleteCount: number; readonly data?: number[]; };\ntype RelaxedSemanticTokensEdits = { readonly resultId?: string; readonly edits: RelaxedSemanticTokensEdit[]; };\n\ntype ProvidedSemanticTokens = theia.SemanticTokens | RelaxedSemanticTokens;\ntype ProvidedSemanticTokensEdits = theia.SemanticTokensEdits | RelaxedSemanticTokensEdits;\n\nexport class DocumentSemanticTokensAdapter {\n\n    private readonly _previousResults: Map<number, SemanticTokensPreviousResult>;\n    private _nextResultId = 1;\n\n    constructor(\n        private readonly _documents: DocumentsExtImpl,\n        private readonly _provider: theia.DocumentSemanticTokensProvider,\n    ) {\n        this._previousResults = new Map<number, SemanticTokensPreviousResult>();\n    }\n\n    async provideDocumentSemanticTokens(resource: URI, previousResultId: number, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        const doc = this._documents.getDocument(resource);\n        const previousResult = (previousResultId !== 0 ? this._previousResults.get(previousResultId) : null);\n        let value: ProvidedSemanticTokens | ProvidedSemanticTokensEdits | null | undefined;\n        if (previousResult && typeof previousResult.resultId === 'string' && typeof this._provider.provideDocumentSemanticTokensEdits === 'function') {\n            value = await this._provider.provideDocumentSemanticTokensEdits(doc, previousResult.resultId, token);\n        } else {\n            value = await this._provider.provideDocumentSemanticTokens(doc, token);\n        }\n        if (previousResult) {\n            this._previousResults.delete(previousResultId);\n        }\n        if (!value) {\n            return null;\n        }\n        value = DocumentSemanticTokensAdapter._fixProvidedSemanticTokens(value);\n        return this._send(DocumentSemanticTokensAdapter._convertToEdits(previousResult, value), value);\n    }\n\n    async releaseDocumentSemanticColoring(semanticColoringResultId: number): Promise<void> {\n        this._previousResults.delete(semanticColoringResultId);\n    }\n\n    private static _fixProvidedSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): theia.SemanticTokens | theia.SemanticTokensEdits {\n        if (DocumentSemanticTokensAdapter._isSemanticTokens(v)) {\n            if (DocumentSemanticTokensAdapter._isCorrectSemanticTokens(v)) {\n                return v;\n            }\n            return new SemanticTokens(new Uint32Array(v.data), v.resultId);\n        } else if (DocumentSemanticTokensAdapter._isSemanticTokensEdits(v)) {\n            if (DocumentSemanticTokensAdapter._isCorrectSemanticTokensEdits(v)) {\n                return v;\n            }\n            return new SemanticTokensEdits(v.edits.map(edit => new SemanticTokensEdit(edit.start, edit.deleteCount, edit.data ?\n                new Uint32Array(edit.data) : edit.data)), v.resultId);\n        }\n        return v;\n    }\n\n    private static _isSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokens {\n        return v && !!((v as ProvidedSemanticTokens).data);\n    }\n\n    private static _isCorrectSemanticTokens(v: ProvidedSemanticTokens): v is theia.SemanticTokens {\n        return (v.data instanceof Uint32Array);\n    }\n\n    private static _isSemanticTokensEdits(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokensEdits {\n        return v && Array.isArray((v as ProvidedSemanticTokensEdits).edits);\n    }\n\n    private static _isCorrectSemanticTokensEdits(v: ProvidedSemanticTokensEdits): v is theia.SemanticTokensEdits {\n        for (const edit of v.edits) {\n            if (!(edit.data instanceof Uint32Array)) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private static _convertToEdits(previousResult: SemanticTokensPreviousResult | null | undefined, newResult: theia.SemanticTokens | theia.SemanticTokensEdits):\n        theia.SemanticTokens | theia.SemanticTokensEdits {\n        if (!DocumentSemanticTokensAdapter._isSemanticTokens(newResult)) {\n            return newResult;\n        }\n        if (!previousResult || !previousResult.tokens) {\n            return newResult;\n        }\n        const oldData = previousResult.tokens;\n        const oldLength = oldData.length;\n        const newData = newResult.data;\n        const newLength = newData.length;\n\n        let commonPrefixLength = 0;\n        const maxCommonPrefixLength = Math.min(oldLength, newLength);\n        while (commonPrefixLength < maxCommonPrefixLength && oldData[commonPrefixLength] === newData[commonPrefixLength]) {\n            commonPrefixLength++;\n        }\n\n        if (commonPrefixLength === oldLength && commonPrefixLength === newLength) {\n            // complete overlap!\n            return new SemanticTokensEdits([], newResult.resultId);\n        }\n\n        let commonSuffixLength = 0;\n        const maxCommonSuffixLength = maxCommonPrefixLength - commonPrefixLength;\n        while (commonSuffixLength < maxCommonSuffixLength && oldData[oldLength - commonSuffixLength - 1] === newData[newLength - commonSuffixLength - 1]) {\n            commonSuffixLength++;\n        }\n\n        return new SemanticTokensEdits([{\n            start: commonPrefixLength,\n            deleteCount: (oldLength - commonPrefixLength - commonSuffixLength),\n            data: newData.subarray(commonPrefixLength, newLength - commonSuffixLength)\n        }], newResult.resultId);\n    }\n\n    private _send(value: theia.SemanticTokens | theia.SemanticTokensEdits, original: theia.SemanticTokens | theia.SemanticTokensEdits): BinaryBuffer | null {\n        if (DocumentSemanticTokensAdapter._isSemanticTokens(value)) {\n            const myId = this._nextResultId++;\n            this._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId, value.data));\n            return encodeSemanticTokensDto({\n                id: myId,\n                type: 'full',\n                data: value.data\n            });\n        }\n\n        if (DocumentSemanticTokensAdapter._isSemanticTokensEdits(value)) {\n            const myId = this._nextResultId++;\n            if (DocumentSemanticTokensAdapter._isSemanticTokens(original)) {\n                // store the original\n                this._previousResults.set(myId, new SemanticTokensPreviousResult(original.resultId, original.data));\n            } else {\n                this._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId));\n            }\n            return encodeSemanticTokensDto({\n                id: myId,\n                type: 'delta',\n                deltas: (value.edits || []).map(edit => ({ start: edit.start, deleteCount: edit.deleteCount, data: edit.data }))\n            });\n        }\n\n        return null;\n    }\n}\n\nexport class DocumentRangeSemanticTokensAdapter {\n\n    constructor(\n        private readonly _documents: DocumentsExtImpl,\n        private readonly _provider: theia.DocumentRangeSemanticTokensProvider,\n    ) {\n    }\n\n    async provideDocumentRangeSemanticTokens(resource: URI, range: Range, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        const doc = this._documents.getDocument(resource);\n        const value = await this._provider.provideDocumentRangeSemanticTokens(doc, toRange(range), token);\n        if (!value) {\n            return null;\n        }\n        return this._send(value);\n    }\n\n    private _send(value: theia.SemanticTokens): BinaryBuffer | null {\n        return encodeSemanticTokensDto({\n            id: 0,\n            type: 'full',\n            data: value.data\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L771\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { SignatureHelp, SignatureHelpContext } from '../../common/plugin-api-rpc-model';\n\nexport class SignatureHelpAdapter {\n\n    private idSequence = 1;\n    private readonly cache = new Map<number, theia.SignatureHelp>();\n\n    constructor(\n        private readonly delegate: theia.SignatureHelpProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    async provideSignatureHelp(resource: URI, position: Position, token: theia.CancellationToken, context: SignatureHelpContext): Promise<SignatureHelp | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n        const pluginHelpContext = this.reviveContext(context);\n\n        const value = await this.delegate.provideSignatureHelp(document, zeroBasedPosition, token, pluginHelpContext);\n        if (!value) {\n            return undefined;\n        }\n        value.activeParameter = value.signatures[value.activeSignature].activeParameter ?? value.activeParameter;\n        const id = this.idSequence++;\n        this.cache.set(id, value);\n        return Converter.SignatureHelp.from(id, value);\n    }\n\n    private reviveContext(context: SignatureHelpContext): theia.SignatureHelpContext {\n        let activeSignatureHelp: theia.SignatureHelp | undefined = undefined;\n        if (context.activeSignatureHelp) {\n            const revivedSignatureHelp = Converter.SignatureHelp.to(context.activeSignatureHelp);\n            const saved = typeof context.activeSignatureHelp.id === 'number' && this.cache.get(context.activeSignatureHelp.id);\n            if (saved) {\n                activeSignatureHelp = saved;\n                activeSignatureHelp.activeSignature = revivedSignatureHelp.activeSignature;\n                const { activeSignature } = revivedSignatureHelp;\n                activeSignatureHelp.activeParameter = revivedSignatureHelp.signatures[activeSignature].activeParameter ?? revivedSignatureHelp.activeParameter;\n            } else {\n                activeSignatureHelp = revivedSignatureHelp;\n            }\n        }\n        return { ...context, activeSignatureHelp };\n    }\n\n    releaseSignatureHelp(id: number): void {\n        this.cache.delete(id);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, LocationLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class TypeDefinitionAdapter {\n\n    constructor(\n        private readonly provider: theia.TypeDefinitionProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideTypeDefinition(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideTypeDefinition(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { IdGenerator } from '../../common/id-generator';\nimport * as rpc from '../../common/plugin-api-rpc';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport { fromRange, SymbolKind } from '../type-converters';\nimport * as types from '../types-impl';\n\nexport class TypeHierarchyAdapter {\n\n    private readonly idGenerator = new IdGenerator('');\n    protected readonly cache = new Map<string, Map<string, theia.TypeHierarchyItem>>();\n\n    constructor(\n        private readonly provider: theia.TypeHierarchyProvider,\n        private readonly documents: DocumentsExtImpl,\n    ) { }\n\n    private fromTypeHierarchyItem(item: theia.TypeHierarchyItem, sessionId: string): model.TypeHierarchyItem {\n        const sessionCache = this.cache.get(sessionId)!;\n        const itemId = sessionCache.size.toString(36);\n\n        const definition: model.TypeHierarchyItem = {\n            _itemId: itemId,\n            _sessionId: sessionId,\n\n            kind: SymbolKind.fromSymbolKind(item.kind),\n            tags: item.tags,\n            name: item.name,\n            detail: item.detail,\n            uri: item.uri,\n\n            range: fromRange(item.range),\n            selectionRange: fromRange(item.selectionRange),\n        };\n        sessionCache.set(itemId, item);\n        return definition;\n    }\n\n    async prepareSession(uri: URI, position: rpc.Position, token: theia.CancellationToken): Promise<model.TypeHierarchyItem[] | undefined> {\n        const documentData = this.documents.getDocumentData(uri);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${uri}`));\n        }\n\n        const definition = await this.provider.prepareTypeHierarchy(documentData.document,\n            new types.Position(\n                position.lineNumber,\n                position.column\n            ),\n            token\n        );\n\n        if (!definition) {\n            return undefined;\n        }\n\n        const sessionId = this.idGenerator.nextId();\n\n        this.cache.set(sessionId, new Map());\n        return Array.isArray(definition) ? definition.map(item => this.fromTypeHierarchyItem(item, sessionId)) : [this.fromTypeHierarchyItem(definition, sessionId)];\n    }\n\n    async provideSupertypes(sessionId: string, itemId: string, token: theia.CancellationToken): Promise<model.TypeHierarchyItem[] | undefined> {\n        const item = this.fetchItemFromCatch(sessionId, itemId);\n        if (!item) {\n            throw new Error('missing type hierarchy item');\n        }\n        const supertypes = await this.provider.provideTypeHierarchySupertypes(item, token);\n        if (!supertypes) {\n            return undefined;\n        }\n        return supertypes.map(supertype => this.fromTypeHierarchyItem(supertype, sessionId));\n    }\n\n    async provideSubtypes(sessionId: string, itemId: string, token: theia.CancellationToken): Promise<model.TypeHierarchyItem[] | undefined> {\n        const item = this.fetchItemFromCatch(sessionId, itemId);\n        if (!item) {\n            throw new Error('missing type hierarchy item');\n        }\n        const subTypes = await this.provider.provideTypeHierarchySubtypes(item, token);\n        if (!subTypes) {\n            return undefined;\n        }\n        return subTypes.map(subtype => this.fromTypeHierarchyItem(subtype, sessionId));\n    }\n\n    private fetchItemFromCatch(sessionId: string, itemId: string): theia.TypeHierarchyItem | undefined {\n        return this.cache.get(sessionId!)?.get(itemId!);\n    }\n\n    releaseSession(session?: string): Promise<boolean> {\n        if (session !== undefined) {\n            return Promise.resolve(this.cache.delete(session));\n        } else {\n            this.cache.clear();\n            return Promise.resolve(true);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport * as types from '../types-impl';\n\nexport function isLocationArray(array: unknown): array is types.Location[] {\n    return Array.isArray(array) && array.length > 0 && array[0] instanceof types.Location;\n}\n\nexport function isDefinitionLinkArray(array: unknown): array is theia.DefinitionLink[] {\n    return Array.isArray(array) && array.length > 0 && array[0].hasOwnProperty('targetUri') && array[0].hasOwnProperty('targetRange');\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { SymbolInformation } from '@theia/core/shared/vscode-languageserver-protocol';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\n\nexport class WorkspaceSymbolAdapter {\n\n    constructor(\n        private readonly provider: theia.WorkspaceSymbolProvider\n    ) { }\n\n    provideWorkspaceSymbols(query: string, token: theia.CancellationToken): Promise<SymbolInformation[]> {\n        return Promise.resolve(this.provider.provideWorkspaceSymbols(query, token)).then(workspaceSymbols => {\n            if (!workspaceSymbols) {\n                return [];\n            }\n\n            const newSymbols: SymbolInformation[] = [];\n            for (const sym of workspaceSymbols) {\n                const convertedSymbol = Converter.fromSymbolInformation(sym);\n                if (convertedSymbol) {\n                    newSymbols.push(convertedSymbol);\n                }\n            }\n            return newSymbols;\n        });\n    }\n\n    resolveWorkspaceSymbol(symbol: SymbolInformation, token: theia.CancellationToken): Promise<SymbolInformation> {\n        if (this.provider.resolveWorkspaceSymbol && typeof this.provider.resolveWorkspaceSymbol === 'function') {\n            const theiaSymbol = Converter.toSymbolInformation(symbol);\n            if (!theiaSymbol) {\n                return Promise.resolve(symbol);\n            } else {\n                return Promise.resolve(this.provider.resolveWorkspaceSymbol(theiaSymbol, token)).then(workspaceSymbol => {\n                    if (!workspaceSymbol) {\n                        return symbol;\n                    }\n\n                    const converted = Converter.fromSymbolInformation(workspaceSymbol);\n                    if (converted) {\n                        return converted;\n                    }\n                    return symbol;\n                });\n            }\n        }\n        return Promise.resolve(symbol);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { nls } from '@theia/core';\nimport { Localization } from '@theia/core/lib/common/i18n/localization';\nimport { LocalizationExt, LocalizationMain, Plugin, PLUGIN_RPC_CONTEXT, StringDetails } from '../common';\nimport { LanguagePackBundle } from '../common/language-pack-service';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { URI } from './types-impl';\n\nexport class LocalizationExtImpl implements LocalizationExt {\n\n    private readonly _proxy: LocalizationMain;\n    private currentLanguage?: string;\n    private isDefaultLanguage = true;\n    private readonly bundleCache = new Map<string, LanguagePackBundle | undefined>();\n\n    constructor(rpc: RPCProtocol) {\n        this._proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LOCALIZATION_MAIN);\n    }\n\n    translateMessage(pluginId: string, details: StringDetails): string {\n        const { message, args, comment } = details;\n        if (this.isDefaultLanguage) {\n            return Localization.format(message, (args ?? {}));\n        }\n\n        let key = message;\n        if (comment && comment.length > 0) {\n            key += `/${Array.isArray(comment) ? comment.join() : comment}`;\n        }\n        const str = this.bundleCache.get(pluginId)?.contents[key];\n        return Localization.format(str ?? message, (args ?? {}));\n    }\n\n    getBundle(pluginId: string): { [key: string]: string } | undefined {\n        return this.bundleCache.get(pluginId)?.contents;\n    }\n\n    getBundleUri(pluginId: string): URI | undefined {\n        const uri = this.bundleCache.get(pluginId)?.uri;\n        return uri ? URI.parse(uri) : undefined;\n    }\n\n    async initializeLocalizedMessages(plugin: Plugin, currentLanguage: string): Promise<void> {\n        this.currentLanguage ??= currentLanguage;\n        this.isDefaultLanguage = this.currentLanguage === nls.defaultLocale;\n\n        if (this.isDefaultLanguage) {\n            return;\n        }\n\n        if (this.bundleCache.has(plugin.model.id)) {\n            return;\n        }\n\n        let bundle: LanguagePackBundle | undefined;\n\n        try {\n            bundle = await this._proxy.$fetchBundle(plugin.model.id);\n        } catch (e) {\n            console.error(`Failed to load translations for ${plugin.model.id}: ${e.message}`);\n            return;\n        }\n\n        this.bundleCache.set(plugin.model.id, bundle);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, MessageRegistryMain, MainMessageOptions, MainMessageType\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { MessageItem, MessageOptions } from '@theia/plugin';\n\nexport class MessageRegistryExt {\n\n    private proxy: MessageRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.MESSAGE_REGISTRY_MAIN);\n    }\n\n    async showMessage(type: MainMessageType, message: string,\n        optionsOrFirstItem?: MessageOptions | string | MessageItem,\n        ...rest: (string | MessageItem)[]): Promise<string | MessageItem | undefined> {\n        const options: MainMessageOptions = {};\n        const actions: MessageItem[] = [];\n        const items: (string | MessageItem)[] = [];\n        const pushItem = (item: string | MessageItem) => {\n            items.push(item);\n            if (typeof item === 'string') {\n                actions.push({ title: item });\n            } else {\n                actions.push({ title: item.title, isCloseAffordance: item.isCloseAffordance });\n                if (item.isCloseAffordance) {\n                    options.onCloseActionHandle = actions.length - 1;\n                }\n            }\n        };\n        if (optionsOrFirstItem) {\n            if (typeof optionsOrFirstItem === 'string' || 'title' in optionsOrFirstItem) {\n                pushItem(optionsOrFirstItem);\n            } else {\n                if ('modal' in optionsOrFirstItem) {\n                    options.modal = optionsOrFirstItem.modal;\n                    if ('detail' in optionsOrFirstItem) {\n                        options.detail = optionsOrFirstItem.detail;\n                    }\n                }\n            }\n        }\n        for (const item of rest) {\n            pushItem(item);\n        }\n        const actionHandle = await this.proxy.$showMessage(type, message, options, actions);\n        return actionHandle !== undefined ? items[actionHandle] : undefined;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Arm and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { PluginDebugAdapterCreator } from '../../debug/plugin-debug-adapter-creator';\nimport * as path from 'path';\nimport * as theia from '@theia/plugin';\nimport { PlatformSpecificAdapterContribution, PluginPackageDebuggersContribution } from '../../../common';\nimport { isWindows, isOSX } from '@theia/core/lib/common/os';\nimport * as net from 'net';\nimport { ChildProcess, spawn, fork, ForkOptions } from 'child_process';\nimport { DebugAdapter } from '@theia/debug/lib/common/debug-model';\nimport { DebugAdapterExecutable, DebugAdapterInlineImplementation, DebugAdapterNamedPipeServer, DebugAdapterServer } from '../../types-impl';\nimport { ProcessDebugAdapter, SocketDebugAdapter } from '@theia/debug/lib/node/stream-debug-adapter';\nconst isElectron = require('is-electron');\n\nexport class NodeDebugAdapterCreator extends PluginDebugAdapterCreator {\n    public override async resolveDebugAdapterExecutable(\n        pluginPath: string,\n        debuggerContribution: PluginPackageDebuggersContribution\n    ): Promise<theia.DebugAdapterExecutable | undefined> {\n        const info = this.toPlatformInfo(debuggerContribution);\n        let program = (info && info.program || debuggerContribution.program);\n        if (!program) {\n            return undefined;\n        }\n        program = path.join(pluginPath, program);\n        const programArgs = info && info.args || debuggerContribution.args || [];\n        let runtime = info && info.runtime || debuggerContribution.runtime;\n        if (runtime && runtime.indexOf('./') === 0) {\n            runtime = path.join(pluginPath, runtime);\n        }\n        const runtimeArgs = info && info.runtimeArgs || debuggerContribution.runtimeArgs || [];\n        const command = runtime ? runtime : program;\n        const args = runtime ? [...runtimeArgs, program, ...programArgs] : programArgs;\n        return {\n            command,\n            args\n        };\n    }\n\n    public override async createDebugAdapter(\n        session: theia.DebugSession,\n        debugConfiguration: theia.DebugConfiguration,\n        executable: theia.DebugAdapterExecutable | undefined,\n        descriptorFactory: theia.DebugAdapterDescriptorFactory | undefined\n    ): Promise<DebugAdapter> {\n        if (descriptorFactory) {\n            // 'createDebugAdapterDescriptor' is called at the start of a debug session to provide details about the debug adapter to use.\n            // These details must be returned as objects of type [DebugAdapterDescriptor](#DebugAdapterDescriptor).\n            // Currently two types of debug adapters are supported:\n            // - a debug adapter executable is specified as a command path and arguments (see [DebugAdapterExecutable](#DebugAdapterExecutable)),\n            // - a debug adapter server reachable via a communication port (see [DebugAdapterServer](#DebugAdapterServer)).\n            // If the method is not implemented the default behavior is this:\n            //   createDebugAdapter(session: DebugSession, executable: DebugAdapterExecutable) {\n            //      if (typeof session.configuration.debugServer === 'number') {\n            //         return new DebugAdapterServer(session.configuration.debugServer);\n            //      }\n            //      return executable;\n            //   }\n            //  @param session The [debug session](#DebugSession) for which the debug adapter will be used.\n            //  @param executable The debug adapter's executable information as specified in the package.json (or undefined if no such information exists).\n            const descriptor = await descriptorFactory.createDebugAdapterDescriptor(session, executable);\n            if (descriptor) {\n                if (DebugAdapterServer.is(descriptor)) {\n                    return this.connectSocketDebugAdapter(descriptor);\n                } else if (DebugAdapterExecutable.is(descriptor)) {\n                    return this.startDebugAdapter(descriptor);\n                } else if (DebugAdapterNamedPipeServer.is(descriptor)) {\n                    return this.connectPipeDebugAdapter(descriptor);\n                } else if (DebugAdapterInlineImplementation.is(descriptor)) {\n                    return this.connectInlineDebugAdapter(descriptor);\n                }\n            }\n        }\n\n        if ('debugServer' in debugConfiguration) {\n            return this.connectSocketDebugAdapter({ port: debugConfiguration.debugServer });\n        } else {\n            if (!executable) {\n                throw new Error('It is not possible to provide debug adapter executable.');\n            }\n            return this.startDebugAdapter(executable);\n        }\n    }\n\n    protected toPlatformInfo(executable: PluginPackageDebuggersContribution): PlatformSpecificAdapterContribution | undefined {\n        if (isWindows && !process.env.hasOwnProperty('PROCESSOR_ARCHITEW6432')) {\n            return executable.winx86 || executable.win || executable.windows;\n        }\n        if (isWindows) {\n            return executable.win || executable.windows;\n        }\n        if (isOSX) {\n            return executable.osx;\n        }\n        return executable.linux;\n    }\n\n    public startDebugAdapter(executable: DebugAdapterExecutable): DebugAdapter {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const options: any = { stdio: ['pipe', 'pipe', 2] };\n\n        if (executable.options) {\n            options.cwd = executable.options.cwd;\n\n            // The additional environment of the executed program or shell. If omitted\n            // the parent process' environment is used. If provided it is merged with\n            // the parent process' environment.\n            options.env = Object.assign({}, process.env);\n            Object.assign(options.env, executable.options.env);\n        }\n\n        let childProcess: ChildProcess;\n        const { command, args } = executable;\n        if (command === 'node') {\n            if (Array.isArray(args) && args.length > 0) {\n                const forkOptions: ForkOptions = {\n                    env: options.env,\n                    // When running in Electron, fork will automatically add ELECTRON_RUN_AS_NODE=1 to the env,\n                    // but this will cause issues when debugging Electron apps, so we'll remove it.\n                    execArgv: isElectron()\n                        ? ['-e', 'delete process.env.ELECTRON_RUN_AS_NODE;require(process.argv[1])']\n                        : [],\n                    silent: true\n                };\n                if (options.cwd) {\n                    forkOptions.cwd = options.cwd;\n                }\n                options.stdio.push('ipc');\n                forkOptions.stdio = options.stdio;\n                childProcess = fork(args[0], args.slice(1), forkOptions);\n            } else {\n                throw new Error(`It is not possible to launch debug adapter with the command: ${JSON.stringify(executable)}`);\n            }\n        } else {\n            childProcess = spawn(command, args, options);\n        }\n\n        return new ProcessDebugAdapter(childProcess);\n    }\n\n    /**\n     * Connects to a remote debug server.\n     */\n    public connectSocketDebugAdapter(server: DebugAdapterServer): SocketDebugAdapter {\n        const socket = net.createConnection(server.port, server.host);\n        return new SocketDebugAdapter(socket);\n    }\n\n    public connectPipeDebugAdapter(adapter: DebugAdapterNamedPipeServer): SocketDebugAdapter {\n        const socket = net.createConnection(adapter.path);\n        return new SocketDebugAdapter(socket);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as theia from '@theia/plugin';\nimport * as rpc from '../../common';\nimport { EditorsAndDocumentsExtImpl } from '../editors-and-documents';\nimport * as notebookCommon from '@theia/notebook/lib/common';\nimport { Disposable, URI } from '@theia/core';\nimport * as typeConverters from '../type-converters';\nimport { ModelAddedData, NotebookCellDto, NotebookCellsChangedEventDto, NotebookModelAddedData, NotebookOutputDto } from '../../common';\nimport { NotebookRange } from '../types-impl';\nimport { UriComponents } from '../../common/uri-components';\nimport { DocumentsExtImpl } from '../documents';\n\nclass RawContentChangeEvent {\n\n    constructor(\n        readonly start: number,\n        readonly deletedCount: number,\n        readonly deletedItems: theia.NotebookCell[],\n        readonly items: Cell[]\n    ) { }\n\n    asApiEvent(): theia.NotebookDocumentContentChange {\n        return {\n            range: new NotebookRange(this.start, this.start + this.deletedCount),\n            addedCells: this.items.map(cell => cell.apiCell),\n            removedCells: this.deletedItems,\n        };\n    }\n}\n\nexport class Cell {\n\n    static asModelAddData(notebook: theia.NotebookDocument, cell: NotebookCellDto): ModelAddedData & { notebook: theia.NotebookDocument } {\n        return {\n            EOL: cell.eol,\n            lines: cell.source,\n            languageId: cell.language,\n            uri: cell.uri,\n            isDirty: false,\n            versionId: 1,\n            notebook,\n            modeId: ''\n        };\n    }\n\n    private cell: theia.NotebookCell | undefined;\n\n    readonly handle: number;\n    readonly uri: URI;\n    readonly cellKind: notebookCommon.CellKind;\n\n    private outputs: theia.NotebookCellOutput[];\n    private metadata: Readonly<notebookCommon.NotebookCellMetadata>;\n    private previousResult: Readonly<theia.NotebookCellExecutionSummary | undefined>;\n\n    internalMetadata: notebookCommon.NotebookCellInternalMetadata;\n\n    get language(): string {\n        return this.apiCell.document.languageId;\n    }\n\n    constructor(\n        public readonly notebookDocument: NotebookDocument,\n        private readonly editorsAndDocuments: EditorsAndDocumentsExtImpl,\n        private readonly cellData: rpc.NotebookCellDto,\n    ) {\n        this.handle = cellData.handle;\n        this.uri = URI.fromComponents(cellData.uri);\n        this.cellKind = cellData.cellKind;\n        this.outputs = cellData.outputs.map(typeConverters.NotebookCellOutputConverter.to);\n        this.internalMetadata = cellData.internalMetadata ?? {};\n        this.metadata = Object.freeze(cellData.metadata ?? {});\n        this.previousResult = Object.freeze(typeConverters.NotebookCellExecutionSummary.to(cellData.internalMetadata ?? {}));\n    }\n\n    get apiCell(): theia.NotebookCell {\n        if (!this.cell) {\n            const that = this;\n            const data = this.editorsAndDocuments.getDocument(this.uri.toString());\n            if (!data) {\n                throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);\n            }\n            const apiCell: theia.NotebookCell = {\n                get index(): number { return that.notebookDocument.getCellIndex(that); },\n                notebook: that.notebookDocument.apiNotebook,\n                kind: typeConverters.NotebookCellKind.to(this.cellData.cellKind),\n                document: data.document,\n                get outputs(): theia.NotebookCellOutput[] { return that.outputs.slice(0); },\n                get metadata(): notebookCommon.NotebookCellMetadata { return that.metadata; },\n                get executionSummary(): theia.NotebookCellExecutionSummary | undefined { return that.previousResult; }\n            };\n            this.cell = Object.freeze(apiCell);\n        }\n        return this.cell;\n    }\n\n    setOutputs(newOutputs: NotebookOutputDto[]): void {\n        this.outputs = newOutputs.map(typeConverters.NotebookCellOutputConverter.to);\n    }\n\n    // setOutputItems(outputId: string, append: boolean, newOutputItems: NotebookOutputItemDto[]): void {\n    //     const newItems = newOutputItems.map(typeConverters.NotebookCellOutputItem.to);\n    //     const output = this.outputs.find(op => op.id === outputId);\n    //     if (output) {\n    //         if (!append) {\n    //             output.items.length = 0;\n    //         }\n    //         output.items.push(...newItems);\n\n    //         // if (output.items.length > 1 && output.items.every(item => notebookCommon.isTextStreamMime(item.mime))) {\n    //         //     // Look for the mimes in the items, and keep track of their order.\n    //         //     // Merge the streams into one output item, per mime type.\n    //         //     const mimeOutputs = new Map<string, Uint8Array[]>();\n    //         //     const mimeTypes: string[] = [];\n    //         //     output.items.forEach(item => {\n    //         //         let items: Uint8Array[];\n    //         //         if (mimeOutputs.has(item.mime)) {\n    //         //             items = mimeOutputs.get(item.mime)!;\n    //         //         } else {\n    //         //             items = [];\n    //         //             mimeOutputs.set(item.mime, items);\n    //         //             mimeTypes.push(item.mime);\n    //         //         }\n    //         //         items.push(item.data);\n    //         //     });\n    //         //     output.items.length = 0;\n    //         //     mimeTypes.forEach(mime => {\n    //         //         const compressed = notebookCommon.compressOutputItemStreams(mimeOutputs.get(mime)!);\n    //         //         output.items.push({\n    //         //             mime,\n    //         //             data: compressed.buffer\n    //         //         });\n    //         //     });\n    //         // }\n    //     }\n    // }\n\n    setMetadata(newMetadata: notebookCommon.NotebookCellMetadata): void {\n        this.metadata = Object.freeze(newMetadata);\n    }\n\n    setInternalMetadata(newInternalMetadata: notebookCommon.NotebookCellInternalMetadata): void {\n        this.internalMetadata = newInternalMetadata;\n        this.previousResult = Object.freeze(typeConverters.NotebookCellExecutionSummary.to(newInternalMetadata));\n    }\n\n}\n\nexport class NotebookDocument implements Disposable {\n\n    private readonly cells: Cell[];\n\n    private readonly notebookType: string;\n\n    private notebook?: theia.NotebookDocument;\n    private metadata: Record<string, unknown>;\n    private versionId: number = 0;\n    private isDirty: boolean = false;\n    private disposed: boolean = false;\n\n    constructor(\n        private readonly proxy: rpc.NotebookDocumentsMain,\n        private readonly editorsAndDocuments: EditorsAndDocumentsExtImpl,\n        private readonly textDocuments: DocumentsExtImpl,\n        public readonly uri: theia.Uri,\n        notebookData: NotebookModelAddedData\n    ) {\n        this.notebookType = notebookData.viewType;\n        this.metadata = notebookData.metadata ?? {};\n        this.versionId = notebookData.versionId;\n        this.cells = notebookData.cells.map(cell => new Cell(this, editorsAndDocuments, cell));\n    }\n\n    get apiNotebook(): theia.NotebookDocument {\n        if (!this.notebook) {\n            const that = this;\n            const apiObject: theia.NotebookDocument = {\n                get uri(): theia.Uri { return that.uri; },\n                get version(): number { return that.versionId; },\n                get notebookType(): string { return that.notebookType; },\n                get isDirty(): boolean { return that.isDirty; },\n                get isUntitled(): boolean { return that.uri.scheme === 'untitled'; },\n                get isClosed(): boolean { return that.disposed; },\n                get metadata(): Record<string, unknown> { return that.metadata; },\n                get cellCount(): number { return that.cells.length; },\n                cellAt(index): theia.NotebookCell {\n                    index = that.validateIndex(index);\n                    return that.cells[index].apiCell;\n                },\n                getCells(range): theia.NotebookCell[] {\n                    const cells = range ? that.getCells(range) : that.cells;\n                    return cells.map(cell => cell.apiCell);\n                },\n                save(): Promise<boolean> {\n                    return that.save();\n                }\n            };\n            this.notebook = Object.freeze(apiObject);\n        }\n        return this.notebook;\n    }\n\n    private validateIndex(index: number): number {\n        index = index | 0;\n        if (index < 0) {\n            return 0;\n        } else if (index >= this.cells.length) {\n            return this.cells.length - 1;\n        } else {\n            return index;\n        }\n    }\n\n    private validateRange(range: theia.NotebookRange): theia.NotebookRange {\n        let start = range.start | 0;\n        let end = range.end | 0;\n        if (start < 0) {\n            start = 0;\n        }\n        if (end > this.cells.length) {\n            end = this.cells.length;\n        }\n        return range.with({ start, end });\n    }\n\n    private getCells(range: theia.NotebookRange): Cell[] {\n        range = this.validateRange(range);\n        const result: Cell[] = [];\n        for (let i = range.start; i < range.end; i++) {\n            result.push(this.cells[i]);\n        }\n        return result;\n    }\n\n    private async save(): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('Notebook has been closed'));\n        }\n        return this.proxy.$trySaveNotebook(this.uri);\n    }\n\n    acceptDirty(isDirty: boolean): void {\n        this.isDirty = isDirty;\n    }\n\n    acceptModelChanged(event: NotebookCellsChangedEventDto, isDirty: boolean, newMetadata: notebookCommon.NotebookDocumentMetadata | undefined): theia.NotebookDocumentChangeEvent {\n        this.versionId = event.versionId;\n        this.isDirty = isDirty;\n        // this.acceptDocumentPropertiesChanged({ metadata: newMetadata });\n\n        const result = {\n            notebook: this.apiNotebook,\n            metadata: newMetadata,\n            cellChanges: <theia.NotebookDocumentCellChange[]>[],\n            contentChanges: <theia.NotebookDocumentContentChange[]>[],\n        };\n\n        type RelaxedCellChange = Partial<theia.NotebookDocumentCellChange> & { cell: theia.NotebookCell };\n        const relaxedCellChanges: RelaxedCellChange[] = [];\n\n        // -- apply change and populate content changes\n\n        for (const rawEvent of event.rawEvents) {\n            if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.ModelChange) {\n                this.spliceNotebookCells(rawEvent.changes, false, result.contentChanges);\n            } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.Move) {\n                this.moveCells(rawEvent.index, rawEvent.length, rawEvent.newIdx, result.contentChanges);\n            } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.Output) {\n                this.setCellOutputs(rawEvent.index, rawEvent.outputs);\n                relaxedCellChanges.push({ cell: this.cells[rawEvent.index].apiCell, outputs: this.cells[rawEvent.index].apiCell.outputs });\n\n            // } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.OutputItem) {\n            //     this._setCellOutputItems(rawEvent.index, rawEvent.outputId, rawEvent.append, rawEvent.outputItems);\n            //     relaxedCellChanges.push({ cell: this.cells[rawEvent.index].apiCell, outputs: this.cells[rawEvent.index].apiCell.outputs });\n            } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.ChangeCellLanguage) {\n                this.changeCellLanguage(rawEvent.index, rawEvent.language);\n                relaxedCellChanges.push({ cell: this.cells[rawEvent.index].apiCell, document: this.cells[rawEvent.index].apiCell.document });\n            } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.ChangeCellContent) {\n                relaxedCellChanges.push({ cell: this.cells[rawEvent.index].apiCell, document: this.cells[rawEvent.index].apiCell.document });\n\n            // } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.ChangeCellMime) {\n            //     this._changeCellMime(rawEvent.index, rawEvent.mime);\n            } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.ChangeCellMetadata) {\n                this.changeCellMetadata(rawEvent.index, rawEvent.metadata);\n                relaxedCellChanges.push({ cell: this.cells[rawEvent.index].apiCell, metadata: this.cells[rawEvent.index].apiCell.metadata });\n\n            } else if (rawEvent.kind === notebookCommon.NotebookCellsChangeType.ChangeCellInternalMetadata) {\n                this.changeCellInternalMetadata(rawEvent.index, rawEvent.internalMetadata);\n                relaxedCellChanges.push({ cell: this.cells[rawEvent.index].apiCell, executionSummary: this.cells[rawEvent.index].apiCell.executionSummary });\n            }\n        }\n\n        // -- compact cellChanges\n\n        const map = new Map<theia.NotebookCell, number>();\n        for (let i = 0; i < relaxedCellChanges.length; i++) {\n            const relaxedCellChange = relaxedCellChanges[i];\n            const existing = map.get(relaxedCellChange.cell);\n            if (existing === undefined) {\n                const newLen = result.cellChanges.push({\n                    document: undefined,\n                    executionSummary: undefined,\n                    metadata: undefined,\n                    outputs: undefined,\n                    ...relaxedCellChange,\n                });\n                map.set(relaxedCellChange.cell, newLen - 1);\n            } else {\n                result.cellChanges[existing] = {\n                    ...result.cellChanges[existing],\n                    ...relaxedCellChange\n                };\n            }\n        }\n\n        // Freeze event properties so handlers cannot accidentally modify them\n        Object.freeze(result);\n        Object.freeze(result.cellChanges);\n        Object.freeze(result.contentChanges);\n\n        return result;\n    }\n\n    private spliceNotebookCells(splices: notebookCommon.NotebookCellTextModelSplice<NotebookCellDto>[], initialization: boolean,\n        bucket: theia.NotebookDocumentContentChange[] | undefined): void {\n        if (this.disposed) {\n            return;\n        }\n\n        const contentChangeEvents: RawContentChangeEvent[] = [];\n        const addedCellDocuments: ModelAddedData[] = [];\n        const removedCellDocuments: UriComponents[] = [];\n\n        splices.reverse().forEach(splice => {\n            const cellDtos = splice[2];\n            const newCells = cellDtos.map((cell: NotebookCellDto) => {\n\n                const extCell = new Cell(this, this.editorsAndDocuments, cell);\n                if (!initialization) {\n                    addedCellDocuments.push(Cell.asModelAddData(this.apiNotebook, cell));\n                }\n                return extCell;\n            });\n\n            const changeEvent = new RawContentChangeEvent(splice[0], splice[1], [], newCells);\n            const deletedItems = this.cells.splice(splice[0], splice[1], ...newCells);\n            for (const cell of deletedItems) {\n                removedCellDocuments.push(cell.uri.toComponents());\n                changeEvent.deletedItems.push(cell.apiCell);\n            }\n            contentChangeEvents.push(changeEvent);\n        });\n\n        if (bucket) {\n            for (const changeEvent of contentChangeEvents) {\n                bucket.push(changeEvent.asApiEvent());\n            }\n        }\n    }\n\n    private moveCells(index: number, length: number, newIdx: number, bucket: theia.NotebookDocumentContentChange[]): void {\n        const cells = this.cells.splice(index, length);\n        this.cells.splice(newIdx, 0, ...cells);\n        const changes = [\n            new RawContentChangeEvent(index, length, cells.map(c => c.apiCell), []),\n            new RawContentChangeEvent(newIdx, 0, [], cells)\n        ];\n        for (const change of changes) {\n            bucket.push(change.asApiEvent());\n        }\n    }\n\n    private setCellOutputs(index: number, outputs: NotebookOutputDto[]): void {\n        const cell = this.cells[index];\n        cell.setOutputs(outputs);\n    }\n\n    // private _setCellOutputItems(index: number, outputId: string, append: boolean, outputItems: NotebookOutputItemDto[]): void {\n    //     const cell = this.cells[index];\n    //     cell.setOutputItems(outputId, append, outputItems);\n    // }\n\n    private changeCellLanguage(index: number, newLanguageId: string): void {\n        const cell = this.cells[index];\n        if (cell.apiCell.document.languageId !== newLanguageId) {\n            this.textDocuments.$acceptModelModeChanged(cell.uri.toComponents(), cell.language, newLanguageId);\n        }\n    }\n\n    private changeCellMetadata(index: number, newMetadata: notebookCommon.NotebookCellMetadata): void {\n        const cell = this.cells[index];\n        cell.setMetadata(newMetadata);\n    }\n\n    private changeCellInternalMetadata(index: number, newInternalMetadata: notebookCommon.NotebookCellInternalMetadata): void {\n        const cell = this.cells[index];\n        cell.setInternalMetadata(newInternalMetadata);\n    }\n\n    getCellFromApiCell(apiCell: theia.NotebookCell): Cell | undefined {\n        return this.cells.find(cell => cell.apiCell === apiCell);\n    }\n\n    getCell(cellHandle: number): Cell | undefined {\n        return this.cells.find(cell => cell.handle === cellHandle);\n    }\n\n    getCellFromIndex(index: number): Cell | undefined {\n        return this.cells[index];\n    }\n\n    getCellIndex(cell: Cell): number {\n        return this.cells.indexOf(cell);\n    }\n\n    dispose(): void {\n        this.disposed = true;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as theia from '@theia/plugin';\nimport { Emitter } from '@theia/core';\nimport { UriComponents } from '../../common/uri-components';\nimport { NotebookCellsChangedEventDto, NotebookDocumentsExt } from '../../common';\nimport { NotebooksExtImpl } from './notebooks';\nimport { URI } from '../types-impl';\n\nexport type NotebookDocumentMetadata = Record<string, unknown>;\n\nexport class NotebookDocumentsExtImpl implements NotebookDocumentsExt {\n\n    private readonly didSaveNotebookDocumentEmitter = new Emitter<theia.NotebookDocument>();\n    readonly onDidSaveNotebookDocument = this.didSaveNotebookDocumentEmitter.event;\n\n    private readonly didChangeNotebookDocumentEmitter = new Emitter<theia.NotebookDocumentChangeEvent>();\n    readonly onDidChangeNotebookDocument = this.didChangeNotebookDocumentEmitter.event;\n\n    constructor(\n        private readonly notebooksAndEditors: NotebooksExtImpl,\n    ) { }\n\n    $acceptModelChanged(uri: UriComponents, event: NotebookCellsChangedEventDto,\n        isDirty: boolean, newMetadata?: NotebookDocumentMetadata): void {\n        const document = this.notebooksAndEditors.getNotebookDocument(URI.from(uri));\n        const e = document.acceptModelChanged(event, isDirty, newMetadata);\n        this.didChangeNotebookDocumentEmitter.fire(e);\n    }\n\n    $acceptDirtyStateChanged(uri: UriComponents, isDirty: boolean): void {\n        const document = this.notebooksAndEditors.getNotebookDocument(URI.from(uri));\n        document.acceptDirty(isDirty);\n    }\n\n    $acceptModelSaved(uri: UriComponents): void {\n        const document = this.notebooksAndEditors.getNotebookDocument(URI.from(uri));\n        this.didSaveNotebookDocumentEmitter.fire(document.apiNotebook);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as theia from '@theia/plugin';\nimport { NotebookDocument } from './notebook-document';\n\nexport class NotebookEditor {\n\n    public static readonly apiEditorsToExtHost = new WeakMap<theia.NotebookEditor, NotebookEditor>();\n\n    private selections: theia.NotebookRange[] = [];\n    private visibleRanges: theia.NotebookRange[] = [];\n    private viewColumn?: theia.ViewColumn;\n\n    private internalVisible: boolean = false;\n\n    private editor?: theia.NotebookEditor;\n\n    constructor(\n        readonly id: string,\n        // private readonly _proxy: MainThreadNotebookEditorsShape,\n        readonly notebookData: NotebookDocument,\n        visibleRanges: theia.NotebookRange[],\n        selections: theia.NotebookRange[],\n        viewColumn: theia.ViewColumn | undefined\n    ) {\n        this.selections = selections;\n        this.visibleRanges = visibleRanges;\n        this.viewColumn = viewColumn;\n    }\n\n    get apiEditor(): theia.NotebookEditor {\n        if (!this.editor) {\n            const that = this;\n            this.editor = {\n                get notebook(): theia.NotebookDocument {\n                    return that.notebookData.apiNotebook;\n                },\n                get selection(): theia.NotebookRange {\n                    return that.selections[0];\n                },\n                set selection(selection: theia.NotebookRange) {\n                    this.selections = [selection];\n                },\n                get selections(): theia.NotebookRange[] {\n                    return that.selections;\n                },\n                set selections(value: theia.NotebookRange[]) {\n                    // if (!Array.isArray(value) || !value.every(extHostTypes.NotebookRange.isNotebookRange)) {\n                    //     throw illegalArgument('selections');\n                    // }\n                    that.selections = value;\n                    that.trySetSelections(value);\n                },\n                get visibleRanges(): theia.NotebookRange[] {\n                    return that.visibleRanges;\n                },\n                revealRange(range, revealType): void {\n                    // that._proxy.$tryRevealRange(\n                    //     that.id,\n                    //     extHostConverter.NotebookRange.from(range),\n                    //     revealType ?? extHostTypes.NotebookEditorRevealType.Default\n                    // );\n                },\n                get viewColumn(): theia.ViewColumn | undefined {\n                    return that.viewColumn;\n                },\n            };\n\n            NotebookEditor.apiEditorsToExtHost.set(this.editor, this);\n        }\n        return this.editor;\n    }\n\n    get visible(): boolean {\n        return this.internalVisible;\n    }\n\n    acceptVisibility(value: boolean): void {\n        this.internalVisible = value;\n    }\n\n    acceptVisibleRanges(value: theia.NotebookRange[]): void {\n        this.visibleRanges = value;\n    }\n\n    acceptSelections(selections: theia.NotebookRange[]): void {\n        this.selections = selections;\n    }\n\n    private trySetSelections(value: theia.NotebookRange[]): void {\n        // NB Unimplemented: implement \"selections\"\n        // this._proxy.$trySetSelections(this.id, value.map(extHostConverter.NotebookRange.from));\n    }\n\n    acceptViewColumn(value: theia.ViewColumn | undefined): void {\n        this.viewColumn = value;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '@theia/core';\nimport { NotebookEditorPropertiesChangeData, NotebookEditorsExt, NotebookEditorViewColumnInfo } from '../../common';\nimport * as typeConverters from '../type-converters';\nimport * as theia from '@theia/plugin';\nimport { NotebooksExtImpl } from './notebooks';\n\nexport class NotebookEditorsExtImpl implements NotebookEditorsExt {\n\n    private readonly DidChangeNotebookEditorSelectionEmitter = new Emitter<theia.NotebookEditorSelectionChangeEvent>();\n    private readonly DidChangeNotebookEditorVisibleRangesEmitter = new Emitter<theia.NotebookEditorVisibleRangesChangeEvent>();\n\n    readonly onDidChangeNotebookEditorSelection = this.DidChangeNotebookEditorSelectionEmitter.event;\n    readonly onDidChangeNotebookEditorVisibleRanges = this.DidChangeNotebookEditorVisibleRangesEmitter.event;\n\n    constructor(\n        private readonly notebooksAndEditors: NotebooksExtImpl,\n    ) { }\n\n    $acceptEditorPropertiesChanged(id: string, data: NotebookEditorPropertiesChangeData): void {\n        const editor = this.notebooksAndEditors.getEditorById(id);\n        // ONE: make all state updates\n        if (data.visibleRanges) {\n            editor.acceptVisibleRanges(data.visibleRanges.ranges.map(typeConverters.NotebookRange.to));\n        }\n        if (data.selections) {\n            editor.acceptSelections(data.selections.selections.map(typeConverters.NotebookRange.to));\n        }\n\n        // TWO: send all events after states have been updated\n        if (data.visibleRanges) {\n            this.DidChangeNotebookEditorVisibleRangesEmitter.fire({\n                notebookEditor: editor.apiEditor,\n                visibleRanges: editor.apiEditor.visibleRanges\n            });\n        }\n        if (data.selections) {\n            this.DidChangeNotebookEditorSelectionEmitter.fire(Object.freeze({\n                notebookEditor: editor.apiEditor,\n                selections: editor.apiEditor.selections\n            }));\n        }\n    }\n\n    $acceptEditorViewColumns(data: NotebookEditorViewColumnInfo): void {\n        // eslint-disable-next-line guard-for-in\n        for (const id in data) {\n            const editor = this.notebooksAndEditors.getEditorById(id);\n            editor.acceptViewColumn(typeConverters.ViewColumn.to(data[id]));\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '@theia/plugin';\nimport {\n    CellExecuteUpdateDto, NotebookKernelDto, NotebookKernelsExt, NotebookKernelsMain, NotebookKernelSourceActionDto, NotebookOutputDto, PLUGIN_RPC_CONTEXT\n} from '../../common';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { UriComponents } from '../../common/uri-components';\nimport * as theia from '@theia/plugin';\nimport { CancellationTokenSource, Disposable, DisposableCollection, Emitter } from '@theia/core';\nimport { Cell } from './notebook-document';\nimport { NotebooksExtImpl } from './notebooks';\nimport { NotebookCellOutputConverter, NotebookCellOutputItem, NotebookKernelSourceAction } from '../type-converters';\nimport { timeout, Deferred } from '@theia/core/lib/common/promise-util';\nimport { CellExecutionUpdateType, NotebookCellExecutionState } from '@theia/notebook/lib/common';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { NotebookCellOutput, NotebookRendererScript, URI } from '../types-impl';\n\ninterface KernelData {\n    extensionId: string;\n    controller: theia.NotebookController;\n    onDidChangeSelection: Emitter<{ selected: boolean; notebook: theia.NotebookDocument }>;\n    onDidReceiveMessage: Emitter<{ editor: theia.NotebookEditor; message: unknown }>;\n    associatedNotebooks: Map<string, boolean>;\n}\n\nexport class NotebookKernelsExtImpl implements NotebookKernelsExt {\n\n    private readonly activeExecutions = new Map<string, NotebookCellExecutionTask>();\n\n    private readonly kernelData = new Map<number, KernelData>();\n\n    private readonly proxy: NotebookKernelsMain;\n\n    private kernelDetectionTasks = new Map<number, theia.NotebookControllerDetectionTask>();\n    private currentKernelDetectionTaskHandle = 0;\n\n    private kernelSourceActionProviders = new Map<number, theia.NotebookKernelSourceActionProvider>();\n    private currentSourceActionProviderHandle = 0;\n\n    private readonly onDidChangeCellExecutionStateEmitter = new Emitter<theia.NotebookCellExecutionStateChangeEvent>();\n    readonly onDidChangeNotebookCellExecutionState = this.onDidChangeCellExecutionStateEmitter.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly notebooks: NotebooksExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTEBOOK_KERNELS_MAIN);\n    }\n\n    private currentHandle = 0;\n\n    createNotebookController(extensionId: string, id: string, viewType: string, label: string, handler?: (cells: theia.NotebookCell[],\n        notebook: theia.NotebookDocument, controller: theia.NotebookController) => void | Thenable<void>, rendererScripts?: NotebookRendererScript[]): theia.NotebookController {\n\n        for (const kernelData of this.kernelData.values()) {\n            if (kernelData.controller.id === id && extensionId === kernelData.extensionId) {\n                throw new Error(`notebook controller with id '${id}' ALREADY exist`);\n            }\n        }\n\n        const handle = this.currentHandle++;\n        const that = this;\n\n        console.debug(`NotebookController[${handle}], CREATED by ${extensionId}, ${id}`);\n\n        const defaultExecuteHandler = () => console.warn(`NO execute handler from notebook controller '${data.id}' of extension: '${extensionId}'`);\n\n        let isDisposed = false;\n        const commandDisposables = new DisposableCollection();\n\n        const onDidChangeSelection = new Emitter<{ selected: boolean; notebook: theia.NotebookDocument }>();\n        const onDidReceiveMessage = new Emitter<{ editor: theia.NotebookEditor; message: unknown }>();\n\n        const data: NotebookKernelDto = {\n            id: createKernelId(extensionId, id),\n            notebookType: viewType,\n            extensionId: extensionId,\n            label: label || extensionId,\n        };\n\n        //\n        let executeHandler = handler ?? defaultExecuteHandler;\n        let interruptHandler: ((this: theia.NotebookController, notebook: theia.NotebookDocument) => void | Thenable<void>) | undefined;\n\n        this.proxy.$addKernel(handle, data).catch(err => {\n            // this can happen when a kernel with that ID is already registered\n            console.log(err);\n            isDisposed = true;\n        });\n\n        // update: all setters write directly into the dto object\n        // and trigger an update. the actual update will only happen\n        // once per event loop execution\n        let tokenPool = 0;\n        const update = () => {\n            if (isDisposed) {\n                return;\n            }\n            const myToken = ++tokenPool;\n            Promise.resolve().then(() => {\n                if (myToken === tokenPool) {\n                    this.proxy.$updateKernel(handle, data);\n                }\n            });\n        };\n\n        // notebook documents that are associated to this controller\n        const associatedNotebooks = new Map<string, boolean>();\n\n        const controller: theia.NotebookController = {\n            get id(): string { return id; },\n            get notebookType(): string { return data.notebookType; },\n            onDidChangeSelectedNotebooks: onDidChangeSelection.event,\n            onDidReceiveMessage: onDidReceiveMessage.event,\n            get label(): string {\n                return data.label;\n            },\n            set label(value) {\n                data.label = value ?? extensionId;\n                update();\n            },\n            get detail(): string {\n                return data.detail ?? '';\n            },\n            set detail(value) {\n                data.detail = value;\n                update();\n            },\n            get description(): string {\n                return data.description ?? '';\n            },\n            set description(value) {\n                data.description = value;\n                update();\n            },\n            get supportedLanguages(): string[] | undefined {\n                return data.supportedLanguages;\n            },\n            set supportedLanguages(value) {\n                data.supportedLanguages = value;\n                update();\n            },\n            get supportsExecutionOrder(): boolean {\n                return data.supportsExecutionOrder ?? false;\n            },\n            set supportsExecutionOrder(value) {\n                data.supportsExecutionOrder = value;\n                update();\n            },\n            get rendererScripts(): NotebookRendererScript[] {\n                return data.rendererScripts ?? [];\n            },\n            set rendererScripts(value) {\n                data.rendererScripts = value;\n                update();\n            },\n            get executeHandler(): (cells: theia.NotebookCell[], notebook: theia.NotebookDocument, controller: theia.NotebookController) => void | Thenable<void> {\n                return executeHandler;\n            },\n            set executeHandler(value) {\n                executeHandler = value ?? defaultExecuteHandler;\n            },\n            get interruptHandler(): ((this: theia.NotebookController, notebook: theia.NotebookDocument) => void | Thenable<void>) | undefined {\n                return interruptHandler;\n            },\n            set interruptHandler(value) {\n                interruptHandler = value;\n                data.supportsInterrupt = Boolean(value);\n                update();\n            },\n            createNotebookCellExecution(cell): theia.NotebookCellExecution {\n                if (isDisposed) {\n                    throw new Error('notebook controller is DISPOSED');\n                }\n                if (!associatedNotebooks.has(cell.notebook.uri.toString())) {\n                    console.debug(`NotebookController[${handle}] NOT associated to notebook, associated to THESE notebooks:`,\n                        Array.from(associatedNotebooks.keys()).map(u => u.toString()));\n                    throw new Error(`notebook controller is NOT associated to notebook: ${cell.notebook.uri.toString()}`);\n                }\n                return that.createNotebookCellExecution(cell, createKernelId(extensionId, this.id));\n            },\n            dispose: () => {\n                if (!isDisposed) {\n                    console.debug(`NotebookController[${handle}], DISPOSED`);\n                    isDisposed = true;\n                    this.kernelData.delete(handle);\n                    commandDisposables.dispose();\n                    onDidChangeSelection.dispose();\n                    onDidReceiveMessage.dispose();\n                    this.proxy.$removeKernel(handle);\n                }\n            },\n            updateNotebookAffinity(notebook, priority): void {\n                that.proxy.$updateNotebookPriority(handle, notebook.uri, priority);\n            },\n            async postMessage(message: unknown, editor?: theia.NotebookEditor): Promise<boolean> {\n                return Promise.resolve(true); // TODO needs implementation\n            },\n            asWebviewUri(localResource: theia.Uri): theia.Uri {\n                throw new Error('Method not implemented.');\n            }\n        };\n\n        this.kernelData.set(handle, {\n            extensionId: extensionId,\n            controller,\n            onDidReceiveMessage,\n            onDidChangeSelection,\n            associatedNotebooks\n        });\n        return controller;\n    }\n\n    createNotebookCellExecution(cell: theia.NotebookCell, controllerId: string): theia.NotebookCellExecution {\n        if (cell.index < 0) {\n            throw new Error('CANNOT execute cell that has been REMOVED from notebook');\n        }\n        const notebook = this.notebooks.getNotebookDocument(URI.from(cell.notebook.uri));\n        const cellObj = notebook.getCellFromApiCell(cell);\n        if (!cellObj) {\n            throw new Error('invalid cell');\n        }\n        if (this.activeExecutions.has(cellObj.uri.toString())) {\n            throw new Error(`duplicate execution for ${cellObj.uri}`);\n        }\n        const execution = new NotebookCellExecutionTask(controllerId, cellObj, this.proxy);\n        this.activeExecutions.set(cellObj.uri.toString(), execution);\n        const listener = execution.onDidChangeState(() => {\n            if (execution.state === NotebookCellExecutionTaskState.Resolved) {\n                execution.dispose();\n                listener.dispose();\n                this.activeExecutions.delete(cellObj.uri.toString());\n            }\n        });\n        return execution.asApiObject();\n    }\n\n    createNotebookControllerDetectionTask(viewType: string): theia.NotebookControllerDetectionTask {\n        const handle = this.currentKernelDetectionTaskHandle++;\n        const that = this;\n\n        this.proxy.$addKernelDetectionTask(handle, viewType);\n\n        const detectionTask: theia.NotebookControllerDetectionTask = {\n            dispose: () => {\n                this.kernelDetectionTasks.delete(handle);\n                that.proxy.$removeKernelDetectionTask(handle);\n            }\n        };\n\n        this.kernelDetectionTasks.set(handle, detectionTask);\n        return detectionTask;\n    }\n\n    registerKernelSourceActionProvider(viewType: string, provider: theia.NotebookKernelSourceActionProvider): Disposable {\n        const handle = this.currentSourceActionProviderHandle++;\n        const eventHandle = typeof provider.onDidChangeNotebookKernelSourceActions === 'function' ? handle : undefined;\n        const that = this;\n\n        this.kernelSourceActionProviders.set(handle, provider);\n        this.proxy.$addKernelSourceActionProvider(handle, handle, viewType);\n\n        let subscription: theia.Disposable | undefined;\n        if (eventHandle !== undefined) {\n            subscription = provider.onDidChangeNotebookKernelSourceActions!(_ => this.proxy.$emitNotebookKernelSourceActionsChangeEvent(eventHandle));\n        }\n\n        return {\n            dispose: () => {\n                this.kernelSourceActionProviders.delete(handle);\n                that.proxy.$removeKernelSourceActionProvider(handle, handle);\n                subscription?.dispose();\n            }\n        };\n    }\n\n    $acceptNotebookAssociation(handle: number, uri: UriComponents, value: boolean): void {\n        const obj = this.kernelData.get(handle);\n        if (obj) {\n            // update data structure\n            const notebook = this.notebooks.getNotebookDocument(URI.from(uri))!;\n            if (value) {\n                obj.associatedNotebooks.set(notebook.uri.toString(), true);\n            } else {\n                obj.associatedNotebooks.delete(notebook.uri.toString());\n            }\n            console.debug(`NotebookController[${handle}] ASSOCIATE notebook`, notebook.uri.toString(), value);\n            // send event\n            obj.onDidChangeSelection.fire({\n                selected: value,\n                notebook: notebook.apiNotebook\n            });\n        }\n\n    }\n\n    async $executeCells(handle: number, uri: UriComponents, handles: number[]): Promise<void> {\n        const obj = this.kernelData.get(handle);\n        if (!obj) {\n            // extension can dispose kernels in the meantime\n            return Promise.resolve();\n        }\n        const document = this.notebooks.getNotebookDocument(URI.from(uri));\n        const cells: theia.NotebookCell[] = [];\n        for (const cellHandle of handles) {\n            const cell = document.getCell(cellHandle);\n            if (cell) {\n                cells.push(cell.apiCell);\n            }\n        }\n\n        try {\n            console.debug(`NotebookController[${handle}] EXECUTE cells`, document.uri.toString(), cells.length);\n            await obj.controller.executeHandler.call(obj.controller, cells, document.apiNotebook, obj.controller);\n        } catch (err) {\n            console.error(`NotebookController[${handle}] execute cells FAILED`, err);\n            console.error(err);\n        }\n\n    }\n\n    async $cancelCells(handle: number, uri: UriComponents, handles: number[]): Promise<void> {\n        const obj = this.kernelData.get(handle);\n        if (!obj) {\n            // extension can dispose kernels in the meantime\n            return Promise.resolve();\n        }\n\n        // cancel or interrupt depends on the controller. When an interrupt handler is used we\n        // don't trigger the cancelation token of executions.N\n        const document = this.notebooks.getNotebookDocument(URI.from(uri));\n        if (obj.controller.interruptHandler) {\n            await obj.controller.interruptHandler.call(obj.controller, document.apiNotebook);\n\n        } else {\n            for (const cellHandle of handles) {\n                const cell = document.getCell(cellHandle);\n                if (cell) {\n                    this.activeExecutions.get(cell.uri.toString())?.cancel();\n                }\n            }\n        }\n    }\n\n    $acceptKernelMessageFromRenderer(handle: number, editorId: string, message: unknown): void {\n        const obj = this.kernelData.get(handle);\n        if (!obj) {\n            // extension can dispose kernels in the meantime\n            return;\n        }\n\n        const editor = this.notebooks.getEditorById(editorId);\n        obj.onDidReceiveMessage.fire(Object.freeze({ editor: editor.apiEditor, message }));\n    }\n\n    $cellExecutionChanged(uri: UriComponents, cellHandle: number, state: NotebookCellExecutionState | undefined): void {\n        // Proposed Api though seems needed by jupyter for telemetry\n    }\n\n    async $provideKernelSourceActions(handle: number, token: CancellationToken): Promise<NotebookKernelSourceActionDto[]> {\n        const provider = this.kernelSourceActionProviders.get(handle);\n        if (provider) {\n            const disposables = new DisposableCollection();\n            const ret = await provider.provideNotebookKernelSourceActions(token);\n            return (ret ?? []).map(item => NotebookKernelSourceAction.from(item, this.commands.converter, disposables));\n        }\n        return [];\n\n    }\n\n}\n\nenum NotebookCellExecutionTaskState {\n    Init,\n    Started,\n    Resolved\n}\n\nclass NotebookCellExecutionTask implements Disposable {\n    private static HANDLE = 0;\n    private _handle = NotebookCellExecutionTask.HANDLE++;\n\n    private _onDidChangeState = new Emitter<void>();\n    readonly onDidChangeState = this._onDidChangeState.event;\n\n    private _state = NotebookCellExecutionTaskState.Init;\n    get state(): NotebookCellExecutionTaskState { return this._state; }\n\n    private readonly tokenSource = new CancellationTokenSource();\n\n    private readonly collector: TimeoutBasedCollector<CellExecuteUpdateDto>;\n\n    private executionOrder: number | undefined;\n\n    constructor(\n        controllerId: string,\n        private readonly cell: Cell,\n        private readonly proxy: NotebookKernelsMain\n    ) {\n        this.collector = new TimeoutBasedCollector(10, updates => this.update(updates));\n\n        this.executionOrder = cell.internalMetadata.executionOrder;\n        this.proxy.$createExecution(this._handle, controllerId, this.cell.notebookDocument.uri, this.cell.handle);\n    }\n\n    cancel(): void {\n        this.tokenSource.cancel();\n    }\n\n    private async updateSoon(update: CellExecuteUpdateDto): Promise<void> {\n        await this.collector.addItem(update);\n    }\n\n    private async update(update: CellExecuteUpdateDto | CellExecuteUpdateDto[]): Promise<void> {\n        const updates = Array.isArray(update) ? update : [update];\n        return this.proxy.$updateExecution(this._handle, updates);\n    }\n\n    private verifyStateForOutput(): void {\n        if (this._state === NotebookCellExecutionTaskState.Init) {\n            throw new Error('Must call start before modifying cell output');\n        }\n\n        if (this._state === NotebookCellExecutionTaskState.Resolved) {\n            throw new Error('Cannot modify cell output after calling resolve');\n        }\n    }\n\n    private cellIndexToHandle(cellOrCellIndex: theia.NotebookCell | undefined): number {\n        let cell: Cell | undefined = this.cell;\n        if (cellOrCellIndex) {\n            cell = this.cell.notebookDocument.getCellFromApiCell(cellOrCellIndex);\n        }\n        if (!cell) {\n            throw new Error('INVALID cell');\n        }\n        return cell.handle;\n    }\n\n    private validateAndConvertOutputs(items: NotebookCellOutput[]): NotebookOutputDto[] {\n        return items.map(output => {\n            const newOutput = NotebookCellOutputConverter.ensureUniqueMimeTypes(output.items, true);\n            if (newOutput === output.items) {\n                return NotebookCellOutputConverter.from(output);\n            }\n            return NotebookCellOutputConverter.from({\n                items: newOutput,\n                outputId: output.outputId,\n                metadata: output.metadata\n            });\n        });\n    }\n\n    private async updateOutputs(outputs: NotebookCellOutput | NotebookCellOutput[], cell: theia.NotebookCell | undefined, append: boolean): Promise<void> {\n        const handle = this.cellIndexToHandle(cell);\n        const outputDtos = this.validateAndConvertOutputs(Array.isArray(outputs) ? outputs : [outputs]);\n        return this.updateSoon(\n            {\n                editType: CellExecutionUpdateType.Output,\n                cellHandle: handle,\n                append,\n                outputs: outputDtos\n            });\n    }\n\n    private async updateOutputItems(items: theia.NotebookCellOutputItem | theia.NotebookCellOutputItem[], output: theia.NotebookCellOutput, append: boolean): Promise<void> {\n        items = NotebookCellOutputConverter.ensureUniqueMimeTypes(Array.isArray(items) ? items : [items], true);\n        return this.updateSoon({\n            editType: CellExecutionUpdateType.OutputItems,\n            items: items.map(NotebookCellOutputItem.from),\n            append\n        });\n    }\n\n    asApiObject(): theia.NotebookCellExecution {\n        const that = this;\n        const result: theia.NotebookCellExecution = {\n            get token(): CancellationToken { return that.tokenSource.token; },\n            get cell(): theia.NotebookCell { return that.cell.apiCell; },\n            get executionOrder(): number | undefined { return that.executionOrder; },\n            set executionOrder(v: number | undefined) {\n                that.executionOrder = v;\n                that.update([{\n                    editType: CellExecutionUpdateType.ExecutionState,\n                    executionOrder: that.executionOrder\n                }]);\n            },\n\n            start(startTime?: number): void {\n                if (that._state === NotebookCellExecutionTaskState.Resolved || that._state === NotebookCellExecutionTaskState.Started) {\n                    throw new Error('Cannot call start again');\n                }\n\n                that._state = NotebookCellExecutionTaskState.Started;\n                that._onDidChangeState.fire();\n\n                that.update({\n                    editType: CellExecutionUpdateType.ExecutionState,\n                    runStartTime: startTime\n                });\n            },\n\n            end(success: boolean | undefined, endTime?: number): void {\n                if (that._state === NotebookCellExecutionTaskState.Resolved) {\n                    throw new Error('Cannot call resolve twice');\n                }\n\n                that._state = NotebookCellExecutionTaskState.Resolved;\n                that._onDidChangeState.fire();\n\n                // The last update needs to be ordered correctly and applied immediately,\n                // so we use updateSoon and immediately flush.\n                that.collector.flush();\n\n                that.proxy.$completeExecution(that._handle, {\n                    runEndTime: endTime,\n                    lastRunSuccess: success\n                });\n            },\n\n            clearOutput(cell?: theia.NotebookCell): Thenable<void> {\n                that.verifyStateForOutput();\n                return that.updateOutputs([], cell, false);\n            },\n\n            appendOutput(outputs: NotebookCellOutput | NotebookCellOutput[], cell?: theia.NotebookCell): Promise<void> {\n                that.verifyStateForOutput();\n                return that.updateOutputs(outputs, cell, true);\n            },\n\n            replaceOutput(outputs: NotebookCellOutput | NotebookCellOutput[], cell?: theia.NotebookCell): Promise<void> {\n                that.verifyStateForOutput();\n                return that.updateOutputs(outputs, cell, false);\n            },\n\n            appendOutputItems(items: theia.NotebookCellOutputItem | theia.NotebookCellOutputItem[], output: theia.NotebookCellOutput): Promise<void> {\n                that.verifyStateForOutput();\n                return that.updateOutputItems(items, output, true);\n            },\n\n            replaceOutputItems(items: theia.NotebookCellOutputItem | theia.NotebookCellOutputItem[], output: theia.NotebookCellOutput): Promise<void> {\n                that.verifyStateForOutput();\n                return that.updateOutputItems(items, output, false);\n            }\n        };\n        return Object.freeze(result);\n    }\n\n    dispose(): void {\n\n    }\n}\n\nclass TimeoutBasedCollector<T> {\n    private batch: T[] = [];\n    private startedTimer = Date.now();\n    private currentDeferred: Deferred<void> | undefined;\n\n    constructor(\n        private readonly delay: number,\n        private readonly callback: (items: T[]) => Promise<void>) { }\n\n    addItem(item: T): Promise<void> {\n        this.batch.push(item);\n        if (!this.currentDeferred) {\n            this.currentDeferred = new Deferred<void>();\n            this.startedTimer = Date.now();\n            timeout(this.delay).then(() => this.flush());\n        }\n\n        // This can be called by the extension repeatedly for a long time before the timeout is able to run.\n        // Force a flush after the delay.\n        if (Date.now() - this.startedTimer > this.delay) {\n            return this.flush();\n        }\n\n        return this.currentDeferred.promise;\n    }\n\n    flush(): Promise<void> {\n        if (this.batch.length === 0 || !this.currentDeferred) {\n            return Promise.resolve();\n        }\n\n        const deferred = this.currentDeferred;\n        this.currentDeferred = undefined;\n        const batch = this.batch;\n        this.batch = [];\n        return this.callback(batch)\n            .finally(() => deferred.resolve());\n    }\n}\n\nexport function createKernelId(extensionIdentifier: string, id: string): string {\n    return `${extensionIdentifier}/${id}`;\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { NotebookRenderersExt, NotebookRenderersMain, PLUGIN_RPC_CONTEXT } from '../../common';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { NotebooksExtImpl } from './notebooks';\nimport * as theia from '@theia/plugin';\nimport { NotebookEditor } from './notebook-editor';\nimport { Emitter } from '@theia/core';\n\nexport class NotebookRenderersExtImpl implements NotebookRenderersExt {\n    private readonly rendererMessageEmitters = new Map<string /* rendererId */, Emitter<{ editor: theia.NotebookEditor; message: unknown }>>();\n    private readonly proxy: NotebookRenderersMain;\n\n    constructor(rpc: RPCProtocol, private readonly notebooksExt: NotebooksExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTEBOOK_RENDERERS_MAIN);\n    }\n\n    public $postRendererMessage(editorId: string, rendererId: string, message: unknown): void {\n        const editor = this.notebooksExt.getEditorById(editorId);\n        this.rendererMessageEmitters.get(rendererId)?.fire({ editor: editor.apiEditor, message });\n    }\n\n    public createRendererMessaging(rendererId: string): theia.NotebookRendererMessaging {\n\n        const messaging: theia.NotebookRendererMessaging = {\n            onDidReceiveMessage: (listener, thisArg, disposables) => this.getOrCreateEmitterFor(rendererId).event(listener, thisArg, disposables),\n            postMessage: (message, editorOrAlias) => {\n\n                const extHostEditor = editorOrAlias && NotebookEditor.apiEditorsToExtHost.get(editorOrAlias);\n                return this.proxy.$postMessage(extHostEditor?.id, rendererId, message);\n            },\n        };\n\n        return messaging;\n    }\n\n    private getOrCreateEmitterFor(rendererId: string): Emitter<{ editor: theia.NotebookEditor, message: unknown }> {\n        let emitter = this.rendererMessageEmitters.get(rendererId);\n        if (emitter) {\n            return emitter;\n        }\n\n        emitter = new Emitter({\n            onLastListenerRemove: () => {\n                emitter?.dispose();\n                this.rendererMessageEmitters.delete(rendererId);\n            }\n        });\n\n        this.rendererMessageEmitters.set(rendererId, emitter);\n\n        return emitter;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken, Disposable, DisposableCollection, Emitter, Event, URI } from '@theia/core';\nimport { URI as TheiaURI } from '../types-impl';\nimport * as theia from '@theia/plugin';\nimport {\n    CommandRegistryExt, NotebookCellStatusBarListDto, NotebookDataDto,\n    NotebookDocumentsAndEditorsDelta, NotebookDocumentShowOptions, NotebookDocumentsMain, NotebookEditorAddData, NotebookEditorsMain, NotebooksExt, NotebooksMain, Plugin,\n    PLUGIN_RPC_CONTEXT\n} from '../../common';\nimport { Cache } from '../../common/cache';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { UriComponents } from '../../common/uri-components';\nimport { CommandsConverter } from '../command-registry';\nimport * as typeConverters from '../type-converters';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { NotebookDocument } from './notebook-document';\nimport { NotebookEditor } from './notebook-editor';\nimport { EditorsAndDocumentsExtImpl } from '../editors-and-documents';\nimport { DocumentsExtImpl } from '../documents';\n\nexport class NotebooksExtImpl implements NotebooksExt {\n\n    private readonly notebookStatusBarItemProviders = new Map<number, theia.NotebookCellStatusBarItemProvider>();\n    private readonly commandsConverter: CommandsConverter;\n\n    private readonly onDidChangeActiveNotebookEditorEmitter = new Emitter<theia.NotebookEditor | undefined>();\n    readonly onDidChangeActiveNotebookEditor = this.onDidChangeActiveNotebookEditorEmitter.event;\n\n    private readonly onDidOpenNotebookDocumentEmitter = new Emitter<theia.NotebookDocument>();\n    onDidOpenNotebookDocument: Event<theia.NotebookDocument> = this.onDidOpenNotebookDocumentEmitter.event;\n    private readonly onDidCloseNotebookDocumentEmitter = new Emitter<theia.NotebookDocument>();\n    onDidCloseNotebookDocument: Event<theia.NotebookDocument> = this.onDidCloseNotebookDocumentEmitter.event;\n\n    private readonly onDidChangeVisibleNotebookEditorsEmitter = new Emitter<theia.NotebookEditor[]>();\n    onDidChangeVisibleNotebookEditors = this.onDidChangeVisibleNotebookEditorsEmitter.event;\n\n    private activeNotebookEditor: NotebookEditor | undefined;\n    get activeApiNotebookEditor(): theia.NotebookEditor | undefined {\n        return this.activeNotebookEditor?.apiEditor;\n    }\n\n    private visibleNotebookEditors: NotebookEditor[] = [];\n    get visibleApiNotebookEditors(): theia.NotebookEditor[] {\n        return this.visibleNotebookEditors.map(editor => editor.apiEditor);\n    }\n\n    private readonly documents = new Map<string, NotebookDocument>();\n    private readonly editors = new Map<string, NotebookEditor>();\n    private statusBarRegistry = new Cache<Disposable>('NotebookCellStatusBarCache');\n\n    private notebookProxy: NotebooksMain;\n    private notebookDocumentsProxy: NotebookDocumentsMain;\n    private notebookEditors: NotebookEditorsMain;\n\n    constructor(\n        rpc: RPCProtocol,\n        commands: CommandRegistryExt,\n        private textDocumentsAndEditors: EditorsAndDocumentsExtImpl,\n        private textDocuments: DocumentsExtImpl\n    ) {\n        this.notebookProxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTEBOOKS_MAIN);\n        this.notebookDocumentsProxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTEBOOK_DOCUMENTS_MAIN);\n        this.notebookEditors = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTEBOOK_EDITORS_MAIN);\n\n        commands.registerArgumentProcessor({\n            processArgument: (arg: { uri: URI }) => {\n                if (arg && arg.uri && this.documents.has(arg.uri.toString())) {\n                    return this.documents.get(arg.uri.toString())?.apiNotebook;\n                }\n                return arg;\n            }\n        });\n    }\n\n    async $provideNotebookCellStatusBarItems(handle: number, uri: UriComponents, index: number, token: CancellationToken): Promise<NotebookCellStatusBarListDto | undefined> {\n        const provider = this.notebookStatusBarItemProviders.get(handle);\n        const revivedUri = URI.fromComponents(uri);\n        const document = this.documents.get(revivedUri.toString());\n        if (!document || !provider) {\n            return;\n        }\n\n        const cell = document.getCellFromIndex(index);\n        if (!cell) {\n            return;\n        }\n\n        const result = await provider.provideCellStatusBarItems(cell.apiCell, token);\n        if (!result) {\n            return undefined;\n        }\n\n        const disposables = new DisposableCollection();\n        const cacheId = this.statusBarRegistry.add([disposables]);\n        const resultArr = Array.isArray(result) ? result : [result];\n        const items = resultArr.map(item => typeConverters.NotebookStatusBarItem.from(item, this.commandsConverter, disposables));\n        return {\n            cacheId,\n            items\n        };\n    }\n\n    $releaseNotebookCellStatusBarItems(cacheId: number): void {\n        this.statusBarRegistry.delete(cacheId);\n    }\n\n    // --- serialize/deserialize\n\n    private currentSerializerHandle = 0;\n    private readonly notebookSerializer = new Map<number, theia.NotebookSerializer>();\n\n    registerNotebookSerializer(plugin: Plugin, viewType: string, serializer: theia.NotebookSerializer,\n        options?: theia.NotebookDocumentContentOptions): theia.Disposable {\n        if (!viewType || !viewType.trim()) {\n            throw new Error('viewType cannot be empty or just whitespace');\n        }\n        const handle = this.currentSerializerHandle++;\n        this.notebookSerializer.set(handle, serializer);\n        this.notebookProxy.$registerNotebookSerializer(\n            handle,\n            { id: plugin.model.id, location: plugin.pluginUri },\n            viewType,\n            typeConverters.NotebookDocumentContentOptions.from(options),\n        );\n        return Disposable.create(() => {\n            this.notebookProxy.$unregisterNotebookSerializer(handle);\n        });\n    }\n\n    async $dataToNotebook(handle: number, bytes: BinaryBuffer, token: CancellationToken): Promise<NotebookDataDto> {\n        const serializer = this.notebookSerializer.get(handle);\n        if (!serializer) {\n            throw new Error('No serializer found');\n        }\n        const data = await serializer.deserializeNotebook(bytes.buffer, token);\n        return typeConverters.NotebookData.from(data);\n    }\n\n    async $notebookToData(handle: number, data: NotebookDataDto, token: CancellationToken): Promise<BinaryBuffer> {\n        const serializer = this.notebookSerializer.get(handle);\n        if (!serializer) {\n            throw new Error('No serializer found');\n        }\n        const bytes = await serializer.serializeNotebook(typeConverters.NotebookData.to(data), token);\n        return BinaryBuffer.wrap(bytes);\n    }\n\n    registerNotebookCellStatusBarItemProvider(notebookType: string, provider: theia.NotebookCellStatusBarItemProvider): theia.Disposable {\n\n        const handle = this.currentSerializerHandle++;\n        const eventHandle = typeof provider.onDidChangeCellStatusBarItems === 'function' ? this.currentSerializerHandle++ : undefined;\n\n        this.notebookStatusBarItemProviders.set(handle, provider);\n        this.notebookProxy.$registerNotebookCellStatusBarItemProvider(handle, eventHandle, notebookType);\n\n        let subscription: theia.Disposable | undefined;\n        if (eventHandle !== undefined) {\n            subscription = provider.onDidChangeCellStatusBarItems!(_ => this.notebookProxy.$emitCellStatusBarEvent(eventHandle));\n        }\n\n        return Disposable.create(() => {\n            this.notebookStatusBarItemProviders.delete(handle);\n            this.notebookProxy.$unregisterNotebookCellStatusBarItemProvider(handle, eventHandle);\n            subscription?.dispose();\n        });\n    }\n\n    getEditorById(editorId: string): NotebookEditor {\n        const editor = this.editors.get(editorId);\n        if (!editor) {\n            throw new Error(`unknown text editor: ${editorId}. known editors: ${[...this.editors.keys()]} `);\n        }\n        return editor;\n    }\n\n    getAllApiDocuments(): theia.NotebookDocument[] {\n        return [...this.documents.values()].map(doc => doc.apiNotebook);\n    }\n\n    async $acceptDocumentsAndEditorsDelta(delta: NotebookDocumentsAndEditorsDelta): Promise<void> {\n        if (delta.removedDocuments) {\n            for (const uri of delta.removedDocuments) {\n                const revivedUri = URI.fromComponents(uri);\n                const document = this.documents.get(revivedUri.toString());\n\n                if (document) {\n                    document.dispose();\n                    this.documents.delete(revivedUri.toString());\n                    this.onDidCloseNotebookDocumentEmitter.fire(document.apiNotebook);\n                }\n\n                for (const editor of this.editors.values()) {\n                    if (editor.notebookData.uri.toString() === revivedUri.toString()) {\n                        this.editors.delete(editor.id);\n                    }\n                }\n            }\n        }\n\n        if (delta.addedDocuments) {\n            for (const modelData of delta.addedDocuments) {\n                const uri = TheiaURI.from(modelData.uri);\n\n                if (this.documents.has(uri.toString())) {\n                    throw new Error(`adding EXISTING notebook ${uri} `);\n                }\n\n                const document = new NotebookDocument(\n                    this.notebookDocumentsProxy,\n                    this.textDocumentsAndEditors,\n                    this.textDocuments,\n                    uri,\n                    modelData\n                );\n\n                this.documents.get(uri.toString())?.dispose();\n                this.documents.set(uri.toString(), document);\n\n                this.onDidOpenNotebookDocumentEmitter.fire(document.apiNotebook);\n            }\n        }\n\n        if (delta.addedEditors) {\n            for (const editorModelData of delta.addedEditors) {\n                if (this.editors.has(editorModelData.id)) {\n                    return;\n                }\n\n                const revivedUri = URI.fromComponents(editorModelData.documentUri);\n                const document = this.documents.get(revivedUri.toString());\n\n                if (document) {\n                    this.createExtHostEditor(document, editorModelData.id, editorModelData);\n                }\n            }\n        }\n\n        const removedEditors: NotebookEditor[] = [];\n\n        if (delta.removedEditors) {\n            for (const editorId of delta.removedEditors) {\n                const editor = this.editors.get(editorId);\n\n                if (editor) {\n                    this.editors.delete(editorId);\n\n                    if (this.activeNotebookEditor?.id === editor.id) {\n                        this.activeNotebookEditor = undefined;\n                    }\n\n                    removedEditors.push(editor);\n                }\n            }\n        }\n\n        if (delta.visibleEditors) {\n            this.visibleNotebookEditors = delta.visibleEditors.map(id => this.editors.get(id)!).filter(editor => !!editor) as NotebookEditor[];\n            const visibleEditorsSet = new Set<string>();\n            this.visibleNotebookEditors.forEach(editor => visibleEditorsSet.add(editor.id));\n\n            for (const editor of this.editors.values()) {\n                const newValue = visibleEditorsSet.has(editor.id);\n                editor.acceptVisibility(newValue);\n            }\n\n            this.visibleNotebookEditors = [...this.editors.values()].map(e => e).filter(e => e.visible);\n            this.onDidChangeVisibleNotebookEditorsEmitter.fire(this.visibleApiNotebookEditors);\n        }\n\n        if (delta.newActiveEditor === null) {\n            // clear active notebook as current active editor is non-notebook editor\n            this.activeNotebookEditor = undefined;\n        } else if (delta.newActiveEditor) {\n            const activeEditor = this.editors.get(delta.newActiveEditor);\n            if (!activeEditor) {\n                console.error(`FAILED to find active notebook editor ${delta.newActiveEditor}`);\n            }\n            this.activeNotebookEditor = this.editors.get(delta.newActiveEditor);\n        }\n        if (delta.newActiveEditor !== undefined) {\n            this.onDidChangeActiveNotebookEditorEmitter.fire(this.activeNotebookEditor?.apiEditor);\n        }\n    }\n\n    getNotebookDocument(uri: TheiaURI, relaxed: true): NotebookDocument | undefined;\n    getNotebookDocument(uri: TheiaURI): NotebookDocument;\n    getNotebookDocument(uri: TheiaURI, relaxed?: true): NotebookDocument | undefined {\n        const result = this.documents.get(uri.toString());\n        if (!result && !relaxed) {\n            throw new Error(`NO notebook document for '${uri}'`);\n        }\n        return result;\n    }\n\n    private createExtHostEditor(document: NotebookDocument, editorId: string, data: NotebookEditorAddData): void {\n\n        if (this.editors.has(editorId)) {\n            throw new Error(`editor with id ALREADY EXISTS: ${editorId}`);\n        }\n\n        const editor = new NotebookEditor(\n            editorId,\n            document,\n            data.visibleRanges.map(typeConverters.NotebookRange.to),\n            data.selections.map(typeConverters.NotebookRange.to),\n            typeof data.viewColumn === 'number' ? typeConverters.ViewColumn.to(data.viewColumn) : undefined\n        );\n\n        this.editors.set(editorId, editor);\n    }\n\n    async createNotebookDocument(options: { viewType: string; content?: theia.NotebookData }): Promise<TheiaURI> {\n        const canonicalUri = await this.notebookDocumentsProxy.$tryCreateNotebook({\n            viewType: options.viewType,\n            content: options.content && typeConverters.NotebookData.from(options.content)\n        });\n        return TheiaURI.from(canonicalUri);\n    }\n\n    async openNotebookDocument(uri: TheiaURI): Promise<theia.NotebookDocument> {\n        const cached = this.documents.get(uri.toString());\n        if (cached) {\n            return cached.apiNotebook;\n        }\n        const canonicalUri = await this.notebookDocumentsProxy.$tryOpenNotebook(uri);\n        const document = this.documents.get(URI.fromComponents(canonicalUri).toString());\n        return document?.apiNotebook!;\n    }\n\n    async showNotebookDocument(notebookOrUri: theia.NotebookDocument | TheiaURI, options?: theia.NotebookDocumentShowOptions): Promise<theia.NotebookEditor> {\n\n        if (URI.isUri(notebookOrUri)) {\n            notebookOrUri = await this.openNotebookDocument(notebookOrUri as TheiaURI);\n        }\n\n        const notebook = notebookOrUri as theia.NotebookDocument;\n\n        let resolvedOptions: NotebookDocumentShowOptions;\n        if (typeof options === 'object') {\n            resolvedOptions = {\n                position: typeConverters.ViewColumn.from(options.viewColumn),\n                preserveFocus: options.preserveFocus,\n                selections: options.selections && options.selections.map(typeConverters.NotebookRange.from),\n                pinned: typeof options.preview === 'boolean' ? !options.preview : undefined\n            };\n        } else {\n            resolvedOptions = {\n                preserveFocus: false\n            };\n        }\n\n        const editorId = await this.notebookEditors.$tryShowNotebookDocument(notebook.uri, notebook.notebookType, resolvedOptions);\n        const editor = editorId && this.editors.get(editorId)?.apiEditor;\n\n        if (editor) {\n            return editor;\n        }\n\n        if (editorId) {\n            throw new Error(`Could NOT open editor for \"${notebook.uri.toString()}\" because another editor opened in the meantime.`);\n        } else {\n            throw new Error(`Could NOT open editor for \"${notebook.uri.toString()}\".`);\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { PLUGIN_RPC_CONTEXT, NotificationExt, NotificationMain } from '../common/plugin-api-rpc';\nimport { CancellationToken, Progress, ProgressOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { ProgressLocation } from './types-impl';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport class NotificationExtImpl implements NotificationExt {\n    private readonly proxy: NotificationMain;\n    private mapProgressIdToCancellationSource: Map<string, CancellationTokenSource> = new Map();\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN);\n    }\n\n    async withProgress<R>(\n        options: ProgressOptions,\n        task: (progress: Progress<{ message?: string; increment?: number }>, token: CancellationToken) => PromiseLike<R>\n    ): Promise<R> {\n        const source = new CancellationTokenSource();\n        const id = new Deferred<string>();\n        const progress = task({ report: async item => this.proxy.$updateProgress(await id.promise, item) }, source.token);\n        const title = options.title ? options.title : '';\n        const location = this.mapLocation(options.location);\n        const cancellable = options.cancellable;\n\n        id.resolve(await this.proxy.$startProgress({ title, location, cancellable }));\n\n        if (cancellable) {\n            const progressId = await id.promise;\n            this.mapProgressIdToCancellationSource.set(progressId, source);\n        }\n\n        const stop = async () => this.proxy.$stopProgress(await id.promise);\n        const promise = Promise.all([\n            progress,\n            new Promise(resolve => setTimeout(resolve, 250)) // try to show even if it's done immediately\n        ]);\n        promise.then(stop, stop);\n        return progress;\n    }\n\n    public $acceptProgressCanceled(id: string): void {\n        const source = this.mapProgressIdToCancellationSource.get(id);\n        if (source) {\n            source.cancel();\n            this.mapProgressIdToCancellationSource.delete(id);\n        }\n    }\n\n    protected mapLocation(location: ProgressLocation | { viewId: string }): string | undefined {\n        if (typeof location === 'object') {\n            return location.viewId;\n        }\n\n        switch (location) {\n            case ProgressLocation.Notification: return 'notification';\n            case ProgressLocation.SourceControl: return 'scm';\n            case ProgressLocation.Window: return 'window';\n            default: return undefined;\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { PLUGIN_RPC_CONTEXT as Ext, OutputChannelRegistryExt, OutputChannelRegistryMain, PluginInfo } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { isObject } from '../common/types';\nimport { LogOutputChannelImpl } from './output-channel/log-output-channel';\nimport { OutputChannelImpl } from './output-channel/output-channel-item';\n\nexport class OutputChannelRegistryExtImpl implements OutputChannelRegistryExt {\n\n    proxy: OutputChannelRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.OUTPUT_CHANNEL_REGISTRY_MAIN);\n    }\n\n    createOutputChannel(name: string, pluginInfo: PluginInfo): theia.OutputChannel;\n    createOutputChannel(name: string, pluginInfo: PluginInfo, options: { log: true; }): theia.LogOutputChannel;\n    createOutputChannel(name: string, pluginInfo: PluginInfo, options?: { log: true; }): theia.OutputChannel | theia.LogOutputChannel {\n        name = name.trim();\n        if (!name) {\n            throw new Error('illegal argument \\'name\\'. must not be falsy');\n        }\n        const isLogOutput = options && isObject(options);\n        return isLogOutput\n            ? this.doCreateLogOutputChannel(name, pluginInfo)\n            : this.doCreateOutputChannel(name, pluginInfo);\n    }\n\n    private doCreateOutputChannel(name: string, pluginInfo: PluginInfo): OutputChannelImpl {\n        return new OutputChannelImpl(name, this.proxy, pluginInfo);\n    }\n\n    private doCreateLogOutputChannel(name: string, pluginInfo: PluginInfo): LogOutputChannelImpl {\n        return new LogOutputChannelImpl(name, this.proxy, pluginInfo);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Emitter } from '@theia/core/shared/vscode-languageserver-protocol';\nimport * as theia from '@theia/plugin';\n\nimport { OutputChannelRegistryMain, PluginInfo } from '../../common/plugin-api-rpc';\nimport { OutputChannelImpl } from './output-channel-item';\nimport { LogLevel } from '../types-impl';\nimport { isArray, isObject } from '@theia/core';\n\nexport class LogOutputChannelImpl extends OutputChannelImpl implements theia.LogOutputChannel {\n\n    readonly onDidChangeLogLevelEmitter: Emitter<theia.LogLevel> = new Emitter<theia.LogLevel>();\n    readonly onDidChangeLogLevel: theia.Event<theia.LogLevel> = this.onDidChangeLogLevelEmitter.event;\n    public logLevel: theia.LogLevel;\n\n    constructor(name: string, proxy: OutputChannelRegistryMain, pluginInfo: PluginInfo) {\n        super(name, proxy, pluginInfo);\n        this.setLogLevel(LogLevel.Info);\n    }\n\n    setLogLevel(level: theia.LogLevel): void {\n        if (this.logLevel !== level) {\n            this.logLevel = level;\n            this.onDidChangeLogLevelEmitter.fire(this.logLevel);\n        }\n    }\n\n    getLogLevel(): theia.LogLevel {\n        return this.logLevel;\n    }\n\n    override append(value: string): void {\n        super.validate();\n        this.info(value);\n    }\n\n    override appendLine(value: string): void {\n        super.validate();\n        this.append(value + '\\n');\n    }\n\n    override dispose(): void {\n        super.dispose();\n        this.onDidChangeLogLevelEmitter.dispose();\n    }\n\n    protected log(level: theia.LogLevel, message: string): void {\n        super.validate();\n        if (this.checkLogLevel(level)) {\n            const now = new Date();\n            const eol = message.endsWith('\\n') ? '' : '\\n';\n            const logMessage = `${now.toISOString()} [${LogLevel[level]}] ${message}${eol}`;\n            this.proxy.$append(this.name, logMessage, this.pluginInfo);\n        }\n    }\n\n    private checkLogLevel(level: theia.LogLevel): boolean {\n        return this.logLevel <= level;\n    }\n\n    trace(message: string, ...args: any[]): void {\n        this.log(LogLevel.Trace, this.format(message, args));\n    }\n\n    debug(message: string, ...args: any[]): void {\n        this.log(LogLevel.Debug, this.format(message, args));\n    }\n\n    info(message: string, ...args: any[]): void {\n        this.log(LogLevel.Info, this.format(message, args));\n    }\n\n    warn(message: string, ...args: any[]): void {\n        this.log(LogLevel.Warning, this.format(message, args));\n    }\n\n    error(errorMsg: string | Error, ...args: any[]): void {\n        if (errorMsg instanceof Error) {\n            this.log(LogLevel.Error, this.format(errorMsg.stack || errorMsg.message, args));\n        } else {\n            this.log(LogLevel.Error, this.format(errorMsg, args));\n        }\n    }\n\n    private format(message: string, args: any[]): string {\n        if (args.length > 0) {\n            return `${message} ${args.map((arg: any) => isObject(arg) || isArray(arg) ? JSON.stringify(arg) : arg).join(' ')}`;\n        }\n        return message;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport * as theia from '@theia/plugin';\nimport { OutputChannelRegistryMain, PluginInfo } from '../../common/plugin-api-rpc';\n\nexport class OutputChannelImpl implements theia.OutputChannel {\n\n    private disposed: boolean;\n\n    constructor(readonly name: string, protected readonly proxy: OutputChannelRegistryMain, protected readonly pluginInfo: PluginInfo) {\n    }\n\n    dispose(): void {\n        if (!this.disposed) {\n            this.proxy.$dispose(this.name).then(() => {\n                this.disposed = true;\n            });\n        }\n    }\n\n    append(value: string): void {\n        this.validate();\n        this.proxy.$append(this.name, value, this.pluginInfo);\n    }\n\n    appendLine(value: string): void {\n        this.validate();\n        this.append(value + '\\n');\n    }\n\n    replace(value: string): void {\n        this.validate();\n        this.clear();\n        this.append(value);\n    }\n\n    clear(): void {\n        this.validate();\n        this.proxy.$clear(this.name);\n    }\n\n    show(preserveFocusOrColumn?: boolean | theia.ViewColumn, preserveFocus?: boolean): void {\n        this.validate();\n        if (typeof preserveFocusOrColumn === 'boolean') {\n            preserveFocus = preserveFocusOrColumn;\n        }\n        this.proxy.$reveal(this.name, !!preserveFocus);\n    }\n\n    hide(): void {\n        this.validate();\n        this.proxy.$close(this.name);\n    }\n\n    protected validate(): void {\n        if (this.disposed) {\n            throw new Error('Channel has been closed');\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nconst separator = '/';\n\nexport function normalize(path: string): string {\n    if (!path || path.length === 0) {\n        return '.';\n    }\n\n    const isAbsolute = path.charCodeAt(0) === 47;\n    const trailingSlash = path.charCodeAt(path.length - 1) === 47;\n\n    const parts = path.split(separator);\n\n    const result: string[] = [];\n\n    for (let i = 0; i < parts.length; i++) {\n        const p = parts[i];\n        if (p === '') {\n            continue;\n        }\n\n        if (p === '..') {\n            result.pop();\n            continue;\n        }\n\n        result.push(p);\n    }\n\n    if (result.length === 0) {\n        return '.';\n    }\n\n    path = result.join(separator);\n    if (isAbsolute) {\n        path = '/' + path;\n    }\n\n    if (trailingSlash) {\n        path += '/';\n    }\n\n    return path;\n}\n\nexport function join(...paths: string[]): string {\n    if (paths.length === 0) {\n        return '.';\n    }\n\n    const path = paths.join(separator);\n    return normalize(path);\n}\n","// *****************************************************************************\n// Copyright (C) 2018-2022 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* tslint:disable:typedef */\n\nimport type * as theia from '@theia/plugin';\nimport { CommandRegistryImpl } from './command-registry';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { CancellationError, CancellationToken, CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { QuickOpenExtImpl } from './quick-open';\nimport {\n    MAIN_RPC_CONTEXT,\n    Plugin as InternalPlugin,\n    PluginManager,\n    PluginAPIFactory,\n    MainMessageType,\n    DebugConfigurationProviderTriggerKind,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { MessageRegistryExt } from './message-registry';\nimport { StatusBarMessageRegistryExt } from './status-bar-message-registry';\nimport { WindowStateExtImpl } from './window-state';\nimport { WorkspaceExtImpl } from './workspace';\nimport { EnvExtImpl } from './env';\nimport { QueryParameters } from '../common/env';\nimport {\n    ConfigurationTarget,\n    Disposable,\n    Position,\n    Range,\n    Selection,\n    ViewColumn,\n    TextEditorSelectionChangeKind,\n    EndOfLine,\n    SnippetString,\n    ThemeColor,\n    ThemeIcon,\n    TextEditorRevealType,\n    TextEditorLineNumbersStyle,\n    DecorationRangeBehavior,\n    OverviewRulerLane,\n    StatusBarAlignment,\n    RelativePattern,\n    IndentAction,\n    CompletionItem,\n    CompletionItemKind,\n    CompletionList,\n    TextEdit,\n    SnippetTextEdit,\n    CompletionTriggerKind,\n    Diagnostic,\n    DiagnosticRelatedInformation,\n    DebugConsoleMode,\n    DiagnosticSeverity,\n    DiagnosticTag,\n    CompletionItemTag,\n    Location,\n    LogLevel,\n    Progress,\n    ProgressOptions,\n    ProgressLocation,\n    ParameterInformation,\n    SignatureInformation,\n    SignatureHelp,\n    SignatureHelpTriggerKind,\n    Hover,\n    EvaluatableExpression,\n    InlineValueEvaluatableExpression,\n    InlineValueText,\n    InlineValueVariableLookup,\n    InlineValueContext,\n    DocumentHighlightKind,\n    DocumentHighlight,\n    DocumentLink,\n    DocumentDropEdit,\n    CodeLens,\n    CodeActionKind,\n    CodeActionTrigger,\n    CodeActionTriggerKind,\n    TextDocumentSaveReason,\n    CodeAction,\n    DataTransferItem,\n    DataTransfer,\n    TreeItem,\n    TreeItemCollapsibleState,\n    TreeItemCheckboxState,\n    DocumentSymbol,\n    SymbolTag,\n    WorkspaceEdit,\n    SymbolInformation,\n    FileType,\n    FileChangeType,\n    ShellQuoting,\n    ShellExecution,\n    ProcessExecution,\n    CustomExecution,\n    TaskScope,\n    TaskPanelKind,\n    TaskRevealKind,\n    TaskGroup,\n    Task,\n    Task2,\n    DebugAdapterExecutable,\n    DebugAdapterServer,\n    DebugAdapterNamedPipeServer,\n    DebugAdapterInlineImplementation,\n    Breakpoint,\n    SourceBreakpoint,\n    FunctionBreakpoint,\n    FoldingRange,\n    FoldingRangeKind,\n    SelectionRange,\n    Color,\n    ColorInformation,\n    ColorPresentation,\n    OperatingSystem,\n    WebviewPanelTargetArea,\n    UIKind,\n    FileSystemError,\n    CommentThreadState,\n    CommentThreadCollapsibleState,\n    QuickInputButtons,\n    QuickPickItemKind,\n    CommentMode,\n    CallHierarchyItem,\n    CallHierarchyIncomingCall,\n    CallHierarchyOutgoingCall,\n    TypeHierarchyItem,\n    TimelineItem,\n    EnvironmentVariableMutatorType,\n    SemanticTokensLegend,\n    SemanticTokensBuilder,\n    SemanticTokens,\n    SemanticTokensEdits,\n    SemanticTokensEdit,\n    ColorThemeKind,\n    SourceControlInputBoxValidationType,\n    URI,\n    FileDecoration,\n    ExtensionMode,\n    LinkedEditingRanges,\n    LanguageStatusSeverity,\n    TextDocumentChangeReason,\n    InputBoxValidationSeverity,\n    TerminalLink,\n    TerminalLocation,\n    TerminalExitReason,\n    TerminalProfile,\n    TerminalQuickFixType,\n    InlayHint,\n    InlayHintKind,\n    InlayHintLabelPart,\n    TelemetryTrustedValue,\n    NotebookCellKind,\n    NotebookCellExecutionState,\n    NotebookCellStatusBarAlignment,\n    NotebookEditorRevealType,\n    NotebookControllerAffinity,\n    NotebookCellData,\n    NotebookCellOutput,\n    NotebookCellOutputItem,\n    NotebookData,\n    NotebookRange,\n    NotebookCellStatusBarItem,\n    NotebookEdit,\n    NotebookKernelSourceAction,\n    NotebookRendererScript,\n    TestRunProfileKind,\n    TestTag,\n    TestRunRequest,\n    TestMessage,\n    ExtensionKind,\n    InlineCompletionItem,\n    InlineCompletionList,\n    InlineCompletionTriggerKind,\n    TextTabInput,\n    CustomEditorTabInput,\n    NotebookDiffEditorTabInput,\n    NotebookEditorTabInput,\n    TerminalEditorTabInput,\n    TextDiffTabInput,\n    TextMergeTabInput,\n    WebviewEditorTabInput,\n    DocumentPasteEdit,\n    ExternalUriOpenerPriority,\n    EditSessionIdentityMatch,\n    TerminalOutputAnchor\n} from './types-impl';\nimport { AuthenticationExtImpl } from './authentication-ext';\nimport { SymbolKind } from '../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorsExtImpl } from './text-editors';\nimport { DocumentsExtImpl } from './documents';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { OutputChannelRegistryExtImpl } from './output-channel-registry';\nimport { TerminalServiceExtImpl, TerminalExtImpl } from './terminal-ext';\nimport { LanguagesExtImpl } from './languages';\nimport { fromDocumentSelector, pluginToPluginInfo, fromGlobPattern } from './type-converters';\nimport { DialogsExtImpl } from './dialogs';\nimport { NotificationExtImpl } from './notification';\nimport { score } from '@theia/editor/lib/common/language-selector';\nimport { MarkdownString } from './markdown-string';\nimport { TreeViewsExtImpl } from './tree/tree-views';\nimport { ConnectionImpl } from '../common/connection';\nimport { TasksExtImpl } from './tasks/tasks';\nimport { DebugExtImpl } from './debug/debug-ext';\nimport { FileSystemExtImpl } from './file-system-ext-impl';\nimport { ScmExtImpl } from './scm';\nimport { DecorationsExtImpl } from './decorations';\nimport { TextEditorExt } from './text-editor';\nimport { ClipboardExt } from './clipboard-ext';\nimport { WebviewsExtImpl } from './webviews';\nimport { ExtHostFileSystemEventService } from './file-system-event-service-ext-impl';\nimport { LabelServiceExtImpl } from '../plugin/label-service';\nimport {\n    createRunProfile,\n    createTestRun,\n    testItemCollection,\n    createTestItem\n} from './stubs/tests-api';\nimport { TimelineExtImpl } from './timeline';\nimport { ThemingExtImpl } from './theming';\nimport { CommentsExtImpl } from './comments';\nimport { CustomEditorsExtImpl } from './custom-editors';\nimport { WebviewViewsExtImpl } from './webview-views';\nimport { PluginPackage } from '../common';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\nimport { FilePermission } from '@theia/filesystem/lib/common/files';\nimport { TabsExtImpl } from './tabs';\nimport { LocalizationExtImpl } from './localization-ext';\nimport { NotebooksExtImpl } from './notebook/notebooks';\nimport { TelemetryExtImpl } from './telemetry-ext';\nimport { NotebookDocument } from './notebook/notebook-document';\nimport { NotebookRenderersExtImpl } from './notebook/notebook-renderers';\nimport { NotebookKernelsExtImpl } from './notebook/notebook-kernels';\nimport { NotebookDocumentsExtImpl } from './notebook/notebook-documents';\nimport { NotebookEditorsExtImpl } from './notebook/notebook-editors';\n\nexport function createAPIFactory(\n    rpc: RPCProtocol,\n    pluginManager: PluginManager,\n    envExt: EnvExtImpl,\n    debugExt: DebugExtImpl,\n    preferenceRegistryExt: PreferenceRegistryExtImpl,\n    editorsAndDocumentsExt: EditorsAndDocumentsExtImpl,\n    workspaceExt: WorkspaceExtImpl,\n    messageRegistryExt: MessageRegistryExt,\n    clipboard: ClipboardExt,\n    webviewExt: WebviewsExtImpl,\n    localizationExt: LocalizationExtImpl\n): PluginAPIFactory {\n\n    const authenticationExt = rpc.set(MAIN_RPC_CONTEXT.AUTHENTICATION_EXT, new AuthenticationExtImpl(rpc));\n    const commandRegistry = rpc.set(MAIN_RPC_CONTEXT.COMMAND_REGISTRY_EXT, new CommandRegistryImpl(rpc));\n    const quickOpenExt = rpc.set(MAIN_RPC_CONTEXT.QUICK_OPEN_EXT, new QuickOpenExtImpl(rpc));\n    const dialogsExt = new DialogsExtImpl(rpc);\n    const windowStateExt = rpc.set(MAIN_RPC_CONTEXT.WINDOW_STATE_EXT, new WindowStateExtImpl(rpc));\n    const notificationExt = rpc.set(MAIN_RPC_CONTEXT.NOTIFICATION_EXT, new NotificationExtImpl(rpc));\n    const editors = rpc.set(MAIN_RPC_CONTEXT.TEXT_EDITORS_EXT, new TextEditorsExtImpl(rpc, editorsAndDocumentsExt));\n    const documents = rpc.set(MAIN_RPC_CONTEXT.DOCUMENTS_EXT, new DocumentsExtImpl(rpc, editorsAndDocumentsExt));\n    const notebooksExt = rpc.set(MAIN_RPC_CONTEXT.NOTEBOOKS_EXT, new NotebooksExtImpl(rpc, commandRegistry, editorsAndDocumentsExt, documents));\n    const notebookEditors = rpc.set(MAIN_RPC_CONTEXT.NOTEBOOK_EDITORS_EXT, new NotebookEditorsExtImpl(notebooksExt));\n    const notebookRenderers = rpc.set(MAIN_RPC_CONTEXT.NOTEBOOK_RENDERERS_EXT, new NotebookRenderersExtImpl(rpc, notebooksExt));\n    const notebookKernels = rpc.set(MAIN_RPC_CONTEXT.NOTEBOOK_KERNELS_EXT, new NotebookKernelsExtImpl(rpc, notebooksExt, commandRegistry));\n    const notebookDocuments = rpc.set(MAIN_RPC_CONTEXT.NOTEBOOK_DOCUMENTS_EXT, new NotebookDocumentsExtImpl(notebooksExt));\n    const statusBarMessageRegistryExt = new StatusBarMessageRegistryExt(rpc);\n    const terminalExt = rpc.set(MAIN_RPC_CONTEXT.TERMINAL_EXT, new TerminalServiceExtImpl(rpc));\n    const outputChannelRegistryExt = rpc.set(MAIN_RPC_CONTEXT.OUTPUT_CHANNEL_REGISTRY_EXT, new OutputChannelRegistryExtImpl(rpc));\n    const treeViewsExt = rpc.set(MAIN_RPC_CONTEXT.TREE_VIEWS_EXT, new TreeViewsExtImpl(rpc, commandRegistry));\n    const tasksExt = rpc.set(MAIN_RPC_CONTEXT.TASKS_EXT, new TasksExtImpl(rpc, terminalExt));\n    const connectionExt = rpc.set(MAIN_RPC_CONTEXT.CONNECTION_EXT, new ConnectionImpl(rpc.getProxy(PLUGIN_RPC_CONTEXT.CONNECTION_MAIN)));\n    const fileSystemExt = rpc.set(MAIN_RPC_CONTEXT.FILE_SYSTEM_EXT, new FileSystemExtImpl(rpc));\n    const languagesExt = rpc.set(MAIN_RPC_CONTEXT.LANGUAGES_EXT, new LanguagesExtImpl(rpc, documents, commandRegistry, fileSystemExt));\n    const extHostFileSystemEvent = rpc.set(MAIN_RPC_CONTEXT.ExtHostFileSystemEventService, new ExtHostFileSystemEventService(rpc, editorsAndDocumentsExt));\n    const scmExt = rpc.set(MAIN_RPC_CONTEXT.SCM_EXT, new ScmExtImpl(rpc, commandRegistry));\n    const decorationsExt = rpc.set(MAIN_RPC_CONTEXT.DECORATIONS_EXT, new DecorationsExtImpl(rpc));\n    const labelServiceExt = rpc.set(MAIN_RPC_CONTEXT.LABEL_SERVICE_EXT, new LabelServiceExtImpl(rpc));\n    const timelineExt = rpc.set(MAIN_RPC_CONTEXT.TIMELINE_EXT, new TimelineExtImpl(rpc, commandRegistry));\n    const themingExt = rpc.set(MAIN_RPC_CONTEXT.THEMING_EXT, new ThemingExtImpl(rpc));\n    const commentsExt = rpc.set(MAIN_RPC_CONTEXT.COMMENTS_EXT, new CommentsExtImpl(rpc, commandRegistry, documents));\n    const tabsExt = rpc.set(MAIN_RPC_CONTEXT.TABS_EXT, new TabsExtImpl(rpc));\n    const customEditorExt = rpc.set(MAIN_RPC_CONTEXT.CUSTOM_EDITORS_EXT, new CustomEditorsExtImpl(rpc, documents, webviewExt, workspaceExt));\n    const webviewViewsExt = rpc.set(MAIN_RPC_CONTEXT.WEBVIEW_VIEWS_EXT, new WebviewViewsExtImpl(rpc, webviewExt));\n    const telemetryExt = rpc.set(MAIN_RPC_CONTEXT.TELEMETRY_EXT, new TelemetryExtImpl());\n    rpc.set(MAIN_RPC_CONTEXT.DEBUG_EXT, debugExt);\n\n    return function (plugin: InternalPlugin): typeof theia {\n        const authentication: typeof theia.authentication = {\n            registerAuthenticationProvider(id: string, label: string, provider: theia.AuthenticationProvider, options?: theia.AuthenticationProviderOptions): theia.Disposable {\n                return authenticationExt.registerAuthenticationProvider(id, label, provider, options);\n            },\n            getSession(providerId: string, scopes: string[], options: theia.AuthenticationGetSessionOptions) {\n                return authenticationExt.getSession(plugin, providerId, scopes, options as any);\n            },\n            get onDidChangeSessions(): theia.Event<theia.AuthenticationSessionsChangeEvent> {\n                return authenticationExt.onDidChangeSessions;\n            }\n        };\n        function commandIsDeclaredInPackage(id: string, model: PluginPackage): boolean {\n            const rawCommands = model.contributes?.commands;\n            if (!rawCommands) { return false; }\n            return Array.isArray(rawCommands) ? rawCommands.some(candidate => candidate.command === id) : rawCommands.command === id;\n        }\n        const commands: typeof theia.commands = {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            registerCommand(command: theia.CommandDescription | string, handler?: <T>(...args: any[]) => T | Thenable<T | undefined>, thisArg?: any): Disposable {\n                // use of the ID when registering commands\n                if (typeof command === 'string') {\n                    if (handler && commandIsDeclaredInPackage(command, plugin.rawModel)) {\n                        return commandRegistry.registerHandler(command, handler, thisArg);\n                    }\n                    return commandRegistry.registerCommand({ id: command }, handler, thisArg);\n                }\n                return commandRegistry.registerCommand(command, handler, thisArg);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            executeCommand<T>(commandId: string, ...args: any[]): PromiseLike<T | undefined> {\n                return commandRegistry.executeCommand<T>(commandId, ...args);\n            },\n            registerTextEditorCommand(command: string, handler: (textEditor: theia.TextEditor, edit: theia.TextEditorEdit, ...arg: any[]) => void, thisArg?: any): Disposable {\n                const internalHandler = (...args: any[]): any => {\n                    const activeTextEditor = editors.getActiveEditor();\n                    if (!activeTextEditor) {\n                        console.warn('Cannot execute ' + command + ' because there is no active text editor.');\n                        return undefined;\n                    }\n\n                    return activeTextEditor.edit((edit: theia.TextEditorEdit) => {\n                        args.unshift(activeTextEditor, edit);\n                        handler.apply(thisArg, args);\n                    }).then(result => {\n                        if (!result) {\n                            console.warn('Edits from command ' + command + ' were not applied.');\n                        }\n                    }, err => {\n                        console.warn('An error occurred while running command ' + command, err);\n                    });\n                };\n                return commandIsDeclaredInPackage(command, plugin.rawModel)\n                    ? commandRegistry.registerHandler(command, internalHandler)\n                    : commandRegistry.registerCommand({ id: command }, internalHandler);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            registerHandler(commandId: string, handler: (...args: any[]) => any, thisArg?: any): Disposable {\n                return commandRegistry.registerHandler(commandId, handler, thisArg);\n            },\n            getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n                return commandRegistry.getKeyBinding(commandId);\n            },\n            getCommands(filterInternal: boolean = false): PromiseLike<string[]> {\n                return commandRegistry.getCommands(filterInternal);\n            },\n            registerDiffInformationCommand(command: string, callback: (diff: theia.LineChange[], ...args: any[]) => any, thisArg?: any): Disposable {\n                // Dummy implementation.\n                return new Disposable(() => { });\n            }\n        };\n\n        const { onDidChangeActiveTerminal, onDidChangeTerminalState, onDidCloseTerminal, onDidOpenTerminal } = terminalExt;\n        const showInformationMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Info);\n        const showWarningMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Warning);\n        const showErrorMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Error);\n        const window: typeof theia.window = {\n\n            get activeTerminal(): TerminalExtImpl | undefined {\n                return terminalExt.activeTerminal;\n            },\n            get activeTextEditor(): TextEditorExt | undefined {\n                return editors.getActiveEditor();\n            },\n            get visibleTextEditors(): theia.TextEditor[] {\n                return editors.getVisibleTextEditors();\n            },\n            get terminals(): TerminalExtImpl[] {\n                return terminalExt.terminals;\n            },\n            onDidChangeActiveTerminal,\n            onDidChangeActiveTextEditor(listener, thisArg?, disposables?) {\n                return editors.onDidChangeActiveTextEditor(listener, thisArg, disposables);\n            },\n            onDidChangeVisibleTextEditors(listener, thisArg?, disposables?) {\n                return editors.onDidChangeVisibleTextEditors(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorSelection(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorSelection(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorOptions(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorOptions(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorViewColumn(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorViewColumn(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorVisibleRanges(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorVisibleRanges(listener, thisArg, disposables);\n            },\n            async showTextDocument(documentArg: theia.TextDocument | URI,\n                columnOrOptions?: theia.TextDocumentShowOptions | theia.ViewColumn,\n                preserveFocus?: boolean\n            ): Promise<theia.TextEditor> {\n                let documentOptions: theia.TextDocumentShowOptions | undefined;\n                const uri: URI = documentArg instanceof URI ? documentArg : documentArg.uri;\n                if (typeof columnOrOptions === 'number') {\n                    documentOptions = {\n                        viewColumn: columnOrOptions\n                    };\n                } else if (columnOrOptions && (columnOrOptions.preserveFocus || columnOrOptions.preview || columnOrOptions.selection || columnOrOptions.viewColumn)) {\n                    documentOptions = {\n                        ...columnOrOptions\n                    };\n                }\n                if (preserveFocus) {\n                    if (documentOptions) {\n                        documentOptions.preserveFocus = preserveFocus;\n                    } else {\n                        documentOptions = { preserveFocus };\n                    }\n                }\n                await documents.showDocument(uri, documentOptions);\n                const textEditor = editors.getVisibleTextEditors().find(editor => editor.document.uri.toString() === uri.toString());\n                if (textEditor) {\n                    return Promise.resolve(textEditor);\n                } else {\n                    throw new Error(`Failed to show text document ${documentArg.toString()}`);\n                }\n            },\n            get visibleNotebookEditors(): theia.NotebookEditor[] {\n                return notebooksExt.visibleApiNotebookEditors;\n            },\n            onDidChangeVisibleNotebookEditors(listener, thisArg?, disposables?) {\n                return notebooksExt.onDidChangeVisibleNotebookEditors(listener, thisArg, disposables);\n            },\n            get activeNotebookEditor(): theia.NotebookEditor | undefined {\n                return notebooksExt.activeApiNotebookEditor;\n            }, onDidChangeActiveNotebookEditor(listener, thisArg?, disposables?) {\n                return notebooksExt.onDidChangeActiveNotebookEditor(listener, thisArg, disposables);\n            },\n            onDidChangeNotebookEditorSelection(listener, thisArg?, disposables?) {\n                return notebookEditors.onDidChangeNotebookEditorSelection(listener, thisArg, disposables);\n            },\n            onDidChangeNotebookEditorVisibleRanges(listener, thisArg?, disposables?) {\n                return notebookEditors.onDidChangeNotebookEditorVisibleRanges(listener, thisArg, disposables);\n            },\n            showNotebookDocument(document: theia.NotebookDocument, options?: theia.NotebookDocumentShowOptions) {\n                return notebooksExt.showNotebookDocument(document, options);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            showQuickPick(items: any, options?: theia.QuickPickOptions, token?: theia.CancellationToken): any {\n                return quickOpenExt.showQuickPick(items, options, token);\n            },\n            createQuickPick<T extends theia.QuickPickItem>(): theia.QuickPick<T> {\n                return quickOpenExt.createQuickPick(plugin);\n            },\n            showWorkspaceFolderPick(options?: theia.WorkspaceFolderPickOptions): PromiseLike<theia.WorkspaceFolder | undefined> {\n                return workspaceExt.pickWorkspaceFolder(options);\n            },\n            showInformationMessage,\n            showWarningMessage,\n            showErrorMessage,\n            showOpenDialog(options: theia.OpenDialogOptions): PromiseLike<URI[] | undefined> {\n                return dialogsExt.showOpenDialog(options);\n            },\n            showSaveDialog(options: theia.SaveDialogOptions): PromiseLike<URI | undefined> {\n                return dialogsExt.showSaveDialog(options);\n            },\n            showUploadDialog(options: theia.UploadDialogOptions): PromiseLike<URI[] | undefined> {\n                return dialogsExt.showUploadDialog(options);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            setStatusBarMessage(text: string, arg?: number | PromiseLike<any>): Disposable {\n                return statusBarMessageRegistryExt.setStatusBarMessage(text, arg);\n            },\n            showInputBox(options?: theia.InputBoxOptions, token?: theia.CancellationToken): PromiseLike<string | undefined> {\n                return quickOpenExt.showInput(options, token);\n            },\n            createStatusBarItem(alignmentOrId?: theia.StatusBarAlignment | string, priorityOrAlignment?: number | theia.StatusBarAlignment,\n                priorityArg?: number): theia.StatusBarItem {\n                let id: string | undefined;\n                let alignment: number | undefined;\n                let priority: number | undefined;\n\n                if (typeof alignmentOrId === 'string') {\n                    id = alignmentOrId;\n                    alignment = priorityOrAlignment;\n                    priority = priorityArg;\n                } else {\n                    alignment = alignmentOrId;\n                    priority = priorityOrAlignment;\n                }\n\n                return statusBarMessageRegistryExt.createStatusBarItem(alignment, priority, id);\n            },\n            createOutputChannel(name: string, options?: { log: true }): any {\n                return !options\n                    ? outputChannelRegistryExt.createOutputChannel(name, pluginToPluginInfo(plugin))\n                    : outputChannelRegistryExt.createOutputChannel(name, pluginToPluginInfo(plugin), options);\n            },\n            createWebviewPanel(viewType: string,\n                title: string,\n                showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n                options: theia.WebviewPanelOptions & theia.WebviewOptions = {}): theia.WebviewPanel {\n                return webviewExt.createWebview(viewType, title, showOptions, options, plugin);\n            },\n            registerWebviewPanelSerializer(viewType: string, serializer: theia.WebviewPanelSerializer): theia.Disposable {\n                return webviewExt.registerWebviewPanelSerializer(viewType, serializer, plugin);\n            },\n            registerCustomEditorProvider(viewType: string,\n                provider: theia.CustomTextEditorProvider | theia.CustomReadonlyEditorProvider,\n                options: { webviewOptions?: theia.WebviewPanelOptions, supportsMultipleEditorsPerDocument?: boolean } = {}): theia.Disposable {\n                return customEditorExt.registerCustomEditorProvider(viewType, provider, options, plugin);\n            },\n            registerWebviewViewProvider(viewType: string,\n                provider: theia.WebviewViewProvider,\n                options?: {\n                    webviewOptions?: {\n                        retainContextWhenHidden?: boolean\n                    }\n                }): theia.Disposable {\n                return webviewViewsExt.registerWebviewViewProvider(viewType, provider, plugin, options?.webviewOptions);\n            },\n            get state(): theia.WindowState {\n                return windowStateExt.getWindowState();\n            },\n            onDidChangeWindowState(listener, thisArg?, disposables?): theia.Disposable {\n                return windowStateExt.onDidChangeWindowState(listener, thisArg, disposables);\n            },\n            createTerminal(nameOrOptions: theia.TerminalOptions | theia.ExtensionTerminalOptions | theia.ExtensionTerminalOptions | (string | undefined),\n                shellPath?: string,\n                shellArgs?: string[] | string): theia.Terminal {\n                return terminalExt.createTerminal(nameOrOptions, shellPath, shellArgs);\n            },\n            onDidChangeTerminalState,\n            onDidCloseTerminal,\n            onDidOpenTerminal,\n            createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n                return editors.createTextEditorDecorationType(options);\n            },\n            registerTreeDataProvider<T>(viewId: string, treeDataProvider: theia.TreeDataProvider<T>): Disposable {\n                return treeViewsExt.registerTreeDataProvider(plugin, viewId, treeDataProvider);\n            },\n            createTreeView<T>(viewId: string, options: theia.TreeViewOptions<T>): theia.TreeView<T> {\n                return treeViewsExt.createTreeView(plugin, viewId, options);\n            },\n            withScmProgress<R>(task: (progress: theia.Progress<number>) => Thenable<R>) {\n                const options: ProgressOptions = { location: ProgressLocation.SourceControl };\n                return notificationExt.withProgress(options, () => task({ report() { /* noop */ } }));\n            },\n            withProgress<R>(\n                options: ProgressOptions,\n                task: (progress: Progress<{ message?: string; increment?: number }>, token: theia.CancellationToken) => PromiseLike<R>\n            ): PromiseLike<R> {\n                return notificationExt.withProgress(options, task);\n            },\n            registerFileDecorationProvider(provider: theia.FileDecorationProvider): theia.Disposable {\n                return decorationsExt.registerFileDecorationProvider(provider, pluginToPluginInfo(plugin));\n            },\n            registerUriHandler(handler: theia.UriHandler): theia.Disposable {\n                // TODO ?\n                return new Disposable(() => { });\n            },\n            createInputBox(): theia.InputBox {\n                return quickOpenExt.createInputBox(plugin);\n            },\n            registerTerminalLinkProvider(provider: theia.TerminalLinkProvider): theia.Disposable {\n                return terminalExt.registerTerminalLinkProvider(provider);\n            },\n            registerTerminalProfileProvider(id: string, provider: theia.TerminalProfileProvider): theia.Disposable {\n                return terminalExt.registerTerminalProfileProvider(id, provider);\n            },\n            get activeColorTheme(): theia.ColorTheme {\n                return themingExt.activeColorTheme;\n            },\n            onDidChangeActiveColorTheme(listener, thisArg?, disposables?) {\n                return themingExt.onDidChangeActiveColorTheme(listener, thisArg, disposables);\n            },\n            get tabGroups(): theia.TabGroups {\n                return tabsExt.tabGroups;\n            },\n            /** @stubbed ExternalUriOpener */\n            registerExternalUriOpener(id: string, opener: theia.ExternalUriOpener, metadata: theia.ExternalUriOpenerMetadata): theia.Disposable {\n                return Disposable.NULL;\n            },\n            /** @stubbed ProfileContentHandler */\n            registerProfileContentHandler(id: string, profileContentHandler: theia.ProfileContentHandler): theia.Disposable {\n                return Disposable.NULL;\n            },\n            /** @stubbed TerminalQuickFixProvider */\n            registerTerminalQuickFixProvider(id: string, provider: theia.TerminalQuickFixProvider): theia.Disposable {\n                return terminalExt.registerTerminalQuickFixProvider(id, provider);\n            },\n            /** @stubbed ShareProvider */\n            registerShareProvider: () => Disposable.NULL,\n        };\n\n        const workspace: typeof theia.workspace = {\n\n            get fs(): theia.FileSystem {\n                return fileSystemExt.fileSystem;\n            },\n\n            get rootPath(): string | undefined {\n                return workspaceExt.rootPath;\n            },\n            get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n                return workspaceExt.workspaceFolders;\n            },\n            get workspaceFile(): URI | undefined {\n                return workspaceExt.workspaceFile;\n            },\n            get name(): string | undefined {\n                return workspaceExt.name;\n            },\n            onDidChangeWorkspaceFolders(listener, thisArg?, disposables?): theia.Disposable {\n                return workspaceExt.onDidChangeWorkspaceFolders(listener, thisArg, disposables);\n            },\n            get notebookDocuments(): theia.NotebookDocument[] {\n                return notebooksExt.getAllApiDocuments();\n            },\n            get textDocuments(): theia.TextDocument[] {\n                return documents.getAllDocumentData().map(data => data.document);\n            },\n            onDidChangeTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidChangeDocument(listener, thisArg, disposables);\n            },\n            onDidCloseTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidRemoveDocument(listener, thisArg, disposables);\n            },\n            onDidOpenNotebookDocument(listener, thisArg?, disposables?) {\n                return notebooksExt.onDidOpenNotebookDocument(listener, thisArg, disposables);\n            },\n            onDidCloseNotebookDocument(listener, thisArg?, disposables?) {\n                return notebooksExt.onDidCloseNotebookDocument(listener, thisArg, disposables);\n            },\n            onWillSaveNotebookDocument(listener, thisArg?, disposables?) {\n                return Disposable.NULL;\n            },\n            onDidSaveNotebookDocument(listener, thisArg, disposables) {\n                return notebookDocuments.onDidSaveNotebookDocument(listener, thisArg, disposables);\n            },\n            onDidChangeNotebookDocument(listener, thisArg, disposables) {\n                return notebookDocuments.onDidChangeNotebookDocument(listener, thisArg, disposables);\n            },\n            onDidOpenTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidAddDocument(listener, thisArg, disposables);\n            },\n            onWillSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onWillSaveTextDocument(listener, thisArg, disposables);\n            },\n            onDidSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidSaveTextDocument(listener, thisArg, disposables);\n            },\n            onDidCreateFiles: (listener, thisArg, disposables) => extHostFileSystemEvent.onDidCreateFile(listener, thisArg, disposables),\n            onDidDeleteFiles: (listener, thisArg, disposables) => extHostFileSystemEvent.onDidDeleteFile(listener, thisArg, disposables),\n            onDidRenameFiles: (listener, thisArg, disposables) => extHostFileSystemEvent.onDidRenameFile(listener, thisArg, disposables),\n            onWillCreateFiles: (listener: (e: theia.FileWillCreateEvent) => any, thisArg?: any, disposables?: theia.Disposable[]) =>\n                extHostFileSystemEvent.getOnWillCreateFileEvent(plugin)(listener, thisArg, disposables),\n            onWillDeleteFiles: (listener: (e: theia.FileWillDeleteEvent) => any, thisArg?: any, disposables?: theia.Disposable[]) =>\n                extHostFileSystemEvent.getOnWillDeleteFileEvent(plugin)(listener, thisArg, disposables),\n            onWillRenameFiles: (listener: (e: theia.FileWillRenameEvent) => any, thisArg?: any, disposables?: theia.Disposable[]) =>\n                extHostFileSystemEvent.getOnWillRenameFileEvent(plugin)(listener, thisArg, disposables),\n            getConfiguration(section, resource): theia.WorkspaceConfiguration {\n                return preferenceRegistryExt.getConfiguration(section, resource);\n            },\n            onDidChangeConfiguration(listener, thisArgs?, disposables?): theia.Disposable {\n                return preferenceRegistryExt.onDidChangeConfiguration(listener, thisArgs, disposables);\n            },\n            async openTextDocument(uriOrFileNameOrOptions?: theia.Uri | string | { language?: string; content?: string; }): Promise<theia.TextDocument | undefined> {\n                const options = uriOrFileNameOrOptions as { language?: string; content?: string; };\n\n                let uri: URI;\n                if (typeof uriOrFileNameOrOptions === 'string') {\n                    uri = URI.file(uriOrFileNameOrOptions);\n\n                } else if (uriOrFileNameOrOptions instanceof URI) {\n                    uri = uriOrFileNameOrOptions;\n\n                } else if (!options || typeof options === 'object') {\n                    uri = await documents.createDocumentData(options);\n\n                } else {\n                    return Promise.reject(new Error('illegal argument - uriOrFileNameOrOptions'));\n                }\n\n                const data = await documents.openDocument(uri);\n                return data && data.document;\n            },\n            async openNotebookDocument(uriOrType: theia.Uri | string, content?: NotebookData): Promise<theia.NotebookDocument | undefined> {\n                let uri: URI;\n                if (URI.isUri(uriOrType)) {\n                    uri = uriOrType;\n                    await notebooksExt.openNotebookDocument(uriOrType as URI);\n                } else if (typeof uriOrType === 'string') {\n                    uri = URI.revive(await notebooksExt.createNotebookDocument({ viewType: uriOrType, content }));\n                } else {\n                    throw new Error('Invalid arguments');\n                }\n                return notebooksExt.getNotebookDocument(uri).apiNotebook;\n\n            },\n            createFileSystemWatcher: (pattern, ignoreCreate, ignoreChange, ignoreDelete): theia.FileSystemWatcher =>\n                extHostFileSystemEvent.createFileSystemWatcher(fromGlobPattern(pattern), ignoreCreate, ignoreChange, ignoreDelete),\n            findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | null, maxResults?: number, token?: CancellationToken): PromiseLike<URI[]> {\n                return workspaceExt.findFiles(include, exclude, maxResults, token);\n            },\n            findTextInFiles(query: theia.TextSearchQuery, optionsOrCallback: theia.FindTextInFilesOptions | ((result: theia.TextSearchResult) => void),\n                callbackOrToken?: CancellationToken | ((result: theia.TextSearchResult) => void), token?: CancellationToken): Promise<theia.TextSearchComplete> {\n                return workspaceExt.findTextInFiles(query, optionsOrCallback, callbackOrToken, token);\n            },\n            saveAll(includeUntitled?: boolean): PromiseLike<boolean> {\n                return editors.saveAll(includeUntitled);\n            },\n            applyEdit(edit: theia.WorkspaceEdit, metadata?: theia.WorkspaceEditMetadata): PromiseLike<boolean> {\n                return editors.applyWorkspaceEdit(edit, metadata);\n            },\n            registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n                return workspaceExt.registerTextDocumentContentProvider(scheme, provider);\n            },\n            registerFileSystemProvider(scheme: string, provider: theia.FileSystemProvider, options?: { isCaseSensitive?: boolean, isReadonly?: boolean }): theia.Disposable {\n                return fileSystemExt.registerFileSystemProvider(scheme, provider, options);\n            },\n            getWorkspaceFolder(uri: theia.Uri): theia.WorkspaceFolder | undefined {\n                return workspaceExt.getWorkspaceFolder(uri);\n            },\n            asRelativePath(pathOrUri: theia.Uri | string, includeWorkspace?: boolean): string | undefined {\n                return workspaceExt.getRelativePath(pathOrUri, includeWorkspace);\n            },\n            updateWorkspaceFolders: (index, deleteCount, ...workspaceFoldersToAdd) =>\n                workspaceExt.updateWorkspaceFolders(index, deleteCount || 0, ...workspaceFoldersToAdd)\n            ,\n            registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n                return tasks.registerTaskProvider(type, provider);\n            },\n            registerResourceLabelFormatter(formatter: theia.ResourceLabelFormatter): theia.Disposable {\n                return labelServiceExt.$registerResourceLabelFormatter(formatter);\n            },\n            registerTimelineProvider(scheme: string | string[], provider: theia.TimelineProvider): theia.Disposable {\n                return timelineExt.registerTimelineProvider(plugin, scheme, provider);\n            },\n            registerNotebookSerializer(notebookType: string, serializer: theia.NotebookSerializer, options?: theia.NotebookDocumentContentOptions): theia.Disposable {\n                return notebooksExt.registerNotebookSerializer(plugin, notebookType, serializer, options);\n            },\n            get isTrusted(): boolean {\n                return workspaceExt.trusted;\n            },\n            async requestWorkspaceTrust(options?: theia.WorkspaceTrustRequestOptions): Promise<boolean | undefined> {\n                return workspaceExt.requestWorkspaceTrust(options);\n            },\n            get onDidGrantWorkspaceTrust(): theia.Event<void> {\n                return workspaceExt.onDidGrantWorkspaceTrust;\n            },\n            registerEditSessionIdentityProvider(scheme: string, provider: theia.EditSessionIdentityProvider) {\n                return workspaceExt.$registerEditSessionIdentityProvider(scheme, provider);\n            },\n            /**\n             * @stubbed\n             * This is a stub implementation, that should minimally satisfy vscode built-in extensions\n             * that currently use this proposed API.\n             */\n            onWillCreateEditSessionIdentity: () => Disposable.NULL,\n            registerCanonicalUriProvider(scheme: string, provider: theia.CanonicalUriProvider): theia.Disposable {\n                return workspaceExt.registerCanonicalUriProvider(scheme, provider);\n            },\n            getCanonicalUri(uri: theia.Uri, options: theia.CanonicalUriRequestOptions, token: CancellationToken): theia.ProviderResult<theia.Uri> {\n                return workspaceExt.getCanonicalUri(uri, options, token);\n            }\n        };\n\n        const onDidChangeLogLevel = new Emitter<theia.LogLevel>();\n        const env: typeof theia.env = Object.freeze({\n            get appName(): string { return envExt.appName; },\n            get appRoot(): string { return envExt.appRoot; },\n            get appHost(): string { return envExt.appHost; },\n            get language(): string { return envExt.language; },\n            get isNewAppInstall(): boolean { return envExt.isNewAppInstall; },\n            get isTelemetryEnabled(): boolean { return telemetryExt.isTelemetryEnabled; },\n            get onDidChangeTelemetryEnabled(): theia.Event<boolean> {\n                return telemetryExt.onDidChangeTelemetryEnabled;\n            },\n            createTelemetryLogger(sender: theia.TelemetrySender, options?: theia.TelemetryLoggerOptions): theia.TelemetryLogger {\n                return telemetryExt.createTelemetryLogger(sender, options);\n            },\n            get remoteName(): string | undefined { return envExt.remoteName; },\n            get machineId(): string { return envExt.machineId; },\n            get sessionId(): string { return envExt.sessionId; },\n            get uriScheme(): string { return envExt.uriScheme; },\n            get shell(): string { return envExt.shell; },\n            get uiKind(): theia.UIKind { return envExt.uiKind; },\n            clipboard,\n            getEnvVariable(envVarName: string): PromiseLike<string | undefined> {\n                return envExt.getEnvVariable(envVarName);\n            },\n            getQueryParameter(queryParamName: string): string | string[] | undefined {\n                return envExt.getQueryParameter(queryParamName);\n            },\n            getQueryParameters(): QueryParameters {\n                return envExt.getQueryParameters();\n            },\n            getClientOperatingSystem(): PromiseLike<theia.OperatingSystem> {\n                return envExt.getClientOperatingSystem();\n            },\n            openExternal(uri: theia.Uri): PromiseLike<boolean> {\n                return windowStateExt.openUri(uri);\n            },\n            asExternalUri(target: theia.Uri): PromiseLike<theia.Uri> {\n                return windowStateExt.asExternalUri(target);\n            },\n            get logLevel(): theia.LogLevel { return LogLevel.Info; },\n            get onDidChangeLogLevel(): theia.Event<theia.LogLevel> { return onDidChangeLogLevel.event; }\n        });\n\n        const extensions: typeof theia.extensions = Object.freeze({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            getExtension<T = any>(extensionId: string, includeFromDifferentExtensionHosts: boolean = false): theia.Extension<T> | undefined {\n                includeFromDifferentExtensionHosts = false;\n                const plg = pluginManager.getPluginById(extensionId.toLowerCase());\n                if (plg) {\n                    return new PluginExt(pluginManager, plg);\n                }\n                return undefined;\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            get all(): readonly theia.Extension<any>[] {\n                return pluginManager.getAllPlugins().map(plg => new PluginExt(pluginManager, plg));\n            },\n            get allAcrossExtensionHosts(): readonly theia.Extension<any>[] {\n                // we only support one extension host ATM so equivalent to calling \"all()\"\n                return this.all;\n            },\n            get onDidChange(): theia.Event<void> {\n                return pluginManager.onDidChange;\n            }\n        });\n\n        const languages: typeof theia.languages = {\n            getLanguages(): PromiseLike<string[]> {\n                return languagesExt.getLanguages();\n            },\n            setTextDocumentLanguage(document: theia.TextDocument, languageId: string): PromiseLike<theia.TextDocument> {\n                return languagesExt.changeLanguage(document.uri, languageId);\n            },\n            match(selector: theia.DocumentSelector, document: theia.TextDocument): number {\n                return score(fromDocumentSelector(selector), document.uri.scheme, document.uri.path, document.languageId, true);\n            },\n            get onDidChangeDiagnostics(): theia.Event<theia.DiagnosticChangeEvent> {\n                return languagesExt.onDidChangeDiagnostics;\n            },\n            getDiagnostics(resource?: URI) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                return <any>languagesExt.getDiagnostics(resource);\n            },\n            createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n                return languagesExt.createDiagnosticCollection(name);\n            },\n            setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n                return languagesExt.setLanguageConfiguration(language, configuration);\n            },\n            registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, ...triggerCharacters: string[]): theia.Disposable {\n                return languagesExt.registerCompletionItemProvider(selector, provider, triggerCharacters, pluginToPluginInfo(plugin));\n            },\n            registerInlineCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.InlineCompletionItemProvider): theia.Disposable {\n                return languagesExt.registerInlineCompletionsProvider(selector, provider);\n            },\n            registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider): theia.Disposable {\n                return languagesExt.registerDefinitionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDeclarationProvider(selector: theia.DocumentSelector, provider: theia.DeclarationProvider): theia.Disposable {\n                return languagesExt.registerDeclarationProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerSignatureHelpProvider(\n                selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, first?: string | theia.SignatureHelpProviderMetadata, ...remaining: string[]\n            ): theia.Disposable {\n                let metadata: theia.SignatureHelpProviderMetadata;\n                if (typeof first === 'object') {\n                    metadata = first;\n                } else {\n                    const triggerCharacters: string[] = [];\n                    metadata = { triggerCharacters, retriggerCharacters: [] };\n                    if (first) {\n                        triggerCharacters.push(first, ...remaining);\n                    }\n                }\n                return languagesExt.registerSignatureHelpProvider(selector, provider, metadata, pluginToPluginInfo(plugin));\n            },\n            registerTypeDefinitionProvider(selector: theia.DocumentSelector, provider: theia.TypeDefinitionProvider): theia.Disposable {\n                return languagesExt.registerTypeDefinitionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerImplementationProvider(selector: theia.DocumentSelector, provider: theia.ImplementationProvider): theia.Disposable {\n                return languagesExt.registerImplementationProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider): theia.Disposable {\n                return languagesExt.registerHoverProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerEvaluatableExpressionProvider(selector: theia.DocumentSelector, provider: theia.EvaluatableExpressionProvider): theia.Disposable {\n                return languagesExt.registerEvaluatableExpressionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerInlineValuesProvider(selector: theia.DocumentSelector, provider: theia.InlineValuesProvider): theia.Disposable {\n                return languagesExt.registerInlineValuesProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentHighlightProvider(selector: theia.DocumentSelector, provider: theia.DocumentHighlightProvider): theia.Disposable {\n                return languagesExt.registerDocumentHighlightProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerWorkspaceSymbolProvider(provider: theia.WorkspaceSymbolProvider): theia.Disposable {\n                return languagesExt.registerWorkspaceSymbolProvider(provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentFormattingEditProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentRangeFormattingEditProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerOnTypeFormattingEditProvider(\n                selector: theia.DocumentSelector,\n                provider: theia.OnTypeFormattingEditProvider,\n                firstTriggerCharacter: string,\n                ...moreTriggerCharacters: string[]\n            ): theia.Disposable {\n                return languagesExt.registerOnTypeFormattingEditProvider(selector, provider, [firstTriggerCharacter].concat(moreTriggerCharacters), pluginToPluginInfo(plugin));\n            },\n            registerDocumentDropEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentDropEditProvider, metadata?: theia.DocumentDropEditProviderMetadata) {\n                return languagesExt.registerDocumentDropEditProvider(selector, provider, metadata);\n            },\n            registerDocumentLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider): theia.Disposable {\n                return languagesExt.registerDocumentLinkProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerCodeActionsProvider(selector: theia.DocumentSelector, provider: theia.CodeActionProvider, metadata?: theia.CodeActionProviderMetadata): theia.Disposable {\n                return languagesExt.registerCodeActionsProvider(selector, provider, plugin.model, pluginToPluginInfo(plugin), metadata);\n            },\n            registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider): theia.Disposable {\n                return languagesExt.registerCodeLensProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider): theia.Disposable {\n                return languagesExt.registerReferenceProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider,\n                metadata?: theia.DocumentSymbolProviderMetadata): theia.Disposable {\n                return languagesExt.registerDocumentSymbolProvider(selector, provider, pluginToPluginInfo(plugin), metadata);\n            },\n            registerColorProvider(selector: theia.DocumentSelector, provider: theia.DocumentColorProvider): theia.Disposable {\n                return languagesExt.registerColorProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerInlayHintsProvider(selector: theia.DocumentSelector, provider: theia.InlayHintsProvider): theia.Disposable {\n                return languagesExt.registerInlayHintsProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerFoldingRangeProvider(selector: theia.DocumentSelector, provider: theia.FoldingRangeProvider): theia.Disposable {\n                return languagesExt.registerFoldingRangeProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerSelectionRangeProvider(selector: theia.DocumentSelector, provider: theia.SelectionRangeProvider): theia.Disposable {\n                return languagesExt.registerSelectionRangeProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerRenameProvider(selector: theia.DocumentSelector, provider: theia.RenameProvider): theia.Disposable {\n                return languagesExt.registerRenameProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentSemanticTokensProvider, legend: theia.SemanticTokensLegend):\n                theia.Disposable {\n                return languagesExt.registerDocumentSemanticTokensProvider(selector, provider, legend, pluginToPluginInfo(plugin));\n            },\n            registerDocumentRangeSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeSemanticTokensProvider, legend: theia.SemanticTokensLegend):\n                theia.Disposable {\n                return languagesExt.registerDocumentRangeSemanticTokensProvider(selector, provider, legend, pluginToPluginInfo(plugin));\n            },\n            registerCallHierarchyProvider(selector: theia.DocumentSelector, provider: theia.CallHierarchyProvider): theia.Disposable {\n                return languagesExt.registerCallHierarchyProvider(selector, provider);\n            },\n            registerTypeHierarchyProvider(selector: theia.DocumentSelector, provider: theia.TypeHierarchyProvider): theia.Disposable {\n                return languagesExt.registerTypeHierarchyProvider(selector, provider);\n            },\n            registerLinkedEditingRangeProvider(selector: theia.DocumentSelector, provider: theia.LinkedEditingRangeProvider): theia.Disposable {\n                return languagesExt.registerLinkedEditingRangeProvider(selector, provider);\n            },\n            createLanguageStatusItem(id: string, selector: theia.DocumentSelector): theia.LanguageStatusItem {\n                return languagesExt.createLanguageStatusItem(plugin, id, selector);\n            },\n            registerDocumentPasteEditProvider(\n                selector: theia.DocumentSelector, provider: theia.DocumentPasteEditProvider, metadata: theia.DocumentPasteProviderMetadata\n            ): theia.Disposable {\n                return languagesExt.registerDocumentPasteEditProvider(plugin, selector, provider, metadata);\n            }\n        };\n\n        // Tests API (@stubbed)\n        // The following implementation is temporarily `@stubbed` and marked as such under `theia.d.ts`\n        const tests: typeof theia.tests = {\n            createTestController(\n                provider,\n                controllerLabel: string,\n                refreshHandler?: (\n                    token: theia.CancellationToken\n                ) => Thenable<void> | void\n            ) {\n                return {\n                    id: provider,\n                    label: controllerLabel,\n                    items: testItemCollection,\n                    refreshHandler,\n                    createRunProfile,\n                    createTestRun,\n                    createTestItem,\n                    dispose: () => undefined,\n                };\n            },\n        };\n        /* End of Tests API */\n\n        const plugins: typeof theia.plugins = {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            get all(): theia.Plugin<any>[] {\n                return pluginManager.getAllPlugins().map(plg => new PluginExt(pluginManager, plg));\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            getPlugin(pluginId: string): theia.Plugin<any> | undefined {\n                const plg = pluginManager.getPluginById(pluginId.toLowerCase());\n                if (plg) {\n                    return new PluginExt(pluginManager, plg);\n                }\n                return undefined;\n            },\n            get onDidChange(): theia.Event<void> {\n                return pluginManager.onDidChange;\n            }\n        };\n\n        const debuggersContributions = plugin.rawModel.contributes && plugin.rawModel.contributes.debuggers || [];\n        debugExt.assistedInject(connectionExt, commandRegistry);\n        debugExt.registerDebuggersContributions(plugin.pluginFolder, plugin.model.entryPoint.frontend ? 'frontend' : 'backend', debuggersContributions);\n        const debug: typeof theia.debug = {\n            get activeDebugSession(): theia.DebugSession | undefined {\n                return debugExt.activeDebugSession;\n            },\n            get activeDebugConsole(): theia.DebugConsole {\n                return debugExt.activeDebugConsole;\n            },\n            get breakpoints(): theia.Breakpoint[] {\n                return debugExt.breakpoints;\n            },\n            get onDidChangeActiveDebugSession(): theia.Event<theia.DebugSession | undefined> {\n                return debugExt.onDidChangeActiveDebugSession;\n            },\n            get onDidStartDebugSession(): theia.Event<theia.DebugSession> {\n                return debugExt.onDidStartDebugSession;\n            },\n            get onDidReceiveDebugSessionCustomEvent(): theia.Event<theia.DebugSessionCustomEvent> {\n                return debugExt.onDidReceiveDebugSessionCustomEvent;\n            },\n            get onDidTerminateDebugSession(): theia.Event<theia.DebugSession> {\n                return debugExt.onDidTerminateDebugSession;\n            },\n            get onDidChangeBreakpoints(): theia.Event<theia.BreakpointsChangeEvent> {\n                return debugExt.onDidChangeBreakpoints;\n            },\n            registerDebugAdapterDescriptorFactory(debugType: string, factory: theia.DebugAdapterDescriptorFactory): Disposable {\n                return debugExt.registerDebugAdapterDescriptorFactory(debugType, factory);\n            },\n            registerDebugConfigurationProvider(\n                debugType: string,\n                provider: theia.DebugConfigurationProvider,\n                triggerKind?: theia.DebugConfigurationProviderTriggerKind\n            ): Disposable {\n                return debugExt.registerDebugConfigurationProvider(debugType, provider, triggerKind || DebugConfigurationProviderTriggerKind.Initial);\n            },\n            registerDebugAdapterTrackerFactory(debugType: string, factory: theia.DebugAdapterTrackerFactory): Disposable {\n                return debugExt.registerDebugAdapterTrackerFactory(debugType, factory);\n            },\n            startDebugging(\n                folder: theia.WorkspaceFolder | undefined,\n                nameOrConfiguration: string | theia.DebugConfiguration,\n                parentSessionOrOptions?: theia.DebugSession | theia.DebugSessionOptions\n            ): Thenable<boolean> {\n                if (!parentSessionOrOptions || (typeof parentSessionOrOptions === 'object' && 'configuration' in parentSessionOrOptions)) {\n                    return debugExt.startDebugging(folder, nameOrConfiguration, { parentSession: parentSessionOrOptions });\n                }\n                return debugExt.startDebugging(folder, nameOrConfiguration, parentSessionOrOptions || {});\n            },\n            stopDebugging(session?: theia.DebugSession): Thenable<void> {\n                return debugExt.stopDebugging(session);\n            },\n            addBreakpoints(breakpoints: readonly theia.Breakpoint[]): void {\n                debugExt.addBreakpoints(breakpoints);\n            },\n            removeBreakpoints(breakpoints: readonly theia.Breakpoint[]): void {\n                debugExt.removeBreakpoints(breakpoints);\n            },\n            asDebugSourceUri(source: theia.DebugProtocolSource, session?: theia.DebugSession): theia.Uri {\n                return debugExt.asDebugSourceUri(source, session);\n            }\n        };\n\n        const tasks: typeof theia.tasks = {\n            registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n                return tasksExt.registerTaskProvider(type, provider);\n            },\n\n            fetchTasks(filter?: theia.TaskFilter): Thenable<theia.Task[]> {\n                return tasksExt.fetchTasks(filter);\n            },\n\n            executeTask(task: theia.Task): Thenable<theia.TaskExecution> {\n                return tasksExt.executeTask(task);\n            },\n\n            get taskExecutions(): ReadonlyArray<theia.TaskExecution> {\n                return tasksExt.taskExecutions;\n            },\n            onDidStartTask(listener, thisArg?, disposables?) {\n                return tasksExt.onDidStartTask(listener, thisArg, disposables);\n            },\n            onDidEndTask(listener, thisArg?, disposables?) {\n                return tasksExt.onDidEndTask(listener, thisArg, disposables);\n            },\n            onDidStartTaskProcess(listener, thisArg?, disposables?) {\n                return tasksExt.onDidStartTaskProcess(listener, thisArg, disposables);\n            },\n            onDidEndTaskProcess(listener, thisArg?, disposables?) {\n                return tasksExt.onDidEndTaskProcess(listener, thisArg, disposables);\n            }\n        };\n\n        const scm: typeof theia.scm = {\n            get inputBox(): theia.SourceControlInputBox {\n                const inputBox = scmExt.getLastInputBox(plugin);\n                if (inputBox) {\n                    return inputBox;\n                } else {\n                    throw new Error('Input box not found!');\n                }\n            },\n            createSourceControl(id: string, label: string, rootUri?: URI): theia.SourceControl {\n                return scmExt.createSourceControl(plugin, id, label, rootUri);\n            }\n        };\n\n        const comments: typeof theia.comments = {\n            createCommentController(id: string, label: string): theia.CommentController {\n                return commentsExt.createCommentController(plugin, id, label);\n            }\n        };\n\n        const l10n: typeof theia.l10n = {\n            // eslint-disable-next-line max-len\n            t(...params: [message: string, ...args: Array<string | number | boolean>] | [message: string, args: Record<string, any>] | [{ message: string; args?: Array<string | number | boolean> | Record<string, any>; comment: string | string[] }]): string {\n                if (typeof params[0] === 'string') {\n                    const key = params.shift() as string;\n\n                    // We have either rest args which are Array<string | number | boolean> or an array with a single Record<string, any>.\n                    // This ensures we get a Record<string | number, any> which will be formatted correctly.\n                    const argsFormatted = !params || typeof params[0] !== 'object' ? params : params[0];\n                    return localizationExt.translateMessage(plugin.model.id, { message: key, args: argsFormatted as Record<string | number, any> | undefined });\n                }\n                return localizationExt.translateMessage(plugin.model.id, params[0]);\n            },\n            get bundle() {\n                return localizationExt.getBundle(plugin.model.id);\n            },\n            get uri() {\n                return localizationExt.getBundleUri(plugin.model.id);\n            }\n        };\n\n        // notebooks API (@stubbed)\n        // The following implementation is temporarily `@stubbed` and marked as such under `theia.d.ts`\n        const notebooks: typeof theia.notebooks = {\n            createNotebookController(\n                id,\n                notebookType,\n                label,\n                handler?: (cells: theia.NotebookCell[],\n                    notebook: theia.NotebookDocument,\n                    controller: theia.NotebookController) => void | Thenable<void>,\n                rendererScripts?: NotebookRendererScript[]\n            ) {\n                return notebookKernels.createNotebookController(plugin.model.id, id, notebookType, label, handler, rendererScripts);\n            },\n            createRendererMessaging(rendererId) {\n                return notebookRenderers.createRendererMessaging(rendererId);\n            },\n            registerNotebookCellStatusBarItemProvider(\n                notebookType,\n                provider\n            ) {\n                return notebooksExt.registerNotebookCellStatusBarItemProvider(notebookType, provider);\n            },\n            onDidChangeNotebookCellExecutionState: notebookKernels.onDidChangeNotebookCellExecutionState,\n\n            createNotebookControllerDetectionTask(notebookType: string) {\n                return notebookKernels.createNotebookControllerDetectionTask(notebookType);\n            },\n            registerKernelSourceActionProvider(notebookType: string, provider: theia.NotebookKernelSourceActionProvider) {\n                return notebookKernels.registerKernelSourceActionProvider(notebookType, provider);\n            }\n        };\n\n        return <typeof theia>{\n            version: require('../../package.json').version,\n            authentication,\n            commands,\n            comments,\n            window,\n            workspace,\n            env,\n            extensions,\n            languages,\n            plugins,\n            debug,\n            tasks,\n            scm,\n            notebooks,\n            l10n,\n            tests,\n            // Types\n            StatusBarAlignment: StatusBarAlignment,\n            Disposable: Disposable,\n            EventEmitter: Emitter,\n            CancellationTokenSource: CancellationTokenSource,\n            MarkdownString,\n            Position: Position,\n            Range: Range,\n            Selection: Selection,\n            ViewColumn: ViewColumn,\n            TextEditorSelectionChangeKind: TextEditorSelectionChangeKind,\n            Uri: URI,\n            EndOfLine,\n            TextEditorRevealType,\n            TextEditorCursorStyle,\n            TextEditorLineNumbersStyle,\n            ThemeColor,\n            ThemeIcon,\n            SnippetString,\n            DecorationRangeBehavior,\n            OverviewRulerLane,\n            ConfigurationTarget,\n            RelativePattern,\n            IndentAction,\n            CompletionItem,\n            CompletionItemKind,\n            CompletionList,\n            DebugConsoleMode,\n            DiagnosticSeverity,\n            DiagnosticRelatedInformation,\n            LanguageStatusSeverity,\n            Location,\n            LogLevel,\n            DiagnosticTag,\n            CompletionItemTag,\n            Diagnostic,\n            CompletionTriggerKind,\n            TextEdit,\n            SnippetTextEdit,\n            ProgressLocation,\n            ProgressOptions,\n            Progress,\n            ParameterInformation,\n            QuickPickItemKind,\n            SignatureInformation,\n            SignatureHelp,\n            SignatureHelpTriggerKind,\n            Hover,\n            EvaluatableExpression,\n            InlineValueEvaluatableExpression,\n            InlineValueText,\n            InlineValueVariableLookup,\n            InlineValueContext,\n            DocumentHighlightKind,\n            DocumentHighlight,\n            DocumentLink,\n            DocumentDropEdit,\n            CodeLens,\n            CodeActionKind,\n            CodeActionTrigger,\n            CodeActionTriggerKind,\n            TextDocumentSaveReason,\n            CodeAction,\n            DataTransferItem,\n            DataTransfer,\n            TreeItem,\n            TreeItemCollapsibleState,\n            TreeItemCheckboxState,\n            SymbolKind,\n            SymbolTag,\n            DocumentSymbol,\n            WorkspaceEdit,\n            SymbolInformation,\n            FileType,\n            FilePermission,\n            FileChangeType,\n            ShellQuoting,\n            ShellExecution,\n            ProcessExecution,\n            CustomExecution,\n            TaskScope,\n            TaskRevealKind,\n            TaskPanelKind,\n            TaskGroup,\n            Task,\n            Task2,\n            DebugAdapterExecutable,\n            DebugAdapterServer,\n            DebugAdapterNamedPipeServer,\n            DebugAdapterInlineImplementation,\n            DebugConfigurationProviderTriggerKind,\n            Breakpoint,\n            SourceBreakpoint,\n            FunctionBreakpoint,\n            Color,\n            ColorInformation,\n            ColorPresentation,\n            FoldingRange,\n            SelectionRange,\n            FoldingRangeKind,\n            OperatingSystem,\n            WebviewPanelTargetArea,\n            UIKind,\n            FileSystemError,\n            CommentThreadState,\n            CommentThreadCollapsibleState,\n            QuickInputButtons,\n            CommentMode,\n            CallHierarchyItem,\n            CallHierarchyIncomingCall,\n            CallHierarchyOutgoingCall,\n            TypeHierarchyItem,\n            TimelineItem,\n            EnvironmentVariableMutatorType,\n            SemanticTokensLegend,\n            SemanticTokensBuilder,\n            SemanticTokens,\n            SemanticTokensEdits,\n            SemanticTokensEdit,\n            TextDocumentChangeReason,\n            ColorThemeKind,\n            SourceControlInputBoxValidationType,\n            FileDecoration,\n            TerminalLink,\n            TerminalProfile,\n            CancellationError,\n            ExtensionMode,\n            LinkedEditingRanges,\n            InputBoxValidationSeverity,\n            InlayHint,\n            InlayHintKind,\n            InlayHintLabelPart,\n            TelemetryTrustedValue,\n            NotebookCellData,\n            NotebookCellExecutionState,\n            NotebookCellKind,\n            NotebookCellOutput,\n            NotebookCellOutputItem,\n            NotebookCellStatusBarAlignment,\n            NotebookCellStatusBarItem,\n            NotebookControllerAffinity,\n            NotebookData,\n            NotebookEditorRevealType,\n            NotebookDocument,\n            NotebookRange,\n            NotebookEdit,\n            NotebookKernelSourceAction,\n            NotebookRendererScript,\n            TestRunProfileKind,\n            TestTag,\n            TestRunRequest,\n            TestMessage,\n            ExtensionKind,\n            InlineCompletionItem,\n            InlineCompletionList,\n            InlineCompletionTriggerKind,\n            TabInputText: TextTabInput,\n            TabInputTextDiff: TextDiffTabInput,\n            TabInputTextMerge: TextMergeTabInput,\n            TabInputCustom: CustomEditorTabInput,\n            TabInputNotebook: NotebookEditorTabInput,\n            TabInputNotebookDiff: NotebookDiffEditorTabInput,\n            TabInputWebview: WebviewEditorTabInput,\n            TabInputTerminal: TerminalEditorTabInput,\n            TerminalLocation,\n            TerminalOutputAnchor,\n            TerminalExitReason,\n            DocumentPasteEdit,\n            ExternalUriOpenerPriority,\n            TerminalQuickFixType,\n            EditSessionIdentityMatch\n        };\n    };\n}\n\n/**\n * Represents a Theia plugin as well as a VSCode extension.\n */\nexport interface ExtensionPlugin<T> extends theia.Plugin<T> {\n    /**\n     * The uri of the directory containing the extension. Same as {@linkcode theia.Plugin.pluginUri}.\n     */\n    readonly extensionUri: theia.Uri;\n\n    /**\n     * The absolute file path of the directory containing this extension.\n     * Same as {@linkcode theia.Plugin.pluginPath}.\n     */\n    readonly extensionPath: string;\n\n    /**\n     * The extension kind describes if an extension runs where the UI runs\n     * or if an extension runs where the remote extension host runs. The extension kind\n     * is defined in the `package.json`-file of extensions. When no remote extension host exists,\n     * the value is {@linkcode ExtensionKind.UI}.\n     */\n    extensionKind: theia.ExtensionKind;\n}\n\nexport class Plugin<T> implements theia.Plugin<T> {\n    #pluginManager: PluginManager;\n\n    id: string;\n    pluginPath: string;\n    pluginUri: theia.Uri;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    packageJSON: any;\n    pluginType: theia.PluginType;\n\n    constructor(pluginManager: PluginManager, plugin: InternalPlugin) {\n        this.#pluginManager = pluginManager;\n\n        this.id = plugin.model.id;\n        this.pluginPath = plugin.pluginFolder;\n        this.packageJSON = plugin.rawModel;\n        this.pluginType = plugin.model.entryPoint.frontend ? 'frontend' : 'backend';\n\n        if (this.pluginType === 'frontend') {\n            const { origin } = new Endpoint();\n            this.pluginUri = URI.parse(origin + '/' + PluginPackage.toPluginUrl(plugin.model, ''));\n        } else {\n            this.pluginUri = URI.parse(plugin.pluginUri);\n        }\n    }\n\n    get isActive(): boolean {\n        return this.#pluginManager.isActive(this.id);\n    }\n\n    get exports(): T {\n        return <T>this.#pluginManager.getPluginExport(this.id);\n    }\n\n    activate(): PromiseLike<T> {\n        return this.#pluginManager.activatePlugin(this.id).then(() => this.exports);\n    }\n}\n\nexport class PluginExt<T> extends Plugin<T> implements ExtensionPlugin<T> {\n    #pluginManager: PluginManager;\n\n    extensionPath: string;\n    extensionUri: theia.Uri;\n    extensionKind: ExtensionKind;\n    isFromDifferentExtensionHost: boolean;\n\n    constructor(pluginManager: PluginManager, plugin: InternalPlugin, isFromDifferentExtensionHost = false) {\n        super(pluginManager, plugin);\n        this.#pluginManager = pluginManager;\n\n        this.extensionPath = this.pluginPath;\n        this.extensionUri = this.pluginUri;\n        this.extensionKind = ExtensionKind.UI; // stub as a local extension (not running on a remote workspace)\n        this.isFromDifferentExtensionHost = isFromDifferentExtensionHost;\n    }\n\n    override get isActive(): boolean {\n        return this.#pluginManager.isActive(this.id);\n    }\n\n    override get exports(): T {\n        return <T>this.#pluginManager.getPluginExport(this.id);\n    }\n\n    override activate(): PromiseLike<T> {\n        return this.#pluginManager.activatePlugin(this.id).then(() => this.exports);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as path from 'path';\nimport { URI } from './types-impl';\nimport { IconUrl, PluginPackage } from '../common/plugin-protocol';\nimport { Plugin } from '../common/plugin-api-rpc';\n\nexport type PluginIconPath = string | URI | {\n    light: string | URI,\n    dark: string | URI\n};\nexport namespace PluginIconPath {\n    export function toUrl(iconPath: PluginIconPath | undefined, plugin: Plugin): IconUrl | undefined {\n        if (!iconPath) {\n            return undefined;\n        }\n        if (typeof iconPath === 'object' && 'light' in iconPath) {\n            return {\n                light: asString(iconPath.light, plugin),\n                dark: asString(iconPath.dark, plugin)\n            };\n        }\n        return asString(iconPath, plugin);\n    }\n    export function asString(arg: string | URI, plugin: Plugin): string {\n        arg = arg instanceof URI && arg.scheme === 'file' ? arg.fsPath : arg;\n        if (typeof arg !== 'string') {\n            return arg.toString(true);\n        }\n        const { packagePath } = plugin.rawModel;\n        const absolutePath = path.isAbsolute(arg) ? arg : path.join(packagePath, arg);\n        const normalizedPath = path.normalize(absolutePath);\n        const relativePath = path.relative(packagePath, normalizedPath);\n        return PluginPackage.toPluginUrl(plugin.rawModel, relativePath);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    NotificationMain,\n    MainMessageType,\n    MessageRegistryMain,\n    PluginManagerExt,\n    PluginManager,\n    Plugin,\n    PluginAPI,\n    ConfigStorage,\n    PluginManagerInitializeParams,\n    PluginManagerStartParams,\n    TerminalServiceExt,\n    LocalizationExt\n} from '../common/plugin-api-rpc';\nimport { PluginMetadata, PluginJsonValidationContribution } from '../common/plugin-protocol';\nimport * as theia from '@theia/plugin';\nimport * as types from './types-impl';\nimport { join } from './path';\nimport { EnvExtImpl } from './env';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { Memento, KeyValueStorageProxy, GlobalState } from './plugin-storage';\nimport { ExtPluginApi } from '../common/plugin-ext-api-contribution';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { WebviewsExtImpl } from './webviews';\nimport { URI as Uri } from './types-impl';\nimport { SecretsExtImpl, SecretStorageExt } from '../plugin/secrets-ext';\nimport { PluginExt } from './plugin-context';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport interface PluginHost {\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    loadPlugin(plugin: Plugin): any;\n\n    init(data: PluginMetadata[]): Promise<[Plugin[], Plugin[]]> | [Plugin[], Plugin[]];\n\n    initExtApi(extApi: ExtPluginApi[]): void;\n\n    loadTests?(): Promise<void>;\n}\n\ninterface StopFn {\n    (): void | Promise<void>;\n}\n\ninterface StopOptions {\n    /**\n     * if terminating then stopping will ignore all errors,\n     * since the main side is already gone and any requests are likely to fail\n     * or hang\n     */\n    terminating: boolean\n}\n\nclass ActivatedPlugin {\n    constructor(public readonly pluginContext: theia.PluginContext,\n        public readonly exports?: PluginAPI,\n        public readonly stopFn?: StopFn) {\n    }\n}\n\nexport class PluginManagerExtImpl implements PluginManagerExt, PluginManager {\n\n    static SUPPORTED_ACTIVATION_EVENTS = new Set([\n        '*',\n        'onLanguage',\n        'onCommand',\n        'onDebug',\n        'onDebugInitialConfigurations',\n        'onDebugResolve',\n        'onDebugAdapterProtocolTracker',\n        'onDebugDynamicConfigurations',\n        'onTaskType',\n        'workspaceContains',\n        'onView',\n        'onUri',\n        'onTerminalProfile',\n        'onWebviewPanel',\n        'onFileSystem',\n        'onCustomEditor',\n        'onStartupFinished',\n        'onAuthenticationRequest',\n        'onNotebook',\n        'onNotebookSerializer'\n    ]);\n\n    private configStorage: ConfigStorage | undefined;\n    private readonly registry = new Map<string, Plugin>();\n    private readonly activations = new Map<string, (() => Promise<void>)[] | undefined>();\n    /** promises to whether loading each plugin has been successful */\n    private readonly loadedPlugins = new Map<string, Promise<boolean>>();\n    private readonly activatedPlugins = new Map<string, ActivatedPlugin>();\n    private readonly pluginContextsMap = new Map<string, theia.PluginContext>();\n\n    private onDidChangeEmitter = new Emitter<void>();\n    private messageRegistryProxy: MessageRegistryMain;\n    private notificationMain: NotificationMain;\n    protected fireOnDidChange(): void {\n        this.onDidChangeEmitter.fire(undefined);\n    }\n\n    protected jsonValidation: PluginJsonValidationContribution[] = [];\n    protected ready = new Deferred();\n\n    constructor(\n        private readonly host: PluginHost,\n        private readonly envExt: EnvExtImpl,\n        private readonly terminalService: TerminalServiceExt,\n        private readonly storageProxy: KeyValueStorageProxy,\n        private readonly secrets: SecretsExtImpl,\n        private readonly preferencesManager: PreferenceRegistryExtImpl,\n        private readonly webview: WebviewsExtImpl,\n        private readonly localization: LocalizationExt,\n        private readonly rpc: RPCProtocol\n    ) {\n        this.messageRegistryProxy = this.rpc.getProxy(PLUGIN_RPC_CONTEXT.MESSAGE_REGISTRY_MAIN);\n        this.notificationMain = this.rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN);\n    }\n\n    async $stop(pluginId?: string): Promise<void> {\n        if (!pluginId) {\n            return this.stopAll();\n        }\n        this.registry.delete(pluginId);\n        this.pluginContextsMap.delete(pluginId);\n        this.loadedPlugins.delete(pluginId);\n        const plugin = this.activatedPlugins.get(pluginId);\n        if (!plugin) {\n            return;\n        }\n        this.activatedPlugins.delete(pluginId);\n        return this.stopPlugin(pluginId, plugin);\n    }\n\n    async terminate(): Promise<void> {\n        return this.stopAll({ terminating: true });\n    }\n\n    protected async stopAll(options: StopOptions = { terminating: false }): Promise<void> {\n        const promises = [];\n        for (const [id, plugin] of this.activatedPlugins) {\n            promises.push(this.stopPlugin(id, plugin, options));\n        }\n\n        this.registry.clear();\n        this.loadedPlugins.clear();\n        this.activatedPlugins.clear();\n        this.pluginContextsMap.clear();\n        await Promise.all(promises);\n    }\n\n    protected async stopPlugin(id: string, plugin: ActivatedPlugin, options: StopOptions = { terminating: false }): Promise<void> {\n        let result;\n        if (plugin.stopFn) {\n            try {\n                result = plugin.stopFn();\n            } catch (e) {\n                if (!options.terminating) {\n                    console.error(`[${id}]: failed to stop:`, e);\n                }\n            }\n        }\n\n        const pluginContext = plugin.pluginContext;\n        if (pluginContext) {\n            for (const subscription of pluginContext.subscriptions) {\n                try {\n                    subscription.dispose();\n                } catch (e) {\n                    if (!options.terminating) {\n                        console.error(`[${id}]: failed to dispose subscription:`, e);\n                    }\n                }\n            }\n        }\n\n        try {\n            await result;\n        } catch (e) {\n            if (!options.terminating) {\n                console.error(`[${id}]: failed to stop:`, e);\n            }\n        }\n    }\n\n    async $init(params: PluginManagerInitializeParams): Promise<void> {\n        this.storageProxy.init(params.globalState, params.workspaceState);\n\n        this.envExt.setQueryParameters(params.env.queryParams);\n        this.envExt.setLanguage(params.env.language);\n        this.envExt.setShell(params.env.shell);\n        this.envExt.setUIKind(params.env.uiKind);\n        this.envExt.setApplicationName(params.env.appName);\n        this.envExt.setAppHost(params.env.appHost);\n\n        this.preferencesManager.init(params.preferences);\n\n        if (params.extApi) {\n            this.host.initExtApi(params.extApi);\n        }\n\n        this.webview.init(params.webview);\n        this.jsonValidation = params.jsonValidation;\n    }\n\n    async $start(params: PluginManagerStartParams): Promise<void> {\n        this.configStorage = params.configStorage;\n\n        const [plugins, foreignPlugins] = await this.host.init(params.plugins);\n        // add foreign plugins\n        for (const plugin of foreignPlugins) {\n            this.registerPlugin(plugin);\n        }\n        // add own plugins, before initialization\n        for (const plugin of plugins) {\n            this.registerPlugin(plugin);\n        }\n\n        // ensure plugins are registered before running activation events\n        this.ready.resolve();\n        // run eager plugins\n        await this.$activateByEvent('*');\n        for (const activationEvent of params.activationEvents) {\n            await this.$activateByEvent(activationEvent);\n        }\n\n        if (this.host.loadTests) {\n            return this.host.loadTests();\n        }\n\n        this.fireOnDidChange();\n    }\n\n    protected registerPlugin(plugin: Plugin): void {\n        if (plugin.model.id === 'vscode.json-language-features' && this.jsonValidation.length) {\n            // VS Code contributes all built-in validations via vscode.json-language-features;\n            // we enrich them with Theia validations registered on startup.\n            // Dynamic validations can be provided only via VS Code extensions.\n            // Content is fetched by the extension later via vscode.workspace.openTextDocument.\n            const contributes = plugin.rawModel.contributes = (plugin.rawModel.contributes || {});\n            contributes.jsonValidation = (contributes.jsonValidation || []).concat(this.jsonValidation);\n        }\n        this.registry.set(plugin.model.id, plugin);\n        if (plugin.pluginPath && Array.isArray(plugin.rawModel.activationEvents)) {\n            const activation = () => this.$activatePlugin(plugin.model.id);\n            // an internal activation event is a subject to change\n            this.setActivation(`onPlugin:${plugin.model.id}`, activation);\n            const unsupportedActivationEvents = plugin.rawModel.activationEvents.filter(e => !PluginManagerExtImpl.SUPPORTED_ACTIVATION_EVENTS.has(e.split(':')[0]));\n            if (unsupportedActivationEvents.length) {\n                console.warn(`Unsupported activation events: ${unsupportedActivationEvents.join(', ')}, please open an issue: https://github.com/eclipse-theia/theia/issues/new`);\n            }\n            for (let activationEvent of plugin.rawModel.activationEvents) {\n                if (activationEvent === 'onUri') {\n                    activationEvent = `onUri:theia://${plugin.model.id}`;\n                }\n                this.setActivation(activationEvent, activation);\n            }\n        }\n    }\n    protected setActivation(activationEvent: string, activation: () => Promise<void>): void {\n        const activations = this.activations.get(activationEvent) || [];\n        activations.push(activation);\n        this.activations.set(activationEvent, activations);\n    }\n\n    protected async loadPlugin(plugin: Plugin, configStorage: ConfigStorage, visited = new Set<string>()): Promise<boolean> {\n        // in order to break cycles\n        if (visited.has(plugin.model.id)) {\n            return true;\n        }\n        visited.add(plugin.model.id);\n\n        let loading = this.loadedPlugins.get(plugin.model.id);\n        if (!loading) {\n            loading = (async () => {\n                const progressId = await this.notificationMain.$startProgress({\n                    title: `Activating ${plugin.model.displayName || plugin.model.name}`,\n                    location: 'window'\n                });\n                try {\n                    if (plugin.rawModel.extensionDependencies) {\n                        for (const dependencyId of plugin.rawModel.extensionDependencies) {\n                            const dependency = this.registry.get(dependencyId.toLowerCase());\n                            if (dependency) {\n                                const loadedSuccessfully = await this.loadPlugin(dependency, configStorage, visited);\n                                if (!loadedSuccessfully) {\n                                    throw new Error(`Dependent extension '${dependency.model.displayName || dependency.model.id}' failed to activate.`);\n                                }\n                            } else {\n                                throw new Error(`Dependent extension '${dependencyId}' is not installed.`);\n                            }\n                        }\n                    }\n\n                    let pluginMain = this.host.loadPlugin(plugin);\n                    // see https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostExtensionService.ts#L372-L376\n                    pluginMain = pluginMain || {};\n                    await this.startPlugin(plugin, configStorage, pluginMain);\n                    return true;\n                } catch (err) {\n                    const message = `Activating extension '${plugin.model.displayName || plugin.model.name}' failed:`;\n                    this.messageRegistryProxy.$showMessage(MainMessageType.Error, message + ' ' + err.message, {}, []);\n                    console.error(message, err);\n                    return false;\n                } finally {\n                    this.notificationMain.$stopProgress(progressId);\n                }\n            })();\n        }\n        this.loadedPlugins.set(plugin.model.id, loading);\n        return loading;\n    }\n\n    async $updateStoragePath(path: string | undefined): Promise<void> {\n        if (this.configStorage) {\n            this.configStorage.hostStoragePath = path;\n        }\n        this.pluginContextsMap.forEach((pluginContext: theia.PluginContext, pluginId: string) => {\n            pluginContext.storagePath = path ? join(path, pluginId) : undefined;\n        });\n    }\n\n    async $activateByEvent(activationEvent: string): Promise<void> {\n        // Prevent the plugin manager from performing activations before plugins are registered\n        await this.ready.promise;\n        if (activationEvent.endsWith(':*')) {\n            const baseEvent = activationEvent.substring(0, activationEvent.length - 2);\n            await this.activateByBaseEvent(baseEvent);\n        } else {\n            await this.activateBySingleEvent(activationEvent);\n        }\n    }\n\n    protected async activateByBaseEvent(baseEvent: string): Promise<void> {\n        await Promise.all(Array.from(this.activations.keys(), activation => activation.startsWith(baseEvent) && this.activateBySingleEvent(activation)));\n    }\n\n    protected async activateBySingleEvent(activationEvent: string): Promise<void> {\n        const activations = this.activations.get(activationEvent);\n        if (!activations) {\n            return;\n        }\n        this.activations.set(activationEvent, undefined);\n        const pendingActivations = [];\n        while (activations.length) {\n            pendingActivations.push(activations.pop()!());\n        }\n        await Promise.all(pendingActivations);\n    }\n\n    async $activatePlugin(id: string): Promise<void> {\n        const plugin = this.registry.get(id);\n        if (plugin && this.configStorage) {\n            await this.loadPlugin(plugin, this.configStorage);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async startPlugin(plugin: Plugin, configStorage: ConfigStorage, pluginMain: any): Promise<void> {\n        const subscriptions: theia.Disposable[] = [];\n        const asAbsolutePath = (relativePath: string): string => join(plugin.pluginFolder, relativePath);\n        const logPath = join(configStorage.hostLogPath, plugin.model.id); // todo check format\n        const storagePath = configStorage.hostStoragePath ? join(configStorage.hostStoragePath, plugin.model.id) : undefined;\n        const secrets = new SecretStorageExt(plugin, this.secrets);\n        const globalStoragePath = join(configStorage.hostGlobalStoragePath, plugin.model.id);\n        const extension = new PluginExt(this, plugin);\n        const extensionModeValue = plugin.isUnderDevelopment ? types.ExtensionMode.Development : types.ExtensionMode.Production;\n        const pluginContext: theia.PluginContext = {\n            extensionPath: extension.extensionPath,\n            extensionUri: extension.extensionUri,\n            globalState: new GlobalState(plugin.model.id, true, this.storageProxy),\n            workspaceState: new Memento(plugin.model.id, false, this.storageProxy),\n            subscriptions: subscriptions,\n            asAbsolutePath: asAbsolutePath,\n            logPath: logPath,\n            storagePath: storagePath,\n            storageUri: storagePath ? Uri.file(storagePath) : undefined,\n            secrets,\n            globalStoragePath: globalStoragePath,\n            globalStorageUri: Uri.file(globalStoragePath),\n            environmentVariableCollection: this.terminalService.getEnvironmentVariableCollection(plugin.model.id),\n            extensionMode: extensionModeValue,\n            extension,\n            logUri: Uri.file(logPath)\n        };\n        this.pluginContextsMap.set(plugin.model.id, pluginContext);\n\n        let stopFn = undefined;\n        if (typeof pluginMain[plugin.lifecycle.stopMethod] === 'function') {\n            stopFn = pluginMain[plugin.lifecycle.stopMethod];\n        }\n        const id = plugin.model.displayName || plugin.model.id;\n        if (typeof pluginMain[plugin.lifecycle.startMethod] === 'function') {\n            await this.localization.initializeLocalizedMessages(plugin, this.envExt.language);\n            const pluginExport = await pluginMain[plugin.lifecycle.startMethod].apply(getGlobal(), [pluginContext]);\n            console.log(`calling activation function on ${id}`);\n            this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginExport, stopFn));\n        } else {\n            // https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostExtensionService.ts#L400-L401\n            console.log(`plugin ${id}, ${plugin.lifecycle.startMethod} method is undefined so the module is the extension's exports`);\n            this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginMain));\n        }\n    }\n\n    getAllPlugins(): Plugin[] {\n        return Array.from(this.registry.values());\n    }\n    getPluginExport(pluginId: string): PluginAPI | undefined {\n        const activePlugin = this.activatedPlugins.get(pluginId);\n        if (activePlugin) {\n            return activePlugin.exports;\n        }\n        return undefined;\n    }\n\n    getPluginById(pluginId: string): Plugin | undefined {\n        return this.registry.get(pluginId);\n    }\n\n    isRunning(pluginId: string): boolean {\n        return this.registry.has(pluginId);\n    }\n\n    isActive(pluginId: string): boolean {\n        return this.activatedPlugins.has(pluginId);\n    }\n\n    activatePlugin(pluginId: string): PromiseLike<void> {\n        return this.$activatePlugin(pluginId);\n    }\n\n    get onDidChange(): theia.Event<void> {\n        return this.onDidChangeEmitter.event;\n    }\n\n}\n\n// for electron\nfunction getGlobal(): Window | NodeJS.Global | null {\n    return typeof self === 'undefined' ? typeof global === 'undefined' ? null : global : self;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { PLUGIN_RPC_CONTEXT, StorageMain, StorageExt } from '../common/plugin-api-rpc';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from '../common/types';\nimport { RPCProtocol } from '../common/rpc-protocol';\n\nexport class Memento implements theia.Memento {\n\n    private cache: KeysToAnyValues;\n\n    constructor(\n        private readonly pluginId: string,\n        private readonly isPluginGlobalData: boolean,\n        private readonly storage: KeyValueStorageProxy\n    ) {\n        this.cache = storage.getPerPluginData(pluginId, isPluginGlobalData);\n\n        if (!this.isPluginGlobalData) {\n            this.storage.storageDataChangedEvent((data: KeysToKeysToAnyValue) => {\n                this.cache = data[this.pluginId] ? data[this.pluginId] : {};\n            });\n        }\n    }\n\n    keys(): string[] {\n        return Object.entries(this.cache).filter(([, value]) => value !== undefined).map(([key]) => key);\n    }\n\n    get<T>(key: string): T | undefined;\n    get<T>(key: string, defaultValue: T): T;\n    get<T>(key: string, defaultValue?: T): T | undefined {\n        if (key && this.cache.hasOwnProperty(key)) {\n            return this.cache[key];\n        } else {\n            return defaultValue;\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    update(key: string, value: any): Promise<void> {\n        if (value === undefined) {\n            delete this.cache[key];\n        } else {\n            this.cache[key] = value;\n        }\n        return this.storage.setPerPluginData(this.pluginId, this.cache, this.isPluginGlobalData).then(_ => undefined);\n    }\n}\n\nexport class GlobalState extends Memento {\n\n    /** @todo: API is not yet implemented. */\n    setKeysForSync(keys: readonly string[]): void { }\n}\n\n/**\n * Singleton.\n * Is used to proxy storage requests to main side.\n */\nexport class KeyValueStorageProxy implements StorageExt {\n\n    private storageDataChangedEmitter = new Emitter<KeysToKeysToAnyValue>();\n    public readonly storageDataChangedEvent: Event<KeysToKeysToAnyValue> = this.storageDataChangedEmitter.event;\n\n    private readonly proxy: StorageMain;\n\n    private globalDataCache: KeysToKeysToAnyValue;\n    private workspaceDataCache: KeysToKeysToAnyValue;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy<StorageMain>(PLUGIN_RPC_CONTEXT.STORAGE_MAIN);\n    }\n\n    init(initGlobalData: KeysToKeysToAnyValue, initWorkspaceData: KeysToKeysToAnyValue): void {\n        this.globalDataCache = initGlobalData;\n        this.workspaceDataCache = initWorkspaceData;\n    }\n\n    getPerPluginData(key: string, isGlobal: boolean): KeysToAnyValues {\n        if (isGlobal) {\n            const existed = this.globalDataCache[key];\n            return existed ? existed : {};\n        } else {\n            const existed = this.workspaceDataCache[key];\n            return existed ? existed : {};\n        }\n    }\n\n    setPerPluginData(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean> {\n        if (isGlobal) {\n            this.globalDataCache[key] = value;\n        } else {\n            this.workspaceDataCache[key] = value;\n        }\n\n        return this.proxy.$set(key, value, isGlobal);\n    }\n\n    $updatePluginsWorkspaceData(workspaceData: KeysToKeysToAnyValue): void {\n        this.workspaceDataCache = workspaceData;\n        this.storageDataChangedEmitter.fire(workspaceData);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { isOSX, isWindows } from '@theia/core/lib/common/os';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { ResourceMap } from '@theia/monaco-editor-core/esm/vs/base/common/map';\nimport { IConfigurationOverrides } from '@theia/monaco-editor-core/esm/vs/platform/configuration/common/configuration';\nimport { Configuration, ConfigurationModel, ConfigurationModelParser } from '@theia/monaco-editor-core/esm/vs/platform/configuration/common/configurationModels';\nimport { Workspace, WorkspaceFolder } from '@theia/monaco-editor-core/esm/vs/platform/workspace/common/workspace';\nimport * as theia from '@theia/plugin';\nimport { v4 } from 'uuid';\nimport {\n    PLUGIN_RPC_CONTEXT, PreferenceChangeExt, PreferenceData, PreferenceRegistryExt,\n    PreferenceRegistryMain\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { isObject, mixin } from '../common/types';\nimport { WorkspaceExtImpl } from './workspace';\nimport cloneDeep = require('lodash.clonedeep');\n\nconst injectionRe = /\\b__proto__\\b|\\bconstructor\\.prototype\\b/;\n\nenum ConfigurationTarget {\n    Global = 1,\n    Workspace = 2, // eslint-disable-line @typescript-eslint/no-shadow\n    WorkspaceFolder = 3 // eslint-disable-line @typescript-eslint/no-shadow\n}\n\nexport enum PreferenceScope {\n    Default,\n    User,\n    Workspace, // eslint-disable-line @typescript-eslint/no-shadow\n    Folder,\n}\n\ninterface ConfigurationInspect<T> {\n    key: string;\n    defaultValue?: T;\n    globalValue?: T;\n    workspaceValue?: T;\n    workspaceFolderValue?: T;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction lookUp(tree: any, key: string): any {\n    if (!key) {\n        return;\n    }\n\n    const parts = key.split('.');\n    let node = tree;\n    for (let i = 0; node && i < parts.length; i++) {\n        node = node[parts[i]];\n    }\n    return node;\n}\n\nexport class TheiaWorkspace extends Workspace {\n    constructor(ext: WorkspaceExtImpl) {\n        const folders = (ext.workspaceFolders ?? []).map(folder => new WorkspaceFolder(folder));\n        super(v4(), folders, false, ext.workspaceFile ?? null, () => isOSX || isWindows);\n    }\n}\n\nexport class PreferenceRegistryExtImpl implements PreferenceRegistryExt {\n    private proxy: PreferenceRegistryMain;\n    private _preferences: Configuration;\n    private readonly _onDidChangeConfiguration = new Emitter<theia.ConfigurationChangeEvent>();\n\n    readonly onDidChangeConfiguration: Event<theia.ConfigurationChangeEvent> = this._onDidChangeConfiguration.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly workspace: WorkspaceExtImpl\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.PREFERENCE_REGISTRY_MAIN);\n    }\n\n    init(data: PreferenceData): void {\n        this.preferencesChanged(data);\n    }\n\n    $acceptConfigurationChanged(data: PreferenceData, eventData: PreferenceChangeExt[]): void {\n        this.preferencesChanged(data, eventData);\n    }\n\n    private preferencesChanged(data: PreferenceData, eventData?: PreferenceChangeExt[]): void {\n        this._preferences = this.parse(data);\n        this._onDidChangeConfiguration.fire(this.toConfigurationChangeEvent(eventData ?? []));\n    }\n\n    getConfiguration(rawSection?: string, rawScope?: theia.ConfigurationScope | null, extensionId?: string): theia.WorkspaceConfiguration {\n        const overrides = this.parseConfigurationAccessOptions(rawScope);\n\n        const preferences = this.toReadonlyValue(\n            this._preferences.getValue(rawSection, overrides, new TheiaWorkspace(this.workspace)));\n\n        const configuration: theia.WorkspaceConfiguration = {\n            has(key: string): boolean {\n                return typeof lookUp(preferences, key) !== 'undefined';\n            },\n            get: <T>(key: string, defaultValue?: T) => {\n                const result = lookUp(preferences, key);\n                if (typeof result === 'undefined') {\n                    return defaultValue;\n                } else {\n                    let clonedConfig: any = undefined;\n                    const cloneOnWriteProxy = (target: any, accessor: string): any => {\n                        let clonedTarget: any = undefined;\n                        const cloneTarget = () => {\n                            clonedConfig = clonedConfig ? clonedConfig : cloneDeep(preferences);\n                            clonedTarget = clonedTarget ? clonedTarget : lookUp(clonedConfig, accessor);\n                        };\n\n                        if (!isObject(target)) {\n                            return target;\n                        }\n                        return new Proxy(target, {\n                            get: (targ: any, prop: string) => {\n                                const config = Object.getOwnPropertyDescriptor(targ, prop);\n                                // This check ensures that https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/get#invariants are satisfied\n                                if (config?.configurable === false && config?.writable === false) {\n                                    return targ[prop];\n                                }\n                                if (typeof prop === 'string' && prop.toLowerCase() === 'tojson') {\n                                    cloneTarget();\n                                    return () => clonedTarget;\n                                }\n                                if (clonedConfig) {\n                                    clonedTarget = clonedTarget ? clonedTarget : lookUp(clonedConfig, accessor);\n                                    return clonedTarget[prop];\n                                }\n                                const res = targ[prop];\n                                if (typeof prop === 'string') {\n                                    return cloneOnWriteProxy(res, `${accessor}.${prop}`);\n                                }\n                                return res;\n                            },\n                            set: (targ: any, prop: string, val: any) => {\n                                cloneTarget();\n                                clonedTarget[prop] = val;\n                                return true;\n                            },\n                            deleteProperty: (targ: any, prop: string) => {\n                                cloneTarget();\n                                delete clonedTarget[prop];\n                                return true;\n                            },\n                            defineProperty: (targ: any, prop: string, descr: any) => {\n                                cloneTarget();\n                                Object.defineProperty(clonedTarget, prop, descr);\n                                return true;\n                            }\n                        });\n                    };\n                    return cloneOnWriteProxy(result, key);\n                }\n            },\n            update: (key: string, value: any, targetScope?: ConfigurationTarget | boolean, withLanguageOverride?: boolean): PromiseLike<void> => {\n                const resourceStr = overrides.resource?.toString();\n                const overrideSegment = overrides.overrideIdentifier ? `[${overrides.overrideIdentifier}].` : '';\n                const preferenceKey = rawSection ? `${rawSection}.${key}` : key;\n                const fullPath = overrideSegment + preferenceKey;\n                if (typeof value !== 'undefined') {\n                    return this.proxy.$updateConfigurationOption(targetScope, fullPath, value, resourceStr, withLanguageOverride);\n                } else {\n                    return this.proxy.$removeConfigurationOption(targetScope, fullPath, resourceStr, withLanguageOverride);\n                }\n            },\n            inspect: <T>(key: string): ConfigurationInspect<T> | undefined => {\n                const path = rawSection ? `${rawSection}.${key}` : key;\n                const result = this._preferences.inspect<T>(path, overrides, new TheiaWorkspace(this.workspace));\n\n                if (!result) {\n                    return undefined;\n                }\n\n                const configInspect: ConfigurationInspect<T> = { key };\n                configInspect.defaultValue = result.default?.value;\n                configInspect.globalValue = result.user?.value;\n                configInspect.workspaceValue = result.workspace?.value;\n                configInspect.workspaceFolderValue = result.workspaceFolder?.value;\n                return configInspect;\n            }\n        };\n\n        if (typeof preferences === 'object') {\n            mixin(configuration, preferences, false);\n        }\n\n        return Object.freeze(configuration);\n    }\n\n    private toReadonlyValue(data: any): any {\n        const readonlyProxy = (target: any): any => isObject(target)\n            ? new Proxy(target, {\n                get: (targ: any, prop: string) => {\n                    const config = Object.getOwnPropertyDescriptor(targ, prop);\n                    // This check ensures that https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/get#invariants are satisfied\n                    if (config?.configurable === false && config?.writable === false) {\n                        return targ[prop];\n                    }\n                    return readonlyProxy(targ[prop]);\n                },\n                set: (targ: any, prop: string, val: any) => {\n                    throw new Error(`TypeError: Cannot assign to read only property '${prop}' of object`);\n                },\n                deleteProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot delete read only property '${prop}' of object`);\n                },\n                defineProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot define property '${prop}' of a readonly object`);\n                },\n                setPrototypeOf: (targ: any) => {\n                    throw new Error('TypeError: Cannot set prototype for a readonly object');\n                },\n                isExtensible: () => false,\n                preventExtensions: () => true\n            })\n            : target;\n        return readonlyProxy(data);\n    }\n\n    private parse(data: PreferenceData): Configuration {\n        const defaultConfiguration = this.getConfigurationModel('Default', data[PreferenceScope.Default]);\n        const userConfiguration = this.getConfigurationModel('User', data[PreferenceScope.User]);\n        const workspaceConfiguration = this.getConfigurationModel('Workspace', data[PreferenceScope.Workspace]);\n        const folderConfigurations = new ResourceMap<ConfigurationModel>();\n        Object.keys(data[PreferenceScope.Folder]).forEach(resource => {\n            folderConfigurations.set(URI.parse(resource), this.getConfigurationModel(`Folder: ${resource}`, data[PreferenceScope.Folder][resource]));\n        });\n        return new Configuration(\n            defaultConfiguration,\n            new ConfigurationModel(), /** policy configuration. */\n            new ConfigurationModel(), /** application configuration. */\n            userConfiguration,\n            new ConfigurationModel(), /** remote configuration. */\n            workspaceConfiguration,\n            folderConfigurations\n        );\n    }\n\n    private getConfigurationModel(label: string, data: { [key: string]: any }): ConfigurationModel {\n        const parser = new ConfigurationModelParser(label);\n        const sanitized = this.sanitize(data);\n        parser.parseRaw(sanitized);\n        return parser.configurationModel;\n    }\n\n    /**\n     * Creates a new object and assigns those keys of raw to it that are not likely to cause prototype pollution.\n     * Also preprocesses override identifiers so that they take the form [identifier]: {...contents}.\n     */\n    private sanitize<T = unknown>(raw: T): T {\n        if (!isObject(raw)) { return raw; }\n        const asObject = raw as Record<string, unknown>;\n        const sanitized = Object.create(null);\n        for (const key of Object.keys(asObject)) {\n            if (!injectionRe.test(key)) {\n                const override = this.OVERRIDE_KEY_TEST.exec(key);\n                if (override) {\n                    const overrideKey = `[${override[1]}]`;\n                    const remainder = key.slice(override[0].length);\n                    if (!isObject(sanitized[overrideKey])) {\n                        sanitized[overrideKey] = Object.create(null);\n                    }\n                    sanitized[overrideKey][remainder] = this.sanitize(asObject[key]);\n                } else {\n                    sanitized[key] = this.sanitize(asObject[key]);\n                }\n            }\n        }\n        return sanitized;\n    }\n\n    private readonly OVERRIDE_KEY_TEST = /^\\[([^\\]]+)\\]\\./;\n\n    private toConfigurationChangeEvent(eventData: PreferenceChangeExt[]): theia.ConfigurationChangeEvent {\n        return Object.freeze({\n            affectsConfiguration: (section: string, scope?: theia.ConfigurationScope): boolean => {\n                const { resource, overrideIdentifier } = this.parseConfigurationAccessOptions(scope);\n                const sectionWithLanguage = overrideIdentifier ? `[${overrideIdentifier}].${section}` : section;\n                return eventData.some(change => {\n                    const matchesUri = !resource || !change.scope || (resource.toString() + '/').startsWith(change.scope.endsWith('/') ? change.scope : change.scope + '/');\n                    const sliceIndex = overrideIdentifier ? 0 : (this.OVERRIDE_KEY_TEST.exec(change.preferenceName)?.[0].length ?? 0);\n                    const changedPreferenceName = sliceIndex ? change.preferenceName.slice(sliceIndex) : change.preferenceName;\n                    return matchesUri && (\n                        sectionWithLanguage === changedPreferenceName\n                        || sectionWithLanguage.startsWith(`${changedPreferenceName}.`)\n                        || changedPreferenceName.startsWith(`${sectionWithLanguage}.`));\n                });\n            }\n        });\n    }\n\n    protected parseConfigurationAccessOptions(scope?: theia.ConfigurationScope | null): IConfigurationOverrides {\n        if (!scope) {\n            return {};\n        }\n        let overrideIdentifier: string | undefined = undefined;\n        let resource: theia.Uri | undefined;\n        if ('uri' in scope || 'languageId' in scope) {\n            resource = scope.uri;\n        } else {\n            resource = scope;\n        }\n        if ('languageId' in scope) {\n            overrideIdentifier = scope.languageId;\n        }\n        return { resource, overrideIdentifier };\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// Copied from https://github.com/Microsoft/vscode/blob/master/src/vs/editor/common/viewModel/prefixSumComputer.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * Max unsigned integer that fits on 32 bits.\n */\nconst MAX_UINT_32 = 4294967295; // 2^32 - 1\n\nexport function toUint32(v: number): number {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > MAX_UINT_32) {\n        return MAX_UINT_32;\n    }\n    return v | 0;\n}\n\nexport class PrefixSumIndexOfResult {\n    _prefixSumIndexOfResultBrand: void;\n\n    index: number;\n    remainder: number;\n\n    constructor(index: number, remainder: number) {\n        this.index = index;\n        this.remainder = remainder;\n    }\n}\n\nexport class PrefixSumComputer {\n\n    /**\n     * values[i] is the value at index i\n     */\n    private values: Uint32Array;\n\n    /**\n     * prefixSum[i] = SUM(heights[j]), 0 <= j <= i\n     */\n    private prefixSum: Uint32Array;\n\n    /**\n     * prefixSum[i], 0 <= i <= prefixSumValidIndex can be trusted\n     */\n    private prefixSumValidIndex: Int32Array;\n\n    constructor(values: Uint32Array) {\n        this.values = values;\n        this.prefixSum = new Uint32Array(values.length);\n        this.prefixSumValidIndex = new Int32Array(1);\n        this.prefixSumValidIndex[0] = -1;\n    }\n\n    public getCount(): number {\n        return this.values.length;\n    }\n\n    public insertValues(insertIndex: number, insertValues: Uint32Array): boolean {\n        insertIndex = toUint32(insertIndex);\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n        const insertValuesLen = insertValues.length;\n\n        if (insertValuesLen === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length + insertValuesLen);\n        this.values.set(oldValues.subarray(0, insertIndex), 0);\n        this.values.set(oldValues.subarray(insertIndex), insertIndex + insertValuesLen);\n        this.values.set(insertValues, insertIndex);\n\n        if (insertIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = insertIndex - 1;\n        }\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public changeValue(index: number, value: number): boolean {\n        index = toUint32(index);\n        value = toUint32(value);\n\n        if (this.values[index] === value) {\n            return false;\n        }\n        this.values[index] = value;\n        if (index - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = index - 1;\n        }\n        return true;\n    }\n\n    public removeValues(startIndex: number, count: number): boolean {\n        startIndex = toUint32(startIndex);\n        count = toUint32(count);\n\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n\n        if (startIndex >= oldValues.length) {\n            return false;\n        }\n\n        const maxCount = oldValues.length - startIndex;\n        if (count >= maxCount) {\n            count = maxCount;\n        }\n\n        if (count === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length - count);\n        this.values.set(oldValues.subarray(0, startIndex), 0);\n        this.values.set(oldValues.subarray(startIndex + count), startIndex);\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (startIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = startIndex - 1;\n        }\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public getTotalValue(): number {\n        if (this.values.length === 0) {\n            return 0;\n        }\n        return this._getAccumulatedValue(this.values.length - 1);\n    }\n\n    public getAccumulatedValue(index: number): number {\n        if (index < 0) {\n            return 0;\n        }\n\n        index = toUint32(index);\n        return this._getAccumulatedValue(index);\n    }\n\n    private _getAccumulatedValue(index: number): number {\n        if (index <= this.prefixSumValidIndex[0]) {\n            return this.prefixSum[index];\n        }\n\n        let startIndex = this.prefixSumValidIndex[0] + 1;\n        if (startIndex === 0) {\n            this.prefixSum[0] = this.values[0];\n            startIndex++;\n        }\n\n        if (index >= this.values.length) {\n            index = this.values.length - 1;\n        }\n\n        for (let i = startIndex; i <= index; i++) {\n            this.prefixSum[i] = this.prefixSum[i - 1] + this.values[i];\n        }\n        this.prefixSumValidIndex[0] = Math.max(this.prefixSumValidIndex[0], index);\n        return this.prefixSum[index];\n    }\n\n    public getIndexOf(accumulatedValue: number): PrefixSumIndexOfResult {\n        accumulatedValue = Math.floor(accumulatedValue);\n\n        // Compute all sums (to get a fully valid prefixSum)\n        this.getTotalValue();\n\n        let low = 0;\n        let high = this.values.length - 1;\n        let mid: number;\n        let midStop: number;\n        let midStart: number;\n\n        while (low <= high) {\n            mid = low + ((high - low) / 2) | 0;\n\n            midStop = this.prefixSum[mid];\n            midStart = midStop - this.values[mid];\n\n            if (accumulatedValue < midStart) {\n                high = mid - 1;\n            } else if (accumulatedValue >= midStop) {\n                low = mid + 1;\n            } else {\n                break;\n            }\n        }\n\n        return new PrefixSumIndexOfResult(mid!, accumulatedValue - midStart!);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019-2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.52.1/src/vs/workbench/api/common/extHostSCM.ts\n\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport {\n    Plugin, PLUGIN_RPC_CONTEXT,\n    ScmExt,\n    ScmMain, ScmRawResource, ScmRawResourceGroup,\n    ScmRawResourceSplice, ScmRawResourceSplices,\n    SourceControlGroupFeatures\n} from '../common';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CommandRegistryImpl } from '../plugin/command-registry';\nimport { Splice } from '../common/arrays';\nimport { UriComponents } from '../common/uri-components';\nimport { Command } from '../common/plugin-api-rpc-model';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { URI, ThemeIcon } from './types-impl';\nimport { ScmCommandArg } from '../common/plugin-api-rpc';\nimport { sep } from '@theia/core/lib/common/paths';\nimport { PluginIconPath } from './plugin-icon-path';\ntype ProviderHandle = number;\ntype GroupHandle = number;\ntype ResourceStateHandle = number;\n\nfunction getIconResource(decorations?: theia.SourceControlResourceThemableDecorations): UriComponents | ThemeIcon | undefined {\n    if (!decorations || !decorations.iconPath) {\n        return undefined;\n    } else if (typeof decorations.iconPath === 'string') {\n        return URI.file(decorations.iconPath);\n    } else if (URI.isUri(decorations.iconPath)) {\n        return decorations.iconPath;\n    } else if (ThemeIcon.is(decorations.iconPath)) {\n        return decorations.iconPath;\n    } else {\n        console.warn(`Unexpected Value ${decorations.iconPath} in Source Control Resource Themable Decoration. URI, ThemeIcon or string expected.`);\n        return undefined;\n    }\n}\n\nfunction comparePaths(one: string, other: string, caseSensitive = false): number {\n    const oneParts = one.split(sep);\n    const otherParts = other.split(sep);\n\n    const lastOne = oneParts.length - 1;\n    const lastOther = otherParts.length - 1;\n    let endOne: boolean;\n    let endOther: boolean;\n\n    for (let i = 0; ; i++) {\n        endOne = lastOne === i;\n        endOther = lastOther === i;\n\n        if (endOne && endOther) {\n            const onePart = caseSensitive ? oneParts[i].toLocaleLowerCase() : oneParts[i];\n            const otherPart = caseSensitive ? otherParts[i].toLocaleLowerCase() : otherParts[i];\n            return onePart > otherPart ? -1 : 1;\n        } else if (endOne) {\n            return -1;\n        } else if (endOther) {\n            return 1;\n        }\n\n        if (endOne) {\n            return -1;\n        } else if (endOther) {\n            return 1;\n        }\n\n        const result = comparePathComponents(oneParts[i], otherParts[i], caseSensitive);\n\n        if (result !== 0) {\n            return result;\n        }\n    }\n}\n\nfunction comparePathComponents(one: string, other: string, caseSensitive = false): number {\n    if (!caseSensitive) {\n        one = one && one.toLowerCase();\n        other = other && other.toLowerCase();\n    }\n\n    if (one === other) {\n        return 0;\n    }\n\n    return one < other ? -1 : 1;\n}\n\nfunction compareResourceThemableDecorations(a: theia.SourceControlResourceThemableDecorations, b: theia.SourceControlResourceThemableDecorations): number {\n    if (!a.iconPath && !b.iconPath) {\n        return 0;\n    } else if (!a.iconPath) {\n        return -1;\n    } else if (!b.iconPath) {\n        return 1;\n    }\n\n    const aPath = typeof a.iconPath === 'string' ? a.iconPath : URI.isUri(a.iconPath) ? a.iconPath.fsPath : (a.iconPath as ThemeIcon).id;\n    const bPath = typeof b.iconPath === 'string' ? b.iconPath : URI.isUri(b.iconPath) ? b.iconPath.fsPath : (b.iconPath as ThemeIcon).id;\n    return comparePaths(aPath, bPath);\n}\n\nfunction compareResourceStatesDecorations(a: theia.SourceControlResourceDecorations, b: theia.SourceControlResourceDecorations): number {\n    let result = 0;\n\n    if (a.strikeThrough !== b.strikeThrough) {\n        return a.strikeThrough ? 1 : -1;\n    }\n\n    if (a.faded !== b.faded) {\n        return a.faded ? 1 : -1;\n    }\n\n    if (a.tooltip !== b.tooltip) {\n        return (a.tooltip || '').localeCompare(b.tooltip || '');\n    }\n\n    result = compareResourceThemableDecorations(a, b);\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.light && b.light) {\n        result = compareResourceThemableDecorations(a.light, b.light);\n    } else if (a.light) {\n        return 1;\n    } else if (b.light) {\n        return -1;\n    }\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.dark && b.dark) {\n        result = compareResourceThemableDecorations(a.dark, b.dark);\n    } else if (a.dark) {\n        return 1;\n    } else if (b.dark) {\n        return -1;\n    }\n\n    return result;\n}\n\nfunction compareCommands(a: theia.Command, b: theia.Command): number {\n    if (a.command !== b.command) {\n        return a.command! < b.command! ? -1 : 1;\n    }\n\n    if (a.title !== b.title) {\n        return a.title! < b.title! ? -1 : 1;\n    }\n\n    if (a.tooltip !== b.tooltip) {\n        if (a.tooltip !== undefined && b.tooltip !== undefined) {\n            return a.tooltip < b.tooltip ? -1 : 1;\n        } else if (a.tooltip !== undefined) {\n            return 1;\n        } else if (b.tooltip !== undefined) {\n            return -1;\n        }\n    }\n\n    if (a.arguments === b.arguments) {\n        return 0;\n    } else if (!a.arguments) {\n        return -1;\n    } else if (!b.arguments) {\n        return 1;\n    } else if (a.arguments.length !== b.arguments.length) {\n        return a.arguments.length - b.arguments.length;\n    }\n\n    for (let i = 0; i < a.arguments.length; i++) {\n        const aArg = a.arguments[i];\n        const bArg = b.arguments[i];\n\n        if (aArg === bArg) {\n            continue;\n        }\n\n        return aArg < bArg ? -1 : 1;\n    }\n\n    return 0;\n}\n\nfunction compareResourceStates(a: theia.SourceControlResourceState, b: theia.SourceControlResourceState): number {\n    let result = comparePaths(a.resourceUri.fsPath, b.resourceUri.fsPath, true);\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.command && b.command) {\n        result = compareCommands(a.command, b.command);\n    } else if (a.command) {\n        return 1;\n    } else if (b.command) {\n        return -1;\n    }\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.decorations && b.decorations) {\n        result = compareResourceStatesDecorations(a.decorations, b.decorations);\n    } else if (a.decorations) {\n        return 1;\n    } else if (b.decorations) {\n        return -1;\n    }\n\n    return result;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction compareArgs(a: any[], b: any[]): boolean {\n    for (let i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction commandEquals(a: theia.Command, b: theia.Command): boolean {\n    return a.command === b.command\n        && a.title === b.title\n        && a.tooltip === b.tooltip\n        && (a.arguments && b.arguments ? compareArgs(a.arguments, b.arguments) : a.arguments === b.arguments);\n}\n\nfunction commandListEquals(a: readonly theia.Command[], b: readonly theia.Command[]): boolean {\n    return equals(a, b, commandEquals);\n}\n\nfunction equals<T>(one: ReadonlyArray<T> | undefined, other: ReadonlyArray<T> | undefined, itemEquals: (a: T, b: T) => boolean = (a, b) => a === b): boolean {\n    if (one === other) {\n        return true;\n    }\n\n    if (!one || !other) {\n        return false;\n    }\n\n    if (one.length !== other.length) {\n        return false;\n    }\n\n    for (let i = 0, len = one.length; i < len; i++) {\n        if (!itemEquals(one[i], other[i])) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\ninterface ValidateInput {\n    (value: string, cursorPosition: number): theia.ProviderResult<theia.SourceControlInputBoxValidation | undefined | null>;\n}\n\nexport class ScmInputBoxImpl implements theia.SourceControlInputBox {\n\n    private _value: string = '';\n\n    get value(): string {\n        return this._value;\n    }\n\n    set value(value: string) {\n        this.proxy.$setInputBoxValue(this.sourceControlHandle, value);\n        this.updateValue(value);\n    }\n\n    private readonly onDidChangeEmitter = new Emitter<string>();\n\n    get onDidChange(): Event<string> {\n        return this.onDidChangeEmitter.event;\n    }\n\n    private _placeholder: string = '';\n\n    get placeholder(): string {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string) {\n        this.proxy.$setInputBoxPlaceholder(this.sourceControlHandle, placeholder);\n        this._placeholder = placeholder;\n    }\n\n    private _visible: boolean = true;\n\n    get visible(): boolean {\n        return this._visible;\n    }\n\n    set visible(visible: boolean) {\n        this.proxy.$setInputBoxVisible(this.sourceControlHandle, visible);\n        this._visible = visible;\n    }\n\n    private _enabled: boolean;\n\n    get enabled(): boolean {\n        return this._enabled;\n    }\n\n    set enabled(enabled: boolean) {\n        this.proxy.$setInputBoxEnabled(this.sourceControlHandle, enabled);\n        this._enabled = enabled;\n    }\n\n    private _validateInput: ValidateInput | undefined;\n\n    get validateInput(): ValidateInput | undefined {\n        return this._validateInput;\n    }\n\n    set validateInput(fn: ValidateInput | undefined) {\n        if (fn && typeof fn !== 'function') {\n            throw new Error(`[${this.plugin.model.id}]: Invalid SCM input box validation function`);\n        }\n\n        this._validateInput = fn;\n    }\n\n    constructor(private plugin: Plugin, private proxy: ScmMain, private sourceControlHandle: number) {\n        // noop\n    }\n\n    onInputBoxValueChange(value: string): void {\n        this.updateValue(value);\n    }\n\n    private updateValue(value: string): void {\n        this._value = value;\n        this.onDidChangeEmitter.fire(value);\n    }\n}\n\nclass ScmResourceGroupImpl implements theia.SourceControlResourceGroup {\n\n    private static handlePool: number = 0;\n    private resourceHandlePool: number = 0;\n    private _resourceStates: theia.SourceControlResourceState[] = [];\n\n    private resourceStatesMap = new Map<ResourceStateHandle, theia.SourceControlResourceState>();\n    private resourceStatesCommandsMap = new Map<ResourceStateHandle, theia.Command>();\n    private resourceStatesDisposablesMap = new Map<ResourceStateHandle, Disposable>();\n\n    private readonly onDidUpdateResourceStatesEmitter = new Emitter<void>();\n    readonly onDidUpdateResourceStates = this.onDidUpdateResourceStatesEmitter.event;\n\n    private _disposed = false;\n    get disposed(): boolean { return this._disposed; }\n    private readonly onDidDisposeEmitter = new Emitter<void>();\n    readonly onDidDispose = this.onDidDisposeEmitter.event;\n\n    private handlesSnapshot: number[] = [];\n    private resourceSnapshot: theia.SourceControlResourceState[] = [];\n\n    get id(): string { return this._id; }\n\n    get label(): string { return this._label; }\n    set label(label: string) {\n        this._label = label;\n        this.proxy.$updateGroupLabel(this.sourceControlHandle, this.handle, label);\n    }\n\n    private _hideWhenEmpty: boolean | undefined = undefined;\n    get hideWhenEmpty(): boolean | undefined { return this._hideWhenEmpty; }\n    set hideWhenEmpty(hideWhenEmpty: boolean | undefined) {\n        this._hideWhenEmpty = hideWhenEmpty;\n        this.proxy.$updateGroup(this.sourceControlHandle, this.handle, this.features);\n    }\n\n    get features(): SourceControlGroupFeatures {\n        return {\n            hideWhenEmpty: this.hideWhenEmpty\n        };\n    }\n\n    get resourceStates(): theia.SourceControlResourceState[] { return [...this._resourceStates]; }\n    set resourceStates(resources: theia.SourceControlResourceState[]) {\n        this._resourceStates = [...resources];\n        this.onDidUpdateResourceStatesEmitter.fire();\n    }\n\n    readonly handle = ScmResourceGroupImpl.handlePool++;\n\n    constructor(\n        private proxy: ScmMain,\n        private commands: CommandRegistryImpl,\n        private sourceControlHandle: number,\n        private plugin: Plugin,\n        private _id: string,\n        private _label: string,\n    ) { }\n\n    getResourceState(handle: number): theia.SourceControlResourceState | undefined {\n        return this.resourceStatesMap.get(handle);\n    }\n\n    executeResourceCommand(handle: number): Promise<void> {\n        const command = this.resourceStatesCommandsMap.get(handle);\n\n        if (!command) {\n            return Promise.resolve(undefined);\n        }\n\n        return new Promise(() => this.commands.executeCommand(command.command!, ...(command.arguments || [])));\n    }\n\n    takeResourceStateSnapshot(): ScmRawResourceSplice[] {\n        const snapshot = [...this._resourceStates];\n        const diffs = sortedDiff(this.resourceSnapshot, snapshot, compareResourceStates);\n\n        const splices = diffs.map<Splice<{ rawResource: ScmRawResource, handle: number }>>(diff => {\n            const toInsert = diff.toInsert.map(r => {\n                const handle = this.resourceHandlePool++;\n                this.resourceStatesMap.set(handle, r);\n\n                const sourceUri = r.resourceUri;\n\n                const icon = getIconResource(r.decorations);\n                const lightIcon = r.decorations && getIconResource(r.decorations.light) || icon;\n                const darkIcon = r.decorations && getIconResource(r.decorations.dark) || icon;\n                const icons = [this.getThemableIcon(lightIcon), this.getThemableIcon(darkIcon)];\n                let command: Command | undefined;\n\n                if (r.command) {\n                    if (r.command.command === 'theia.open' || r.command.command === 'theia.diff') {\n                        const disposables = new DisposableCollection();\n                        command = this.commands.converter.toSafeCommand(r.command, disposables);\n                        this.resourceStatesDisposablesMap.set(handle, disposables);\n                    } else {\n                        this.resourceStatesCommandsMap.set(handle, r.command);\n                    }\n                }\n\n                const tooltip = (r.decorations && r.decorations.tooltip) || '';\n                const strikeThrough = r.decorations && !!r.decorations.strikeThrough;\n                const faded = r.decorations && !!r.decorations.faded;\n                const contextValue = r.contextValue || '';\n\n                // TODO remove the letter and colorId fields when the FileDecorationProvider is applied, see https://github.com/eclipse-theia/theia/pull/8911\n                const rawResource = {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    handle, sourceUri, letter: (r as any).letter, colorId: (r as any).color.id, icons,\n                    tooltip, strikeThrough, faded, contextValue, command\n                } as ScmRawResource;\n\n                return { rawResource, handle };\n            });\n\n            const { start, deleteCount } = diff;\n            return { start, deleteCount, toInsert };\n        });\n\n        const rawResourceSplices = splices\n            .map(({ start, deleteCount, toInsert }) => ({\n                start: start,\n                deleteCount: deleteCount,\n                rawResources: toInsert.map(i => i.rawResource)\n            } as ScmRawResourceSplice));\n\n        const reverseSplices = splices.reverse();\n\n        for (const { start, deleteCount, toInsert } of reverseSplices) {\n            const handles = toInsert.map(i => i.handle);\n            const handlesToDelete = this.handlesSnapshot.splice(start, deleteCount, ...handles);\n\n            for (const handle of handlesToDelete) {\n                this.resourceStatesMap.delete(handle);\n                this.resourceStatesCommandsMap.delete(handle);\n                this.resourceStatesDisposablesMap.get(handle)?.dispose();\n                this.resourceStatesDisposablesMap.delete(handle);\n            }\n        }\n\n        this.resourceSnapshot = snapshot;\n        return rawResourceSplices;\n    }\n\n    private getThemableIcon(icon: UriComponents | ThemeIcon | undefined): string | ThemeIcon | undefined {\n        if (!icon) {\n            return undefined;\n        } else if (ThemeIcon.is(icon)) {\n            return icon;\n        }\n        return PluginIconPath.asString(URI.revive(icon), this.plugin);\n    }\n\n    dispose(): void {\n        this._disposed = true;\n        this.onDidDisposeEmitter.fire();\n    }\n}\n\nclass SourceControlImpl implements theia.SourceControl {\n\n    private static handlePool: number = 0;\n    private groups: Map<GroupHandle, ScmResourceGroupImpl> = new Map<GroupHandle, ScmResourceGroupImpl>();\n\n    get id(): string {\n        return this._id;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get rootUri(): theia.Uri | undefined {\n        return this._rootUri;\n    }\n\n    private _inputBox: ScmInputBoxImpl;\n    get inputBox(): ScmInputBoxImpl { return this._inputBox; }\n\n    private _count: number | undefined = undefined;\n\n    get count(): number | undefined {\n        return this._count;\n    }\n\n    set count(count: number | undefined) {\n        if (this._count === count) {\n            return;\n        }\n\n        this._count = count;\n        this.proxy.$updateSourceControl(this.handle, { count });\n    }\n\n    private _quickDiffProvider: theia.QuickDiffProvider | undefined = undefined;\n\n    get quickDiffProvider(): theia.QuickDiffProvider | undefined {\n        return this._quickDiffProvider;\n    }\n\n    set quickDiffProvider(quickDiffProvider: theia.QuickDiffProvider | undefined) {\n        this._quickDiffProvider = quickDiffProvider;\n        this.proxy.$updateSourceControl(this.handle, { hasQuickDiffProvider: !!quickDiffProvider });\n    }\n\n    private _commitTemplate: string | undefined = undefined;\n\n    get commitTemplate(): string | undefined {\n        return this._commitTemplate;\n    }\n\n    set commitTemplate(commitTemplate: string | undefined) {\n        if (commitTemplate === this._commitTemplate) {\n            return;\n        }\n\n        this._commitTemplate = commitTemplate;\n        this.proxy.$updateSourceControl(this.handle, { commitTemplate });\n    }\n\n    private acceptInputDisposables = new DisposableCollection();\n    private _acceptInputCommand: theia.Command | undefined = undefined;\n\n    get acceptInputCommand(): theia.Command | undefined {\n        return this._acceptInputCommand;\n    }\n\n    set acceptInputCommand(acceptInputCommand: theia.Command | undefined) {\n        this.acceptInputDisposables = new DisposableCollection();\n\n        this._acceptInputCommand = acceptInputCommand;\n\n        const internal = this.commands.converter.toSafeCommand(acceptInputCommand, this.acceptInputDisposables);\n        this.proxy.$updateSourceControl(this.handle, { acceptInputCommand: internal });\n    }\n\n    private _statusBarDisposables = new DisposableCollection();\n    private _statusBarCommands: theia.Command[] | undefined = undefined;\n\n    get statusBarCommands(): theia.Command[] | undefined {\n        return this._statusBarCommands;\n    }\n\n    set statusBarCommands(statusBarCommands: theia.Command[] | undefined) {\n        if (this._statusBarCommands && statusBarCommands && commandListEquals(this._statusBarCommands, statusBarCommands)) {\n            return;\n        }\n\n        this._statusBarDisposables = new DisposableCollection();\n\n        this._statusBarCommands = statusBarCommands;\n\n        const internal = (statusBarCommands || []).map(c => this.commands.converter.toSafeCommand(c, this._statusBarDisposables)) as Command[];\n        this.proxy.$updateSourceControl(this.handle, { statusBarCommands: internal });\n    }\n\n    private _selected: boolean = false;\n\n    get selected(): boolean {\n        return this._selected;\n    }\n\n    private readonly onDidChangeSelectionEmitter = new Emitter<boolean>();\n    readonly onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n\n    private handle: number = SourceControlImpl.handlePool++;\n\n    constructor(\n        private plugin: Plugin,\n        private proxy: ScmMain,\n        private commands: CommandRegistryImpl,\n        private _id: string,\n        private _label: string,\n        private _rootUri?: theia.Uri\n    ) {\n        this._inputBox = new ScmInputBoxImpl(plugin, this.proxy, this.handle);\n        this.proxy.$registerSourceControl(this.handle, _id, _label, _rootUri);\n    }\n\n    private createdResourceGroups = new Map<ScmResourceGroupImpl, Disposable>();\n    private updatedResourceGroups = new Set<ScmResourceGroupImpl>();\n\n    createResourceGroup(id: string, label: string): ScmResourceGroupImpl {\n        const group = new ScmResourceGroupImpl(this.proxy, this.commands, this.handle, this.plugin, id, label);\n        const disposable = group.onDidDispose(() => this.createdResourceGroups.delete(group));\n        this.createdResourceGroups.set(group, disposable);\n        this.eventuallyAddResourceGroups();\n        return group;\n    }\n\n    eventuallyAddResourceGroups(): void {\n        const groups: ScmRawResourceGroup[] = [];\n        const splices: ScmRawResourceSplices[] = [];\n\n        for (const [group, disposable] of this.createdResourceGroups) {\n            disposable.dispose();\n\n            const updateListener = group.onDidUpdateResourceStates(() => {\n                this.updatedResourceGroups.add(group);\n                this.eventuallyUpdateResourceStates();\n            });\n\n            group.onDidDispose(() => {\n                this.updatedResourceGroups.delete(group);\n                updateListener.dispose();\n                this.groups.delete(group.handle);\n                this.proxy.$unregisterGroup(this.handle, group.handle);\n            });\n\n            const { handle, id, label, features } = group;\n            groups.push({ handle, id, label, features });\n\n            const snapshot = group.takeResourceStateSnapshot();\n\n            if (snapshot.length > 0) {\n                splices.push({ handle: group.handle, splices: snapshot });\n            }\n\n            this.groups.set(group.handle, group);\n        }\n\n        this.proxy.$registerGroups(this.handle, groups, splices);\n        this.createdResourceGroups.clear();\n    }\n\n    eventuallyUpdateResourceStates(): void {\n        const splices: ScmRawResourceSplices[] = [];\n\n        this.updatedResourceGroups.forEach(group => {\n            const snapshot = group.takeResourceStateSnapshot();\n\n            if (snapshot.length === 0) {\n                return;\n            }\n\n            splices.push({ handle: group.handle, splices: snapshot });\n        });\n\n        if (splices.length > 0) {\n            this.proxy.$spliceResourceStates(this.handle, splices);\n        }\n\n        this.updatedResourceGroups.clear();\n    }\n\n    getResourceGroup(handle: GroupHandle): ScmResourceGroupImpl | undefined {\n        return this.groups.get(handle);\n    }\n\n    setSelectionState(selected: boolean): void {\n        this._selected = selected;\n        this.onDidChangeSelectionEmitter.fire(selected);\n    }\n\n    dispose(): void {\n        this.acceptInputDisposables.dispose();\n        this._statusBarDisposables.dispose();\n\n        this.groups.forEach(group => group.dispose());\n        this.proxy.$unregisterSourceControl(this.handle);\n    }\n}\n\nexport class ScmExtImpl implements ScmExt {\n\n    private static handlePool: number = 0;\n\n    private proxy: ScmMain;\n    private sourceControls: Map<ProviderHandle, SourceControlImpl> = new Map<ProviderHandle, SourceControlImpl>();\n    private sourceControlsByExtension: Map<string, SourceControlImpl[]> = new Map<string, SourceControlImpl[]>();\n\n    private readonly onDidChangeActiveProviderEmitter = new Emitter<theia.SourceControl>();\n    get onDidChangeActiveProvider(): Event<theia.SourceControl> { return this.onDidChangeActiveProviderEmitter.event; }\n\n    private selectedSourceControlHandle: number | undefined;\n\n    constructor(rpc: RPCProtocol, private commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.SCM_MAIN);\n\n        commands.registerArgumentProcessor({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            processArgument: (arg: any) => {\n                if (!ScmCommandArg.is(arg)) {\n                    return arg;\n                }\n                const sourceControl = this.sourceControls.get(arg.sourceControlHandle);\n                if (!sourceControl) {\n                    return undefined;\n                }\n                if (typeof arg.resourceGroupHandle !== 'number') {\n                    return sourceControl;\n                }\n                const resourceGroup = sourceControl.getResourceGroup(arg.resourceGroupHandle);\n                if (typeof arg.resourceStateHandle !== 'number') {\n                    return resourceGroup;\n                }\n                return resourceGroup && resourceGroup.getResourceState(arg.resourceStateHandle);\n            }\n        });\n    }\n\n    createSourceControl(extension: Plugin, id: string, label: string, rootUri: theia.Uri | undefined): theia.SourceControl {\n        const handle = ScmExtImpl.handlePool++;\n        const sourceControl = new SourceControlImpl(extension, this.proxy, this.commands, id, label, rootUri);\n        this.sourceControls.set(handle, sourceControl);\n\n        const sourceControls = this.sourceControlsByExtension.get(extension.model.id) || [];\n        sourceControls.push(sourceControl);\n        this.sourceControlsByExtension.set(extension.model.id, sourceControls);\n\n        return sourceControl;\n    }\n\n    getLastInputBox(extension: Plugin): ScmInputBoxImpl | undefined {\n        const sourceControls = this.sourceControlsByExtension.get(extension.model.id);\n        const sourceControl = sourceControls && sourceControls[sourceControls.length - 1];\n        return sourceControl && sourceControl.inputBox;\n    }\n\n    $provideOriginalResource(sourceControlHandle: number, uriComponents: string, token: theia.CancellationToken): Promise<UriComponents | undefined> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl || !sourceControl.quickDiffProvider || !sourceControl.quickDiffProvider.provideOriginalResource) {\n            return Promise.resolve(undefined);\n        }\n\n        return new Promise<UriComponents | undefined>(() => sourceControl.quickDiffProvider!.provideOriginalResource!(URI.file(uriComponents), token))\n            .then<UriComponents | undefined>(r => r || undefined);\n    }\n\n    $onInputBoxValueChange(sourceControlHandle: number, value: string): Promise<void> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl) {\n            return Promise.resolve(undefined);\n        }\n\n        sourceControl.inputBox.onInputBoxValueChange(value);\n        return Promise.resolve(undefined);\n    }\n\n    $executeResourceCommand(sourceControlHandle: number, groupHandle: number, handle: number): Promise<void> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl) {\n            return Promise.resolve(undefined);\n        }\n\n        const group = sourceControl.getResourceGroup(groupHandle);\n\n        if (!group) {\n            return Promise.resolve(undefined);\n        }\n\n        return group.executeResourceCommand(handle);\n    }\n\n    async $validateInput(sourceControlHandle: number, value: string, cursorPosition: number): Promise<[string, number] | undefined> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl) {\n            return Promise.resolve(undefined);\n        }\n\n        if (!sourceControl.inputBox.validateInput) {\n            return Promise.resolve(undefined);\n        }\n\n        const result = await sourceControl.inputBox.validateInput!(value, cursorPosition);\n        if (!result) {\n            return Promise.resolve(undefined);\n        }\n        return [result.message, result.type];\n    }\n\n    $setSelectedSourceControl(selectedSourceControlHandle: number | undefined): Promise<void> {\n        if (selectedSourceControlHandle !== undefined) {\n            this.sourceControls.get(selectedSourceControlHandle)?.setSelectionState(true);\n        }\n\n        if (this.selectedSourceControlHandle !== undefined) {\n            this.sourceControls.get(this.selectedSourceControlHandle)?.setSelectionState(false);\n        }\n\n        this.selectedSourceControlHandle = selectedSourceControlHandle;\n        return Promise.resolve(undefined);\n    }\n}\n\n/**\n * Diffs two *sorted* arrays and computes the splices which apply the diff.\n */\nfunction sortedDiff(before: ReadonlyArray<theia.SourceControlResourceState>,\n    after: ReadonlyArray<theia.SourceControlResourceState>,\n    compare: (a: theia.SourceControlResourceState,\n        b: theia.SourceControlResourceState) => number): Splice<theia.SourceControlResourceState>[] {\n    const result: MutableSplice<theia.SourceControlResourceState>[] = [];\n\n    function pushSplice(start: number, deleteCount: number, toInsert: theia.SourceControlResourceState[]): void {\n        if (deleteCount === 0 && toInsert.length === 0) {\n            return;\n        }\n\n        const latest = result[result.length - 1];\n\n        if (latest && latest.start + latest.deleteCount === start) {\n            latest.deleteCount += deleteCount;\n            latest.toInsert.push(...toInsert);\n        } else {\n            result.push({ start, deleteCount, toInsert });\n        }\n    }\n\n    let beforeIdx = 0;\n    let afterIdx = 0;\n\n    while (true) {\n        if (beforeIdx === before.length) {\n            pushSplice(beforeIdx, 0, after.slice(afterIdx));\n            break;\n        }\n        if (afterIdx === after.length) {\n            pushSplice(beforeIdx, before.length - beforeIdx, []);\n            break;\n        }\n\n        const beforeElement = before[beforeIdx];\n        const afterElement = after[afterIdx];\n        const n = compare(beforeElement, afterElement);\n        if (n === 0) {\n            // equal\n            beforeIdx += 1;\n            afterIdx += 1;\n        } else if (n < 0) {\n            // beforeElement is smaller -> before element removed\n            pushSplice(beforeIdx, 1, []);\n            beforeIdx += 1;\n        } else if (n > 0) {\n            // beforeElement is greater -> after element added\n            pushSplice(beforeIdx, 0, [afterElement]);\n            afterIdx += 1;\n        }\n    }\n\n    return result;\n}\n\ninterface MutableSplice<T> extends Splice<T> {\n    deleteCount: number;\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.55.2/src/vs/workbench/api/common/extHostSecrets.ts\n\nimport { Plugin, PLUGIN_RPC_CONTEXT, SecretsExt, SecretsMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\n\nexport class SecretsExtImpl implements SecretsExt {\n    private proxy: SecretsMain;\n    private onDidChangePasswordEmitter = new Emitter<{ extensionId: string, key: string }>();\n    readonly onDidChangePassword = this.onDidChangePasswordEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.SECRETS_MAIN);\n    }\n\n    async $onDidChangePassword(e: { extensionId: string, key: string }): Promise<void> {\n        this.onDidChangePasswordEmitter.fire(e);\n    }\n\n    get(extensionId: string, key: string): Promise<string | undefined> {\n        return this.proxy.$getPassword(extensionId, key);\n    }\n\n    store(extensionId: string, key: string, value: string): Promise<void> {\n        return this.proxy.$setPassword(extensionId, key, value);\n    }\n\n    delete(extensionId: string, key: string): Promise<void> {\n        return this.proxy.$deletePassword(extensionId, key);\n    }\n}\n\nexport class SecretStorageExt implements theia.SecretStorage {\n\n    protected readonly id: string;\n    readonly secretState: SecretsExtImpl;\n\n    private onDidChangeEmitter = new Emitter<theia.SecretStorageChangeEvent>();\n    readonly onDidChange: Event<theia.SecretStorageChangeEvent> = this.onDidChangeEmitter.event;\n\n    constructor(pluginDescription: Plugin, secretState: SecretsExtImpl) {\n        this.id = pluginDescription.model.id.toLowerCase();\n        this.secretState = secretState;\n\n        this.secretState.onDidChangePassword(e => {\n            if (e.extensionId === this.id) {\n                this.onDidChangeEmitter.fire({ key: e.key });\n            }\n        });\n    }\n\n    get(key: string): Promise<string | undefined> {\n        return this.secretState.get(this.id, key);\n    }\n\n    store(key: string, value: string): Promise<void> {\n        return this.secretState.store(this.id, key, value);\n    }\n\n    delete(key: string): Promise<void> {\n        return this.secretState.delete(this.id, key);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { Disposable, StatusBarAlignment } from './types-impl';\nimport { StatusBarItem } from '@theia/plugin';\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, StatusBarMessageRegistryMain\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { StatusBarItemImpl } from './status-bar/status-bar-item';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport class StatusBarMessageRegistryExt {\n\n    proxy: StatusBarMessageRegistryMain;\n\n    protected readonly statusMessage: StatusBarMessage;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.STATUS_BAR_MESSAGE_REGISTRY_MAIN);\n        this.statusMessage = new StatusBarMessage(this);\n    }\n\n    // copied from https://github.com/Microsoft/vscode/blob/6c8f02b41db9ae5c4d15df767d47755e5c73b9d5/src/vs/workbench/api/node/extHostStatusBar.ts#L174\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    setStatusBarMessage(text: string, timeoutOrThenable?: number | PromiseLike<any>): Disposable {\n        const d = this.statusMessage.setMessage(text);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let handle: any;\n\n        if (typeof timeoutOrThenable === 'number') {\n            handle = setTimeout(() => d.dispose(), timeoutOrThenable);\n        } else if (typeof timeoutOrThenable !== 'undefined') {\n            timeoutOrThenable.then(() => d.dispose(), () => d.dispose());\n        }\n\n        return new Disposable(() => {\n            d.dispose();\n            clearTimeout(handle);\n        });\n\n    }\n\n    createStatusBarItem(alignment?: StatusBarAlignment, priority?: number, id?: string): StatusBarItem {\n        return new StatusBarItemImpl(this.proxy, alignment, priority, id);\n    }\n\n}\n\n// copied from https://github.com/Microsoft/vscode/blob/6c8f02b41db9ae5c4d15df767d47755e5c73b9d5/src/vs/workbench/api/node/extHostStatusBar.ts#L122\nclass StatusBarMessage {\n\n    private _item: StatusBarItem;\n    private _messages: { message: string }[] = [];\n\n    constructor(statusBar: StatusBarMessageRegistryExt) {\n        this._item = statusBar.createStatusBarItem(StatusBarAlignment.Left, Number.MIN_VALUE);\n    }\n\n    dispose(): void {\n        this._messages.length = 0;\n        this._item.dispose();\n    }\n\n    setMessage(message: string): Disposable {\n        const data: { message: string } = { message }; // use object to not confuse equal strings\n        this._messages.unshift(data);\n        this._update();\n\n        return new Disposable(() => {\n            const idx = this._messages.indexOf(data);\n            if (idx >= 0) {\n                this._messages.splice(idx, 1);\n                this._update();\n            }\n        });\n    }\n\n    private _update(): void {\n        if (this._messages.length > 0) {\n            this._item.text = this._messages[0].message;\n            this._item.show();\n        } else {\n            this._item.hide();\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport * as theia from '@theia/plugin';\nimport { ThemeColor, StatusBarAlignment } from '../types-impl';\nimport { StatusBarMessageRegistryMain } from '../../common/plugin-api-rpc';\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\n\nexport class StatusBarItemImpl implements theia.StatusBarItem {\n\n    /** Map from allowed background colors to corresponding foreground colors. */\n    private static BACKGROUND_COLORS = new Map<string, string>([\n        ['statusBarItem.errorBackground', 'statusBarItem.errorForeground'],\n        ['statusBarItem.warningBackground', 'statusBarItem.warningForeground']\n    ]);\n\n    private _id: string;\n\n    private _alignment: StatusBarAlignment;\n    private _priority: number;\n\n    private _name: string | undefined;\n    private _text: string;\n    private _tooltip: string | theia.MarkdownString | undefined;\n    private _color: string | ThemeColor | undefined;\n    private _backgroundColor: ThemeColor | undefined;\n    private _command: string | theia.Command;\n    private _accessibilityInformation: theia.AccessibilityInformation;\n\n    private _isVisible: boolean;\n    private _timeoutHandle: NodeJS.Timer | undefined;\n\n    _proxy: StatusBarMessageRegistryMain;\n\n    constructor(_proxy: StatusBarMessageRegistryMain,\n        alignment: StatusBarAlignment = StatusBarAlignment.Left,\n        priority: number = 0,\n        id = StatusBarItemImpl.nextId()) {\n        this._proxy = _proxy;\n        this._alignment = alignment;\n        this._priority = priority;\n        this._id = id;\n    }\n\n    public get id(): string {\n        return this._id;\n    }\n\n    public get alignment(): theia.StatusBarAlignment {\n        return <theia.StatusBarAlignment>this._alignment;\n    }\n\n    public get priority(): number {\n        return this._priority;\n    }\n\n    public get name(): string | undefined {\n        return this._name;\n    }\n\n    public get text(): string {\n        return this._text;\n    }\n\n    public get tooltip(): string | theia.MarkdownString | undefined {\n        return this._tooltip;\n    }\n\n    public get color(): string | ThemeColor | undefined {\n        return this._color;\n    }\n\n    public get backgroundColor(): ThemeColor | undefined {\n        return this._backgroundColor;\n    }\n\n    public get command(): string | theia.Command {\n        return this._command;\n    }\n\n    public get accessibilityInformation(): theia.AccessibilityInformation {\n        return this._accessibilityInformation;\n    }\n\n    public set name(name: string | undefined) {\n        this._name = name;\n        this.update();\n    }\n\n    public set text(text: string) {\n        this._text = text;\n        this.update();\n    }\n\n    public set tooltip(tooltip: string | theia.MarkdownString | undefined) {\n        this._tooltip = tooltip;\n        this.update();\n    }\n\n    public set color(color: string | ThemeColor | undefined) {\n        this._color = color;\n        this.update();\n    }\n\n    public set backgroundColor(backgroundColor: ThemeColor | undefined) {\n        if (backgroundColor && StatusBarItemImpl.BACKGROUND_COLORS.has(backgroundColor.id)) {\n            this._backgroundColor = backgroundColor;\n        } else {\n            this._backgroundColor = undefined;\n        }\n        this.update();\n    }\n\n    public set command(command: string | theia.Command) {\n        this._command = command;\n        this.update();\n    }\n\n    public set accessibilityInformation(information: theia.AccessibilityInformation) {\n        this._accessibilityInformation = information;\n        this.update();\n    }\n\n    public show(): void {\n        this._isVisible = true;\n        this.update();\n    }\n\n    public hide(): void {\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        this._proxy.$dispose(this.id);\n        this._isVisible = false;\n    }\n\n    private update(): void {\n        if (!this._isVisible) {\n            return;\n        }\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        // Defer the update so that multiple changes to setters don't cause a redraw each\n        this._timeoutHandle = setTimeout(() => {\n            this._timeoutHandle = undefined;\n\n            const commandId = typeof this.command === 'object' ? this.command.command : this.command;\n            const args = typeof this.command === 'object' ? this.command.arguments : undefined;\n\n            let color = this.color;\n            if (this.backgroundColor) {\n                // If an error or warning background color is set, set the corresponding foreground color\n                color = StatusBarItemImpl.BACKGROUND_COLORS.get(this.backgroundColor.id);\n            }\n\n            // Set to status bar\n            this._proxy.$setMessage(\n                this.id,\n                this.name,\n                this.text,\n                this.priority,\n                this.alignment,\n                typeof color === 'string' ? color : color?.id,\n                this.backgroundColor?.id,\n                this.tooltip,\n                commandId,\n                this.accessibilityInformation,\n                args);\n        }, 0);\n    }\n\n    public dispose(): void {\n        this.hide();\n    }\n\n    static nextId(): string {\n        return StatusBarItemImpl.ID_PREFIX + ':' + UUID.uuid4();\n    }\n    static ID_PREFIX = 'plugin-status-bar-item';\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* tslint:disable:typedef */\n\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport type * as theia from '@theia/plugin';\n\nexport const createRunProfile = (\n    label: string,\n    kind: theia.TestRunProfileKind,\n    runHandler: (\n        request: theia.TestRunRequest,\n        token: CancellationToken\n    ) => Thenable<void> | void,\n    isDefault?: boolean,\n    tag?: theia.TestTag,\n    supportsContinuousRun?: boolean\n) => ({\n    label,\n    kind,\n    isDefault: isDefault ?? false,\n    tag,\n    supportsContinuousRun: supportsContinuousRun ?? false,\n    runHandler,\n    configureHandler: undefined,\n    dispose: () => undefined,\n});\n\nexport const createTestRun = (\n    request: theia.TestRunRequest,\n    name?: string,\n    persist?: boolean\n): theia.TestRun => ({\n    name,\n    token: CancellationToken.None,\n    isPersisted: false,\n    enqueued: (test: theia.TestItem) => undefined,\n    started: (test: theia.TestItem) => undefined,\n    skipped: (test: theia.TestItem) => undefined,\n    failed: (\n        test: theia.TestItem,\n        message: theia.TestMessage | readonly theia.TestMessage[],\n        duration?: number\n    ) => undefined,\n    errored: (\n        test: theia.TestItem,\n        message: theia.TestMessage | readonly theia.TestMessage[],\n        duration?: number\n    ) => undefined,\n    passed: (test: theia.TestItem, duration?: number) => undefined,\n    appendOutput: (\n        output: string,\n        location?: theia.Location,\n        test?: theia.TestItem\n    ) => undefined,\n    end: () => undefined,\n});\n\nexport const testItemCollection = {\n    add: () => { },\n    delete: () => { },\n    forEach: () => { },\n    *[Symbol.iterator]() { },\n    get: () => undefined,\n    replace: () => { },\n    size: 0,\n};\n\nexport const createTestItem = (\n    id: string,\n    label: string,\n    uri?: theia.Uri\n): theia.TestItem => ({\n    id,\n    label,\n    uri,\n    children: testItemCollection,\n    parent: undefined,\n    tags: [],\n    canResolveChildren: false,\n    busy: false,\n    range: undefined,\n    error: undefined,\n});\n","// *****************************************************************************\n// Copyright (C) 2022 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { Emitter } from '@theia/core';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, TabDto, TabGroupDto, TabInputKind, TabModelOperationKind, TabOperation, TabsExt, TabsMain } from '../common/plugin-api-rpc';\nimport {\n    CustomEditorTabInput,\n    InteractiveWindowInput,\n    NotebookDiffEditorTabInput,\n    NotebookEditorTabInput,\n    TerminalEditorTabInput,\n    TextDiffTabInput,\n    TextMergeTabInput,\n    TextTabInput,\n    URI,\n    WebviewEditorTabInput\n} from './types-impl';\nimport { assertIsDefined } from '../common/types';\nimport { diffSets } from '../common/collections';\nimport { ViewColumn } from './type-converters';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.71.2/src/vs/workbench/api/common/extHostEditorTabs.ts\n\ntype AnyTabInput =\n    TextTabInput |\n    TextDiffTabInput |\n    CustomEditorTabInput |\n    NotebookEditorTabInput |\n    NotebookDiffEditorTabInput |\n    WebviewEditorTabInput |\n    TerminalEditorTabInput |\n    InteractiveWindowInput;\n\nclass TabExt {\n    private tabApiObject: theia.Tab | undefined;\n    private tabDto!: TabDto;\n    private input: AnyTabInput | undefined;\n    private parentGroup: TabGroupExt;\n    private readonly activeTabIdGetter: () => string;\n\n    constructor(dto: TabDto, parentGroup: TabGroupExt, activeTabIdGetter: () => string) {\n        this.activeTabIdGetter = activeTabIdGetter;\n        this.parentGroup = parentGroup;\n        this.acceptDtoUpdate(dto);\n    }\n\n    get apiObject(): theia.Tab {\n        if (!this.tabApiObject) {\n            // Don't want to lose reference to parent `this` in the getters\n            const that = this;\n            const obj: theia.Tab = {\n                get isActive(): boolean {\n                    // We use a getter function here to always ensure at most 1 active tab per group and prevent iteration for being required\n                    return that.tabDto.id === that.activeTabIdGetter();\n                },\n                get label(): string {\n                    return that.tabDto.label;\n                },\n                get input(): AnyTabInput | undefined {\n                    return that.input;\n                },\n                get isDirty(): boolean {\n                    return that.tabDto.isDirty;\n                },\n                get isPinned(): boolean {\n                    return that.tabDto.isPinned;\n                },\n                get isPreview(): boolean {\n                    return that.tabDto.isPreview;\n                },\n                get group(): theia.TabGroup {\n                    return that.parentGroup.apiObject;\n                }\n            };\n            this.tabApiObject = Object.freeze<theia.Tab>(obj);\n        }\n        return this.tabApiObject;\n    }\n\n    get tabId(): string {\n        return this.tabDto.id;\n    }\n\n    acceptDtoUpdate(tabDto: TabDto): void {\n        this.tabDto = tabDto;\n        this.input = this.initInput();\n    }\n\n    private initInput(): AnyTabInput | undefined {\n        switch (this.tabDto.input.kind) {\n            case TabInputKind.TextInput:\n                return new TextTabInput(URI.revive(this.tabDto.input.uri));\n            case TabInputKind.TextDiffInput:\n                return new TextDiffTabInput(URI.revive(this.tabDto.input.original), URI.revive(this.tabDto.input.modified));\n            case TabInputKind.TextMergeInput:\n                return new TextMergeTabInput(\n                    URI.revive(this.tabDto.input.base),\n                    URI.revive(this.tabDto.input.input1),\n                    URI.revive(this.tabDto.input.input2),\n                    URI.revive(this.tabDto.input.result));\n            case TabInputKind.CustomEditorInput:\n                return new CustomEditorTabInput(URI.revive(this.tabDto.input.uri), this.tabDto.input.viewType);\n            case TabInputKind.WebviewEditorInput:\n                return new WebviewEditorTabInput(this.tabDto.input.viewType);\n            case TabInputKind.NotebookInput:\n                return new NotebookEditorTabInput(URI.revive(this.tabDto.input.uri), this.tabDto.input.notebookType);\n            case TabInputKind.NotebookDiffInput:\n                return new NotebookDiffEditorTabInput(URI.revive(this.tabDto.input.original), URI.revive(this.tabDto.input.modified), this.tabDto.input.notebookType);\n            case TabInputKind.TerminalEditorInput:\n                return new TerminalEditorTabInput();\n            case TabInputKind.InteractiveEditorInput:\n                return new InteractiveWindowInput(URI.revive(this.tabDto.input.uri), URI.revive(this.tabDto.input.inputBoxUri));\n            default:\n                return undefined;\n        }\n    }\n}\n\nclass TabGroupExt {\n\n    private tabGroupApiObject: theia.TabGroup | undefined;\n    private tabGroupDto: TabGroupDto;\n    private tabsArr: TabExt[] = [];\n    private activeTabId: string = '';\n    private activeGroupIdGetter: () => number | undefined;\n\n    constructor(dto: TabGroupDto, activeGroupIdGetter: () => number | undefined) {\n        this.tabGroupDto = dto;\n        this.activeGroupIdGetter = activeGroupIdGetter;\n        // Construct all tabs from the given dto\n        for (const tabDto of dto.tabs) {\n            if (tabDto.isActive) {\n                this.activeTabId = tabDto.id;\n            }\n            this.tabsArr.push(new TabExt(tabDto, this, () => this.getActiveTabId()));\n        }\n    }\n\n    get apiObject(): theia.TabGroup {\n        if (!this.tabGroupApiObject) {\n            // Don't want to lose reference to parent `this` in the getters\n            const that = this;\n            const obj: theia.TabGroup = {\n                get isActive(): boolean {\n                    // We use a getter function here to always ensure at most 1 active group and prevent iteration for being required\n                    return that.tabGroupDto.groupId === that.activeGroupIdGetter();\n                },\n                get viewColumn(): theia.ViewColumn {\n                    return ViewColumn.to(that.tabGroupDto.viewColumn);\n                },\n                get activeTab(): theia.Tab | undefined {\n                    return that.tabsArr.find(tab => tab.tabId === that.activeTabId)?.apiObject;\n                },\n                get tabs(): Readonly<theia.Tab[]> {\n                    return Object.freeze(that.tabsArr.map(tab => tab.apiObject));\n                }\n            };\n            this.tabGroupApiObject = Object.freeze<theia.TabGroup>(obj);\n        }\n        return this.tabGroupApiObject;\n    }\n\n    get groupId(): number {\n        return this.tabGroupDto.groupId;\n    }\n\n    get tabs(): TabExt[] {\n        return this.tabsArr;\n    }\n\n    acceptGroupDtoUpdate(dto: TabGroupDto): void {\n        this.tabGroupDto = dto;\n    }\n\n    acceptTabOperation(operation: TabOperation): TabExt {\n        // In the open case we add the tab to the group\n        if (operation.kind === TabModelOperationKind.TAB_OPEN) {\n            const tab = new TabExt(operation.tabDto, this, () => this.getActiveTabId());\n            // Insert tab at editor index\n            this.tabsArr.splice(operation.index, 0, tab);\n            if (operation.tabDto.isActive) {\n                this.activeTabId = tab.tabId;\n            }\n            return tab;\n        } else if (operation.kind === TabModelOperationKind.TAB_CLOSE) {\n            const tab = this.tabsArr.splice(operation.index, 1)[0];\n            if (!tab) {\n                throw new Error(`Tab close updated received for index ${operation.index} which does not exist`);\n            }\n            if (tab.tabId === this.activeTabId) {\n                this.activeTabId = '';\n            }\n            return tab;\n        } else if (operation.kind === TabModelOperationKind.TAB_MOVE) {\n            if (operation.oldIndex === undefined) {\n                throw new Error('Invalid old index on move IPC');\n            }\n            // Splice to remove at old index and insert at new index === moving the tab\n            const tab = this.tabsArr.splice(operation.oldIndex, 1)[0];\n            if (!tab) {\n                throw new Error(`Tab move updated received for index ${operation.oldIndex} which does not exist`);\n            }\n            this.tabsArr.splice(operation.index, 0, tab);\n            return tab;\n        }\n        const _tab = this.tabsArr.find(extHostTab => extHostTab.tabId === operation.tabDto.id);\n        if (!_tab) {\n            throw new Error('INVALID tab');\n        }\n        if (operation.tabDto.isActive) {\n            this.activeTabId = operation.tabDto.id;\n        } else if (this.activeTabId === operation.tabDto.id && !operation.tabDto.isActive) {\n            // Events aren't guaranteed to be in order so if we receive a dto that matches the active tab id\n            // but isn't active we mark the active tab id as empty. This prevent onDidActiveTabChange from\n            // firing incorrectly\n            this.activeTabId = '';\n        }\n        _tab.acceptDtoUpdate(operation.tabDto);\n        return _tab;\n    }\n\n    // Not a getter since it must be a function to be used as a callback for the tabs\n    getActiveTabId(): string {\n        return this.activeTabId;\n    }\n}\n\nexport class TabsExtImpl implements TabsExt {\n    declare readonly _serviceBrand: undefined;\n\n    private readonly proxy: TabsMain;\n    private readonly onDidChangeTabs = new Emitter<theia.TabChangeEvent>();\n    private readonly onDidChangeTabGroups = new Emitter<theia.TabGroupChangeEvent>();\n\n    // Have to use ! because this gets initialized via an RPC proxy\n    private activeGroupId!: number;\n\n    private tabGroupArr: TabGroupExt[] = [];\n\n    private apiObject: theia.TabGroups | undefined;\n\n    constructor(readonly rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TABS_MAIN);\n    }\n\n    get tabGroups(): theia.TabGroups {\n        if (!this.apiObject) {\n            const that = this;\n            const obj: theia.TabGroups = {\n                // never changes -> simple value\n                onDidChangeTabGroups: that.onDidChangeTabGroups.event,\n                onDidChangeTabs: that.onDidChangeTabs.event,\n                // dynamic -> getters\n                get all(): Readonly<theia.TabGroup[]> {\n                    return Object.freeze(that.tabGroupArr.map(group => group.apiObject));\n                },\n                get activeTabGroup(): theia.TabGroup {\n                    const activeTabGroupId = that.activeGroupId;\n                    const activeTabGroup = assertIsDefined(that.tabGroupArr.find(candidate => candidate.groupId === activeTabGroupId)?.apiObject);\n                    return activeTabGroup;\n                },\n                close: async (tabOrTabGroup: theia.Tab | readonly theia.Tab[] | theia.TabGroup | readonly theia.TabGroup[], preserveFocus?: boolean) => {\n                    const tabsOrTabGroups = Array.isArray(tabOrTabGroup) ? tabOrTabGroup : [tabOrTabGroup];\n                    if (!tabsOrTabGroups.length) {\n                        return true;\n                    }\n                    // Check which type was passed in and call the appropriate close\n                    // Casting is needed as typescript doesn't seem to infer enough from this\n                    if (isTabGroup(tabsOrTabGroups[0])) {\n                        return this._closeGroups(tabsOrTabGroups as theia.TabGroup[], preserveFocus);\n                    } else {\n                        return this._closeTabs(tabsOrTabGroups as theia.Tab[], preserveFocus);\n                    }\n                },\n            };\n            this.apiObject = Object.freeze(obj);\n        }\n        return this.apiObject;\n    }\n\n    $acceptEditorTabModel(tabGroups: TabGroupDto[]): void {\n        const groupIdsBefore = new Set(this.tabGroupArr.map(group => group.groupId));\n        const groupIdsAfter = new Set(tabGroups.map(dto => dto.groupId));\n        const diff = diffSets(groupIdsBefore, groupIdsAfter);\n\n        const closed: theia.TabGroup[] = this.tabGroupArr.filter(group => diff.removed.includes(group.groupId)).map(group => group.apiObject);\n        const opened: theia.TabGroup[] = [];\n        const changed: theia.TabGroup[] = [];\n        const tabsOpened: theia.Tab[] = [];\n\n        this.tabGroupArr = tabGroups.map(tabGroup => {\n            const group = new TabGroupExt(tabGroup, () => this.activeGroupId);\n            if (diff.added.includes(group.groupId)) {\n                opened.push({ activeTab: undefined, isActive: group.apiObject.isActive, tabs: [], viewColumn: group.apiObject.viewColumn });\n                tabsOpened.push(...group.apiObject.tabs);\n            } else {\n                changed.push(group.apiObject);\n            }\n            return group;\n        });\n\n        // Set the active tab group id. skip if no tabgroups are open\n        if (tabGroups.length > 0) {\n            const activeTabGroupId = assertIsDefined(tabGroups.find(group => group.isActive === true)?.groupId);\n            if (this.activeGroupId !== activeTabGroupId) {\n                this.activeGroupId = activeTabGroupId;\n            }\n        }\n        this.onDidChangeTabGroups.fire(Object.freeze({ opened, closed, changed }));\n        this.onDidChangeTabs.fire({ opened: tabsOpened, changed: [], closed: [] });\n    }\n\n    $acceptTabGroupUpdate(groupDto: TabGroupDto): void {\n        const group = this.tabGroupArr.find(tabGroup => tabGroup.groupId === groupDto.groupId);\n        if (!group) {\n            throw new Error('Update Group IPC call received before group creation.');\n        }\n        group.acceptGroupDtoUpdate(groupDto);\n        if (groupDto.isActive) {\n            this.activeGroupId = groupDto.groupId;\n        }\n        this.onDidChangeTabGroups.fire(Object.freeze({ changed: [group.apiObject], opened: [], closed: [] }));\n    }\n\n    $acceptTabOperation(operation: TabOperation): void {\n        const group = this.tabGroupArr.find(tabGroup => tabGroup.groupId === operation.groupId);\n        if (!group) {\n            throw new Error('Update Tabs IPC call received before group creation.');\n        }\n        const tab = group.acceptTabOperation(operation);\n\n        // Construct the tab change event based on the operation\n        switch (operation.kind) {\n            case TabModelOperationKind.TAB_OPEN:\n                this.onDidChangeTabs.fire(Object.freeze({\n                    opened: [tab.apiObject],\n                    closed: [],\n                    changed: []\n                }));\n                return;\n            case TabModelOperationKind.TAB_CLOSE:\n                this.onDidChangeTabs.fire(Object.freeze({\n                    opened: [],\n                    closed: [tab.apiObject],\n                    changed: []\n                }));\n                return;\n            case TabModelOperationKind.TAB_MOVE:\n            case TabModelOperationKind.TAB_UPDATE:\n                this.onDidChangeTabs.fire(Object.freeze({\n                    opened: [],\n                    closed: [],\n                    changed: [tab.apiObject]\n                }));\n                return;\n        }\n    }\n\n    private _findExtHostTabFromApi(apiTab: theia.Tab): TabExt | undefined {\n        for (const group of this.tabGroupArr) {\n            for (const tab of group.tabs) {\n                if (tab.apiObject === apiTab) {\n                    return tab;\n                }\n            }\n        }\n        return;\n    }\n\n    private _findExtHostTabGroupFromApi(apiTabGroup: theia.TabGroup): TabGroupExt | undefined {\n        return this.tabGroupArr.find(candidate => candidate.apiObject === apiTabGroup);\n    }\n\n    private async _closeTabs(tabs: theia.Tab[], preserveFocus?: boolean): Promise<boolean> {\n        const extHostTabIds: string[] = [];\n        for (const tab of tabs) {\n            const extHostTab = this._findExtHostTabFromApi(tab);\n            if (!extHostTab) {\n                throw new Error('Tab close: Invalid tab not found!');\n            }\n            extHostTabIds.push(extHostTab.tabId);\n        }\n        return this.proxy.$closeTab(extHostTabIds, preserveFocus);\n    }\n\n    private async _closeGroups(groups: theia.TabGroup[], preserveFocus?: boolean): Promise<boolean> {\n        const extHostGroupIds: number[] = [];\n        for (const group of groups) {\n            const extHostGroup = this._findExtHostTabGroupFromApi(group);\n            if (!extHostGroup) {\n                throw new Error('Group close: Invalid group not found!');\n            }\n            extHostGroupIds.push(extHostGroup.groupId);\n        }\n        return this.proxy.$closeGroup(extHostGroupIds, preserveFocus);\n    }\n}\n\n// #region Utils\nfunction isTabGroup(obj: unknown): obj is theia.TabGroup {\n    const tabGroup = obj as theia.TabGroup;\n    if (tabGroup.tabs !== undefined) {\n        return true;\n    }\n    return false;\n}\n// #endregion\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { TaskDto } from '../../common';\nimport * as Converter from '../type-converters';\n\nexport class TaskProviderAdapter {\n\n    constructor(private readonly provider: theia.TaskProvider) { }\n\n    provideTasks(token: theia.CancellationToken): Promise<TaskDto[]> {\n        return Promise.resolve(this.provider.provideTasks(token)).then(tasks => {\n            if (!Array.isArray(tasks)) {\n                return [];\n            }\n            const result: TaskDto[] = [];\n            for (const task of tasks) {\n                const data = Converter.fromTask(task);\n                if (!data) {\n                    continue;\n                }\n\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    async resolveTask(task: TaskDto, token: theia.CancellationToken): Promise<TaskDto> {\n        if (typeof this.provider.resolveTask !== 'function') {\n            return task;\n        }\n\n        const item = Converter.toTask(task);\n        if (!item) {\n            return task;\n        }\n\n        const resolved = await this.provider.resolveTask(item, token);\n        const converted = resolved ? Converter.fromTask(resolved) : Converter.fromTask(item);\n        return converted ?? task;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    TasksExt,\n    TasksMain,\n    TaskDto,\n    TaskExecutionDto\n} from '../../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport * as converter from '../type-converters';\nimport { CustomExecution, Disposable } from '../types-impl';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { TaskProviderAdapter } from './task-provider';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { TerminalServiceExtImpl } from '../terminal-ext';\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\n\ntype ExecutionCallback = (resolvedDefinition: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>;\nexport class TasksExtImpl implements TasksExt {\n    private proxy: TasksMain;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, TaskProviderAdapter>();\n    private executions = new Map<number, theia.TaskExecution>();\n    protected callbackIdBase: string = UUID.uuid4();\n    protected callbackId: number;\n    protected customExecutionIds: Map<ExecutionCallback, string> = new Map();\n    protected customExecutionFunctions: Map<string, ExecutionCallback> = new Map();\n    protected lastStartedTask: number | undefined;\n\n    private readonly onDidExecuteTask: Emitter<theia.TaskStartEvent> = new Emitter<theia.TaskStartEvent>();\n    private readonly onDidTerminateTask: Emitter<theia.TaskEndEvent> = new Emitter<theia.TaskEndEvent>();\n    private readonly onDidExecuteTaskProcess: Emitter<theia.TaskProcessStartEvent> = new Emitter<theia.TaskProcessStartEvent>();\n    private readonly onDidTerminateTaskProcess: Emitter<theia.TaskProcessEndEvent> = new Emitter<theia.TaskProcessEndEvent>();\n\n    constructor(rpc: RPCProtocol, readonly terminalExt: TerminalServiceExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TASKS_MAIN);\n    }\n\n    get taskExecutions(): ReadonlyArray<theia.TaskExecution> {\n        return [...this.executions.values()];\n    }\n\n    get onDidStartTask(): Event<theia.TaskStartEvent> {\n        return this.onDidExecuteTask.event;\n    }\n\n    async $onDidStartTask(execution: TaskExecutionDto, terminalId: number): Promise<void> {\n        const customExecution = this.customExecutionFunctions.get(execution.task.executionId || '');\n        if (customExecution) {\n            const taskDefinition = converter.toTask(execution.task).definition;\n            const pty = await customExecution(taskDefinition);\n            this.terminalExt.attachPtyToTerminal(terminalId, pty);\n            if (pty.onDidClose) {\n                const disposable = pty.onDidClose((e: number | void = undefined) => {\n                    disposable.dispose();\n                    // eslint-disable-next-line no-void\n                    this.proxy.$customExecutionComplete(execution.id, e === void 0 ? undefined : e);\n                });\n            }\n        }\n        this.lastStartedTask = execution.id;\n\n        this.onDidExecuteTask.fire({\n            execution: this.getTaskExecution(execution)\n        });\n    }\n\n    get onDidEndTask(): Event<theia.TaskEndEvent> {\n        return this.onDidTerminateTask.event;\n    }\n\n    $onDidEndTask(id: number): void {\n        const taskExecution = this.executions.get(id);\n        if (!taskExecution) {\n            throw new Error(`Task execution with id ${id} is not found`);\n        }\n\n        this.executions.delete(id);\n\n        this.onDidTerminateTask.fire({\n            execution: taskExecution\n        });\n    }\n\n    get onDidStartTaskProcess(): Event<theia.TaskProcessStartEvent> {\n        return this.onDidExecuteTaskProcess.event;\n    }\n\n    $onDidStartTaskProcess(processId: number, executionDto: TaskExecutionDto): void {\n        this.onDidExecuteTaskProcess.fire({\n            processId,\n            execution: this.getTaskExecution(executionDto)\n        });\n    }\n\n    get onDidEndTaskProcess(): Event<theia.TaskProcessEndEvent> {\n        return this.onDidTerminateTaskProcess.event;\n    }\n\n    $onDidEndTaskProcess(exitCode: number, taskId: number): void {\n        const taskExecution = this.executions.get(taskId);\n        if (!taskExecution) {\n            throw new Error(`Task execution with id ${taskId} is not found`);\n        }\n\n        this.onDidTerminateTaskProcess.fire({\n            execution: taskExecution,\n            exitCode\n        });\n    }\n\n    registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new TaskProviderAdapter(provider));\n        this.proxy.$registerTaskProvider(callId, type);\n        return this.createDisposable(callId);\n    }\n\n    async fetchTasks(filter?: theia.TaskFilter): Promise<theia.Task[]> {\n        const taskVersion = filter ? filter.version : undefined;\n        const taskType = filter ? filter.type : undefined;\n        const taskDtos = await this.proxy.$fetchTasks(taskVersion, taskType);\n        return taskDtos.map(dto => converter.toTask(dto));\n    }\n\n    async executeTask(task: theia.Task): Promise<theia.TaskExecution> {\n        const taskDto = converter.fromTask(task);\n        if (taskDto) {\n            // If this task is a custom execution, then we need to save it away\n            // in the provided custom execution map that is cleaned up after the\n            // task is executed.\n            if (CustomExecution.is(task.execution!)) {\n                taskDto.executionId = this.addCustomExecution(task.execution!.callback);\n            }\n            const executionDto = await this.proxy.$executeTask(taskDto);\n            if (executionDto) {\n                const taskExecution = this.getTaskExecution(executionDto);\n                return taskExecution;\n            }\n            throw new Error('Run task config does not return after being started');\n        }\n        throw new Error('Task was not successfully transformed into a task config');\n    }\n\n    async $provideTasks(handle: number): Promise<TaskDto[]> {\n        const adapter = this.adaptersMap.get(handle);\n        if (adapter) {\n            return adapter.provideTasks(CancellationToken.None).then(tasks => {\n                for (const task of tasks) {\n                    if (task.taskType === 'customExecution') {\n                        this.applyCustomExecution(task);\n                    }\n                }\n                return tasks;\n            });\n        } else {\n            throw new Error('No adapter found to provide tasks');\n        }\n    }\n\n    async $resolveTask(handle: number, task: TaskDto, token: theia.CancellationToken): Promise<TaskDto> {\n        const adapter = this.adaptersMap.get(handle);\n        if (adapter) {\n            return adapter.resolveTask(task, token).then(resolvedTask => {\n                // ensure we do not lose task type and execution id during resolution as we need it for custom execution\n                resolvedTask.taskType = resolvedTask.taskType ?? task.taskType;\n                if (resolvedTask.taskType === 'customExecution') {\n                    this.applyCustomExecution(resolvedTask);\n                }\n                return resolvedTask;\n            });\n        } else {\n            throw new Error('No adapter found to resolve task');\n        }\n    }\n\n    private applyCustomExecution(task: TaskDto): void {\n        if (task.callback) {\n            task.executionId = this.addCustomExecution(task.callback);\n            task.callback = undefined;\n        }\n    }\n\n    private addNewAdapter(adapter: TaskProviderAdapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n        });\n    }\n\n    // Initial `this.executions` map with the running tasks from the previous session\n    async $initLoadedTasks(taskExecutions: TaskExecutionDto[]): Promise<void> {\n        taskExecutions.forEach(execution => this.getTaskExecution(execution));\n    }\n\n    private getTaskExecution(execution: TaskExecutionDto): theia.TaskExecution {\n        const executionId = execution.id;\n        let result: theia.TaskExecution | undefined = this.executions.get(executionId);\n        if (result) {\n            return result;\n        }\n\n        result = {\n            task: converter.toTask(execution.task),\n            terminate: () => {\n                this.proxy.$terminateTask(executionId);\n            }\n        };\n        this.executions.set(executionId, result);\n        return result;\n    }\n\n    private addCustomExecution(callback: ExecutionCallback): string {\n        let id = this.customExecutionIds.get(callback);\n        if (!id) {\n            id = this.nextCallbackId();\n            this.customExecutionIds.set(callback, id);\n            this.customExecutionFunctions.set(id, callback);\n        }\n        return id;\n    }\n\n    private nextCallbackId(): string {\n        return this.callbackIdBase + this.callbackId++;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2023 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { cloneAndChange } from '@theia/core';\nimport { mixin } from '../common/types';\nimport { TelemetryTrustedValue, TelemetryLoggerOptions } from './types-impl';\n\nexport class TelemetryExtImpl {\n\n    _isTelemetryEnabled: boolean = false; // telemetry not activated by default\n    private readonly onDidChangeTelemetryEnabledEmitter = new Emitter<boolean>();\n    readonly onDidChangeTelemetryEnabled: Event<boolean> = this.onDidChangeTelemetryEnabledEmitter.event;\n\n    get isTelemetryEnabled(): boolean {\n        return this._isTelemetryEnabled;\n    }\n\n    set isTelemetryEnabled(isTelemetryEnabled: boolean) {\n        if (this._isTelemetryEnabled !== isTelemetryEnabled) {\n            this._isTelemetryEnabled = isTelemetryEnabled;\n            this.onDidChangeTelemetryEnabledEmitter.fire(this._isTelemetryEnabled);\n        }\n    }\n\n    createTelemetryLogger(sender: TelemetrySender, options?: TelemetryLoggerOptions | undefined): TelemetryLogger {\n        const logger = new TelemetryLogger(sender, this._isTelemetryEnabled, options);\n        this.onDidChangeTelemetryEnabled(isEnabled => {\n            logger.telemetryEnabled = isEnabled;\n        });\n        return logger;\n    }\n}\n\nexport class TelemetryLogger {\n    private sender: TelemetrySender | undefined;\n    readonly options: TelemetryLoggerOptions | undefined;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    readonly commonProperties: Record<string, any>;\n    telemetryEnabled: boolean;\n\n    private readonly onDidChangeEnableStatesEmitter: Emitter<TelemetryLogger> = new Emitter();\n    readonly onDidChangeEnableStates: Event<TelemetryLogger> = this.onDidChangeEnableStatesEmitter.event;\n    private _isUsageEnabled: boolean;\n    private _isErrorsEnabled: boolean;\n\n    constructor(sender: TelemetrySender, telemetryEnabled: boolean, options?: TelemetryLoggerOptions) {\n        this.sender = sender;\n        this.options = options;\n        this.commonProperties = this.getCommonProperties();\n        this._isErrorsEnabled = true;\n        this._isUsageEnabled = true;\n        this.telemetryEnabled = telemetryEnabled;\n    }\n\n    get isUsageEnabled(): boolean {\n        return this._isUsageEnabled;\n    }\n\n    set isUsageEnabled(isUsageEnabled: boolean) {\n        if (this._isUsageEnabled !== isUsageEnabled) {\n            this._isUsageEnabled = isUsageEnabled;\n            this.onDidChangeEnableStatesEmitter.fire(this);\n        }\n    }\n\n    get isErrorsEnabled(): boolean {\n        return this._isErrorsEnabled;\n    }\n\n    set isErrorsEnabled(isErrorsEnabled: boolean) {\n        if (this._isErrorsEnabled !== isErrorsEnabled) {\n            this._isErrorsEnabled = isErrorsEnabled;\n            this.onDidChangeEnableStatesEmitter.fire(this);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logUsage(eventName: string, data?: Record<string, any | TelemetryTrustedValue<any>>): void {\n        if (!this.telemetryEnabled || !this.isUsageEnabled) {\n            return;\n        }\n        this.logEvent(eventName, data);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logError(eventNameOrException: string | Error, data?: Record<string, any | TelemetryTrustedValue<any>>): void {\n        if (!this.telemetryEnabled || !this.isErrorsEnabled || !this.sender) {\n            // no sender available or error shall not be sent\n            return;\n        }\n        if (typeof eventNameOrException === 'string') {\n            this.logEvent(eventNameOrException, data);\n        } else {\n            this.sender.sendErrorData(eventNameOrException, data);\n        }\n    }\n\n    dispose(): void {\n        if (this.sender?.flush) {\n            let tempSender: TelemetrySender | undefined = this.sender;\n            this.sender = undefined;\n            Promise.resolve(tempSender.flush!()).then(tempSender = undefined);\n        } else {\n            this.sender = undefined;\n        }\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private logEvent(eventName: string, data?: Record<string, any>): void {\n        // No sender means likely disposed of, we should no-op\n        if (!this.sender) {\n            return;\n        }\n        data = mixInCommonPropsAndCleanData(data || {}, this.options?.additionalCommonProperties, this.options?.ignoreBuiltInCommonProperties ? undefined : this.commonProperties);\n        this.sender?.sendEventData(eventName, data);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private getCommonProperties(): Record<string, any> {\n        return [];\n    }\n}\n\ninterface TelemetrySender {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    sendEventData(eventName: string, data?: Record<string, any>): void;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    sendErrorData(error: Error, data?: Record<string, any>): void;\n    flush?(): void | Thenable<void>;\n}\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.76.0/src/vs/workbench/api/common/extHostTelemetry.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction mixInCommonPropsAndCleanData(data: Record<string, any>, additionalProperties?: Record<string, any>, commonProperties?: Record<string, any>): Record<string, any> {\n    let updatedData = data.properties ?? data;\n\n    // We don't clean measurements since they are just numbers\n    updatedData = cleanData(updatedData, []);\n\n    if (additionalProperties) {\n        updatedData = mixin(updatedData, additionalProperties);\n    }\n\n    if (commonProperties) {\n        updatedData = mixin(updatedData, commonProperties);\n    }\n\n    if (data.properties) {\n        data.properties = updatedData;\n    } else {\n        data = updatedData;\n    }\n\n    return data;\n}\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.76.0/src/vs/platform/telemetry/common/telemetryUtils.ts#L321-L442\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Cleans a given stack of possible paths\n * @param stack The stack to sanitize\n * @param cleanupPatterns Cleanup patterns to remove from the stack\n * @returns The cleaned stack\n */\nfunction anonymizeFilePaths(stack: string, cleanupPatterns: RegExp[]): string {\n\n    // Fast check to see if it is a file path to avoid doing unnecessary heavy regex work\n    if (!stack || (!stack.includes('/') && !stack.includes('\\\\'))) {\n        return stack;\n    }\n\n    let updatedStack = stack;\n\n    const cleanUpIndexes: [number, number][] = [];\n    for (const regexp of cleanupPatterns) {\n        while (true) {\n            const result = regexp.exec(stack);\n            if (!result) {\n                break;\n            }\n            cleanUpIndexes.push([result.index, regexp.lastIndex]);\n        }\n    }\n\n    const nodeModulesRegex = /^[\\\\\\/]?(node_modules|node_modules\\.asar)[\\\\\\/]/;\n    const fileRegex = /(file:\\/\\/)?([a-zA-Z]:(\\\\\\\\|\\\\|\\/)|(\\\\\\\\|\\\\|\\/))?([\\w-\\._]+(\\\\\\\\|\\\\|\\/))+[\\w-\\._]*/g;\n    let lastIndex = 0;\n    updatedStack = '';\n\n    while (true) {\n        const result = fileRegex.exec(stack);\n        if (!result) {\n            break;\n        }\n\n        // Check to see if the any cleanupIndexes partially overlap with this match\n        const overlappingRange = cleanUpIndexes.some(([start, end]) => result.index < end && start < fileRegex.lastIndex);\n\n        // anonymize user file paths that do not need to be retained or cleaned up.\n        if (!nodeModulesRegex.test(result[0]) && !overlappingRange) {\n            updatedStack += stack.substring(lastIndex, result.index) + '<REDACTED: user-file-path>';\n            lastIndex = fileRegex.lastIndex;\n        }\n    }\n    if (lastIndex < stack.length) {\n        updatedStack += stack.substring(lastIndex);\n    }\n\n    return updatedStack;\n}\n\n/**\n * Attempts to remove commonly leaked PII\n * @param property The property which will be removed if it contains user data\n * @returns The new value for the property\n */\nfunction removePropertiesWithPossibleUserInfo(property: string): string {\n    // If for some reason it is undefined we skip it (this shouldn't be possible);\n    if (!property) {\n        return property;\n    }\n\n    const value = property.toLowerCase();\n\n    const userDataRegexes = [\n        { label: 'Google API Key', regex: /AIza[0-9A-Za-z-_]{35}/ },\n        { label: 'Slack Token', regex: /xox[pbar]\\-[A-Za-z0-9]/ },\n        { label: 'Generic Secret', regex: /(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/ },\n        { label: 'Email', regex: /@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-]+/ } // Regex which matches @*.site\n    ];\n\n    // Check for common user data in the telemetry events\n    for (const secretRegex of userDataRegexes) {\n        if (secretRegex.regex.test(value)) {\n            return `<REDACTED: ${secretRegex.label}>`;\n        }\n    }\n\n    return property;\n}\n\n/**\n * Does a best possible effort to clean a data object from any possible PII.\n * @param data The data object to clean\n * @param paths Any additional patterns that should be removed from the data set\n * @returns A new object with the PII removed\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function cleanData(data: Record<string, any>, cleanUpPatterns: RegExp[]): Record<string, any> {\n    return cloneAndChange(data, value => {\n\n        // If it's a trusted value it means it's okay to skip cleaning so we don't clean it\n        if (value instanceof TelemetryTrustedValue) {\n            return value.value;\n        }\n\n        // We only know how to clean strings\n        if (typeof value === 'string') {\n            let updatedProperty = value.replace(/%20/g, ' ');\n\n            // First we anonymize any possible file paths\n            updatedProperty = anonymizeFilePaths(updatedProperty, cleanUpPatterns);\n\n            // Then we do a simple regex replace with the defined patterns\n            for (const regexp of cleanUpPatterns) {\n                updatedProperty = updatedProperty.replace(regexp, '');\n            }\n\n            // Lastly, remove commonly leaked PII\n            updatedProperty = removePropertiesWithPossibleUserInfo(updatedProperty);\n\n            return updatedProperty;\n        }\n        return undefined;\n    }, new Set());\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { TextEditorConfiguration, TextEditorsMain, TextEditorConfigurationUpdate, SingleEditOperation } from '../common/plugin-api-rpc';\nimport { Range as ApiRange } from '../common/plugin-api-rpc-model';\nimport { Selection, Range, TextEditorLineNumbersStyle, SnippetString, Position, TextEditorRevealType, EndOfLine } from './types-impl';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt } from './document-data';\nimport { readonly, illegalArgument } from '../common/errors';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\n\nexport class TextEditorExt implements theia.TextEditor {\n    private _viewColumn: theia.ViewColumn | undefined;\n    private _document: DocumentDataExt;\n    private _options: TextEditorOptionsExt;\n    private disposed = false;\n    constructor(\n        private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        document: DocumentDataExt,\n        private _selections: Selection[],\n        options: TextEditorConfiguration,\n        private _visibleRanges: Range[],\n        viewColumn: theia.ViewColumn | undefined) {\n        this._options = new TextEditorOptionsExt(proxy, id, options);\n        this._viewColumn = viewColumn;\n        this._document = document;\n    }\n\n    get document(): theia.TextDocument {\n        return this._document.document;\n    }\n\n    set document(doc) {\n        throw readonly('Document');\n    }\n\n    acceptViewColumn(val: theia.ViewColumn): void {\n        this._viewColumn = val;\n    }\n\n    dispose(): void {\n        this.disposed = true;\n    }\n\n    get options(): theia.TextEditorOptions {\n        return this._options;\n    }\n\n    set options(val: theia.TextEditorOptions) {\n        if (!this.disposed) {\n            this._options.assign(val);\n        }\n    }\n\n    acceptOptions(options: TextEditorConfiguration): void {\n        ok(!this.disposed);\n        this._options.accept(options);\n    }\n\n    get selection(): Selection {\n        return this._selections && this._selections[0];\n    }\n\n    set selection(val: Selection) {\n        if (!(val instanceof Selection)) {\n            throw illegalArgument('selection');\n        }\n        this._selections = [val];\n        this.trySetSelection();\n    }\n\n    private trySetSelection(): Promise<theia.TextEditor | undefined> {\n        const selection = this._selections.map(Converter.fromSelection);\n        return this.runOnProxy(() => this.proxy.$trySetSelections(this.id, selection));\n    }\n\n    get selections(): Selection[] {\n        return this._selections;\n    }\n\n    set selections(val: Selection[]) {\n        if (!Array.isArray(val) || val.some(s => !(s instanceof Selection))) {\n            throw illegalArgument('selections');\n        }\n\n        this._selections = val;\n        this.trySetSelection();\n    }\n\n    acceptSelections(selections: Selection[]): void {\n        ok(!this.disposed);\n        this._selections = selections;\n    }\n\n    get visibleRanges(): Range[] {\n        return this._visibleRanges;\n    }\n\n    set visibleRanges(val: Range[]) {\n        throw readonly('visibleRanges');\n    }\n\n    acceptVisibleRanges(range: Range[]): void {\n        ok(!this.disposed);\n        this._visibleRanges = range;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        return this._viewColumn;\n    }\n\n    set viewColumn(value) {\n        throw readonly('viewColumn');\n    }\n\n    _acceptViewColumn(value: theia.ViewColumn): void {\n        ok(!this.disposed);\n        this._viewColumn = value;\n    }\n\n    // eslint-disable-next-line max-len\n    edit(callback: (editBuilder: theia.TextEditorEdit) => void, options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#edit not possible on closed editor'));\n        }\n\n        const edit = new TextEditorEdit(this._document.document, options);\n        callback(edit);\n        return this.applyEdit(edit);\n    }\n    // eslint-disable-next-line max-len\n    insertSnippet(snippet: SnippetString, location?: Position | Range | Position[] | Range[], options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#insertSnippet not possible on closed editors'));\n        }\n        let ranges: ApiRange[];\n\n        if (!location || (Array.isArray(location) && location.length === 0)) {\n            ranges = this._selections.map(s => Converter.fromRange(s)!);\n\n        } else if (location instanceof Position) {\n            const { lineNumber, column } = Converter.fromPosition(location);\n            ranges = [{ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column }];\n\n        } else if (location instanceof Range) {\n            ranges = [Converter.fromRange(location)!];\n        } else {\n            ranges = [];\n            for (const posOrRange of location) {\n                if (posOrRange instanceof Range) {\n                    ranges.push(Converter.fromRange(posOrRange)!);\n                } else {\n                    const { lineNumber, column } = Converter.fromPosition(posOrRange);\n                    ranges.push({ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column });\n                }\n            }\n        }\n\n        return this.proxy.$tryInsertSnippet(this.id, snippet.value, ranges, options);\n    }\n    setDecorations(decorationType: theia.TextEditorDecorationType, rangesOrOptions: Range[] | theia.DecorationOptions[]): void {\n        this.runOnProxy(() => {\n            if (Converter.isDecorationOptionsArr(rangesOrOptions)) {\n                return this.proxy.$trySetDecorations(\n                    this.id,\n                    decorationType.key,\n                    Converter.fromRangeOrRangeWithMessage(rangesOrOptions)\n                );\n            } else {\n                const ranges: number[] = new Array<number>(4 * rangesOrOptions.length);\n                const len = rangesOrOptions.length;\n                for (let i = 0; i < len; i++) {\n                    const range = rangesOrOptions[i];\n                    ranges[4 * i] = range.start.line + 1;\n                    ranges[4 * i + 1] = range.start.character + 1;\n                    ranges[4 * i + 2] = range.end.line + 1;\n                    ranges[4 * i + 3] = range.end.character + 1;\n                }\n                return this.proxy.$trySetDecorationsFast(\n                    this.id,\n                    decorationType.key,\n                    ranges\n                );\n            }\n        });\n    }\n\n    revealRange(range: Range, revealType?: theia.TextEditorRevealType): void {\n        this.runOnProxy(() => this.proxy.$tryRevealRange(this.id, Converter.fromRange(range)!, (revealType || TextEditorRevealType.Default)));\n    }\n\n    private applyEdit(edit: TextEditorEdit): Promise<boolean> {\n        const editData = edit.finalize();\n\n        const editRanges = editData.edits.map(e => e.range);\n\n        editRanges.sort((a, b) => {\n            if (a.end.line === b.end.line) {\n                if (a.end.character === b.end.character) {\n                    if (a.start.line === b.start.line) {\n                        return a.start.character - b.start.character;\n                    }\n                    return a.start.line - b.start.line;\n                }\n                return a.end.character - b.end.character;\n            }\n            return a.end.line - b.end.line;\n        });\n\n        const count = editRanges.length - 1;\n        for (let i = 0; i < count; i++) {\n            const rangeEnd = editRanges[i].end;\n            const nextRangeStart = editRanges[i + 1].start;\n\n            if (nextRangeStart.isBefore(rangeEnd)) {\n                return Promise.reject(\n                    new Error('Overlapping ranges are not allowed!')\n                );\n            }\n        }\n\n        // prepare data for serialization\n        const edits: SingleEditOperation[] = editData.edits.map(e =>\n        ({\n            range: Converter.fromRange(e.range)!,\n            text: e.text,\n            forceMoveMarkers: e.forceMoveMarkers\n        }));\n\n        return this.proxy.$tryApplyEdits(this.id, editData.documentVersionId, edits, {\n            setEndOfLine: editData.setEndOfLine,\n            undoStopBefore: editData.undoStopBefore,\n            undoStopAfter: editData.undoStopAfter\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private runOnProxy(callback: () => Promise<any>): Promise<TextEditorExt | undefined> {\n        if (this.disposed) {\n            console.warn('TextEditor is disposed!');\n            return Promise.resolve(undefined);\n        }\n\n        return callback().then(() => this, err => {\n            if (!(err instanceof Error && err.name === 'DISPOSED')) {\n                console.warn(err);\n            }\n            return undefined;\n        });\n    }\n\n    show(column?: theia.ViewColumn): void {\n        this.proxy.$tryShowTextDocument(this.document.uri, {\n            viewColumn: column,\n            preview: true,\n        });\n    }\n\n    hide(): void {\n        this.proxy.$tryHideEditor(this.id);\n    }\n}\n\nexport class TextEditorOptionsExt implements theia.TextEditorOptions {\n    private _tabSize?: number;\n    private _insertSpace: boolean;\n    private _cursorStyle: TextEditorCursorStyle;\n    private _lineNumbers: TextEditorLineNumbersStyle;\n    constructor(private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        source: TextEditorConfiguration) {\n        this.accept(source);\n    }\n\n    accept(source: TextEditorConfiguration): void {\n        this._tabSize = source.tabSize;\n        this._insertSpace = source.insertSpaces;\n        this._cursorStyle = source.cursorStyle;\n        this._lineNumbers = source.lineNumbers;\n    }\n\n    get tabSize(): number | string | undefined {\n        return this._tabSize;\n    }\n\n    set tabSize(val: number | string | undefined) {\n        const tabSize = this.validateTabSize(val);\n        if (!tabSize) {\n            return; // ignore invalid values\n        }\n\n        if (typeof tabSize === 'number') {\n            if (this.tabSize === tabSize) {\n                return;\n            }\n            this.tabSize = tabSize;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, {\n            tabSize\n        }));\n    }\n\n    private validateTabSize(val: number | string | undefined): number | 'auto' | undefined {\n        if (val === 'auto') {\n            return 'auto';\n        }\n\n        if (typeof val === 'number') {\n            const r = Math.floor(val);\n            return r > 0 ? r : undefined;\n        }\n        if (typeof val === 'string') {\n            const r = parseInt(val, undefined);\n            if (isNaN(r)) {\n                return undefined;\n            }\n            return r > 0 ? r : undefined;\n        }\n        return undefined;\n    }\n\n    get insertSpaces(): boolean | string {\n        return this._insertSpace;\n    }\n\n    set insertSpaces(val: boolean | string) {\n        const insertSpaces = this.validateInsertSpaces(val);\n        if (typeof insertSpaces === 'boolean') {\n            if (this._insertSpace === insertSpaces) {\n                return;\n            }\n            this._insertSpace = insertSpaces;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, { insertSpaces }));\n    }\n\n    private validateInsertSpaces(val: boolean | string): boolean | 'auto' {\n        if (val === 'auto') {\n            return 'auto';\n        }\n        return val === 'false' ? false : Boolean(val);\n    }\n\n    get cursorStyle(): TextEditorCursorStyle {\n        return this._cursorStyle;\n    }\n\n    set cursorStyle(val: TextEditorCursorStyle) {\n        if (this._cursorStyle === val) {\n            return;\n        }\n        this._cursorStyle = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { cursorStyle: val }));\n    }\n\n    get lineNumbers(): TextEditorLineNumbersStyle {\n        return this._lineNumbers;\n    }\n    set lineNumbers(val: TextEditorLineNumbersStyle) {\n        if (this._lineNumbers === val) {\n            return;\n        }\n        this._lineNumbers = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { lineNumbers: val }));\n    }\n\n    public assign(newOptions: theia.TextEditorOptions): void {\n        const configurationUpdate: TextEditorConfigurationUpdate = {};\n        let hasUpdate = false;\n\n        if (typeof newOptions.tabSize !== 'undefined') {\n            const tabSize = this.validateTabSize(newOptions.tabSize);\n            if (tabSize === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            } else if (typeof tabSize === 'number' && this._tabSize !== tabSize) {\n                this._tabSize = tabSize;\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            }\n        }\n\n        if (typeof newOptions.insertSpaces !== 'undefined') {\n            const insertSpaces = this.validateInsertSpaces(newOptions.insertSpaces);\n            if (insertSpaces === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            } else if (this.insertSpaces !== insertSpaces) {\n                this.insertSpaces = insertSpaces;\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            }\n        }\n\n        if (typeof newOptions.cursorStyle !== 'undefined') {\n            if (this._cursorStyle !== newOptions.cursorStyle) {\n                this._cursorStyle = newOptions.cursorStyle;\n                hasUpdate = true;\n                configurationUpdate.cursorStyle = newOptions.cursorStyle;\n            }\n        }\n\n        if (typeof newOptions.lineNumbers !== 'undefined') {\n            if (this._lineNumbers !== newOptions.lineNumbers) {\n                this._lineNumbers = newOptions.lineNumbers;\n                hasUpdate = true;\n                configurationUpdate.lineNumbers = newOptions.lineNumbers;\n            }\n        }\n\n        if (hasUpdate) {\n            warnOnError(this.proxy.$trySetOptions(this.id, configurationUpdate));\n        }\n    }\n\n}\n\nexport interface TextEditOperation {\n    range: theia.Range;\n    text?: string;\n    forceMoveMarkers: boolean;\n}\n\nexport interface EditData {\n    documentVersionId: number;\n    edits: TextEditOperation[];\n    setEndOfLine: EndOfLine;\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport class TextEditorEdit {\n    private readonly documentVersionId: number;\n    private collectedEdits: TextEditOperation[];\n    private eol: EndOfLine;\n    private readonly undoStopBefore: boolean;\n    private readonly undoStopAfter: boolean;\n    constructor(private document: theia.TextDocument, options: { undoStopBefore: boolean; undoStopAfter: boolean }) {\n        this.documentVersionId = document.version;\n        this.collectedEdits = [];\n        this.eol = 0;\n        this.undoStopBefore = options.undoStopBefore;\n        this.undoStopAfter = options.undoStopAfter;\n    }\n\n    finalize(): EditData {\n        return {\n            documentVersionId: this.documentVersionId,\n            edits: this.collectedEdits,\n            setEndOfLine: this.eol,\n            undoStopAfter: this.undoStopAfter,\n            undoStopBefore: this.undoStopBefore\n        };\n    }\n\n    replace(location: Position | Range | Selection, val: string): void {\n        let range: Range;\n        if (location instanceof Position) {\n            range = new Range(location, location);\n        } else if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, val, false);\n    }\n\n    insert(location: Position, val: string): void {\n        this.addEdit(new Range(location, location), val, true);\n    }\n\n    delete(location: Range | Selection): void {\n        let range: Range;\n        if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, undefined, true);\n    }\n\n    setEndOfLine(endOfLine: EndOfLine): void {\n        if (endOfLine !== EndOfLine.CRLF && endOfLine !== EndOfLine.LF) {\n            throw illegalArgument('endOfLine');\n        }\n\n        this.eol = endOfLine;\n    }\n\n    private addEdit(range: Range, text: string | undefined, moveMarkers: boolean): void {\n        const validatedRange = this.document.validateRange(range);\n        this.collectedEdits.push({\n            range: validatedRange,\n            forceMoveMarkers: moveMarkers,\n            text: text\n        });\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction warnOnError(promise: Promise<any>): void {\n    promise.then(undefined, err => {\n        console.warn(err);\n    });\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { TextEditorsExt, EditorChangedPropertiesData, TextEditorPositionData, TextEditorsMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorExt } from './text-editor';\nimport * as Converters from './type-converters';\nimport { TextEditorSelectionChangeKind } from './types-impl';\nimport { IdGenerator } from '../common/id-generator';\n\nexport class TextEditorsExtImpl implements TextEditorsExt {\n\n    private readonly _onDidChangeTextEditorSelection = new Emitter<theia.TextEditorSelectionChangeEvent>();\n    private readonly _onDidChangeTextEditorOptions = new Emitter<theia.TextEditorOptionsChangeEvent>();\n    private readonly _onDidChangeTextEditorVisibleRanges = new Emitter<theia.TextEditorVisibleRangesChangeEvent>();\n    private readonly _onDidChangeTextEditorViewColumn = new Emitter<theia.TextEditorViewColumnChangeEvent>();\n    private readonly _onDidChangeActiveTextEditor = new Emitter<theia.TextEditor | undefined>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<theia.TextEditor[]>();\n\n    readonly onDidChangeTextEditorSelection: Event<theia.TextEditorSelectionChangeEvent> = this._onDidChangeTextEditorSelection.event;\n    readonly onDidChangeTextEditorOptions = this._onDidChangeTextEditorOptions.event;\n    readonly onDidChangeTextEditorVisibleRanges = this._onDidChangeTextEditorVisibleRanges.event;\n    readonly onDidChangeTextEditorViewColumn = this._onDidChangeTextEditorViewColumn.event;\n    readonly onDidChangeActiveTextEditor = this._onDidChangeActiveTextEditor.event;\n    readonly onDidChangeVisibleTextEditors = this._onDidChangeVisibleTextEditors.event;\n\n    private proxy: TextEditorsMain;\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN);\n\n        this.editorsAndDocuments.onDidChangeActiveTextEditor(e => this._onDidChangeActiveTextEditor.fire(e));\n        this.editorsAndDocuments.onDidChangeVisibleTextEditors(e => this._onDidChangeVisibleTextEditors.fire(e));\n    }\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void {\n        const textEditor = this.editorsAndDocuments.getEditor(id);\n        if (!textEditor) {\n            return;\n        }\n\n        if (props.options) {\n            textEditor.acceptOptions(props.options);\n        }\n        if (props.selections) {\n            const selections = props.selections.selections.map(Converters.toSelection);\n            textEditor.acceptSelections(selections);\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            textEditor.acceptVisibleRanges(visibleRanges);\n        }\n\n        if (props.options) {\n            this._onDidChangeTextEditorOptions.fire({\n                textEditor,\n                options: props.options\n            });\n        }\n\n        if (props.selections) {\n            const kind = TextEditorSelectionChangeKind.fromValue(props.selections.source);\n            const selections = props.selections.selections.map(Converters.toSelection);\n            this._onDidChangeTextEditorSelection.fire({\n                textEditor,\n                selections,\n                kind\n            });\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            this._onDidChangeTextEditorVisibleRanges.fire({\n                textEditor,\n                visibleRanges\n            });\n        }\n    }\n    $acceptEditorPositionData(data: TextEditorPositionData): void {\n        for (const id in data) {\n            if (data.hasOwnProperty(id)) {\n                const textEditor = this.editorsAndDocuments.getEditor(id);\n                const viewColumn = Converters.toViewColumn(data[id]);\n                if (textEditor && viewColumn) {\n                    if (textEditor.viewColumn !== viewColumn) {\n                        textEditor.acceptViewColumn(viewColumn);\n                        this._onDidChangeTextEditorViewColumn.fire({ textEditor, viewColumn });\n                    }\n                }\n            }\n        }\n    }\n\n    getActiveEditor(): TextEditorExt | undefined {\n        return this.editorsAndDocuments.activeEditor();\n    }\n\n    getVisibleTextEditors(): theia.TextEditor[] {\n        return this.editorsAndDocuments.allEditors();\n    }\n\n    createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n        return new TextEditorDecorationType(this.proxy, options);\n    }\n\n    applyWorkspaceEdit(edit: theia.WorkspaceEdit, metadata?: theia.WorkspaceEditMetadata): Promise<boolean> {\n        const dto = Converters.fromWorkspaceEdit(edit, this.editorsAndDocuments);\n        return this.proxy.$tryApplyWorkspaceEdit(dto, metadata);\n    }\n\n    saveAll(includeUntitled?: boolean): PromiseLike<boolean> {\n        return this.proxy.$saveAll(includeUntitled);\n    }\n\n}\n\nexport class TextEditorDecorationType implements theia.TextEditorDecorationType {\n\n    private static readonly Keys = new IdGenerator('TextEditorDecorationType');\n\n    private proxy: TextEditorsMain;\n    public key: string;\n\n    constructor(proxy: TextEditorsMain, options: theia.DecorationRenderOptions) {\n        this.key = TextEditorDecorationType.Keys.nextId();\n        this.proxy = proxy;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.proxy.$registerTextEditorDecorationType(this.key, Converters.DecorationRenderOptions.from(options));\n    }\n\n    dispose(): void {\n        this.proxy.$removeTextEditorDecorationType(this.key);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { ColorTheme, ColorThemeKind } from './types-impl';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { ThemingExt } from '../common';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { ThemeType } from '@theia/core/lib/common/theme';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/5ddbda0172d80bfbb2529987ba9020848e8771f7/src/vs/workbench/api/common/extHostTheming.ts\n\nexport class ThemingExtImpl implements ThemingExt {\n\n    private actual: ColorTheme;\n    private _onDidChangeActiveColorTheme: Emitter<ColorTheme>;\n\n    constructor(\n        readonly rpc: RPCProtocol\n    ) {\n        this.actual = new ColorTheme(ColorThemeKind.Dark);\n        this._onDidChangeActiveColorTheme = new Emitter<ColorTheme>();\n    }\n\n    get activeColorTheme(): ColorTheme {\n        return this.actual;\n    }\n\n    $onColorThemeChange(type: ThemeType): void {\n        this.actual = new ColorTheme(this.convertKind(type));\n        this._onDidChangeActiveColorTheme.fire(this.actual);\n    }\n\n    protected convertKind(type: ThemeType): ColorThemeKind {\n        let kind: ColorThemeKind;\n        switch (type) {\n            case 'light':\n                kind = ColorThemeKind.Light;\n                break;\n            case 'dark':\n                kind = ColorThemeKind.Dark;\n                break;\n            case 'hc':\n                kind = ColorThemeKind.HighContrast;\n                break;\n            case 'hcLight':\n                kind = ColorThemeKind.HighContrastLight;\n                break;\n        }\n        return kind;\n    }\n\n    get onDidChangeActiveColorTheme(): Event<ColorTheme> {\n        return this._onDidChangeActiveColorTheme.event;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { Plugin, PLUGIN_RPC_CONTEXT, TimelineCommandArg, TimelineExt, TimelineMain } from '../common';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable, URI } from './types-impl';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CommandRegistryImpl } from './command-registry';\nimport type {\n    InternalTimelineOptions,\n    Timeline,\n    TimelineItem,\n    TimelineOptions,\n    TimelineProvider\n} from '@theia/timeline/lib/common/timeline-model';\nimport * as theia from '@theia/plugin';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { UriComponents } from '../common/uri-components';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/theia/blob/afacd2bdfe7060f09df9b9139521718915949757/src/vs/workbench/api/common/extHostTimeline.ts\n\nexport class TimelineExtImpl implements TimelineExt {\n    declare readonly _serviceBrand: undefined;\n\n    private readonly proxy: TimelineMain;\n    private providers = new Map<string, TimelineProvider>();\n\n    private itemsBySourceAndUriMap = new Map<string, Map<string | undefined, Map<string, theia.TimelineItem>>>();\n\n    constructor(readonly rpc: RPCProtocol, private readonly commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TIMELINE_MAIN);\n\n        commands.registerArgumentProcessor({\n            processArgument: arg => {\n                if (!TimelineCommandArg.is(arg)) {\n                    return arg;\n                } else {\n                    return this.itemsBySourceAndUriMap.get(arg.source)?.get(arg.uri?.toString())?.get(arg.timelineHandle);\n                }\n            }\n        });\n    }\n\n    async $getTimeline(id: string, uri: UriComponents, options: theia.TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined> {\n        const provider = this.providers.get(id);\n        return provider?.provideTimeline(URI.revive(uri), options, internalOptions);\n    }\n\n    registerTimelineProvider(plugin: Plugin, scheme: string | string[], provider: theia.TimelineProvider): Disposable {\n        const timelineDisposables = new DisposableCollection();\n\n        const convertTimelineItem = this.convertTimelineItem(provider.id, timelineDisposables).bind(this);\n\n        let disposable: Disposable | undefined;\n        if (provider.onDidChange) {\n            disposable = Disposable.from(provider.onDidChange(e => this.proxy.$fireTimelineChanged({ uri: undefined, reset: true, ...e, id: provider.id }), this));\n        }\n\n        const itemsBySourceAndUriMap = this.itemsBySourceAndUriMap;\n        return this.registerTimelineProviderCore({\n            ...provider,\n            scheme: scheme,\n            onDidChange: undefined,\n            async provideTimeline(uri: URI, options: TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined> {\n                if (internalOptions?.resetCache) {\n                    timelineDisposables.dispose();\n\n                    const items = itemsBySourceAndUriMap.get(provider.id);\n                    if (items) {\n                        items.clear();\n                    }\n                }\n\n                const result = await provider.provideTimeline(uri, options, CancellationToken.None);\n                if (!result) {\n                    return undefined;\n                }\n\n                const convertItem = convertTimelineItem(uri, internalOptions);\n                return {\n                    ...result,\n                    source: provider.id,\n                    items: result.items.map(convertItem)\n                };\n            },\n            dispose(): void {\n                for (const sourceMap of itemsBySourceAndUriMap.values()) {\n                    const source = sourceMap.get(provider.id);\n                    if (source) {\n                        source.clear();\n                    }\n                }\n\n                if (disposable) {\n                    disposable.dispose();\n                }\n                timelineDisposables.dispose();\n            }\n        });\n    }\n\n    private convertTimelineItem(source: string, disposables: DisposableCollection): (uri: URI, options?: InternalTimelineOptions) => (item: theia.TimelineItem) => TimelineItem {\n        return (uri: URI, options?: InternalTimelineOptions) => {\n            let items: Map<string, theia.TimelineItem> | undefined;\n            if (options?.cacheResults) {\n                let itemsByUri = this.itemsBySourceAndUriMap.get(source);\n                if (itemsByUri === undefined) {\n                    itemsByUri = new Map();\n                    this.itemsBySourceAndUriMap.set(source, itemsByUri);\n                }\n\n                const uriKey = getUriKey(uri);\n                items = itemsByUri.get(uriKey);\n                if (items === undefined) {\n                    items = new Map();\n                    itemsByUri.set(uriKey, items);\n                }\n            }\n\n            return (item: theia.TimelineItem): TimelineItem => {\n                const { iconPath, ...props } = item;\n\n                const handle = `${source}|${item.id ?? item.timestamp}`;\n                if (items) {\n                    items.set(handle, item);\n                }\n\n                return {\n                    ...props,\n                    uri: uri.toString(),\n                    id: props.id ?? undefined,\n                    handle: handle,\n                    source: source,\n                    command: item.command ? this.commands.converter.toSafeCommand(item.command, disposables) : undefined,\n                };\n            };\n        };\n    }\n\n    private registerTimelineProviderCore(provider: TimelineProvider): Disposable {\n        const existing = this.providers.get(provider.id);\n        if (existing) {\n            throw new Error(`Timeline Provider ${provider.id} already exists.`);\n        }\n\n        this.proxy.$registerTimelineProvider({\n            id: provider.id,\n            label: provider.label,\n            scheme: provider.scheme\n        });\n        this.providers.set(provider.id, provider);\n\n        return Disposable.create(() => {\n            for (const sourceMap of this.itemsBySourceAndUriMap.values()) {\n                const items = sourceMap.get(provider.id);\n                if (items) {\n                    items.clear();\n                }\n            }\n\n            this.providers.delete(provider.id);\n            this.proxy.$unregisterTimelineProvider(provider.id);\n            provider.dispose();\n        });\n    }\n}\n\nfunction getUriKey(uri: URI | undefined): string | undefined {\n    return uri?.toString();\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport {\n    TreeDataProvider, TreeView, TreeViewExpansionEvent, TreeItem, TreeItemLabel,\n    TreeViewSelectionChangeEvent, TreeViewVisibilityChangeEvent, CancellationToken, DataTransferFile, TreeViewOptions, ViewBadge, TreeCheckboxChangeEvent\n} from '@theia/plugin';\n// TODO: extract `@theia/util` for event, disposable, cancellation and common types\n// don't use @theia/core directly from plugin host\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { basename } from '@theia/core/lib/common/paths';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { DataTransfer, DataTransferItem, Disposable as PluginDisposable, ThemeIcon, TreeItemCheckboxState } from '../types-impl';\nimport { Plugin, PLUGIN_RPC_CONTEXT, TreeViewsExt, TreeViewsMain, TreeViewItem, TreeViewRevealOptions, DataTransferFileDTO } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { CommandRegistryImpl, CommandsConverter } from '../command-registry';\nimport { TreeViewItemReference } from '../../common';\nimport { PluginIconPath } from '../plugin-icon-path';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { UriComponents } from '@theia/core/lib/common/uri';\nimport { isObject } from '@theia/core';\n\nexport class TreeViewsExtImpl implements TreeViewsExt {\n    private proxy: TreeViewsMain;\n\n    private readonly treeViews = new Map<string, TreeViewExtImpl<any>>();\n\n    constructor(rpc: RPCProtocol, readonly commandRegistry: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TREE_VIEWS_MAIN);\n\n        commandRegistry.registerArgumentProcessor({\n            processArgument: arg => {\n                if (TreeViewItemReference.is(arg)) {\n                    return this.toTreeElement(arg);\n                } else if (Array.isArray(arg)) {\n                    return arg.map(param => TreeViewItemReference.is(param) ? this.toTreeElement(param) : param);\n                } else {\n                    return arg;\n                }\n            }\n        });\n    }\n    $checkStateChanged(treeViewId: string, itemIds: { id: string; checked: boolean; }[]): Promise<void> {\n        return this.getTreeView(treeViewId).checkStateChanged(itemIds);\n    }\n    $dragStarted(treeViewId: string, treeItemIds: string[], token: CancellationToken): Promise<UriComponents[] | undefined> {\n        return this.getTreeView(treeViewId).onDragStarted(treeItemIds, token);\n    }\n\n    $dragEnd(treeViewId: string): Promise<void> {\n        return this.getTreeView(treeViewId).dragEnd();\n    }\n\n    $drop(treeViewId: string, treeItemId: string | undefined, dataTransferItems: [string, string | DataTransferFileDTO][], token: CancellationToken): Promise<void> {\n        return this.getTreeView(treeViewId).handleDrop!(treeItemId, dataTransferItems, token);\n    }\n\n    protected toTreeElement(treeViewItemRef: TreeViewItemReference): any {\n        return this.treeViews.get(treeViewItemRef.viewId)?.getElement(treeViewItemRef.itemId);\n    }\n\n    registerTreeDataProvider<T>(plugin: Plugin, treeViewId: string, treeDataProvider: TreeDataProvider<T>): PluginDisposable {\n        const treeView = this.createTreeView(plugin, treeViewId, { treeDataProvider });\n\n        return PluginDisposable.create(() => {\n            this.treeViews.delete(treeViewId);\n            treeView.dispose();\n        });\n    }\n\n    createTreeView<T>(plugin: Plugin, treeViewId: string, options: TreeViewOptions<T>): TreeView<T> {\n        if (!options || !options.treeDataProvider) {\n            throw new Error('Options with treeDataProvider is mandatory');\n        }\n\n        const treeView = new TreeViewExtImpl<T>(plugin, treeViewId, options, this.proxy, this.commandRegistry.converter);\n        this.treeViews.set(treeViewId, treeView);\n\n        return {\n            // tslint:disable:typedef\n            get onDidExpandElement() {\n                return treeView.onDidExpandElement;\n            },\n            get onDidCollapseElement() {\n                return treeView.onDidCollapseElement;\n            },\n            get selection() {\n                return treeView.selectedElements;\n            },\n            get onDidChangeSelection() {\n                return treeView.onDidChangeSelection;\n            },\n            get visible() {\n                return treeView.visible;\n            },\n            get onDidChangeVisibility() {\n                return treeView.onDidChangeVisibility;\n            },\n            get onDidChangeCheckboxState() {\n                return treeView.onDidChangeCheckboxState;\n            },\n            get message(): string {\n                return treeView.message;\n            },\n            set message(message: string) {\n                treeView.message = message;\n            },\n            get title(): string {\n                return treeView.title;\n            },\n            set title(title: string) {\n                treeView.title = title;\n            },\n            get description(): string {\n                return treeView.description;\n            },\n            set description(description: string) {\n                treeView.description = description;\n            },\n            get badge(): ViewBadge | undefined {\n                return treeView.badge;\n            },\n            set badge(badge: ViewBadge | undefined) {\n                treeView.badge = badge;\n            },\n            reveal: (element: T, revealOptions?: Partial<TreeViewRevealOptions>): Thenable<void> =>\n                treeView.reveal(element, revealOptions),\n\n            dispose: () => {\n                this.treeViews.delete(treeViewId);\n                treeView.dispose();\n            }\n        };\n    }\n\n    async $getChildren(treeViewId: string, treeItemId: string): Promise<TreeViewItem[] | undefined> {\n        const treeView = this.getTreeView(treeViewId);\n\n        return treeView.getChildren(treeItemId);\n    }\n\n    async $resolveTreeItem(treeViewId: string, treeItemId: string, token: CancellationToken): Promise<TreeViewItem | undefined> {\n        return this.getTreeView(treeViewId).resolveTreeItem(treeItemId, token);\n    }\n\n    async $hasResolveTreeItem(treeViewId: string): Promise<boolean> {\n        return this.getTreeView(treeViewId).hasResolveTreeItem();\n    }\n\n    async $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any> {\n        const treeView = this.getTreeView(treeViewId);\n\n        if (expanded) {\n            return treeView.onExpanded(treeItemId);\n        } else {\n            return treeView.onCollapsed(treeItemId);\n        }\n    }\n\n    async $setSelection(treeViewId: string, treeItemIds: string[]): Promise<void> {\n        this.getTreeView(treeViewId).setSelection(treeItemIds);\n    }\n\n    async $setVisible(treeViewId: string, isVisible: boolean): Promise<void> {\n        this.getTreeView(treeViewId).setVisible(isVisible);\n    }\n\n    protected getTreeView(treeViewId: string): TreeViewExtImpl<any> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error(`No tree view with id '${treeViewId}' registered.`);\n        }\n        return treeView;\n    }\n\n}\n\ninterface TreeExtNode<T> extends Disposable {\n    id: string\n    /** Collection of disposables. Must be disposed by an instance's `dispose` implementation. */\n    disposables: DisposableCollection;\n    /** The original `TreeItem` provided by the plugin's tree data provider. */\n    pluginTreeItem?: TreeItem;\n    /** The `TreeViewItem` used on the main side to render the tree node. */\n    treeViewItem?: TreeViewItem;\n    value?: T\n    children?: TreeExtNode<T>[]\n}\n\nclass TreeViewExtImpl<T> implements Disposable {\n    private static readonly ID_COMPUTED = 'c';\n    private static readonly ID_ITEM = 'i';\n\n    private readonly onDidExpandElementEmitter = new Emitter<TreeViewExpansionEvent<T>>();\n    readonly onDidExpandElement = this.onDidExpandElementEmitter.event;\n\n    private readonly onDidCollapseElementEmitter = new Emitter<TreeViewExpansionEvent<T>>();\n    readonly onDidCollapseElement = this.onDidCollapseElementEmitter.event;\n\n    private readonly onDidChangeSelectionEmitter = new Emitter<TreeViewSelectionChangeEvent<T>>();\n    readonly onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n\n    private readonly onDidChangeVisibilityEmitter = new Emitter<TreeViewVisibilityChangeEvent>();\n    readonly onDidChangeVisibility = this.onDidChangeVisibilityEmitter.event;\n\n    private readonly onDidChangeCheckboxStateEmitter = new Emitter<TreeCheckboxChangeEvent<T>>();\n    readonly onDidChangeCheckboxState = this.onDidChangeCheckboxStateEmitter.event;\n\n    private readonly nodes = new Map<string, TreeExtNode<T>>();\n    private pendingRefresh = Promise.resolve();\n\n    private localDataTransfer = new DataTransfer();\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => this.clearAll()),\n        this.onDidExpandElementEmitter,\n        this.onDidCollapseElementEmitter,\n        this.onDidChangeSelectionEmitter,\n        this.onDidChangeVisibilityEmitter\n    );\n\n    constructor(\n        private plugin: Plugin,\n        private treeViewId: string,\n        private options: TreeViewOptions<T>,\n        private proxy: TreeViewsMain,\n        readonly commandsConverter: CommandsConverter\n    ) {\n        // make copies of optionally provided MIME types:\n        const dragMimeTypes = options.dragAndDropController?.dragMimeTypes?.slice();\n        const dropMimeTypes = options.dragAndDropController?.dropMimeTypes?.slice();\n        proxy.$registerTreeDataProvider(treeViewId, {\n            manageCheckboxStateManually: options.manageCheckboxStateManually,\n            showCollapseAll: options.showCollapseAll,\n            canSelectMany: options.canSelectMany,\n            dragMimeTypes, dropMimeTypes\n        });\n        this.toDispose.push(Disposable.create(() => this.proxy.$unregisterTreeDataProvider(treeViewId)));\n        options.treeDataProvider.onDidChangeTreeData?.(() => {\n            this.pendingRefresh = proxy.$refresh(treeViewId);\n        });\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async reveal(element: T, options?: Partial<TreeViewRevealOptions>): Promise<void> {\n        await this.pendingRefresh;\n        const select = options?.select !== false; // default to true\n        const focus = !!options?.focus;\n        const expand = typeof options?.expand === 'undefined' ? false : options!.expand;\n\n        const elementParentChain = await this.calculateRevealParentChain(element);\n        if (elementParentChain) {\n            return this.proxy.$reveal(this.treeViewId, elementParentChain, {\n                select, focus, expand, ...options\n            });\n        }\n    }\n\n    private _message: string = '';\n    get message(): string {\n        return this._message;\n    }\n\n    set message(message: string) {\n        this._message = message;\n        this.proxy.$setMessage(this.treeViewId, this._message);\n    }\n\n    private _title: string = '';\n    get title(): string {\n        return this._title;\n    }\n\n    set title(title: string) {\n        this._title = title;\n        this.proxy.$setTitle(this.treeViewId, title);\n    }\n\n    private _description: string = '';\n    get description(): string {\n        return this._description;\n    }\n\n    set description(description: string) {\n        this._description = description;\n        this.proxy.$setDescription(this.treeViewId, this._description);\n    }\n\n    private _badge?: ViewBadge = undefined;\n    get badge(): ViewBadge | undefined {\n        return this._badge;\n    }\n    set badge(badge: ViewBadge | undefined) {\n        this._badge = badge;\n        this.proxy.$setBadge(this.treeViewId, badge ? { value: badge.value, tooltip: badge.tooltip } : undefined);\n    }\n\n    getElement(treeItemId: string): T | undefined {\n        return this.nodes.get(treeItemId)?.value;\n    }\n\n    /**\n     * calculate the chain of node ids from root to element so that the frontend can expand all of them and reveal element.\n     * this is needed as the frontend may not have the full tree nodes.\n     * throughout the parent chain this.getChildren is called in order to fill this.nodes cache.\n     *\n     * returns undefined if wasn't able to calculate the path due to inconsistencies.\n     *\n     * @param element element to reveal\n     */\n    private async calculateRevealParentChain(element: T | undefined): Promise<string[]> {\n        if (!element) {\n            // root\n            return [];\n        }\n        const parent = await this.options.treeDataProvider.getParent?.(element) ?? undefined;\n        const chain = await this.calculateRevealParentChain(parent);\n        const parentId = chain.length ? chain[chain.length - 1] : '';\n        const treeItem = await this.options.treeDataProvider.getTreeItem(element);\n        return chain.concat(this.buildTreeItemId(parentId, treeItem, false));\n    }\n\n    private getTreeItemLabel(treeItem: TreeItem): string | undefined {\n        const treeItemLabel: string | TreeItemLabel | undefined = treeItem.label;\n        return typeof treeItemLabel === 'object' ? treeItemLabel.label : treeItemLabel;\n    }\n\n    private getTreeItemLabelHighlights(treeItem: TreeItem): [number, number][] | undefined {\n        const treeItemLabel: string | TreeItemLabel | undefined = treeItem.label;\n        return typeof treeItemLabel === 'object' ? treeItemLabel.highlights : undefined;\n    }\n\n    private getItemLabel(treeItem: TreeItem): string | undefined {\n        let idLabel = this.getTreeItemLabel(treeItem);\n        // Use resource URI if label is not set\n        if (idLabel === undefined && treeItem.resourceUri) {\n            idLabel = treeItem.resourceUri.path.toString();\n            idLabel = decodeURIComponent(idLabel);\n            if (idLabel.indexOf('/') >= 0) {\n                idLabel = idLabel.substring(idLabel.lastIndexOf('/') + 1);\n            }\n        }\n        return idLabel;\n    }\n\n    // Modeled on https://github.com/microsoft/vscode/blob/main/src/vs/workbench/api/common/extHostTreeViews.ts#L822\n    private buildTreeItemId(parentId: string, item: TreeItem, mustReturnNew: boolean): string {\n        if (item.id) {\n            return `${TreeViewExtImpl.ID_ITEM}-@-${parentId}-@-${item.id}`;\n        }\n\n        const treeItemLabel = this.getItemLabel(item);\n        const prefix: string = `${TreeViewExtImpl.ID_COMPUTED}-@-${parentId || ''}-@-`;\n        let elementId = treeItemLabel ? treeItemLabel : item.resourceUri ? basename(item.resourceUri.fsPath) : '';\n        elementId = elementId.indexOf('/') !== -1 ? elementId.replace('/', '//') : elementId;\n        const childrenNodes = (this.nodes.get(parentId)?.children || []);\n\n        let id: string;\n        let counter = 0;\n        do {\n            id = `${prefix}/${counter}:${elementId}`;\n            if (!mustReturnNew || !this.nodes.has(id) || this.nodes.get(id) === item) {\n                // Return first if asked for or\n                // Return if handle does not exist or\n                // Return if handle is being reused\n                break;\n            }\n            counter++;\n        } while (counter <= childrenNodes.length);\n\n        return id;\n    }\n\n    async getChildren(parentId: string): Promise<TreeViewItem[] | undefined> {\n        let parentNode = this.nodes.get(parentId);\n        const parent = parentNode?.value;\n        if (parentId && !parent) {\n            console.error(`No tree item with id '${parentId}' found.`);\n            return [];\n        }\n        this.clearChildren(parentNode);\n\n        // place root in the cache\n        if (parentId === '' && !parentNode) {\n            const rootNodeDisposables = new DisposableCollection();\n            parentNode = { id: '', disposables: rootNodeDisposables, dispose: () => { rootNodeDisposables.dispose(); } };\n            this.nodes.set(parentId, parentNode);\n        }\n        // ask data provider for children for cached element\n        const result = await this.options.treeDataProvider.getChildren(parent);\n        if (result) {\n            const treeItemPromises = result.map(async value => {\n\n                // Ask data provider for a tree item for the value\n                // Data provider must return theia.TreeItem\n                const treeItem = await this.options.treeDataProvider.getTreeItem(value);\n                // Convert theia.TreeItem to the TreeViewItem\n\n                const label = this.getItemLabel(treeItem) || '';\n                const highlights = this.getTreeItemLabelHighlights(treeItem);\n\n                // Generate the ID\n                // ID is used for caching the element\n                const id = this.buildTreeItemId(parentId, treeItem, true);\n\n                const toDisposeElement = new DisposableCollection();\n                const node: TreeExtNode<T> = {\n                    id,\n                    pluginTreeItem: treeItem,\n                    value,\n                    disposables: toDisposeElement,\n                    dispose: () => toDisposeElement.dispose()\n                };\n                if (parentNode) {\n                    const children = parentNode.children || [];\n                    children.push(node);\n                    parentNode.children = children;\n                }\n                this.nodes.set(id, node);\n\n                let icon;\n                let iconUrl;\n                let themeIcon;\n                const { iconPath } = treeItem;\n                if (typeof iconPath === 'string' && iconPath.indexOf('fa-') !== -1) {\n                    icon = iconPath;\n                } else if (ThemeIcon.is(iconPath)) {\n                    themeIcon = iconPath;\n                } else {\n                    iconUrl = PluginIconPath.toUrl(<PluginIconPath | undefined>iconPath, this.plugin);\n                }\n\n                let checkboxInfo;\n                if (treeItem.checkboxState === undefined) {\n                    checkboxInfo = undefined;\n                } else if (isObject(treeItem.checkboxState)) {\n                    checkboxInfo = {\n                        checked: treeItem.checkboxState.state === TreeItemCheckboxState.Checked,\n                        tooltip: treeItem.checkboxState.tooltip,\n                        accessibilityInformation: treeItem.accessibilityInformation\n                    };\n                } else {\n                    checkboxInfo = {\n                        checked: treeItem.checkboxState === TreeItemCheckboxState.Checked\n                    };\n                }\n\n                const treeViewItem: TreeViewItem = {\n                    id,\n                    label,\n                    highlights,\n                    icon,\n                    iconUrl,\n                    themeIcon,\n                    description: treeItem.description,\n                    resourceUri: treeItem.resourceUri,\n                    tooltip: treeItem.tooltip,\n                    collapsibleState: treeItem.collapsibleState?.valueOf(),\n                    checkboxInfo: checkboxInfo,\n                    contextValue: treeItem.contextValue,\n                    command: this.commandsConverter.toSafeCommand(treeItem.command, toDisposeElement),\n                    accessibilityInformation: treeItem.accessibilityInformation\n                };\n                node.treeViewItem = treeViewItem;\n\n                return treeViewItem;\n            });\n\n            return Promise.all(treeItemPromises);\n        } else {\n            return undefined;\n        }\n    }\n\n    private clearChildren(parentNode?: TreeExtNode<T>): void {\n        if (parentNode) {\n            if (parentNode.children) {\n                for (const child of parentNode.children) {\n                    this.clear(child);\n                }\n            }\n            delete parentNode['children'];\n        } else {\n            this.clearAll();\n        }\n    }\n\n    private clear(node: TreeExtNode<T>): void {\n        if (node.children) {\n            for (const child of node.children) {\n                this.clear(child);\n            }\n        }\n        this.nodes.delete(node.id);\n        node.dispose();\n    }\n\n    private clearAll(): void {\n        this.nodes.forEach(node => node.dispose());\n        this.nodes.clear();\n    }\n\n    async onExpanded(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement = this.getElement(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidExpandElementEmitter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    async onCollapsed(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement = this.getElement(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidCollapseElementEmitter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    async checkStateChanged(items: readonly { id: string; checked: boolean; }[]): Promise<void> {\n        const transformed: [T, TreeItemCheckboxState][] = [];\n        items.forEach(item => {\n            const node = this.nodes.get(item.id);\n            if (node) {\n                if (node.value) {\n                    transformed.push([node.value, item.checked ? TreeItemCheckboxState.Checked : TreeItemCheckboxState.Unchecked]);\n                }\n                if (node.treeViewItem) {\n                    node.treeViewItem.checkboxInfo!.checked = item.checked;\n                }\n            }\n        });\n\n        this.onDidChangeCheckboxStateEmitter.fire({\n            items: transformed\n        });\n    }\n\n    async resolveTreeItem(treeItemId: string, token: CancellationToken): Promise<TreeViewItem | undefined> {\n        if (!this.options.treeDataProvider.resolveTreeItem) {\n            return undefined;\n        }\n\n        const node = this.nodes.get(treeItemId);\n        if (node && node.treeViewItem && node.pluginTreeItem && node.value) {\n            const resolved = await this.options.treeDataProvider.resolveTreeItem(node.pluginTreeItem, node.value, token) ?? node.pluginTreeItem;\n            node.treeViewItem.command = this.commandsConverter.toSafeCommand(resolved.command, node.disposables);\n            node.treeViewItem.tooltip = resolved.tooltip;\n            return node.treeViewItem;\n        }\n\n        return undefined;\n    }\n\n    hasResolveTreeItem(): boolean {\n        return !!this.options.treeDataProvider.resolveTreeItem;\n    }\n\n    private selectedItemIds = new Set<string>();\n    get selectedElements(): T[] {\n        const items: T[] = [];\n        for (const id of this.selectedItemIds) {\n            const item = this.getElement(id);\n            if (item) {\n                items.push(item);\n            }\n        }\n        return items;\n    }\n\n    setSelection(selectedItemIds: string[]): void {\n        const toDelete = new Set<string>(this.selectedItemIds);\n        for (const id of selectedItemIds) {\n            toDelete.delete(id);\n            if (!this.selectedItemIds.has(id)) {\n                this.doSetSelection(selectedItemIds);\n                return;\n            }\n        }\n        if (toDelete.size) {\n            this.doSetSelection(selectedItemIds);\n        }\n    }\n    protected doSetSelection(selectedItemIts: string[]): void {\n        this.selectedItemIds = new Set(selectedItemIts);\n        this.onDidChangeSelectionEmitter.fire(Object.freeze({ selection: this.selectedElements }));\n    }\n\n    private _visible = false;\n    get visible(): boolean {\n        return this._visible;\n    }\n\n    setVisible(visible: boolean): void {\n        if (visible !== this._visible) {\n            this._visible = visible;\n            this.onDidChangeVisibilityEmitter.fire(Object.freeze({ visible: this._visible }));\n        }\n    }\n\n    async onDragStarted(treeItemIds: string[], token: CancellationToken): Promise<UriComponents[] | undefined> {\n        const treeItems: T[] = [];\n        for (const id of treeItemIds) {\n            const item = this.getElement(id);\n            if (item) {\n                treeItems.push(item);\n            }\n        }\n        if (this.options.dragAndDropController?.handleDrag) {\n            this.localDataTransfer.clear();\n            await this.options.dragAndDropController.handleDrag(treeItems, this.localDataTransfer, token);\n            const uriList = await this.localDataTransfer.get('text/uri-list')?.asString();\n            if (uriList) {\n                return uriList.split('\\n').map(str => URI.parse(str));\n            }\n        }\n        return undefined;\n    }\n\n    async dragEnd(): Promise<void> {\n        this.localDataTransfer.clear();\n    }\n\n    async handleDrop(treeItemId: string | undefined, dataTransferItems: [string, string | DataTransferFileDTO][], token: CancellationToken): Promise<void> {\n        const treeItem = treeItemId ? this.getElement(treeItemId) : undefined;\n        const dropTransfer = new DataTransfer();\n        if (this.options.dragAndDropController?.handleDrop) {\n            this.localDataTransfer.forEach((item, type) => {\n                dropTransfer.set(type, item);\n            });\n            for (const [type, item] of dataTransferItems) {\n                // prefer the item the plugin has set in `onDragStarted`;\n                if (!dropTransfer.has(type)) {\n                    if (typeof item === 'string') {\n                        dropTransfer.set(type, new DataTransferItem(item));\n                    } else {\n                        const file: DataTransferFile = {\n                            name: item.name,\n                            data: () => this.proxy.$readDroppedFile(item.contentId).then(buffer => buffer.buffer),\n                            uri: item.uri ? URI.revive(item.uri) : undefined\n                        };\n\n                        const fileItem = new class extends DataTransferItem {\n                            override asFile(): DataTransferFile | undefined {\n                                return file;\n                            }\n                        }(file);\n\n                        dropTransfer.set(type, fileItem);\n                    }\n                }\n            }\n            return this.options.dragAndDropController.handleDrop(treeItem, dropTransfer, token);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 SAP SE or an SAP affiliate company and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n// some of the code is copied and modified from https://github.com/microsoft/vscode/blob/e1f0f8f51390dea5df9096718fb6b647ed5a9534/src/vs/workbench/api/common/extHostWebviewView.ts\n\nimport { Disposable } from './types-impl';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, WebviewViewsMain, WebviewViewsExt, Plugin } from '../common/plugin-api-rpc';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { WebviewImpl, WebviewsExtImpl } from './webviews';\nimport { WebviewViewProvider } from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\n\nexport class WebviewViewsExtImpl implements WebviewViewsExt {\n\n    private readonly proxy: WebviewViewsMain;\n\n    protected readonly viewProviders = new Map<string, {\n        readonly provider: WebviewViewProvider;\n        readonly plugin: Plugin;\n    }>();\n    protected readonly webviewViews = new Map<string, WebviewViewExtImpl>();\n\n    constructor(rpc: RPCProtocol,\n        private readonly webviewsExt: WebviewsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WEBVIEW_VIEWS_MAIN);\n    }\n\n    registerWebviewViewProvider(\n        viewType: string,\n        provider: WebviewViewProvider,\n        plugin: Plugin,\n        webviewOptions?: {\n            retainContextWhenHidden?: boolean\n        }\n    ): Disposable {\n        if (this.viewProviders.has(viewType)) {\n            throw new Error(`View provider for '${viewType}' already registered`);\n        }\n\n        this.viewProviders.set(viewType, { provider: provider, plugin: plugin });\n\n        this.proxy.$registerWebviewViewProvider(viewType, {\n            retainContextWhenHidden: webviewOptions?.retainContextWhenHidden,\n            serializeBuffersForPostMessage: false,\n        });\n\n        return new Disposable(() => {\n            this.viewProviders.delete(viewType);\n            this.proxy.$unregisterWebviewViewProvider(viewType);\n        });\n    }\n\n    async $resolveWebviewView(handle: string,\n        viewType: string,\n        title: string | undefined,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        state: any,\n        cancellation: CancellationToken\n    ): Promise<void> {\n        const entry = this.viewProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No view provider found for '${viewType}'`);\n        }\n\n        const { provider, plugin } = entry;\n\n        const webviewNoPanel = this.webviewsExt.createNewWebview({}, plugin, handle);\n        const revivedView = new WebviewViewExtImpl(handle, this.proxy, viewType, title, webviewNoPanel, true);\n        this.webviewViews.set(handle, revivedView);\n        await provider.resolveWebviewView(revivedView, { state }, cancellation);\n    }\n\n    async $onDidChangeWebviewViewVisibility(\n        handle: string,\n        visible: boolean\n    ): Promise<void> {\n        const webviewView = this.getWebviewView(handle);\n        webviewView.setVisible(visible);\n        webviewView.onDidChangeVisibilityEmitter.fire();\n    }\n\n    async $disposeWebviewView(handle: string): Promise<void> {\n        const webviewView = this.getWebviewView(handle);\n        this.webviewViews.delete(handle);\n        webviewView.dispose();\n\n        this.webviewsExt.deleteWebview(handle);\n    }\n\n    protected getWebviewView(handle: string): WebviewViewExtImpl {\n        const entry = this.webviewViews.get(handle);\n        if (!entry) {\n            throw new Error('No webview found');\n        }\n\n        return entry;\n    }\n}\n\nexport class WebviewViewExtImpl implements theia.WebviewView {\n\n    readonly onDidChangeVisibilityEmitter = new Emitter<void>();\n    readonly onDidChangeVisibility = this.onDidChangeVisibilityEmitter.event;\n\n    readonly onDidDisposeEmitter = new Emitter<void>();\n    readonly onDidDispose = this.onDidDisposeEmitter.event;\n\n    readonly handle: string;\n    readonly proxy: WebviewViewsMain;\n\n    readonly _viewType: string;\n    readonly _webview: WebviewImpl;\n\n    _isDisposed = false;\n    _isVisible: boolean;\n    _title: string | undefined;\n    _description: string | undefined;\n    _badge: theia.ViewBadge | undefined;\n\n    constructor(\n        handle: string,\n        proxy: WebviewViewsMain,\n        viewType: string,\n        title: string | undefined,\n        webview: WebviewImpl,\n        isVisible: boolean\n    ) {\n        this._viewType = viewType;\n        this._title = title;\n        this.handle = handle;\n        this.proxy = proxy;\n        this._webview = webview;\n        this._isVisible = isVisible;\n    }\n    onDispose: Event<void>;\n\n    dispose(): void {\n        if (this._isDisposed) {\n            return;\n        }\n\n        this._isDisposed = true;\n        this.onDidDisposeEmitter.fire();\n    }\n\n    get title(): string | undefined {\n        this.assertNotDisposed();\n        return this._title;\n    }\n\n    set title(value: string | undefined) {\n        this.assertNotDisposed();\n        if (this._title !== value) {\n            this._title = value;\n            this.proxy.$setWebviewViewTitle(this.handle, value);\n        }\n    }\n\n    get description(): string | undefined {\n        this.assertNotDisposed();\n        return this._description;\n    }\n\n    set description(value: string | undefined) {\n        this.assertNotDisposed();\n        if (this._description !== value) {\n            this._description = value;\n            this.proxy.$setWebviewViewDescription(this.handle, value);\n        }\n    }\n\n    get badge(): theia.ViewBadge | undefined {\n        this.assertNotDisposed();\n        return this._badge;\n    }\n\n    set badge(badge: theia.ViewBadge | undefined) {\n        this.assertNotDisposed();\n        if (this._badge !== badge) {\n            this._badge = badge;\n            this.proxy.$setBadge(this.handle, badge ? { value: badge.value, tooltip: badge.tooltip } : undefined);\n        }\n    }\n\n    get visible(): boolean { return this._isVisible; }\n    get webview(): WebviewImpl { return this._webview; }\n    get viewType(): string { return this._viewType; }\n\n    setVisible(visible: boolean): void {\n        if (visible === this._isVisible || this._isDisposed) {\n            return;\n        }\n\n        this._isVisible = visible;\n        this.onDidChangeVisibilityEmitter.fire();\n    }\n\n    show(preserveFocus?: boolean): void {\n        this.assertNotDisposed();\n        this.proxy.$show(this.handle, !!preserveFocus);\n    }\n\n    protected assertNotDisposed(): void {\n        if (this._isDisposed) {\n            throw new Error('Webview is disposed');\n        }\n    }\n}\n\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { v4 } from 'uuid';\nimport { Plugin, WebviewsExt, WebviewPanelViewState, WebviewsMain, PLUGIN_RPC_CONTEXT, WebviewInitData, /* WebviewsMain, PLUGIN_RPC_CONTEXT  */ } from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { fromViewColumn, toViewColumn, toWebviewPanelShowOptions } from './type-converters';\nimport { Disposable, WebviewPanelTargetArea, URI } from './types-impl';\nimport { WorkspaceExtImpl } from './workspace';\nimport { PluginIconPath } from './plugin-icon-path';\n\nexport class WebviewsExtImpl implements WebviewsExt {\n    private readonly proxy: WebviewsMain;\n    private readonly webviewPanels = new Map<string, WebviewPanelImpl>();\n    private readonly webviews = new Map<string, WebviewImpl>();\n    private readonly serializers = new Map<string, {\n        serializer: theia.WebviewPanelSerializer,\n        plugin: Plugin\n    }>();\n    private initData: WebviewInitData | undefined;\n\n    readonly onDidDisposeEmitter = new Emitter<void>();\n    readonly onDidDispose: Event<void> = this.onDidDisposeEmitter.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly workspace: WorkspaceExtImpl,\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WEBVIEWS_MAIN);\n    }\n\n    init(initData: WebviewInitData): void {\n        this.initData = initData;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $onMessage(handle: string, message: any): void {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            panel.webview.onMessageEmitter.fire(message);\n        } else {\n            const webview = this.getWebview(handle);\n            if (webview) {\n                webview.onMessageEmitter.fire(message);\n            }\n        }\n    }\n    $onDidChangeWebviewPanelViewState(handle: string, newState: WebviewPanelViewState): void {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            const viewColumn = toViewColumn(newState.position);\n            if (panel.active !== newState.active || panel.visible !== newState.visible || panel.viewColumn !== viewColumn) {\n                panel.setActive(newState.active);\n                panel.setVisible(newState.visible);\n                panel.setViewColumn(viewColumn!);\n                panel.onDidChangeViewStateEmitter.fire({ webviewPanel: panel });\n            }\n        }\n    }\n    $onDidDisposeWebviewPanel(handle: string): PromiseLike<void> {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            panel.dispose();\n            this.webviewPanels.delete(handle);\n        }\n        return Promise.resolve();\n    }\n    $deserializeWebviewPanel(viewId: string,\n        viewType: string,\n        title: string,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        state: any,\n        viewState: WebviewPanelViewState,\n        options: theia.WebviewOptions & theia.WebviewPanelOptions): PromiseLike<void> {\n        if (!this.initData) {\n            return Promise.reject(new Error('Webviews are not initialized'));\n        }\n        const entry = this.serializers.get(viewType);\n        if (!entry) {\n            return Promise.reject(new Error(`No serializer found for '${viewType}'`));\n        }\n        const { serializer, plugin } = entry;\n\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        const revivedPanel = new WebviewPanelImpl(viewId, this.proxy, viewType, title, toViewColumn(viewState.position)!, options, webview);\n        revivedPanel.setActive(viewState.active);\n        revivedPanel.setVisible(viewState.visible);\n        this.webviewPanels.set(viewId, revivedPanel);\n        return serializer.deserializeWebviewPanel(revivedPanel, state);\n    }\n\n    createWebview(\n        viewType: string,\n        title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin\n    ): theia.WebviewPanel {\n        const viewId = v4();\n        const webviewShowOptions = toWebviewPanelShowOptions(showOptions);\n        const webviewOptions = WebviewImpl.toWebviewOptions(options, this.workspace, plugin);\n        this.proxy.$createWebviewPanel(viewId, viewType, title, webviewShowOptions, webviewOptions);\n        const panel = this.createWebviewPanel(viewType, title, showOptions, options, plugin, viewId);\n        return panel;\n    }\n\n    createWebviewPanel(\n        viewType: string,\n        title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin,\n        viewId: string\n    ): WebviewPanelImpl {\n        if (!this.initData) {\n            throw new Error('Webviews are not initialized');\n        }\n        const webviewShowOptions = toWebviewPanelShowOptions(showOptions);\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        const panel = new WebviewPanelImpl(viewId, this.proxy, viewType, title, webviewShowOptions, options, webview);\n        this.webviewPanels.set(viewId, panel);\n        return panel;\n    }\n\n    createNewWebview(\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin,\n        viewId: string\n    ): WebviewImpl {\n        if (!this.initData) {\n            throw new Error('Webviews are not initialized');\n        }\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        this.webviews.set(viewId, webview);\n        return webview;\n    }\n\n    registerWebviewPanelSerializer(\n        viewType: string,\n        serializer: theia.WebviewPanelSerializer,\n        plugin: Plugin\n    ): theia.Disposable {\n        if (this.serializers.has(viewType)) {\n            throw new Error(`Serializer for '${viewType}' already registered`);\n        }\n\n        this.serializers.set(viewType, { serializer, plugin });\n        this.proxy.$registerSerializer(viewType);\n\n        return new Disposable(() => {\n            this.serializers.delete(viewType);\n            this.proxy.$unregisterSerializer(viewType);\n        });\n    }\n\n    getWebviewPanel(viewId: string): WebviewPanelImpl | undefined {\n        if (this.webviewPanels.has(viewId)) {\n            return this.webviewPanels.get(viewId);\n        }\n        return undefined;\n    }\n\n    public deleteWebview(handle: string): void {\n        this.webviews.delete(handle);\n    }\n\n    public getWebview(handle: string): WebviewImpl | undefined {\n        return this.webviews.get(handle);\n    }\n}\n\nexport class WebviewImpl implements theia.Webview {\n    private isDisposed = false;\n    private _html: string;\n    private _options: theia.WebviewOptions;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public readonly onMessageEmitter = new Emitter<any>();\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public readonly onDidReceiveMessage: Event<any> = this.onMessageEmitter.event;\n\n    constructor(\n        private readonly viewId: string,\n        private readonly proxy: WebviewsMain,\n        options: theia.WebviewOptions,\n        private readonly initData: WebviewInitData,\n        private readonly workspace: WorkspaceExtImpl,\n        readonly plugin: Plugin\n    ) {\n        this._options = options;\n    }\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this.onMessageEmitter.dispose();\n    }\n\n    asWebviewUri(resource: theia.Uri): theia.Uri {\n        const uri = this.initData.webviewResourceRoot\n            .replace('{{scheme}}', resource.scheme)\n            .replace('{{authority}}', resource.authority)\n            .replace('{{path}}', resource.path.replace(/^\\//, ''))\n            .replace('{{uuid}}', this.viewId);\n        return URI.parse(uri);\n    }\n\n    get cspSource(): string {\n        return this.initData.webviewCspSource.replace('{{uuid}}', this.viewId);\n    }\n\n    get html(): string {\n        this.checkIsDisposed();\n        return this._html;\n    }\n\n    set html(value: string) {\n        this.checkIsDisposed();\n        if (this._html !== value) {\n            this._html = value;\n            this.proxy.$setHtml(this.viewId, this._html);\n        }\n    }\n\n    get options(): theia.WebviewOptions {\n        this.checkIsDisposed();\n        return this._options;\n    }\n\n    set options(newOptions: theia.WebviewOptions) {\n        this.checkIsDisposed();\n        this.proxy.$setOptions(this.viewId, WebviewImpl.toWebviewOptions(newOptions, this.workspace, this.plugin));\n        this._options = newOptions;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    postMessage(message: any): PromiseLike<boolean> {\n        this.checkIsDisposed();\n        return this.proxy.$postMessage(this.viewId, message);\n    }\n\n    private checkIsDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('This Webview is disposed!');\n        }\n    }\n\n    static toWebviewOptions(options: theia.WebviewOptions, workspace: WorkspaceExtImpl, plugin: Plugin): theia.WebviewOptions {\n        return {\n            ...options,\n            localResourceRoots: options.localResourceRoots || [\n                ...(workspace.workspaceFolders || []).map(x => x.uri),\n                URI.file(plugin.pluginFolder)\n            ]\n        };\n    }\n}\n\nexport class WebviewPanelImpl implements theia.WebviewPanel {\n\n    private isDisposed = false;\n    private _active = true;\n    private _visible = true;\n    private _showOptions: theia.WebviewPanelShowOptions;\n    private _iconPath: theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined;\n\n    readonly onDisposeEmitter = new Emitter<void>();\n    public readonly onDidDispose: Event<void> = this.onDisposeEmitter.event;\n\n    readonly onDidChangeViewStateEmitter = new Emitter<theia.WebviewPanelOnDidChangeViewStateEvent>();\n    public readonly onDidChangeViewState: Event<theia.WebviewPanelOnDidChangeViewStateEvent> = this.onDidChangeViewStateEmitter.event;\n\n    constructor(private readonly viewId: string,\n        private readonly proxy: WebviewsMain,\n        private readonly _viewType: string,\n        private _title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        private readonly _options: theia.WebviewPanelOptions,\n        private readonly _webview: WebviewImpl\n    ) {\n        this._showOptions = typeof showOptions === 'object' ? showOptions : { viewColumn: showOptions as theia.ViewColumn };\n    }\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n\n        this.isDisposed = true;\n        this.onDisposeEmitter.fire(undefined);\n\n        this.proxy.$disposeWebview(this.viewId);\n        this._webview.dispose();\n\n        this.onDisposeEmitter.dispose();\n        this.onDidChangeViewStateEmitter.dispose();\n    }\n\n    get viewType(): string {\n        this.checkIsDisposed();\n        return this._viewType;\n    }\n\n    get title(): string {\n        this.checkIsDisposed();\n        return this._title;\n    }\n\n    set title(newTitle: string) {\n        this.checkIsDisposed();\n        if (this._title !== newTitle) {\n            this._title = newTitle;\n            this.proxy.$setTitle(this.viewId, newTitle);\n        }\n    }\n\n    get iconPath(): theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined {\n        return this._iconPath;\n    }\n\n    set iconPath(iconPath: theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined) {\n        this.checkIsDisposed();\n        if (this._iconPath !== iconPath) {\n            this._iconPath = iconPath;\n            this.proxy.$setIconPath(this.viewId, PluginIconPath.toUrl(iconPath, this._webview.plugin));\n        }\n    }\n\n    get webview(): WebviewImpl {\n        this.checkIsDisposed();\n        return this._webview;\n    }\n\n    get options(): theia.WebviewPanelOptions {\n        this.checkIsDisposed();\n        return this._options;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        this.checkIsDisposed();\n        return this._showOptions.viewColumn;\n    }\n\n    setViewColumn(value: theia.ViewColumn | undefined): void {\n        this.checkIsDisposed();\n        this._showOptions.viewColumn = value;\n    }\n\n    get showOptions(): theia.WebviewPanelShowOptions {\n        this.checkIsDisposed();\n        return this._showOptions;\n    }\n\n    setShowOptions(value: theia.WebviewPanelShowOptions): void {\n        this.checkIsDisposed();\n        this._showOptions = value;\n    }\n\n    get active(): boolean {\n        this.checkIsDisposed();\n        return this._active;\n    }\n\n    setActive(value: boolean): void {\n        this.checkIsDisposed();\n        this._active = value;\n    }\n\n    get visible(): boolean {\n        this.checkIsDisposed();\n        return this._visible;\n    }\n\n    setVisible(value: boolean): void {\n        this.checkIsDisposed();\n        this._visible = value;\n    }\n\n    reveal(arg0?: theia.ViewColumn | WebviewPanelTargetArea, arg1?: theia.ViewColumn | boolean, arg2?: boolean): void {\n        let area: WebviewPanelTargetArea | undefined = undefined;\n        let viewColumn: theia.ViewColumn | undefined = undefined;\n        let preserveFocus: boolean | undefined = undefined;\n        if (typeof arg0 === 'number') {\n            viewColumn = arg0;\n        } else {\n            area = arg0;\n        }\n        if (typeof arg1 === 'number') {\n            viewColumn = arg1;\n        } else {\n            preserveFocus = arg1;\n        }\n        if (typeof arg2 === 'boolean') {\n            preserveFocus = arg2;\n        }\n        this.checkIsDisposed();\n        this.proxy.$reveal(this.viewId, {\n            area,\n            viewColumn: viewColumn ? fromViewColumn(viewColumn) : undefined,\n            preserveFocus\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    postMessage(message: any): PromiseLike<boolean> {\n        this.checkIsDisposed();\n        return this.proxy.$postMessage(this.viewId, message);\n    }\n\n    private checkIsDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('This WebviewPanel is disposed!');\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from './types-impl';\nimport { WindowState } from '@theia/plugin';\nimport { WindowStateExt, WindowMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Schemes } from '../common/uri-components';\n\nexport class WindowStateExtImpl implements WindowStateExt {\n\n    private windowStateCached: WindowState;\n\n    private windowStateChangedEmitter = new Emitter<WindowState>();\n    public readonly onDidChangeWindowState: Event<WindowState> = this.windowStateChangedEmitter.event;\n\n    private readonly proxy: WindowMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WINDOW_MAIN);\n        this.windowStateCached = { focused: true }; // supposed tab is active on start\n    }\n\n    getWindowState(): WindowState {\n        return this.windowStateCached;\n    }\n\n    $onWindowStateChanged(focused: boolean): void {\n        const state = { focused: focused };\n        if (state === this.windowStateCached) {\n            return;\n        }\n\n        this.windowStateCached = state;\n        this.windowStateChangedEmitter.fire(state);\n    }\n\n    openUri(uri: URI): Promise<boolean> {\n        return this.proxy.$openUri(uri);\n    }\n\n    async asExternalUri(target: URI): Promise<URI> {\n        if (!target.scheme.trim().length) {\n            throw new Error('Invalid scheme - cannot be empty');\n        }\n        if (Schemes.http !== target.scheme && Schemes.https !== target.scheme) {\n            throw new Error(`Invalid scheme '${target.scheme}'`);\n        }\n\n        const uri = await this.proxy.$asExternalUri(target);\n        return URI.revive(uri);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Word inside a model.\n */\nexport interface WordAtPosition {\n    /**\n     * The word.\n     */\n    readonly word: string;\n    /**\n     * The column where the word starts.\n     */\n    readonly startColumn: number;\n    /**\n     * The column where the word ends.\n     */\n    readonly endColumn: number;\n}\n\nexport const USUAL_WORD_SEPARATORS = '`~!@#$%^&*()-=+[{]}\\\\|;:\\'\",.<>/?';\n\n/**\n * Create a word definition regular expression based on default word separators.\n * Optionally provide allowed separators that should be included in words.\n *\n * The default would look like this:\n * /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g\n */\nfunction createWordRegExp(allowInWords: string = ''): RegExp {\n    let source = '(-?\\\\d*\\\\.\\\\d\\\\w*)|([^';\n    for (let i = 0; i < USUAL_WORD_SEPARATORS.length; i++) {\n        if (allowInWords.indexOf(USUAL_WORD_SEPARATORS[i]) >= 0) {\n            continue;\n        }\n        source += '\\\\' + USUAL_WORD_SEPARATORS[i];\n    }\n    source += '\\\\s]+)';\n    return new RegExp(source, 'g');\n}\n\n// catches numbers (including floating numbers) in the first group, and alphanum in the second\nexport const DEFAULT_WORD_REGEXP = createWordRegExp();\n\nexport function ensureValidWordDefinition(wordDefinition?: RegExp): RegExp {\n    let result: RegExp = DEFAULT_WORD_REGEXP;\n\n    if (wordDefinition && (wordDefinition instanceof RegExp)) {\n        if (!wordDefinition.global) {\n            let flags = 'g';\n            if (wordDefinition.ignoreCase) {\n                flags += 'i';\n            }\n            if (wordDefinition.multiline) {\n                flags += 'm';\n            }\n            result = new RegExp(wordDefinition.source, flags);\n        } else {\n            result = wordDefinition;\n        }\n    }\n\n    result.lastIndex = 0;\n\n    return result;\n}\n\nfunction getWordAtPosFast(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // find whitespace enclosed text around column and match from there\n\n    const pos = column - 1 - textOffset;\n    const start = text.lastIndexOf(' ', pos - 1) + 1;\n    let end = text.indexOf(' ', pos);\n    if (end === -1) {\n        end = text.length;\n    }\n\n    wordDefinition.lastIndex = start;\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n        if (match.index! <= pos && wordDefinition.lastIndex >= pos) {\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nfunction getWordAtPosSlow(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // matches all words starting at the beginning\n    // of the input until it finds a match that encloses\n    // the desired column. slow but correct\n\n    const pos = column - 1 - textOffset;\n    wordDefinition.lastIndex = 0;\n\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n\n        if (match.index! > pos) {\n            // |nW -> matched only after the pos\n            return undefined;\n\n        } else if (wordDefinition.lastIndex >= pos) {\n            // W|W -> match encloses pos\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nexport function getWordAtText(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n\n    // if `words` can contain whitespace character we have to use the slow variant\n    // otherwise we use the fast variant of finding a word\n    wordDefinition.lastIndex = 0;\n    const match = wordDefinition.exec(text);\n    if (!match) {\n        return undefined;\n    }\n    // todo@joh the `match` could already be the (first) word\n    const ret = match[0].indexOf(' ') >= 0\n        // did match a word which contains a space character -> use slow word find\n        ? getWordAtPosSlow(column, wordDefinition, text, textOffset)\n        // sane word definition -> use fast word find\n        : getWordAtPosFast(column, wordDefinition, text, textOffset);\n\n    // both (getWordAtPosFast and getWordAtPosSlow) leave the wordDefinition-RegExp\n    // in an undefined state and to not confuse other users of the wordDefinition\n    // we reset the lastIndex\n    wordDefinition.lastIndex = 0;\n\n    return ret;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0-only WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/Microsoft/vscode/blob/master/src/vs/workbench/services/workspace/node/workspaceEditingService.ts\n\nimport * as paths from 'path';\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport {\n    WorkspaceExt,\n    WorkspaceFolderPickOptionsMain,\n    WorkspaceMain,\n    PLUGIN_RPC_CONTEXT as Ext,\n    MainMessageType,\n} from '../common/plugin-api-rpc';\nimport { Path } from '@theia/core/lib/common/path';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { WorkspaceRootsChangeEvent, SearchInWorkspaceResult, Range } from '../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { Disposable, URI } from './types-impl';\nimport { normalize } from '@theia/core/lib/common/paths';\nimport { relative } from '../common/paths-util';\nimport { Schemes } from '../common/uri-components';\nimport { toWorkspaceFolder } from './type-converters';\nimport { MessageRegistryExt } from './message-registry';\nimport * as Converter from './type-converters';\nimport { FileStat } from '@theia/filesystem/lib/common/files';\nimport { isUndefinedOrNull, isUndefined } from '../common/types';\n\nexport class WorkspaceExtImpl implements WorkspaceExt {\n\n    private proxy: WorkspaceMain;\n\n    private workspaceFoldersChangedEmitter = new Emitter<theia.WorkspaceFoldersChangeEvent>();\n    public readonly onDidChangeWorkspaceFolders: Event<theia.WorkspaceFoldersChangeEvent> = this.workspaceFoldersChangedEmitter.event;\n\n    private folders: theia.WorkspaceFolder[] | undefined;\n    private workspaceFileUri: theia.Uri | undefined;\n    private documentContentProviders = new Map<string, theia.TextDocumentContentProvider>();\n    private searchInWorkspaceEmitter: Emitter<{ result?: theia.TextSearchResult, searchId: number }> = new Emitter<{ result?: theia.TextSearchResult, searchId: number }>();\n    protected workspaceSearchSequence: number = 0;\n\n    private _trusted?: boolean = undefined;\n    private didGrantWorkspaceTrustEmitter = new Emitter<void>();\n    public readonly onDidGrantWorkspaceTrust: Event<void> = this.didGrantWorkspaceTrustEmitter.event;\n\n    private canonicalUriProviders = new Map<string, theia.CanonicalUriProvider>();\n\n    constructor(rpc: RPCProtocol,\n        private editorsAndDocuments: EditorsAndDocumentsExtImpl,\n        private messageService: MessageRegistryExt) {\n        this.proxy = rpc.getProxy(Ext.WORKSPACE_MAIN);\n    }\n\n    get rootPath(): string | undefined {\n        const folder = this.folders && this.folders[0];\n        return folder && folder.uri.fsPath;\n    }\n\n    get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n        if (this.folders && this.folders.length === 0) {\n            return undefined;\n        }\n        return this.folders;\n    }\n\n    get workspaceFile(): theia.Uri | undefined {\n        return this.workspaceFileUri;\n    }\n\n    get name(): string | undefined {\n        if (this.workspaceFolders && this.workspaceFolders.length > 0) {\n            return new Path(this.workspaceFolders[0].uri.path).base;\n        }\n\n        return undefined;\n    }\n\n    resolveProxy(url: string): Promise<string | undefined> {\n        return this.proxy.$resolveProxy(url);\n    }\n\n    $onWorkspaceFoldersChanged(event: WorkspaceRootsChangeEvent): void {\n        const newRoots = event.roots || [];\n        const newFolders = newRoots.map((root, index) => this.toWorkspaceFolder(root, index));\n        const delta = this.deltaFolders(this.folders, newFolders);\n\n        this.folders = newFolders;\n\n        this.refreshWorkspaceFile();\n\n        this.workspaceFoldersChangedEmitter.fire(delta);\n    }\n\n    $onWorkspaceLocationChanged(stat: FileStat | undefined): void {\n        this.updateWorkSpace(stat);\n    }\n\n    $onTextSearchResult(searchRequestId: number, done: boolean, result?: SearchInWorkspaceResult): void {\n        if (result) {\n            result.matches.map(next => {\n                const range: Range = {\n                    endColumn: next.character + next.length,\n                    endLineNumber: next.line + 1,\n                    startColumn: next.character,\n                    startLineNumber: next.line + 1\n                };\n                const tRange = <theia.Range>Converter.toRange(range);\n                const searchResult: theia.TextSearchMatch = {\n                    uri: URI.parse(result.fileUri),\n                    preview: {\n                        text: typeof next.lineText === 'string' ? next.lineText : next.lineText.text,\n                        matches: tRange\n                    },\n                    ranges: tRange\n                };\n                return searchResult;\n            }).forEach(next => this.searchInWorkspaceEmitter.fire({ result: next, searchId: searchRequestId }));\n        } else if (done) {\n            this.searchInWorkspaceEmitter.fire({ searchId: searchRequestId });\n        }\n    }\n\n    private deltaFolders(currentFolders: theia.WorkspaceFolder[] = [], newFolders: theia.WorkspaceFolder[] = []): {\n        added: theia.WorkspaceFolder[]\n        removed: theia.WorkspaceFolder[]\n    } {\n        const added = this.foldersDiff(newFolders, currentFolders);\n        const removed = this.foldersDiff(currentFolders, newFolders);\n        return { added, removed };\n    }\n\n    private foldersDiff(folder1: theia.WorkspaceFolder[] = [], folder2: theia.WorkspaceFolder[] = []): theia.WorkspaceFolder[] {\n        const map = new Map();\n        folder1.forEach(folder => map.set(folder.uri.toString(), folder));\n        folder2.forEach(folder => map.delete(folder.uri.toString()));\n\n        return folder1.filter(folder => map.has(folder.uri.toString()));\n    }\n\n    private toWorkspaceFolder(root: string, index: number): theia.WorkspaceFolder {\n        const uri = URI.parse(root);\n        const path = new Path(uri.path);\n        return {\n            uri: uri,\n            name: path.base,\n            index: index\n        };\n    }\n\n    pickWorkspaceFolder(options?: theia.WorkspaceFolderPickOptions): PromiseLike<theia.WorkspaceFolder | undefined> {\n        return new Promise((resolve, reject) => {\n            const optionsMain: WorkspaceFolderPickOptionsMain = {\n                placeHolder: options && options.placeHolder ? options.placeHolder : undefined,\n                ignoreFocusOut: options && options.ignoreFocusOut\n            };\n\n            this.proxy.$pickWorkspaceFolder(optionsMain).then(value => {\n                resolve(value);\n            });\n        });\n    }\n\n    findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | null, maxResults?: number,\n        token: CancellationToken = CancellationToken.None): PromiseLike<URI[]> {\n        let includePattern: string;\n        let includeFolderUri: string | undefined;\n        if (include) {\n            if (typeof include === 'string') {\n                includePattern = include;\n            } else {\n                includePattern = include.pattern;\n                includeFolderUri = include.baseUri.toString();\n            }\n        } else {\n            includePattern = '';\n        }\n\n        let excludePatternOrDisregardExcludes: string | false;\n        if (exclude === undefined) {\n            excludePatternOrDisregardExcludes = ''; // default excludes\n        } else if (exclude) {\n            if (typeof exclude === 'string') {\n                excludePatternOrDisregardExcludes = exclude;\n            } else {\n                excludePatternOrDisregardExcludes = exclude.pattern;\n            }\n        } else {\n            excludePatternOrDisregardExcludes = false; // no excludes\n        }\n\n        if (token && token.isCancellationRequested) {\n            return Promise.resolve([]);\n        }\n\n        return this.proxy.$startFileSearch(includePattern, includeFolderUri, excludePatternOrDisregardExcludes, maxResults, token)\n            .then(data => Array.isArray(data) ? data.map(uri => URI.revive(uri)) : []);\n    }\n\n    findTextInFiles(query: theia.TextSearchQuery, optionsOrCallback: theia.FindTextInFilesOptions | ((result: theia.TextSearchResult) => void),\n        callbackOrToken?: CancellationToken | ((result: theia.TextSearchResult) => void), token?: CancellationToken): Promise<theia.TextSearchComplete> {\n        let options: theia.FindTextInFilesOptions;\n        let callback: (result: theia.TextSearchResult) => void;\n\n        if (typeof optionsOrCallback === 'object') {\n            options = optionsOrCallback;\n            callback = callbackOrToken as (result: theia.TextSearchResult) => void;\n        } else {\n            options = {};\n            callback = optionsOrCallback;\n            token = callbackOrToken as CancellationToken;\n        }\n        const nextSearchID = this.workspaceSearchSequence + 1;\n        this.workspaceSearchSequence = nextSearchID;\n        const disposable = this.searchInWorkspaceEmitter.event(searchResult => {\n            if (searchResult.searchId === nextSearchID) {\n                if (searchResult.result) {\n                    callback(searchResult.result);\n                } else {\n                    disposable.dispose();\n                }\n            }\n        });\n        if (token) {\n            token.onCancellationRequested(() => {\n                disposable.dispose();\n            });\n        }\n        return this.proxy.$findTextInFiles(query, options || {}, nextSearchID, token);\n    }\n\n    registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n        // `file` and `untitled` schemas are reserved by `workspace.openTextDocument` API:\n        // `file`-scheme for opening a file\n        // `untitled`-scheme for opening a new file that should be saved\n        if (scheme === Schemes.file || scheme === Schemes.untitled) {\n            throw new Error(`Text Content Document Provider for scheme '${scheme}' is already registered`);\n        } else if (this.documentContentProviders.has(scheme)) {\n            // TODO: we should be able to handle multiple registrations, but for now we should ensure that it doesn't crash plugin activation.\n            console.warn(`Repeat registration of TextContentDocumentProvider for scheme '${scheme}'. This registration will be ignored.`);\n            return { dispose: () => { } };\n        }\n\n        this.documentContentProviders.set(scheme, provider);\n        this.proxy.$registerTextDocumentContentProvider(scheme);\n\n        let onDidChangeSubscription: theia.Disposable;\n        if (typeof provider.onDidChange === 'function') {\n            onDidChangeSubscription = provider.onDidChange(async uri => {\n                if (uri.scheme === scheme && this.editorsAndDocuments.getDocument(uri.toString())) {\n                    const content = await this.$provideTextDocumentContent(uri.toString());\n                    if (content) {\n                        this.proxy.$onTextDocumentContentChange(uri.toString(), content);\n                    }\n                }\n            });\n        }\n\n        const instance = this;\n        return {\n            dispose(): void {\n                if (instance.documentContentProviders.delete(scheme)) {\n                    instance.proxy.$unregisterTextDocumentContentProvider(scheme);\n                }\n\n                if (onDidChangeSubscription) {\n                    onDidChangeSubscription.dispose();\n                }\n            }\n        };\n    }\n\n    async $provideTextDocumentContent(documentURI: string): Promise<string | undefined | null> {\n        const uri = URI.parse(documentURI);\n        const provider = this.documentContentProviders.get(uri.scheme);\n        if (provider) {\n            return provider.provideTextDocumentContent(uri, CancellationToken.None);\n        }\n\n        return undefined;\n    }\n\n    getWorkspaceFolder(uri: theia.Uri, resolveParent?: boolean): theia.WorkspaceFolder | undefined {\n        if (!this.folders || !this.folders.length) {\n            return undefined;\n        }\n\n        function dirname(resource: URI): URI {\n            if (resource.scheme === 'file') {\n                return URI.file(paths.dirname(resource.fsPath));\n            }\n            return resource.with({\n                path: paths.dirname(resource.path)\n            });\n        }\n\n        if (resolveParent && this.hasFolder(uri)) {\n            uri = dirname(uri);\n        }\n\n        const resourcePath = uri.toString();\n\n        let workspaceFolder: theia.WorkspaceFolder | undefined;\n        for (let i = 0; i < this.folders.length; i++) {\n            const folder = this.folders[i];\n            const folderPath = folder.uri.toString();\n\n            if (resourcePath === folderPath) {\n                return toWorkspaceFolder(folder);\n            }\n\n            if (resourcePath.startsWith(folderPath)\n                && resourcePath[folderPath.length] === '/'\n                && (!workspaceFolder || folderPath.length > workspaceFolder.uri.toString().length)) {\n                workspaceFolder = folder;\n            }\n        }\n        return workspaceFolder;\n    }\n\n    private hasFolder(uri: URI): boolean {\n        if (!this.folders) {\n            return false;\n        }\n        return this.folders.some(folder => folder.uri.toString() === uri.toString());\n    }\n\n    getRelativePath(pathOrUri: string | theia.Uri, includeWorkspace?: boolean): string | undefined {\n        let path: string | undefined;\n        if (typeof pathOrUri === 'string') {\n            path = pathOrUri;\n        } else if (typeof pathOrUri !== 'undefined') {\n            path = pathOrUri.fsPath;\n        }\n\n        if (!path) {\n            return path;\n        }\n\n        const folder = this.getWorkspaceFolder(\n            typeof pathOrUri === 'string' ? URI.file(pathOrUri) : pathOrUri,\n            true\n        ) as theia.WorkspaceFolder;\n\n        if (!folder) {\n            return path;\n        }\n\n        if (typeof includeWorkspace === 'undefined') {\n            includeWorkspace = this.folders!.length > 1;\n        }\n\n        let result = relative(folder.uri.fsPath, path);\n        if (includeWorkspace) {\n            result = `${folder.name}/${result}`;\n        }\n        return normalize(result, true);\n    }\n\n    updateWorkspaceFolders(start: number, deleteCount: number, ...workspaceFoldersToAdd: { uri: theia.Uri, name?: string }[]): boolean {\n        const rootsToAdd = new Set<string>();\n        if (Array.isArray(workspaceFoldersToAdd)) {\n            workspaceFoldersToAdd.forEach(folderToAdd => {\n                const uri = URI.isUri(folderToAdd.uri) && folderToAdd.uri.toString();\n                if (uri && !rootsToAdd.has(uri)) {\n                    rootsToAdd.add(uri);\n                }\n            });\n        }\n\n        if ([start, deleteCount].some(i => typeof i !== 'number' || i < 0)) {\n            return false; // validate numbers\n        }\n\n        if (deleteCount === 0 && rootsToAdd.size === 0) {\n            return false; // nothing to delete or add\n        }\n\n        const currentWorkspaceFolders = this.workspaceFolders || [];\n        if (start + deleteCount > currentWorkspaceFolders.length) {\n            return false; // cannot delete more than we have\n        }\n\n        // Simulate the updateWorkspaceFolders method on our data to do more validation\n        const newWorkspaceFolders = currentWorkspaceFolders.slice(0);\n        newWorkspaceFolders.splice(start, deleteCount, ...[...rootsToAdd].map(uri => ({ uri: URI.parse(uri), name: undefined!, index: undefined! })));\n\n        for (let i = 0; i < newWorkspaceFolders.length; i++) {\n            const folder = newWorkspaceFolders[i];\n            if (newWorkspaceFolders.some((otherFolder, index) => index !== i && folder.uri.toString() === otherFolder.uri.toString())) {\n                return false; // cannot add the same folder multiple times\n            }\n        }\n\n        const { added, removed } = this.deltaFolders(currentWorkspaceFolders, newWorkspaceFolders);\n        if (added.length === 0 && removed.length === 0) {\n            return false; // nothing actually changed\n        }\n\n        // Trigger on main side\n        this.proxy.$updateWorkspaceFolders(start, deleteCount, ...rootsToAdd).then(undefined, error =>\n            this.messageService.showMessage(MainMessageType.Error, `Failed to update workspace folders: ${error}`)\n        );\n\n        return true;\n    }\n\n    private async refreshWorkspaceFile(): Promise<void> {\n        const workspace = await this.proxy.$getWorkspace();\n        this.updateWorkSpace(workspace);\n    }\n\n    private updateWorkSpace(workspace: FileStat | undefined): void {\n        // A workspace directory implies an undefined workspace file\n        if (workspace && !workspace.isDirectory) {\n            this.workspaceFileUri = URI.parse(workspace.resource.toString());\n        }\n    }\n\n    get trusted(): boolean {\n        if (this._trusted === undefined) {\n            this.requestWorkspaceTrust();\n        }\n        return !!this._trusted;\n    }\n\n    requestWorkspaceTrust(options?: theia.WorkspaceTrustRequestOptions): Promise<boolean | undefined> {\n        return this.proxy.$requestWorkspaceTrust(options);\n    }\n\n    $onWorkspaceTrustChanged(trust: boolean | undefined): void {\n        if (!this._trusted && trust) {\n            this._trusted = trust;\n            this.didGrantWorkspaceTrustEmitter.fire();\n        }\n    }\n\n    registerCanonicalUriProvider(scheme: string, provider: theia.CanonicalUriProvider): theia.Disposable {\n        if (this.canonicalUriProviders.has(scheme)) {\n            throw new Error(`Canonical URI provider for scheme: '${scheme}' already exists locally`);\n        }\n\n        this.canonicalUriProviders.set(scheme, provider);\n        this.proxy.$registerCanonicalUriProvider(scheme).catch(e => {\n            console.error(`Canonical URI provider for scheme: '${scheme}' already exists globally`);\n            this.canonicalUriProviders.delete(scheme);\n        });\n        const result = Disposable.create(() => { this.proxy.$unregisterCanonicalUriProvider(scheme); });\n        return result;\n    }\n\n    $disposeCanonicalUriProvider(scheme: string): void {\n        if (!this.canonicalUriProviders.delete(scheme)) {\n            console.warn(`No canonical uri provider registered for '${scheme}'`);\n        }\n    }\n\n    async getCanonicalUri(uri: theia.Uri, options: theia.CanonicalUriRequestOptions, token: theia.CancellationToken): Promise<theia.Uri | undefined> {\n        const canonicalUri = await this.proxy.$getCanonicalUri(uri.toString(), options.targetScheme, token);\n        return isUndefined(canonicalUri) ? undefined : URI.parse(canonicalUri);\n    }\n\n    async $provideCanonicalUri(uri: string, targetScheme: string, token: CancellationToken): Promise<string | undefined> {\n        const parsed = URI.parse(uri);\n        const provider = this.canonicalUriProviders.get(parsed.scheme);\n        if (!provider) {\n            console.warn(`No canonical uri provider registered for '${parsed.scheme}'`);\n            return undefined;\n        }\n        const result = await provider.provideCanonicalUri(parsed, { targetScheme: targetScheme }, token);\n        return isUndefinedOrNull(result) ? undefined : result.toString();\n    }\n\n    /** @stubbed */\n    $registerEditSessionIdentityProvider(scheme: string, provider: theia.EditSessionIdentityProvider): theia.Disposable {\n        return Disposable.NULL;\n    }\n}\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendors-node_modules_theia_monaco-editor-core_esm_vs_base_common_severity_js-node_modules_the-68fc42\",\"vendors-node_modules_path-browserify_index_js\",\"vendors-node_modules_phosphor_coreutils_lib_index_js-node_modules_fuzzy_lib_fuzzy_js-node_mod-c78a99\",\"packages_filesystem_lib_common_files_js\",\"packages_editor_lib_common_language-selector_js\",\"packages_plugin-ext_lib_common_plugin-api-rpc_js\",\"packages_plugin-ext_lib_common_disposable-util_js-packages_plugin-ext_lib_common_index_js-pac-d19cb9\",\"packages_plugin-ext_lib_common_collections_js-packages_plugin-ext_lib_common_connection_js-pa-6a01d2\"], () => (__webpack_require__(\"../../packages/plugin-ext/lib/hosted/browser/worker/worker-main.js\")))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t\"packages_plugin-ext_lib_hosted_browser_worker_worker-main_js\": 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunk_theia_example_browser\"] = self[\"webpackChunk_theia_example_browser\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn Promise.all([\"vendors-node_modules_theia_monaco-editor-core_esm_vs_base_common_severity_js-node_modules_the-68fc42\",\"vendors-node_modules_path-browserify_index_js\",\"vendors-node_modules_phosphor_coreutils_lib_index_js-node_modules_fuzzy_lib_fuzzy_js-node_mod-c78a99\",\"packages_filesystem_lib_common_files_js\",\"packages_editor_lib_common_language-selector_js\",\"packages_plugin-ext_lib_common_plugin-api-rpc_js\",\"packages_plugin-ext_lib_common_disposable-util_js-packages_plugin-ext_lib_common_index_js-pac-d19cb9\",\"packages_plugin-ext_lib_common_collections_js-packages_plugin-ext_lib_common_connection_js-pa-6a01d2\"].map(__webpack_require__.e, __webpack_require__)).then(next);\n};","","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n",""],"names":[],"sourceRoot":""}